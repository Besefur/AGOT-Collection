###################
# Wildfire Events #
namespace = wildfire
###################
# Galle (Gregory Hayes)
# Revisions and society events by knuckey

###################
# ALCHEMIST'S GUILD
###################
# wildfire.1	Establish an Alchemists' Guild
# wildfire.2	Move Alchemists' Guild to capital
# wildfire.3	Alchemists' Guild ready
###################
# WILDFIRE PRODUCTION
###################
# wildfire.4	Begin making wildfire
# wildfire.5	Begin disposing of wildfire
# wildfire.6	Done making wildfire
# wildfire.7	Done disposing of wildfire
# wildfire.8	AI yearly wildfire production management
###################
# USING WILDFIRE - DEFENSIVE SIEGES
###################
# wildfire.9-13	Meet with the Pyromancer
####################
# USING WILDFIRE - OFFENSIVE SIEGES
####################
# wildfire.14-19	Set marching orders for wildfire convoy
####################
# WILDFIRE OUTBREAKS
####################
# wildfire.20-33	An accident ignites the wildfire!
####################
# SOCIETY EVENTS
####################
# wildfire.40		Initial society population
# wildfire.45-47	JOINING
# wildfire.50		Mission tombola
# wildfire.55		Alchemist Hired
# wildfire.60		MISSION: Build a Guild
# wildfire.65-73	MISSION: Learn how to make wildfire
# wildfire.80-83	POWER: make fake valuables
# wildfire.90-102	MISSION: Learn from a wisdom
# wildfire.110-120	MISSION: Study knowledge stores
# wildfire.130-137	POWER: transmutate metals
# wildfire.138-144	POWER: flame creatures used in battle
# wildfire.138-144	POWER: flame creatures used in battle
# wildfire.150-155	POWER: Elixir of healing
# wildfire.160-163	POWER: Elixir of immortality
####################

#Start building guild
character_event = {
	id = wildfire.1
	desc = "EVTDESCwildfire.1"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.1"
		clr_character_flag = flag_making_wildfire
		add_character_modifier = {
			name = building_alchemist_guild
			duration = 1460
		}
		hidden_tooltip = {
			character_event = { id = wildfire.3 days = 730 random = 100 } #completion
		}
	}
}

# character_event = {
	# id = wildfire.2
	# desc = "EVTDESCwildfire.2"
	# picture = GFX_evt_pyromancer

	# only_playable = yes
	# is_triggered_only = yes

	# trigger = {
		# capital_scope = { owner = { character = ROOT } }
		# any_demesne_province = {
			# has_province_modifier = building_alchemist_guild
			# is_capital = no
		# }
	# }

	# option = {
		# trigger = {
			# capital_scope = {
				# NOT = { has_province_modifier = building_alchemist_guild }
				# NOT = { has_province_modifier = alchemist_guild }
			# }
		# }
		# name = "EVTOPTAwildfire.2"
		# any_demesne_province = {
			# limit = {
				# has_province_modifier = building_alchemist_guild
				# is_capital = no
			# }
			# remove_province_modifier = building_alchemist_guild
		# }
		# capital_scope = {
			# add_province_modifier = {
				# name = building_alchemist_guild
				# duration = -1
			# }
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 0
				# NOT = { trait = fire_obsessed }
			# }
		# }
	# }
	# option = {
		# trigger = {
			# capital_scope = {
				# NOT = { has_province_modifier = building_alchemist_guild }
				# NOT = { has_province_modifier = alchemist_guild }
			# }
		# }
		# name = "EVTOPTBwildfire.2"
		# any_demesne_province = {
			# limit = {
				# has_province_modifier = building_alchemist_guild
				# is_capital = no
			# }
			# remove_province_modifier = building_alchemist_guild
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 0
				# trait = fire_obsessed
			# }
		# }
	# }
	# option = {
		# trigger = {
			# capital_scope = {
				# OR = {
					# has_province_modifier = building_alchemist_guild
					# has_province_modifier = alchemist_guild
				# }
			# }
		# }
		# name = "EVTOPTCwildfire.2"
		# any_demesne_province = {
			# limit = {
				# has_province_modifier = building_alchemist_guild
				# is_capital = no
			# }
			# remove_province_modifier = building_alchemist_guild
		# }
		# ai_chance = {
			# factor = 1
			# modifier = {
				# factor = 0
				# trait = fire_obsessed
			# }
		# }
	# }
# }
#Guild complete
character_event = {
	id = wildfire.3
	desc = "EVTDESCwildfire.3"
	picture = GFX_evt_alchemists_guild

	is_triggered_only = yes
	only_playable = yes

	trigger = {
		society_member_of = alchemists_guild
		has_character_modifier = building_alchemist_guild
		capital_scope = {
			owner = { character = ROOT }
			NOT = { has_province_modifier = alchemist_guild }
		}
	}

	immediate = {
		#find society member for loc
		if = {
			limit = { ai = no }
			society = {
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						is_ruler = no
						society_rank >= 3
					}
					save_event_target_as = alchemist_target
					break = yes
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						is_liege_or_above = ROOT
						society_rank >= 3
					}
					save_event_target_as = alchemist_target
					break = yes
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						is_within_diplo_range = ROOT
						society_rank >= 3
					}
					save_event_target_as = alchemist_target
					break = yes
				}
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.3"
		remove_character_modifier = building_alchemist_guild
		capital_scope = {
			add_province_modifier = {
				name = alchemist_guild
				duration = -1
			}
		}
		clr_quest = quest_alchemists_build_guild
		add_society_currency_medium_effect = yes
	}
}
#Start making wildfire
character_event = {
	id = wildfire.4
	desc = "EVTDESCwildfire.4"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	immediate = {
		#find society member for loc
		if = {
			limit = { ai = no }
			society = {
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						is_ruler = no
						society_rank >= 3
					}
					save_event_target_as = alchemist_target
					break = yes
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						is_ruler = no
						society_rank >= 2
					}
					save_event_target_as = alchemist_target
					break = yes
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						society_rank >= 2
					}
					save_event_target_as = alchemist_target
					break = yes
				}
			}
		}
	}

	option = {
		clr_character_flag = flag_making_wildfire
		name = "EVTOPTAwildfire.4"
		wealth = -100
		capital_scope = {
			add_province_modifier = {
				name = making_wildfire
				duration = 730
			}
		}
		hidden_tooltip = {
			if = {
				limit = { magic_returned_trigger = yes }
				character_event = { id = wildfire.6 days = 180 random = 25 } #completion
				break = yes
			}
			character_event = { id = wildfire.6 days = 365 random = 50 } #completion
		}
	}
}
#Start destroying wildfire
character_event = {
	id = wildfire.5
	desc = "EVTDESCwildfire.5"
	picture = GFX_evt_pyromancer
	is_triggered_only = yes

	option = {
		clr_character_flag = flag_making_wildfire
		name = "EVTOPTAwildfire.5"
		wealth = -100
		capital_scope = {
			add_province_modifier = {
				name = destroying_wildfire
				duration = 730
			}
		}
		hidden_tooltip = {
			character_event = { id = wildfire.7 days = 365 random = 50 } #completion
		}
	}
}
#Wildfire production complete
character_event = {
	id = wildfire.6
	desc = "EVTDESCwildfire.6"
	picture = GFX_evt_alchemists_guild

	is_triggered_only = yes
	only_playable = yes

	trigger = {
		society_member_of = alchemists_guild
		capital_scope = {
			owner = { character = ROOT }
			has_province_modifier = alchemist_guild
			has_province_modifier = making_wildfire
		}
	}

	immediate = {
		#find society member for loc
		if = {
			limit = { ai = no }
			society = {
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						is_ruler = no
						society_rank >= 3
					}
					save_event_target_as = alchemist_target
					break = yes
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						is_ruler = no
						society_rank >= 2
					}
					save_event_target_as = alchemist_target
					break = yes
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						liege = { character = ROOT }
						society_rank >= 2
					}
					save_event_target_as = alchemist_target
					break = yes
				}
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.6"
		capital_scope = { remove_province_modifier = making_wildfire }
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_4 } }
			capital_scope = {
				remove_province_modifier = wildfire_4
				add_province_modifier = {
					name = wildfire_5
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_3 } }
			capital_scope = {
				remove_province_modifier = wildfire_3
				add_province_modifier = {
					name = wildfire_4
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_2 } }
			capital_scope = {
				remove_province_modifier = wildfire_2
				add_province_modifier = {
					name = wildfire_3
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_1 } }
			capital_scope = {
				remove_province_modifier = wildfire_1
				add_province_modifier = {
					name = wildfire_2
					duration = -1
				}
			}
		}
		if = {
			limit = {
				NOT = {
					capital_scope = {
						OR = {
							has_province_modifier = wildfire_1
							has_province_modifier = wildfire_2
							has_province_modifier = wildfire_3
							has_province_modifier = wildfire_4
							has_province_modifier = wildfire_5
						}
					}
				}
			}
			capital_scope = {
				add_province_modifier = {
					name = wildfire_1
					duration = -1
				}
			}
		}
	}
}
#Wildfire destruction complete
character_event = {
	id = wildfire.7
	desc = "EVTDESCwildfire.7"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes
	only_playable = yes

	trigger = {
		capital_scope = {
			owner = { character = ROOT }
			has_province_modifier = alchemist_guild
			has_province_modifier = destroying_wildfire
		}
	}
	option = {
		name = "EVTOPTAwildfire.7"
		capital_scope = { remove_province_modifier = destroying_wildfire }
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_1 } }
			capital_scope = { remove_province_modifier = wildfire_1 }
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_2 } }
			capital_scope = {
				remove_province_modifier = wildfire_2
				add_province_modifier = {
					name = wildfire_1
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_3 } }
			capital_scope = {
				remove_province_modifier = wildfire_3
				add_province_modifier = {
					name = wildfire_2
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_4 } }
			capital_scope = {
				remove_province_modifier = wildfire_4
				add_province_modifier = {
					name = wildfire_3
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_5 } }
			capital_scope = {
				remove_province_modifier = wildfire_5
				add_province_modifier = {
					name = wildfire_4
					duration = -1
				}
			}
		}
	}
}
#Use wildifre in defensive siege
character_event = { #member trigger
	id = wildfire.909

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		siege = {
			is_attacker = no
			location = {
				has_province_modifier = alchemist_guild
				OR = {
					has_province_modifier = wildfire_1
					has_province_modifier = wildfire_2
					has_province_modifier = wildfire_3
					has_province_modifier = wildfire_4
					has_province_modifier = wildfire_5
				}
				NOT = { has_province_modifier = wildfire_outbreak }
				owner = {
					society_member_of = alchemists_guild
					has_society_currency_minor_trigger = yes
					OR = {
						society_rank >= 2
						any_courtier = {
							society_rank >= 2
							society_member_of = alchemists_guild
						}
					}
					NOT = { has_character_modifier = used_wildfire_in_siege_defensive }
					OR = {
						character = ROOT
						AND = {
							is_liege_of = ROOT
							ROOT = { is_ruler = no }
						}
					}
				}
			}
		}
	}

	immediate = {
		location = { owner = { character_event = { id = wildfire.990 } } }
	}

	option = {
		name = OK
	}
}
character_event = { #non member trigger
	id = wildfire.9

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		siege = {
			is_attacker = no
			location = {
				has_province_modifier = alchemist_guild
				OR = {
					has_province_modifier = wildfire_1
					has_province_modifier = wildfire_2
					has_province_modifier = wildfire_3
					has_province_modifier = wildfire_4
					has_province_modifier = wildfire_5
				}
				NOT = { has_province_modifier = wildfire_outbreak }
				owner = {
					NOT = { has_character_modifier = used_wildfire_in_siege_defensive }
					OR = {
						character = ROOT
						AND = {
							is_liege_of = ROOT
							ROOT = { is_ruler = no }
						}
					}
					NOT = { society_member_of = alchemists_guild }
					any_courtier = {
						society_member_of = alchemists_guild
						society_rank >= 2
						opinion = { who = ROOT value = 0 }
					}
				}
			}
		}
	}

	weight_multiplier = {
		days = 1

		modifier = {
			factor = 2
			location = { owner = { trait = fire_obsessed } }
		}
		modifier = {
			factor = 2
			location = { owner = { is_genius_trigger = yes } }
		}
		modifier = {
			factor = 2
			location = { owner = { trait = possessed } }
		}
		modifier = {
			factor = 1.25
			location = { owner = { is_smart_trigger = yes } }
		}
		modifier = {
			factor = 1.25
			location = { owner = { trait = lunatic } }
		}
		modifier = {
			factor = 1.25
			location = { has_province_modifier = wildfire_2 }
		}
		modifier = {
			factor = 1.66
			location = { has_province_modifier = wildfire_3 }
		}
		modifier = {
			factor = 2.5
			location = { has_province_modifier = wildfire_4 }
		}
		modifier = {
			factor = 5
			location = { has_province_modifier = wildfire_5 }
		}
	}

	immediate = {
		location = { owner = { character_event = { id = wildfire.990 } } }
	}

	option = {
		name = OK
	}
}
character_event = {
	id = wildfire.990
	picture = GFX_evt_pyromancer
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.9"
		trigger = {
			NOT = { event_target:siege_alchemist = { always = yes } }
		}
	}
	desc = {
		text = "EVTDESCwildfire.9B"
		trigger = {
			event_target:siege_alchemist = { character = ROOT }
		}
	}
	desc = {
		text = "EVTDESCwildfire.9C"
		trigger = {
			event_target:siege_alchemist = { NOT = { character = ROOT } }
		}
	}

	immediate = { #cooldown
		add_character_modifier = {
			name = used_wildfire_in_siege_defensive
			duration = 200
			hidden = yes
		}
		#find alcemist for loc
		if = {
			limit = { ai = no }
			if = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 3
					prisoner = no
					is_incapable = no
					NOT = { is_inaccessible_trigger = yes }
				}
				save_event_target_as = siege_alchemist
			}
			random_courtier = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 3
					OR = {
						opinion = { who = ROOT value = 0 }
						ROOT = { society_member_of = alchemists_guild }
					}
				}
				save_event_target_as = siege_alchemist
			}
			if = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 2
					prisoner = no
					is_incapable = no
					NOT = { is_inaccessible_trigger = yes }
				}
				save_event_target_as = siege_alchemist
			}
			random_courtier = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 2
					OR = {
						opinion = { who = ROOT value = 0 }
						ROOT = { society_member_of = alchemists_guild }
					}
				}
				save_event_target_as = siege_alchemist
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.9"
		character_event = { id = wildfire.10 tooltip = "EVTwildfire.10" }
		if = {
			limit = { society_member_of = alchemists_guild }
			detract_society_currency_minor_effect = yes
		}
		event_target:siege_alchemist = {
			tooltip = { show_portrait = yes }
		}
		FROM = {
			siege = {
				tooltip = { morale = 0.2 }
				enemy = {
					tooltip = {
						troops = -0.2
						morale = -0.5
					}
					leader = { character_event = { id = wildfire.11 tooltip = "EVTwildfire.11" } }
				}
			}
			if = {
				limit = { location = { has_province_modifier = wildfire_1 } }
				location = { remove_province_modifier = wildfire_1 }
			}
			if = {
				limit = { location = { has_province_modifier = wildfire_2 } }
				location = {
					remove_province_modifier = wildfire_2
					add_province_modifier = {
						name = wildfire_1
						duration = -1
					}
				}
			}
			if = {
				limit = { location = { has_province_modifier = wildfire_3 } }
				location = {
					remove_province_modifier = wildfire_3
					add_province_modifier = {
						name = wildfire_2
						duration = -1
					}
				}
			}
			if = {
				limit = { location = { has_province_modifier = wildfire_4 } }
				location = {
					remove_province_modifier = wildfire_4
					add_province_modifier = {
						name = wildfire_3
						duration = -1
					}
				}
			}
			if = {
				limit = { location = { has_province_modifier = wildfire_5 } }
				location = {
					remove_province_modifier = wildfire_5
					add_province_modifier = {
						name = wildfire_4
						duration = -1
					}
				}
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 4
				trait = fire_obsessed
			}
			modifier = {
				factor = 4
				trait = possessed
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = lunatic
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
		}
	}

	option = {
		name = "EVTOPTBwildfire.9"
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 3
				trait = honorable
			}
		}
	}
}

character_event = { #owner flavour
	id = wildfire.10
	desc = "EVTDESCwildfire.10"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	# These are pure flavor for now
	option = {
		name = {
			text = "EVTOPTAwildfire.10"
		}
		name = {
			text = "EVTOPTBwildfire.10"
		}
		name = {
			text = "EVTOPTCwildfire.10"
		}
		if = {
			limit = { NOT = { trait = fire_obsessed } }
			random = {
				chance = 5
				modifier = {
					factor = 2
					society_member_of = alchemists_guild
				}
				add_trait = fire_obsessed
				hidden_tooltip = { character_event = { id = trait_notification.2 }  }
			}
		}
	}
}

character_event = { #inform besieger
	id = wildfire.11
	desc = "EVTDESCwildfire.11"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.11"
		siege = {
			troops = -0.2
			morale = -0.5
			enemy = {
				morale = 0.2
			}
		}
		location = {
			owner = {
				any_current_enemy = {
					if = {
						limit = {
							in_command = yes
							at_location = ROOT
						}
						random = {
							chance = 10
							character_event = { id = wildfire.13 tooltip = "EVTTOOLTIPwildfire.13" }
						}
					}
					any_realm_character = {
						limit = {
							in_command = yes
							at_location = ROOT
						}
						random = {
							chance = 10
							character_event = { id = wildfire.13 tooltip = "EVTTOOLTIPwildfire.13" }
						}
					}
				}
			}
		}
	}
}

# character_event = {
	# id = wildfire.12
	# desc = "EVTDESCwildfire.12"
	# picture = GFX_evt_wildfire
	# border = "GFX_event_normal_frame_war"
	# is_triggered_only = yes

	# option = {
		# name = "EVTOPTAwildfire.12"
	# }
	# option = {
		# name = "EVTOPTB552913"
	# }
# }

character_event = { #commander injured by wildfire
	id = wildfire.13
	desc = "EVTDESCwildfire.13"
	picture = GFX_evt_wildfire_city
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.13"
		random_list = {
			15 = { }
			25 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			25 = {
				trigger = { NOT = { trait = wounded } }
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = {
						id = 38280 #Notify
					}
				}
			}
			20 = {
				trigger = { is_maimed_trigger = no }
				add_maimed_trait_effect = yes
			}
			15 = { death = { killer = FROMFROM death_reason = death_battle } }
		}
	}
}

character_event = {
	id = wildfire.14
	picture = GFX_evt_siege
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes
	only_playable = yes
	is_in_society = yes
	prisoner = no
	only_capable = yes

	desc = {
		text = "EVTDESCwildfire.14"
		trigger = {
			NOT = { event_target:siege_alchemist = { always = yes } }
		}
	}
	desc = {
		text = "EVTDESCwildfire.14B"
		trigger = {
			event_target:siege_alchemist = { character = ROOT }
		}
	}
	desc = {
		text = "EVTDESCwildfire.14C"
		trigger = {
			event_target:siege_alchemist = { NOT = { character = ROOT } }
		}
	}

	immediate = { #cooldown
		add_character_modifier = {
			name = used_wildfire_in_siege
			duration = 200
			hidden = yes
		}
		#find alcemist
		if = {
			limit = {
				society_member_of = alchemists_guild
				society_rank >= 3
				prisoner = no
				is_incapable = no
				NOT = { is_inaccessible_trigger = yes }
			}
			save_event_target_as = siege_alchemist
		}
		random_courtier = {
			limit = {
				society_member_of = alchemists_guild
				society_rank >= 3
				OR = {
					opinion = { who = ROOT value = 0 }
					ROOT = { society_member_of = alchemists_guild }
				}
			}
			save_event_target_as = siege_alchemist
		}
		if = {
			limit = {
				society_member_of = alchemists_guild
				society_rank >= 2
				prisoner = no
				is_incapable = no
				NOT = { is_inaccessible_trigger = yes }
			}
			save_event_target_as = siege_alchemist
		}
		random_courtier = {
			limit = {
				society_member_of = alchemists_guild
				society_rank >= 2
				OR = {
					opinion = { who = ROOT value = 0 }
					ROOT = { society_member_of = alchemists_guild }
				}
			}
			save_event_target_as = siege_alchemist
		}
	}

	option = {
		name = "EVTOPTAwildfire.14"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				trait = patient
			}
			modifier = {
				factor = 4
				trait = paranoid
			}
			modifier = {
				factor = 4
				trait = diligent
			}
			modifier = {
				factor = 4
				trait = craven
			}
		}
		set_character_flag = flag_transporting_wildfire_slow
		if = {
			limit = { society_member_of = alchemists_guild }
			detract_society_currency_minor_effect = yes
		}
		event_target:siege_alchemist = {
			tooltip = { show_portrait = yes }
		}
		hidden_tooltip = {
			random_list = {
				10 = { #accident
					modifier = {
						factor = 0.33
						event_target:siege_alchemist = { has_character_modifier = alchemist_master_pyromancer }
					}
					character_event = { id = wildfire.16 days = 30 }
				}
				90 = { character_event = { id = wildfire.17 days = 30 } } #success
			}
			character_event = { id = wildfire.15 days = 31 } #Failsafe
		}
	}
	option = {
		name = "EVTOPTBwildfire.14"
		ai_chance = {
			factor = 100
		}
		set_character_flag = flag_transporting_wildfire_normal
		if = {
			limit = { society_member_of = alchemists_guild }
			detract_society_currency_minor_effect = yes
		}
		event_target:siege_alchemist = {
			tooltip = { show_portrait = yes }
		}
		hidden_tooltip = {
			random_list = {
				25 = { #accident
					modifier = {
						factor = 0.33
						event_target:siege_alchemist = { has_character_modifier = alchemist_master_pyromancer }
					}
					character_event = { id = wildfire.16 days = 18 }
				}
				75 = { character_event = { id = wildfire.17 days = 18 } } #success
			}
			character_event = { id = wildfire.15 days = 19 } #Failsafe
		}

	}
	option = {
		name = "EVTOPTCwildfire.14"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				trait = wroth
			}
			modifier = {
				factor = 4
				trait = trusting
			}
			modifier = {
				factor = 4
				trait = slothful
			}
			modifier = {
				factor = 4
				trait = brave
			}
			modifier = {
				factor = 4
				trait = lunatic
			}
		}
		set_character_flag = flag_transporting_wildfire_fast
		if = {
			limit = { society_member_of = alchemists_guild }
			detract_society_currency_minor_effect = yes
		}
		event_target:siege_alchemist = {
			tooltip = { show_portrait = yes }
		}
		hidden_tooltip = {
			random_list = {
				50 = { #accident
					modifier = {
						factor = 0.33
						event_target:siege_alchemist = { has_character_modifier = alchemist_master_pyromancer }
					}
					character_event = { id = wildfire.16 days = 7 }
				}
				50 = { character_event = { id = wildfire.17 days = 7 } } #success
			}
			character_event = { id = wildfire.15 days = 8 } #Failsafe
		}
	}
	option = {
		name = "EVTOPTDwildfire.14"
		ai_chance = {
			factor = 0
		}
		hidden_tooltip = { remove_character_modifier = used_wildfire_in_siege }
	}
}

character_event = { #siege is over
	id = wildfire.15
	desc = "EVTDESCwildfire.15"
	picture = GFX_evt_pyromancer
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	trigger = {
		NOT = { siege = { is_attacker = yes } }
		OR = {
			has_character_flag = flag_transporting_wildfire_slow
			has_character_flag = flag_transporting_wildfire_normal
			has_character_flag = flag_transporting_wildfire_fast
		}
	}

	option = {
		name = "EVTOPTAwildfire.15"
		clr_character_flag = flag_transporting_wildfire_slow
		clr_character_flag = flag_transporting_wildfire_normal
		clr_character_flag = flag_transporting_wildfire_fast
	}
}

character_event = { #accident whilst transporting
	id = wildfire.16
	desc = "EVTDESCwildfire.16"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	trigger = {
		siege = { is_attacker = yes }
		OR = {
			has_character_flag = flag_transporting_wildfire_slow
			has_character_flag = flag_transporting_wildfire_normal
			has_character_flag = flag_transporting_wildfire_fast
		}
	}

	option = {
		name = "EVTOPTAwildfire.16"
		troops = -0.1
		morale = -0.3
		clr_character_flag = flag_transporting_wildfire_slow
		clr_character_flag = flag_transporting_wildfire_normal
		clr_character_flag = flag_transporting_wildfire_fast
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_1 } }
			capital_scope = { remove_province_modifier = wildfire_1 }
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_2 } }
			capital_scope = {
				remove_province_modifier = wildfire_2
				add_province_modifier = {
					name = wildfire_1
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_3 } }
			capital_scope = {
				remove_province_modifier = wildfire_3
				add_province_modifier = {
					name = wildfire_2
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_4 } }
			capital_scope = {
				remove_province_modifier = wildfire_4
				add_province_modifier = {
					name = wildfire_3
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_5 } }
			capital_scope = {
				remove_province_modifier = wildfire_5
				add_province_modifier = {
					name = wildfire_4
					duration = -1
				}
			}
		}
	}
}

character_event = { #success
	id = wildfire.17
	desc = "EVTDESCwildfire.17"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	trigger = {
		siege = { is_attacker = yes }
		OR = {
			has_character_flag = flag_transporting_wildfire_slow
			has_character_flag = flag_transporting_wildfire_normal
			has_character_flag = flag_transporting_wildfire_fast
		}
	}

	immediate = {
		clr_character_flag = flag_transporting_wildfire_slow
		clr_character_flag = flag_transporting_wildfire_normal
		clr_character_flag = flag_transporting_wildfire_fast
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_1 } }
			capital_scope = { remove_province_modifier = wildfire_1 }
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_2 } }
			capital_scope = {
				remove_province_modifier = wildfire_2
				add_province_modifier = {
					name = wildfire_1
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_3 } }
			capital_scope = {
				remove_province_modifier = wildfire_3
				add_province_modifier = {
					name = wildfire_2
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_4 } }
			capital_scope = {
				remove_province_modifier = wildfire_4
				add_province_modifier = {
					name = wildfire_3
					duration = -1
				}
			}
		}
		if = {
			limit = { capital_scope = { has_province_modifier = wildfire_5 } }
			capital_scope = {
				remove_province_modifier = wildfire_5
				add_province_modifier = {
					name = wildfire_4
					duration = -1
				}
			}
		}
	}
	option = {
		name = {
			text = "EVTOPTAwildfire.17"
			trigger = {
				OR = {
					trait = zealous
					trait = honorable
					trait = kind
					AND = {
						NOT = { trait = cruel }
						NOT = { trait = ruthless }
						NOT = { trait = lunatic }
						NOT = { trait = fire_obsessed }
					}
				}
				NOT = { trait = cynical }
			}
		}
		name = {
			text = "EVTOPTBwildfire.17"
			trigger = {
				OR = {
					trait = cruel
					trait = ruthless
					trait = lunatic
					trait = fire_obsessed
					AND = {
						NOT = { trait = kind }
						NOT = { trait = honorable }
						NOT = { trait = just }
						NOT = { trait = humble }
					}
				}
			}
		}
		name = {
			text = "EVTOPTCwildfire.17"
		}
		siege = {
			enemy = {
				leader = {
					character_event = { id = wildfire.18 tooltip = "EVTTOOLTIPwildfire.18" }
					tooltip = {
						troops = -0.3
						morale = -0.5
					}
				}
			}
		}
	}
}

character_event = { #inform enemy success
	id = wildfire.18
	desc = "EVTDESCwildfire.18"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.18"
		troops = -0.3
		morale = -0.5
		if = {
			limit = { location = { is_capital = yes } }
			location = {
				owner = {
					any_courtier = {
						limit = { at_location = ROOT }
						random = {
							chance = 10
							character_event = { id = wildfire.19 tooltip = "EVTTOOLTIPwildfire.19" }
						}
					}
				}
			}
		}
	}
}

character_event = { #commander wounded
	id = wildfire.19
	desc = "EVTDESCwildfire.19"
	picture = GFX_evt_wildfire_city
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.19"
		random_list = {
			15 = { }
			25 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			25 = {
				trigger = { NOT = { trait = wounded } }
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = {
						id = 38280 #Notify
					}
				}
			}
			20 = {
				trigger = { is_maimed_trigger = no }
				add_maimed_trait_effect = yes
			}
			15 = { death = { killer = FROMFROM death_reason = death_battle } }
		}
	}
}
#Wildfire outbreak!
province_event = {
	id = wildfire.20
	desc = "EVTDESCwildfire.20"
	picture = GFX_evt_wildfire_city

	trigger = {
		OR = {
			has_province_modifier = wildfire_1
			has_province_modifier = wildfire_2
			has_province_modifier = wildfire_3
			has_province_modifier = wildfire_4
			has_province_modifier = wildfire_5
		}
		NOT = { has_province_modifier = wildfire_outbreak }
	}

	mean_time_to_happen = {
		years = 150

		modifier = {
			factor = 3
			owner = {
				OR = {
					AND = {
						society_member_of = alchemists_guild
						has_character_modifier = alchemist_master_pyromancer
					}
					any_courtier = {
						society_member_of = alchemists_guild
						liege = { character = PREVPREV }
						has_character_modifier = alchemist_master_pyromancer
					}
				}
			}
		}
		modifier = {
			factor = 0.8
			has_province_modifier = wildfire_2
		}
		modifier = {
			factor = 0.64
			has_province_modifier = wildfire_3
		}
		modifier = {
			factor = 0.51
			has_province_modifier = wildfire_4
		}
		modifier = {
			factor = 0.41
			has_province_modifier = wildfire_5
		}
	}

	option = {
		name = "EVTOPTAwildfire.20"
		add_province_modifier = {
			name = wildfire_outbreak
			duration = 365
		}
		if = {
			limit = { has_province_modifier = making_wildfire }
			remove_province_modifier = making_wildfire
		}
		if = {
			limit = { has_province_modifier = wildfire_1 }
			remove_province_modifier = wildfire_1
		}
		if = {
			limit = { has_province_modifier = wildfire_2 }
			remove_province_modifier = wildfire_2
		}
		if = {
			limit = { has_province_modifier = wildfire_3 }
			remove_province_modifier = wildfire_3
		}
		if = {
			limit = { has_province_modifier = wildfire_4 }
			remove_province_modifier = wildfire_4
		}
		if = {
			limit = { has_province_modifier = wildfire_5 }
			remove_province_modifier = wildfire_5
		}
		hidden_tooltip = {
			province_event = { id = wildfire.22 days = 240 random = 110 }  #outbreak ends
		}
	}
}

character_event = { #caught in outbreak
	id = wildfire.21
	desc = "EVTDESCwildfire.21"
	picture = GFX_evt_wildfire_city

	trigger = {
		location = { has_province_modifier = wildfire_outbreak }
		NOT = { trait = dragon }
		NOT = { trait = wikid }
		NOT = { trait = on_reaving }
		NOT = { is_inaccessible_trigger = yes }
		NOT = { trait = has_missing }
	}

	mean_time_to_happen = {
		months = 100
		modifier = {
			factor = 0.33
			in_command = yes
		}
	}

	option = {
		name = "EVTOPTAwildfire.21"
		hidden_tooltip = {
			liege = { character_event = { id = wildfire.23 } }
			location = {
				owner = {
					if = {
						limit = { NOT = { is_liege_of = ROOT } }
						character_event = { id = wildfire.23 }
					}
				}
			}
		}
		random_list = {
			15 = { }
			25 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			25 = {
				trigger = { NOT = { trait = wounded } }
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = {
						id = 38280 #Notify
					}
				}
			}
			20 = {
				trigger = { is_maimed_trigger = no }
				add_maimed_trait_effect = yes
			}
			15 = {
				hidden_tooltip = { add_trait = burned }
				red_god_resurrect_effect = yes #check for rhllor resurrection
				death = { death_reason = death_accident_wildfire }
			}
		}
	}
}

character_event = { #outbreak ends
	id = wildfire.22
	desc = "EVTDESCwildfire.22"
	picture = GFX_evt_wildfire_city

	only_playable = yes
	is_triggered_only = yes

	trigger = {
		capital_scope = {
			has_province_modifier = wildfire_outbreak
			owner = { character = ROOT }
		}
	}

	option = {
		name = "EVTOPTAwildfire.22"
		capital_scope = { remove_province_modifier = wildfire_outbreak }
	}
}

character_event = { #inform liege
	id = wildfire.23
	desc = "EVTDESCwildfire.23"
	picture = GFX_evt_wildfire_city

	only_playable = yes
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.23"
	}
}

###Society Events###
#Initial society population
character_event = {
	id = wildfire.40

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		##Westeros Guild
		if = {
			limit = { 226 = { has_province_flag = kings_landing_established } }
			c_kings_landing = { save_event_target_as = westeros_guild_location }
			226 = {
				add_province_modifier = { name = alchemist_guild duration = -1 }
				if = {
					limit = { year = 8278 } #Aerys stockpile
					add_province_modifier = { name = wildfire_5 duration = -1 }
				}
			}
		}
		if = {
			limit = { 226 = { NOT = { has_province_flag = kings_landing_established } } }
			c_oldtown = { save_event_target_as = westeros_guild_location }
			286 = {
				add_province_modifier = { name = alchemist_guild duration = -1 }
			}
		}
		#Grand Master
		if = {
			limit = {
				NAND = { #Rossart
					c_696969103 = { is_alive = yes }
					year = 8269
				}
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = crownlander
				religion = the_seven
				historical = yes
			}
			new_character = {
				change_learning = 5
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 3
				if = {
					limit = {
						NOT = {
							society = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
						society_rank == 4
					}
					set_society_grandmaster = yes
				}
				else = {
					society_rank_up = 1
					set_society_grandmaster = yes
				}
				event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
			}
		}
		#Wisdoms
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = crownlander
			religion = the_seven
			historical = yes
		}
		new_character = {
			change_learning = 4
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 2
			event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = crownlander
			religion = the_seven
			historical = yes
		}
		new_character = {
			change_learning = 4
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 2
			event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 4
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 2
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 4
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 2
			}
		}
		#Acolytes
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		#Apprentices
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_westeros_east }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}

		##Asshai
		#Grand Master
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = asshai
			religion = shadowbinders
			historical = yes
		}
		new_character = {
			change_learning = 5
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 3
			c_asshai = { holder_scope = { reverse_banish = PREVPREV } }
		}
		#Wisdoms
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = asshai
			religion = shadowbinders
			historical = yes
		}
		new_character = {
			change_learning = 4
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 2
			c_asshai = { holder_scope = { reverse_banish = PREVPREV } }
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = asshai
			religion = shadowbinders
			historical = yes
		}
		new_character = {
			change_learning = 4
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 2
			c_asshai = { holder_scope = { reverse_banish = PREVPREV } }
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 4
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 2
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 4
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 2
			}
		}
		#Acolytes
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		#Apprentices
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_asshai }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}

		##Lys/Free Cities
		#Grand Master
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = lysene
			religion = weeping_lady
			historical = yes
		}
		new_character = {
			change_learning = 5
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 3
			c_lys = { holder_scope = { reverse_banish = PREVPREV } }
		}
		#Wisdoms
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = lysene
			religion = weeping_lady
			historical = yes
		}
		new_character = {
			change_learning = 4
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 2
			c_lys = { holder_scope = { reverse_banish = PREVPREV } }
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = lysene
			religion = weeping_lady
			historical = yes
		}
		new_character = {
			change_learning = 4
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic	}
			}
			join_society = alchemists_guild
			society_rank_up = 2
			c_lys = { holder_scope = { reverse_banish = PREVPREV } }
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 4
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 2
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 4
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 2
			}
		}
		#Acolytes
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 2
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society_rank_up = 1
			}
		}
		#Apprentices
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
			}
		}
		random_playable_ruler = {
			limit = {
				capital_scope = { region = world_free_cities }
				NOT = { culture_group = unoccupied_group }
			}
			create_random_priest = {
				random_traits = yes
				dynasty = none
				female = no
				culture = THIS
				religion = THIS
				historical = yes
			}
			new_character = {
				change_learning = 1
				random_list = {
					32 = { add_trait = mystic }
					32 = { add_trait = scholar }
					32 = { add_trait = fire_obsessed }
					32 = { add_trait = metallurgist }
					4 = { add_trait = lunatic	}
				}
				join_society = alchemists_guild
				society = {
					if = {
						limit = {
							NOT = {
								any_society_member = {
									is_society_grandmaster = yes
								}
							}
						}
						random_society_member = {
							limit = { society_rank == 4 }
							preferred_limit = { culture_group = andal }
							set_society_grandmaster = yes
							event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
							break = yes
						}
						random_society_member = {
							limit = { society_rank == 3 }
							preferred_limit = { culture_group = andal }
							set_society_grandmaster = yes
							event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
							break = yes
						}
						random_society_member = {
							limit = { society_rank == 2 }
							preferred_limit = { culture_group = andal }
							set_society_grandmaster = yes
							event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
							break = yes
						}
						random_society_member = {
							limit = { society_rank >= 1 }
							preferred_limit = { culture_group = andal }
							set_society_grandmaster = yes
							event_target:westeros_guild_location = { holder_scope = { reverse_banish = PREVPREV } }
							break = yes
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
	}
}

###JOINING###

#From on_character_ask_to_join_society
character_event = {
    id = wildfire.45
	hide_window = yes
    is_triggered_only = yes
    trigger = {
    	FROM = { any_society_member = { society_member_of = alchemists_guild } }
    }
    immediate = {
    	FROM = {
			random_society_member = {
				limit = {
					society_rank == 4
					is_within_diplo_range = ROOT
				}
				character_event = { id = wildfire.46 }
				break = yes
			}
			random_society_member = {
				limit = {
					society_rank == 3
					is_within_diplo_range = ROOT
				}
				character_event = { id = wildfire.46 }
				break = yes
			}
			leader = {
				character_event = { id = wildfire.46 }
				break = yes
			}
			random_society_member = {
				character_event = { id = wildfire.46 }
			}
		}
    }
}

#Ping event
character_event = {
    id = wildfire.46
	hide_window = yes
    is_triggered_only = yes
    immediate = {
    	FROM = { letter_event = { id = wildfire.47 } }
    }
}

#Welcome letter
letter_event = {
    id = wildfire.47
    desc = EVTDESCwildfire.47
    border = GFX_event_letter_frame_religion

    is_triggered_only = yes

    option = {
        name = EVTOPTAwildfire.47
		join_society = alchemists_guild
		hidden_tooltip = { #add more randoms if lack of members
			if = {
				limit = {
					NOT = {
						any_society_member = {
							society_member_of = alchemists_guild
							count = 20
						}
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_westeros_east }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 2
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
						society_rank_up = 1
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_westeros_east }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 1
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_asshai }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 2
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
						society_rank_up = 1
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_asshai }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 1
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
					}
				}
			}
			if = {
				limit = {
					NOT = {
						society = {
							any_society_member = {
								is_society_grandmaster = yes
							}
						}
					}
				}
				random_society_member = {
					limit = { society_rank == 4 }
					set_society_grandmaster = yes
					break = yes
				}
				random_society_member = {
					limit = { society_rank == 3 }
					set_society_grandmaster = yes
					break = yes
				}
				random_society_member = {
					limit = { society_rank == 2 }
					set_society_grandmaster = yes
					break = yes
				}
				random_society_member = {
					set_society_grandmaster = yes
					break = yes
				}
				set_society_grandmaster = yes
			}
		}
    }
}

#MISSIONS

#Mission tombola
character_event = {
    id = wildfire.50
    hide_window = yes

    is_triggered_only = yes

	is_in_society = yes

	trigger = {
		society_member_of = alchemists_guild
		has_any_quest = no
		NOT = { has_character_modifier = quest_cooldown_timer }
		NOT = { is_inaccessible_trigger = yes }
	}

    immediate = {
		#If shortage of nearby wisdoms, create one
		if = {
			limit = {
				NOT = {
					society = {
						any_society_member = {
							count = 2
							NOT = { character = ROOT }
							is_within_diplo_range = ROOT
							society_rank >= 3
						}
					}
				}
				liege = { demesne_size = 1 }
			}
			liege = {
				capital_scope = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						move_character = PREVPREV
						change_learning = 4
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
						society_rank_up = 2
					}
				}
			}
		}
		#If no nearby wisdoms like me, AI send gift or inform player
		if = {
			limit = {
				NOT = {
					society = {
						any_society_member = {
							NOT = { character = ROOT }
    						is_within_diplo_range = ROOT
							opinion = { who = ROOT value = -20 }
							society_rank >= 3
						}
					}
				}
			}
			if = { #AI send gift
				limit = {
					ai = yes
					OR = {
						AND = {
							higher_tier_than = DUKE
							wealth = 80
						}
						AND = {
							NOT = { higher_tier_than = DUKE }
							is_ruler = yes
							wealth = 40
						}
						AND = {
							is_ruler = no
							wealth = 20
						}
					}
				}
				random_society_member = {
					limit = {
						NOT = { character = ROOT }
						is_within_diplo_range = ROOT
						opinion = { who = ROOT value = -50 }
						society_rank >= 3
					}
					opinion = { who = ROOT modifier = real_gift multiplier = 3 }
					if = {
						limit = { ROOT = { higher_tier_than = DUKE } }
						wealth = 80
						ROOT = { wealth = -80 }
					}
					if = {
						limit = {
							ROOT = {
								NOT = { higher_tier_than = DUKE }
								is_ruler = yes
							}
						}
						wealth = 40
						ROOT = { wealth = -40 }
					}
					if = {
						limit = { ROOT = { is_ruler = no } }
						wealth = 20
						ROOT = { wealth = -20 }
					}
				}
			}
			if = { #Advise player
				limit = { ai = no }
				character_event = { id = wildfire.170 }
			}
		}
    	#Picks out mission giver
    	random_list = {
    		1 = { #International society member
    			society = {
    				random_society_member = {
    					limit = {
							NOT = { character = ROOT }
    						is_within_diplo_range = ROOT
							opinion = { who = ROOT value = -20 }
							society_rank >= 3
    					}
    					save_event_target_as = alchemist_collaborator
    				}
    			}
    		}
    		100 = { #Realm society member
    			trigger = {
    				society = {
    					any_society_member = {
    						NOT = { character = ROOT }
    						is_within_diplo_range = ROOT
							opinion = { who = ROOT value = -20 }
							same_realm = ROOT
							society_rank >= 3
    					}
    				}
    			}
    			society = {
    				random_society_member = {
    					limit = {
    						NOT = { character = ROOT }
    						is_within_diplo_range = ROOT
							opinion = { who = ROOT value = -20 }
							same_realm = ROOT
							society_rank >= 3
    					}
    					save_event_target_as = alchemist_collaborator
    				}
    			}
    		}
    	}
		if = {
			limit = { event_target:alchemist_collaborator = { always = yes } }
			#Randomizes mission
			random_list = {
				1 = {
				}
				50 = { #Build a guild
					trigger = {
						is_ruler = yes
						NOT = { has_character_modifier = building_alchemist_guild }
						capital_scope = {
							NOT = { has_province_modifier = alchemist_guild }
							owner = { character = ROOT }
						}
						NOT = { has_character_flag = flag_making_wildfire }
						OR = {
							ai = no
							wealth = 200
						}
					}
					event_target:alchemist_collaborator = { character_event = { id = wildfire.60 } }
				}
				20 = { #Learn How to make wildfire
					trigger = {
						society_rank == 1
						NOT = { has_character_flag = can_make_wildfire }
					}
					event_target:alchemist_collaborator = { character_event = { id = wildfire.65 } }
				}
				20 = { #Learn from a wisdom
					trigger = {
						society_rank == 2
						NOT = { has_character_flag = alchemist_learnt_from_wisdom }
					}
					event_target:alchemist_collaborator = { character_event = { id = wildfire.90 } }
				}
				20 = { #Study Knowledge Stores
					trigger = {
						society_rank >= 3
						OR = {
							is_ruler = no
							capital_scope = { has_province_modifier = alchemist_guild }
						}
						is_ill = no
						NOT = { has_character_modifier = alchemist_studied_knowledge_stores }
					}
					event_target:alchemist_collaborator = { character_event = { id = wildfire.110 } }
				}
				20 = { #Build a laboratory
					trigger = {
						has_dlc = "Mystics"
						NOT = { has_character_flag = building_laboratory }
						NOT = { has_character_flag = built_laboratory }
						OR = {
							ai = no
							society_rank == 4
						}
						is_landed = yes
					}
					event_target:alchemist_collaborator = { character_event = { id = MNM.1120 } }
				}
				10 = { #Infiltrate lab
					trigger = {
						has_dlc = "Mystics"
						society_rank > 1
						society = {
							any_society_member = {
								is_within_diplo_range = ROOT
								NOR = {
									character = ROOT
									character = event_target:alchemist_collaborator
									reverse_opinion = { who = event_target:alchemist_collaborator value = 20 }
									reverse_opinion = { who = ROOT value = 20 }
									has_character_flag = infiltration_rival
									has_character_flag = infiltration_mutual_dislike
									has_character_flag = infiltration_rich
								}
							}
						}
					}
					event_target:alchemist_collaborator = { character_event = { id = MNM.1430  } }
				}
				20 = { #Acquire/gather ingredients
					trigger = {
						has_dlc = "Mystics"
						is_landed = yes
						NOT = {
							any_artifact = {
								has_artifact_flag = ingredient
							}
						}
						event_target:alchemist_collaborator = { ai = yes }
					}
					event_target:alchemist_collaborator = { character_event = { id = MNM.1801 } }
				}
			}
		}
		#If AI has been in society for long and cant make wildfire, randomly add it on
		if = {
			limit = {
				ai = yes
				society_rank == 1
				NOT = { has_character_flag = can_make_wildfire }
				has_any_quest = no
				society_currency >= 500
				days_in_society > 2250
			}
			random = {
				chance = 66
				set_character_flag = can_make_wildfire
			}
		}
		hidden_tooltip = { #add more randoms if lack of members
			if = {
				limit = {
					NOT = {
						any_society_member = {
							society_member_of = alchemists_guild
							count = 20
						}
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_westeros_east }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 2
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
						society_rank_up = 1
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_westeros_east }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 1
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_asshai }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 2
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
						society_rank_up = 1
					}
				}
				random_playable_ruler = {
					limit = {
						capital_scope = { region = world_asshai }
						NOT = { culture_group = unoccupied_group }
					}
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						change_learning = 1
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
					}
				}
			}
		}
    }
}
#Alchemist Hired
character_event = {
	id = wildfire.55
	desc = "EVTDESCwildfire.55"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	immediate = {
		#find culture
		random_demesne_province = {
			limit = { has_character_modifier = building_alchemist_guild }
			save_event_target_as = alchemist_origin
		}
		if = {
			limit = { NOT = { event_target:alchemist_origin = { always = yes } } }
			random_province = {
				limit = {
					has_character_modifier = building_alchemist_guild
					owner = { is_within_diplo_range = ROOT }
				}
				save_event_target_as = alchemist_origin
			}
		}
		if = {
			limit = { NOT = { event_target:alchemist_origin = { always = yes } } }
			random_realm_province = {
				save_event_target_as = alchemist_origin
			}
		}
		create_random_priest = {
			random_traits = yes
			dynasty = none
			female = no
			culture = event_target:alchemist_origin
			religion = event_target:alchemist_origin
			historical = yes
		}
		new_character = {
			save_event_target_as = new_alchemist
			join_society = alchemists_guild
			random_list = {
				32 = { add_trait = mystic }
				32 = { add_trait = scholar }
				32 = { add_trait = fire_obsessed }
				32 = { add_trait = metallurgist }
				4 = { add_trait = lunatic }
			}
			#rank depends on employers rank
			if = { #Acolyte
				limit = { ROOT = { society_rank < 3 } }
				change_learning = 2
				society_rank_up = 1
			}
			if = { #Wisdom
				limit = { ROOT = { society_rank >= 3 } }
				change_learning = 4
				society_rank_up = 2
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.55"
		event_target:new_alchemist = {
			tooltip = { move_character = ROOT }
			show_portrait = yes
		}
	}
}

#MISSION: Build a Guild
#Ping event for mission
character_event = {
	id = wildfire.60
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { society_quest_event = { id = wildfire.61 } }
	}
}
society_quest_event = {
	id = wildfire.61
	desc = EVTDESCwildfire.61
	quest_target = event_target:build_guild_target

	is_triggered_only = yes

	immediate = {
		capital_scope = {
			save_event_target_as = build_guild_target
		}
	}

	option = { #accept
		name = ACCEPT
		custom_tooltip = {
			text = TOOLTIPwildfire.61
		}
		hidden_tooltip = {
			event_target:build_guild_target = {
				set_quest_target = {
					id = quest_alchemists_build_guild
					holder = ROOT
				}
			}
		}
	}
	option = { #nah thx
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		hidden_tooltip = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1000
			}
		}
		ai_chance = { factor = 0 }
	}
}
#MISSION: Learn how to make wildfire
#Ping event for mission
character_event = {
	id = wildfire.65
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { society_quest_event = { id = wildfire.66 } }
	}
}
society_quest_event = {
	id = wildfire.66
	desc = EVTDESCwildfire.66
	quest_target = ROOT

	is_triggered_only = yes

	immediate = {
	}

	option = { #accept
		name = ACCEPT
		custom_tooltip = {
			text = TOOLTIPwildfire.66
		}
		hidden_tooltip = {
			if = { #Player gets decision to ask for training
				limit = { ai = no }
				set_quest_target = {
					id = quest_alchemists_make_wildfire
					holder = ROOT
				}
				break = yes
			}
			#AI can learn from player liege
			liege = {
				if = {
					limit = {
						ai = no
						society_member_of = alchemists_guild
						society_rank >= 2
						NOT = { character = ROOT }
						NOT = { is_inaccessible_trigger = yes }
					}
					character_event = { id = wildfire.68 tooltip = "EVTTOOLTIPwildfire.68" }
					break = yes
				}
			}
			#Else immediately determine success randomly (for optimisation)
			random_list = {
				75 = { #Success
					modifier = {
						factor = 0.75
						learning < 2
					}
					modifier = {
						factor = 0.75
						learning < 4
					}
					modifier = {
						factor = 0.75
						learning < 6
					}
					modifier = {
						factor = 1.33
						learning = 8
					}
					modifier = {
						factor = 1.33
						learning = 10
					}
					modifier = {
						factor = 1.33
						learning = 12
					}
					modifier = {
						factor = 1.33
						learning = 14
					}
					modifier = {
						factor = 1.33
						learning = 16
					}
					modifier = {
						factor = 1.33
						learning = 18
					}

					modifier = {
						factor = 0.75
						trait = slothful
					}
					modifier = {
						factor = 1.33
						trait = diligent
					}
					custom_tooltip = { text = TOOLTIPwildfire.67SUCCESS }
					hidden_tooltip = {
						set_character_flag = can_make_wildfire
						add_society_currency_medium_effect = yes
					}
				}
				50 = { #Fail
					custom_tooltip = { text = TOOLTIPwildfire.67SUCCESS }
					hidden_tooltip = {
						random_list = {
							200 = {
							}
							15 = {
								if = {
									limit = {
										NOT = { is_maimed_trigger = yes }
										NOT = { trait = wounded }
									}
									add_trait_silently_wounded_effect = yes
									hidden_tooltip = { character_event = { id = 38280 } }
								}
							}
							10 = {
								trigger = { NOT = { trait = burned } }
								add_trait = burned
								hidden_tooltip = { character_event = { id = trait_notification.23 } }
							}
							10 = {
								if = {
									limit = { NOT = { is_maimed_trigger = yes } }
									add_maimed_trait_effect = yes
									hidden_tooltip = {
										remove_trait = wounded
									}
								}
							}
							5 = {
								hidden_tooltip = { add_trait = burned }
								death = {
									death_reason = death_accident_wildfire
								}
							}
						}
						detract_society_currency_trivial_effect = yes
					}
				}
			}
		}
	}
	option = { #nah thx
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		hidden_tooltip = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1000
			}
		}
		ai_chance = { factor = 0 }
	}
}
#Find alchemist to learn from
character_event = {
	id = wildfire.67
	desc = "EVTDESCwildfire.67"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.67"
		hidden_tooltip = { FROM = { character_event = { id = wildfire.68 } } }
		tooltip = {
			random_list = {
				50 = { #Success
					modifier = {
						factor = 0.75
						learning < 2
					}
					modifier = {
						factor = 0.75
						learning < 4
					}
					modifier = {
						factor = 0.75
						learning < 6
					}
					modifier = {
						factor = 1.33
						learning = 8
					}
					modifier = {
						factor = 1.33
						learning = 10
					}
					modifier = {
						factor = 1.33
						learning = 12
					}
					modifier = {
						factor = 1.33
						learning = 14
					}
					modifier = {
						factor = 1.33
						learning = 16
					}
					modifier = {
						factor = 1.33
						learning = 18
					}

					modifier = {
						factor = 0.75
						trait = slothful
					}
					modifier = {
						factor = 1.33
						trait = diligent
					}

					modifier = {
						factor = 0.75
						FROM = { learning < 2 }
					}
					modifier = {
						factor = 0.75
						FROM = { learning < 4 }
					}
					modifier = {
						factor = 0.75
						FROM = { learning < 6 }
					}
					modifier = {
						factor = 1.33
						FROM = { learning = 8 }
					}
					modifier = {
						factor = 1.33
						FROM = { learning = 10 }
					}
					modifier = {
						factor = 1.33
						FROM = { learning = 12 }
					}
					modifier = {
						factor = 1.33
						FROM = { learning = 14 }
					}
					modifier = {
						factor = 1.33
						FROM = { learning = 16 }
					}
					modifier = {
						factor = 1.33
						FROM = { learning = 18 }
					}

					modifier = {
						factor = 0.75
						FROM = { trait = slothful }
					}
					modifier = {
						factor = 1.33
						FROM = { trait = diligent }
					}
					custom_tooltip = { text = TOOLTIPwildfire.67SUCCESS }
				}
				50 = { #Fail
					custom_tooltip = { text = TOOLTIPwildfire.67FAIL }
				}
			}
		}
	}
}
#Alchemist recieves tutor request/order
character_event = {
	id = wildfire.68
	desc = "EVTDESCwildfire.68"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = { #Yes
		name = "EVTOPTAwildfire.68"
		FROM = {
			random_list = {
				50 = { #Success
					modifier = {
						factor = 0.75
						learning < 2
					}
					modifier = {
						factor = 0.75
						learning < 4
					}
					modifier = {
						factor = 0.75
						learning < 6
					}
					modifier = {
						factor = 1.33
						learning = 8
					}
					modifier = {
						factor = 1.33
						learning = 10
					}
					modifier = {
						factor = 1.33
						learning = 12
					}
					modifier = {
						factor = 1.33
						learning = 14
					}
					modifier = {
						factor = 1.33
						learning = 16
					}
					modifier = {
						factor = 1.33
						learning = 18
					}

					modifier = {
						factor = 0.75
						trait = slothful
					}
					modifier = {
						factor = 1.33
						trait = diligent
					}
					modifier = {
						factor = 0.75
						ROOT = { learning < 2 }
					}
					modifier = {
						factor = 0.75
						ROOT = { learning < 4 }
					}
					modifier = {
						factor = 0.75
						ROOT = { learning < 6 }
					}
					modifier = {
						factor = 1.33
						ROOT = { learning = 8 }
					}
					modifier = {
						factor = 1.33
						ROOT = { learning = 10 }
					}
					modifier = {
						factor = 1.33
						ROOT = { learning = 12 }
					}
					modifier = {
						factor = 1.33
						ROOT = { learning = 14 }
					}
					modifier = {
						factor = 1.33
						ROOT = { learning = 16 }
					}
					modifier = {
						factor = 1.33
						ROOT = { learning = 18 }
					}

					modifier = {
						factor = 0.75
						ROOT = { trait = slothful }
					}
					modifier = {
						factor = 1.33
						ROOT = { trait = diligent }
					}
					custom_tooltip = { text = TOOLTIPwildfire.67SUCCESS }
					hidden_tooltip = {
						character_event = { id = wildfire.69 days = 1 }
						ROOT = { character_event = { id = wildfire.70 days = 1 } }
					}
				}
				50 = { #Fail
					custom_tooltip = { text = TOOLTIPwildfire.67FAIL }
					hidden_tooltip = {
						random = {
							chance = 40
							set_character_flag = explosive_fail
							ROOT = { set_character_flag = explosive_fail }
						}
						character_event = { id = wildfire.71 days = 1 }
						ROOT = { character_event = { id = wildfire.72 days = 1 } }
					}
				}
			}
		}
	}
	option = { #No
		name = "EVTOPTBwildfire.68"
		trigger = {
			ai = no
			NOT = { liege = { character = FROM } }
		}
		FROM = {
			opinion = { who = ROOT modifier = opinion_dislike months = 24 }
			hidden_tooltip = { character_event = { id = wildfire.73 } }
		}
	}
}
character_event = { #Inform pupil success
	id = wildfire.69
	desc = "EVTDESCwildfire.69"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.69"
		set_character_flag = can_make_wildfire
		clr_character_flag = flag_learning_wildfire
		clr_quest = quest_alchemists_make_wildfire
		add_society_currency_medium_effect = yes
		FROM = { opinion = { who = ROOT modifier = opinion_happy months = 24 } }
	}
}
character_event = { #Inform teacher success
	id = wildfire.70
	desc = "EVTDESCwildfire.70"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAwildfire.70"
		add_society_currency_minor_effect = yes
		FROMFROM = { opinion = { who = ROOT modifier = opinion_happy months = 24 } }
	}
}
character_event = { #Inform pupil fail
	id = wildfire.71
	picture = GFX_evt_wildfire

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.71"
		trigger = { has_character_flag = explosive_fail }
	}
	desc = {
		text = "EVTDESCwildfire.71B"
		trigger = { NOT = { has_character_flag = explosive_fail } }
	}

	option = {
		name = "EVTOPTAwildfire.71"
		FROM = { opinion = { who = ROOT modifier = opinion_dislike months = 24 } }
		if = {
			limit = { has_character_flag = explosive_fail }
			random_list = {
				60 = {
				}
				10 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				15 = {
					if = {
						limit = {
							NOT = { is_maimed_trigger = yes }
							NOT = { trait = wounded }
						}
						add_trait_silently_wounded_effect = yes
						hidden_tooltip = { character_event = { id = 38280 } }
					}
				}
				10 = {
					if = {
						limit = { NOT = { is_maimed_trigger = yes } }
						add_maimed_trait_effect = yes
						hidden_tooltip = {
							remove_trait = wounded
						}
					}
				}
				5 = {
					hidden_tooltip = { add_trait = burned }
					death = {
						death_reason = death_accident_wildfire
						killer = FROM
					}
				}
			}
			clr_character_flag = explosive_fail
		}
		detract_society_currency_trivial_effect = yes
		clr_character_flag = flag_learning_wildfire
	}
}
character_event = { #Inform teacher fail
	id = wildfire.72
	picture = GFX_evt_wildfire

	desc = {
		text = "EVTDESCwildfire.72"
		trigger = { has_character_flag = explosive_fail }
	}
	desc = {
		text = "EVTDESCwildfire.72B"
		trigger = { NOT = { has_character_flag = explosive_fail } }
	}

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAwildfire.72"
		FROMFROM = { opinion = { who = ROOT modifier = opinion_dislike months = 24 } }
		if = {
			limit = { has_character_flag = explosive_fail }
			random_list = {
				60 = {
				}
				15 = {
					if = {
						limit = {
							NOT = { is_maimed_trigger = yes }
							NOT = { trait = wounded }
						}
						add_trait_silently_wounded_effect = yes
						hidden_tooltip = { character_event = { id = 38280 } }
					}
				}
				10 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				10 = {
					if = {
						limit = { NOT = { is_maimed_trigger = yes } }
						add_maimed_trait_effect = yes
						hidden_tooltip = {
							remove_trait = wounded
						}
					}
				}
				5 = {
					hidden_tooltip = { add_trait = burned }
					death = {
						death_reason = death_accident_wildfire
						killer = FROMFROM
					}
				}
			}
			clr_character_flag = explosive_fail
		}
		detract_society_currency_trivial_effect = yes
	}
}
character_event = { #Inform teacher declined
	id = wildfire.73
	desc = "EVTDESCwildfire.73"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAwildfire.73"
		clr_character_flag = flag_learning_wildfire
	}
}
#POWER: make fake valuables
#select valuable to fabricate
character_event = {
	id = wildfire.80
	desc = "EVTDESCwildfire.80"
	picture = GFX_evt_experiment

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.80" #fools gold
		custom_tooltip = {
			text = TOOLTIPwildfire.80A
			hidden_tooltip = {
				set_character_flag = fabricate_fools_gold
				character_event = { id = wildfire.81 days = 3 }
			}
		}
	}
	option = {
		name = "EVTOPTBwildfire.80" #fake gemstones
		custom_tooltip = {
			text = TOOLTIPwildfire.80B
			hidden_tooltip = {
				set_character_flag = fabricate_gemstones
				character_event = { id = wildfire.81 days = 3 }
			}
		}
	}
	option = {
		name = "EVTOPTCwildfire.80" #fake pearls
		custom_tooltip = {
			text = TOOLTIPwildfire.80C
			hidden_tooltip = {
				set_character_flag = fabricate_pearls
				character_event = { id = wildfire.81 days = 3 }
			}
		}
	}
	option = {
		name = "EVTOPTDwildfire.80" #flood economy with fake silver
		trigger = { higher_tier_than = BARON }
		custom_tooltip = {
			text = TOOLTIPwildfire.80D
			hidden_tooltip = {
				set_character_flag = fabricate_currency
				character_event = { id = wildfire.81 days = 30 }
			}
		}
	}
}
#finished
character_event = {
	id = wildfire.81
	picture = GFX_evt_market
	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.81A"
		trigger = { has_character_flag = fabricate_fools_gold }
	}
	desc = {
		text = "EVTDESCwildfire.81B"
		trigger = { has_character_flag = fabricate_gemstones }
	}
	desc = {
		text = "EVTDESCwildfire.81C"
		trigger = { has_character_flag = fabricate_pearls }
	}
	desc = {
		text = "EVTDESCwildfire.81D"
		trigger = { has_character_flag = fabricate_currency }
	}

	option = {
		name = "EVTOPTAwildfire.81" #add artefact
		trigger = { NOT = { has_character_flag = fabricate_currency } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				any_artifact = { has_artifact_flag = fake }
			}
		}
		if = {
			limit = { has_character_flag = fabricate_fools_gold }
			add_artifact = golden_bracelets_fake
		}
		if = {
			limit = { has_character_flag = fabricate_gemstones }
			add_artifact = gemstones_fake
		}
		if = {
			limit = { has_character_flag = fabricate_pearls }
			add_artifact = collar_of_pearls_fake
		}
		hidden_tooltip = {
			random_artifact = {
				limit = { has_artifact_flag = new_fake }
				clr_artifact_flag = new_fake
				save_event_target_as = fake_artifact
			}
			random = { #chance of discovery
				chance = 15
				modifier = {
					factor = 0.33
					has_character_modifier = alchemist_master_alchemist
				}
				modifier = {
					factor = 0.66
					trait = metallurgist
				}
				modifier = {
					factor = 1.5
					intrigue < 2
				}
				modifier = {
					factor = 1.5
					intrigue < 5
				}
				modifier = {
					factor = 1.5
					intrigue < 8
				}
				modifier = {
					factor = 0.66
					intrigue = 11
				}
				modifier = {
					factor = 0.66
					intrigue = 14
				}
				modifier = {
					factor = 0.66
					intrigue = 17
				}
				character_event = { id = wildfire.82 days = 60 random = 30 }
			}
		}
	}
	option = {
		name = "EVTOPTBwildfire.81" #sell
		trigger = { NOT = { has_character_flag = fabricate_currency } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		wealth = 50
		hidden_tooltip = {
			random = { #chance of discovery
				chance = 15
				modifier = {
					factor = 0.33
					has_character_modifier = alchemist_master_alchemist
				}
				modifier = {
					factor = 0.66
					trait = metallurgist
				}
				modifier = {
					factor = 1.5
					intrigue < 2
				}
				modifier = {
					factor = 1.5
					intrigue < 5
				}
				modifier = {
					factor = 1.5
					intrigue < 8
				}
				modifier = {
					factor = 0.66
					intrigue = 11
				}
				modifier = {
					factor = 0.66
					intrigue = 14
				}
				modifier = {
					factor = 0.66
					intrigue = 17
				}
				character_event = { id = wildfire.82 days = 60 random = 30 }
			}
		}
	}
	option = {
		name = "EVTOPTCwildfire.81" #flood the local economy
		trigger = { has_character_flag = fabricate_currency }
		scaled_wealth = { value = 1.5 min = 100 max = 500 }
		capital_scope = {
			add_province_modifier = {
				name = fake_currency_problem
				duration = 1095
			}
		}
		hidden_tooltip = {
			random = { #chance of discovery
				chance = 15
				modifier = {
					factor = 0.33
					has_character_modifier = alchemist_master_alchemist
				}
				modifier = {
					factor = 0.66
					trait = metallurgist
				}
				modifier = {
					factor = 1.5
					intrigue < 2
				}
				modifier = {
					factor = 1.5
					intrigue < 5
				}
				modifier = {
					factor = 1.5
					intrigue < 8
				}
				modifier = {
					factor = 0.66
					intrigue = 11
				}
				modifier = {
					factor = 0.66
					intrigue = 14
				}
				modifier = {
					factor = 0.66
					intrigue = 17
				}
				character_event = { id = wildfire.84 days = 60 random = 30 }
			}
		}
	}
	after = {
		clr_character_flag = fabricate_fools_gold
		clr_character_flag = fabricate_gemstones
		clr_character_flag = fabricate_pearls
		clr_character_flag = fabricate_currency
	}
}
character_event = { #forgery discovered
	id = wildfire.82
	picture = GFX_evt_uncomfortable
	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.82"
		trigger = { NOT = { event_target:fake_artifact = { owner = { NOT = { character = ROOT } } } } }
	}
	desc = {
		text = "EVTDESCwildfire.82B" #gave the artefact as a gift
		trigger = { event_target:fake_artifact = { owner = { NOT = { character = ROOT } } } }
	}

	option = {
		name = "EVTOPTAwildfire.82"
		prestige = -100
		event_target:fake_artifact = {
			if = {
				limit = { owner = { NOT = { character = ROOT } } }
				owner = {
					opinion = {
						who = ROOT
						modifier = opinion_angry
						months = 60
					}
					hidden_tooltip = { character_event = { id = wildfire.83 } }
				}
			}
			if = {
				limit = { owner = { character = ROOT } }
				destroy_artifact = ROOT
			}
		}
		if = {
			limit = {
				NOR = {
					trait = deceitful
					trait = honest
					trait = honorable
					personality_traits = 6
				}
			}
			random = {
				chance = 33
				add_trait = deceitful
				hidden_tooltip = {
					character_event = {
						id = 38255 #Notify Deceitful
					}
				}
			}
		}
	}
}
character_event = { #inform gift receiver
	id = wildfire.83
	desc = "EVTDESCwildfire.83"
	picture = GFX_evt_uncomfortable

	is_triggered_only = yes


	option = {
		name = "EVTOPTAwildfire.83"
		event_target:fake_artifact = {
			destroy_artifact = ROOT
		}
	}
}
character_event = { #counterfiting discovered
	id = wildfire.84
	desc = "EVTDESCwildfire.84"
	picture = GFX_evt_uncomfortable
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.84"
		prestige = -150
		capital_scope = {
			add_province_modifier = {
				name = peasant_unrest
				duration = 1825
			}
		}
		if = {
			limit = {
				NOR = {
					trait = deceitful
					trait = honest
					trait = honorable
					personality_traits = 6
				}
			}
			random = {
				chance = 33
				add_trait = deceitful
				hidden_tooltip = {
					character_event = {
						id = 38255 #Notify Deceitful
					}
				}
			}
		}
	}
}
#MISSION: Learn from a wisdom
#Ping event for mission
character_event = {
	id = wildfire.90
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { society_quest_event = { id = wildfire.91 } }
	}
}
society_quest_event = {
	id = wildfire.91
	desc = EVTDESCwildfire.91
	quest_target = ROOT

	is_triggered_only = yes

	option = { #accept
		name = ACCEPT
		custom_tooltip = {
			text = TOOLTIPwildfire.91
		}
		hidden_tooltip = {
			ROOT = {
				set_quest_target = {
					id = quest_alchemists_learn_from_wisdom
					holder = ROOT
				}
			}
			character_event = { id = wildfire.92 days = 20 random = 10 }
		}
	}
	option = { #nah thx
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		hidden_tooltip = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1000
			}
		}
		ai_chance = { factor = 0 }
	}
}
#Find wisdom mentor
character_event = {
	id = wildfire.92
	hide_window = yes

	is_triggered_only = yes
	only_capable = yes

	trigger = {
		society_member_of = alchemists_guild
		has_quest = quest_alchemists_learn_from_wisdom
	}

	immediate = {
		clear_event_target = wisdom_mentor
		#If shortage of foreign wisdoms, create one
		if = {
			limit = {
				NOT = {
					society = {
						any_society_member = {
							count = 2
							NOT = { character = ROOT }
							is_within_diplo_range = ROOT
							NOR = {
								same_liege = ROOT
								liege = { character = ROOT }
								liege = { same_liege = ROOT }
								is_liege_or_above = ROOT
								is_vassal_or_below = ROOT
							}
							society_rank >= 3
							prisoner = no
							is_incapable = no
							NOT = { is_inaccessible_trigger = yes }
						}
					}
				}
			}
			random_playable_ruler = {
				limit = {
					is_within_diplo_range = ROOT
					NOT = { same_realm = ROOT }
					demesne_size = 1
				}
				capital_scope = {
					create_random_priest = {
						random_traits = yes
						dynasty = none
						female = no
						culture = THIS
						religion = THIS
						historical = yes
					}
					new_character = {
						move_character = PREVPREV
						change_learning = 4
						random_list = {
							32 = { add_trait = mystic }
							32 = { add_trait = scholar }
							32 = { add_trait = fire_obsessed }
							32 = { add_trait = metallurgist }
							4 = { add_trait = lunatic	}
						}
						join_society = alchemists_guild
						society_rank_up = 2
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { is_inaccessible_trigger = yes }
				prisoner = no
				war = no
			}
			society = {
				random_society_member = { #find wisdom to learn from
					limit = {
						NOT = { character = ROOT }
						is_within_diplo_range = ROOT
						NOR = {
							same_liege = ROOT
							liege = { character = ROOT }
							liege = { same_liege = ROOT }
							is_liege_or_above = ROOT
							is_vassal_or_below = ROOT
						}
						opinion = { who = ROOT value = -25 }
						reverse_opinion = { who = ROOT value = -25 }
						society_rank >= 3
						prisoner = no
						is_incapable = no
						has_any_quest = no
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_character_modifier = quest_cooldown_timer }
						NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_bad_student } }
					}
					save_event_target_as = wisdom_mentor
					society = { #find mission giver
						random_society_member = {
							limit = {
								NOT = { character = ROOT }
								NOT = { character = event_target:wisdom_mentor }
								is_within_diplo_range = event_target:wisdom_mentor
								society_rank >= 3
							}
							society_quest_event = { id = wildfire.939 }
							break = yes
						}
					}

				}
			}
		}
		character_event = { id = wildfire.92 days = 300 } #repeat search
	}
}
#Ping to mission giver
character_event = {
	id = wildfire.939
	hide_window = yes

	is_triggered_only = yes
	only_capable = yes

	immediate = {
		event_target:wisdom_mentor = {
			society_quest_event = { id = wildfire.93 }
		}
	}
}
#Wisdom receives request
society_quest_event = {
	id = wildfire.93
	desc = EVTDESCwildfire.93
	quest_target = FROMFROM

	is_triggered_only = yes

	option = { #accept
		name = ACCEPT
		custom_tooltip = {
			text = TOOLTIPwildfire.93
		}
		hidden_tooltip = {
			FROMFROM = {
				set_quest_target = {
					id = quest_alchemists_teach_acolyte
					holder = ROOT
				}
			}
			FROMFROM = { character_event = { id = wildfire.94 } }
			character_event = { id = wildfire.97 days = 400 } #failsafe
		}
	}
	option = { #nah thx
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		hidden_tooltip = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 500
			}
			FROMFROM = { character_event = { id = wildfire.92 days = 50 } } #repeat search
		}
		ai_chance = { factor = 0 }
	}
}
#Wisdom mentor found, go on journey?
character_event = {
	id = wildfire.94
	desc = "EVTDESCwildfire.94"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.94"
		custom_tooltip = {
			text = TOOLTIPwildfire.94
		}
		add_trait = wikid
		if = {
			limit = { tier = EMPEROR }
			wealth = -100
		}
		else_if = {
			limit = { tier = KING }
			wealth = -75
		}
		else_if = {
			limit = { tier = DUKE }
			wealth = -50
		}
		else_if = {
			limit = { tier = COUNT }
			wealth = -25
		}
		else = {
			wealth = -10
		}
		hidden_tooltip = {
			character_event = { id = wildfire.96 days = 200 random = 100 } #arrive
		}
	}
	option = {
		name = "EVTOPTBwildfire.94" #not now
		ai_chance = { factor = 0 }
		hidden_tooltip = {
			FROM = { character_event = { id = wildfire.95 } }
			character_event = { id = wildfire.92 days = 300 } #repeat search
		}
	}
}
#Inform mentor acolyte cannot go curently
character_event = {
	id = wildfire.95
	desc = "EVTDESCwildfire.95"

	is_triggered_only = yes

	option = {
		name = OK
		clr_quest = { id = quest_alchemists_teach_acolyte failure = yes }
	}
}
#Arrive
character_event = {
	id = wildfire.96

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		clear_event_target = wisdom_mentor
		FROMFROM = { save_event_target_as = wisdom_mentor }
		if = { #check can continue with this
			limit = {
				OR = {
					is_incapable = yes
					prisoner = yes
					NOT = { society_member_of = alchemists_guild }
					NOT = { has_quest = quest_alchemists_learn_from_wisdom }
				}
			}
			remove_trait = wikid
			clr_quest = { id = quest_alchemists_learn_from_wisdom failure = yes }
			if = {
				limit = { tier = EMPEROR }
				wealth = 100
			}
			else_if = {
				limit = { tier = KING }
				wealth = 75
			}
			else_if = {
				limit = { tier = DUKE }
				wealth = 50
			}
			else_if = {
				limit = { tier = COUNT }
				wealth = 25
			}
			else = {
				wealth = 10
			}
			break = yes
		}
		if = { #check if wisdom is still available
			limit = {
				event_target:wisdom_mentor = {
					OR = {
						is_alive = no
						is_incapable = yes
						prisoner = yes
						NOT = { society_member_of = alchemists_guild }
						NOT = { has_quest = quest_alchemists_teach_acolyte }
					}
				}
			}
			character_event = { id = wildfire.98 }
			break = yes
		}
		character_event = { id = wildfire.99 days = 14 } #start learning

		#Use flavour events from foreign tour
		if = {
			limit = { ai = no }
			set_character_flag = on_a_foreign_tour
			set_character_flag = on_a_foreign_tour_alchemist
			event_target:wisdom_mentor = {
				if = {
					limit = { is_ruler = yes }
					capital_scope = { save_event_target_as = tour_destination }
				}
				if = {
					limit = { is_ruler = no }
					liege = { capital_scope = { save_event_target_as = tour_destination } }
				}
			}
			character_event = { id = wikid.303 days = 2 } #flavour
			event_target:tour_destination = {
				if = {
					limit = {
						OR = {
							province_id = 226
							province_id = 221
							province_id = 304
							province_id = 352
							province_id = 267
							province_id = 182
							province_id = 162
							province_id = 101
							province_id = 136
							province_id = 47
						}
					}
					ROOT = { set_character_flag = touring_westeros }
					break = yes
				}
				if = {
					limit = {
						OR = {
							province_id = 419
							province_id = 368
							province_id = 367
							province_id = 378
							province_id = 406
							province_id = 470
							province_id = 471
							province_id = 433
							province_id = 476
						}
					}
					ROOT = { set_character_flag = touring_free_cities }
					break = yes
				}
				if = {
					limit = {
						OR = {
							province_id = 625
							province_id = 613
							province_id = 610
							province_id = 606
							province_id = 602
							province_id = 599
							province_id = 645
							province_id = 639
							province_id = 709
						}
					}
					ROOT = { set_character_flag = touring_ghiscar }
					break = yes
				}
				if = {
					limit = {
						OR = {
							province_id = 633
							province_id = 719
							province_id = 765
							province_id = 791
							province_id = 795
							province_id = 820
							region = world_jogos_nhai
							region = world_bone_mountains
						}
					}
					ROOT = { set_character_flag = touring_jade_sea }
					break = yes
				}
				if = {
					limit = {
						OR = {
							province_id = 496
							province_id = 505
							province_id = 515
							province_id = 526
							province_id = 531
							province_id = 626
							province_id = 750
							province_id = 742
							province_id = 753
						}
					}
					ROOT = { set_character_flag = touring_summer_sea }
					break = yes
				}
				#ROOT = { set_character_flag = manual_tour }
				ROOT = { set_character_flag = no_special_event }
			}
		}
	}
}
#Inform mentor acolyte no longer available
character_event = {
	id = wildfire.97
	desc = "EVTDESCwildfire.97"

	is_triggered_only = yes
	show_from_from = yes

	trigger = {
		has_quest = quest_alchemists_teach_acolyte
		FROMFROM = {
			is_quest_target_of = ROOT
			OR = {
				is_incapable = yes
				prisoner = yes
				NOT = { society_member_of = alchemists_guild }
				NOT = { has_quest = quest_alchemists_learn_from_wisdom }
				is_alive = no
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.97"
		hidden_tooltip = { clr_quest = { id = quest_alchemists_teach_acolyte failure = yes } }
	}
}
#Inform acolyte mentor no longer available
character_event = {
	id = wildfire.98
	desc = "EVTDESCwildfire.98"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.98"
		remove_trait = wikid
		if = {
			limit = { tier = EMPEROR }
			wealth = 100
		}
		else_if = {
			limit = { tier = KING }
			wealth = 75
		}
		else_if = {
			limit = { tier = DUKE }
			wealth = 50
		}
		else_if = {
			limit = { tier = COUNT }
			wealth = 25
		}
		else = {
			wealth = 10
		}
		hidden_tooltip = {
			event_target:wisdom_mentor = { clr_quest = { id = quest_alchemists_teach_acolyte failure = yes } }
			character_event = { id = wildfire.92 days = 20 random = 10 } #search for new wisdom
		}
	}
}
#Start learning
character_event = {
	id = wildfire.99
	desc = "EVTDESCwildfire.99"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.99"
		trigger = {
			NOR = {
				is_incapable = yes
				prisoner = yes
				NOT = { society_member_of = alchemists_guild }
				NOT = { has_quest = quest_alchemists_learn_from_wisdom }
				event_target:wisdom_mentor = {
					OR = {
						is_incapable = yes
						prisoner = yes
						NOT = { society_member_of = alchemists_guild }
						NOT = { has_quest = quest_alchemists_teach_acolyte }
						is_alive = no
					}
				}
			}
		}
		event_target:wisdom_mentor = {
			show_portrait = yes
			tooltip = {
				random_list = {
					15 = {
						modifier = {
							factor = 1.3
							ROOT = { trait = diligent }
						}
						modifier = {
							factor = 1.3
							ROOT = { trait = ambitious }
						}
						modifier = {
							factor = 1.3
							trait = diligent
						}
						modifier = {
							factor = 1.3
							trait = ambitious
						}
						modifier = {
							factor = 1.3
							learning = 10
						}
						modifier = {
							factor = 1.3
							learning = 13
						}
						modifier = {
							factor = 1.3
							learning = 16
						}
						modifier = {
							factor = 1.3
							learning = 19
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 10 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 13 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 16 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 19 }
						}
						custom_tooltip = {
							text = TOOLTIPwildfire.99GREATOUTCOME
						}
					}
					35 = {
						modifier = {
							factor = 1.3
							ROOT = { trait = diligent }
						}
						modifier = {
							factor = 1.3
							ROOT = { trait = ambitious }
						}
						modifier = {
							factor = 1.3
							trait = diligent
						}
						modifier = {
							factor = 1.3
							trait = ambitious
						}
						modifier = {
							factor = 1.3
							learning = 10
						}
						modifier = {
							factor = 1.3
							learning = 13
						}
						modifier = {
							factor = 1.3
							learning = 16
						}
						modifier = {
							factor = 1.3
							learning = 19
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 10 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 13 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 16 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning = 19 }
						}
						custom_tooltip = {
							text = TOOLTIPwildfire.99GOODOUTCOME
						}
					}
					35 = {
						modifier = {
							factor = 1.3
							ROOT = { trait = slothful }
						}
						modifier = {
							factor = 1.3
							ROOT = { trait = content }
						}
						modifier = {
							factor = 1.3
							trait = slothful
						}
						modifier = {
							factor = 1.3
							trait = content
						}
						modifier = {
							factor = 1.3
							learning < 7
						}
						modifier = {
							factor = 1.3
							learning < 4
						}
						modifier = {
							factor = 1.3
							learning < 1
						}
						modifier = {
							factor = 1.3
							ROOT = { learning < 7 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning < 4 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning < 1 }
						}
						custom_tooltip = {
							text = TOOLTIPwildfire.99OKOUTCOME
						}
					}
					10 = {
						modifier = {
							factor = 1.3
							ROOT = { trait = slothful }
						}
						modifier = {
							factor = 1.3
							ROOT = { trait = content }
						}
						modifier = {
							factor = 1.3
							trait = slothful
						}
						modifier = {
							factor = 1.3
							trait = content
						}
						modifier = {
							factor = 1.3
							learning < 7
						}
						modifier = {
							factor = 1.3
							learning < 4
						}
						modifier = {
							factor = 1.3
							learning < 1
						}
						modifier = {
							factor = 1.3
							ROOT = { learning < 7 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning < 4 }
						}
						modifier = {
							factor = 1.3
							ROOT = { learning < 1 }
						}
						custom_tooltip = {
							text = TOOLTIPwildfire.99BADOUTCOME
						}
					}
				}
			}
			hidden_tooltip = {
				character_event = { id = wildfire.100 }
			}
		}
	}
	option = {
		name = "EVTOPTBwildfire.99" #no longer available
		trigger = {
			OR = {
				is_incapable = yes
				prisoner = yes
				NOT = { society_member_of = alchemists_guild }
				NOT = { has_quest = quest_alchemists_learn_from_wisdom }
				event_target:wisdom_mentor = {
					OR = {
						is_incapable = yes
						prisoner = yes
						NOT = { society_member_of = alchemists_guild }
						NOT = { has_quest = quest_alchemists_teach_acolyte }
						is_alive = no
					}
				}
			}
		}
		remove_trait = wikid
		if = {
			limit = { tier = EMPEROR }
			wealth = 100
		}
		else_if = {
			limit = { tier = KING }
			wealth = 75
		}
		else_if = {
			limit = { tier = DUKE }
			wealth = 50
		}
		else_if = {
			limit = { tier = COUNT }
			wealth = 25
		}
		else = {
			wealth = 10
		}
		clr_character_flag = on_a_foreign_tour_alchemist
		hidden_tooltip = {
			character_event = { id = wikid.340 } #clear flags
			event_target:wisdom_mentor = { clr_quest = { id = quest_alchemists_teach_acolyte failure = yes } }
			character_event = { id = wildfire.92 days = 20 random = 10 } #search for new wisdom
		}
	}
}
character_event = { #mentor event
	id = wildfire.100
	desc = "EVTDESCwildfire.100"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.100"
		FROM = {
			random_list = {
				15 = {
					modifier = {
						factor = 1.3
						ROOT = { trait = diligent }
					}
					modifier = {
						factor = 1.3
						ROOT = { trait = ambitious }
					}
					modifier = {
						factor = 1.3
						trait = diligent
					}
					modifier = {
						factor = 1.3
						trait = ambitious
					}
					modifier = {
						factor = 1.3
						learning = 10
					}
					modifier = {
						factor = 1.3
						learning = 13
					}
					modifier = {
						factor = 1.3
						learning = 16
					}
					modifier = {
						factor = 1.3
						learning = 19
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 10 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 13 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 16 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 19 }
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.99GREATOUTCOME
						set_character_flag = wisdom_outcome_great
						character_event = { id = wildfire.101 }
					}
				}
				35 = {
					modifier = {
						factor = 1.3
						ROOT = { trait = diligent }
					}
					modifier = {
						factor = 1.3
						ROOT = { trait = ambitious }
					}
					modifier = {
						factor = 1.3
						trait = diligent
					}
					modifier = {
						factor = 1.3
						trait = ambitious
					}
					modifier = {
						factor = 1.3
						learning = 10
					}
					modifier = {
						factor = 1.3
						learning = 13
					}
					modifier = {
						factor = 1.3
						learning = 16
					}
					modifier = {
						factor = 1.3
						learning = 19
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 10 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 13 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 16 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning = 19 }
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.99GOODOUTCOME
						set_character_flag = wisdom_outcome_good
						character_event = { id = wildfire.101 }
					}
				}
				35 = {
					modifier = {
						factor = 1.3
						ROOT = { trait = slothful }
					}
					modifier = {
						factor = 1.3
						ROOT = { trait = content }
					}
					modifier = {
						factor = 1.3
						trait = slothful
					}
					modifier = {
						factor = 1.3
						trait = content
					}
					modifier = {
						factor = 1.3
						learning < 7
					}
					modifier = {
						factor = 1.3
						learning < 4
					}
					modifier = {
						factor = 1.3
						learning < 1
					}
					modifier = {
						factor = 1.3
						ROOT = { learning < 7 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning < 4 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning < 1 }
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.99OKOUTCOME
						set_character_flag = wisdom_outcome_ok
						character_event = { id = wildfire.101 }
					}
				}
				10 = {
					modifier = {
						factor = 1.3
						ROOT = { trait = slothful }
					}
					modifier = {
						factor = 1.3
						ROOT = { trait = content }
					}
					modifier = {
						factor = 1.3
						trait = slothful
					}
					modifier = {
						factor = 1.3
						trait = content
					}
					modifier = {
						factor = 1.3
						learning < 7
					}
					modifier = {
						factor = 1.3
						learning < 4
					}
					modifier = {
						factor = 1.3
						learning < 1
					}
					modifier = {
						factor = 1.3
						ROOT = { learning < 7 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning < 4 }
					}
					modifier = {
						factor = 1.3
						ROOT = { learning < 1 }
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.99BADOUTCOME
						set_character_flag = wisdom_outcome_bad
						character_event = { id = wildfire.101 }
					}
				}
			}
		}
	}
}
character_event = { #acolyte outcome event event
	id = wildfire.101
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.101A"
		trigger = { has_character_flag = wisdom_outcome_great }
	}
	desc = {
		text = "EVTDESCwildfire.101B"
		trigger = { has_character_flag = wisdom_outcome_good }
	}
	desc = {
		text = "EVTDESCwildfire.101C"
		trigger = { has_character_flag = wisdom_outcome_ok }
	}
	desc = {
		text = "EVTDESCwildfire.101D"
		trigger = { has_character_flag = wisdom_outcome_bad }
	}

	option = {
		name = {
			text = "EVTOPTAwildfire.101A"
			trigger = { has_character_flag = wisdom_outcome_great }
		}
		name = {
			text = "EVTOPTAwildfire.101B"
			trigger = { has_character_flag = wisdom_outcome_good }
		}
		name = {
			text = "EVTOPTAwildfire.101C"
			trigger = { has_character_flag = wisdom_outcome_ok }
		}
		name = {
			text = "EVTOPTAwildfire.101D"
			trigger = { has_character_flag = wisdom_outcome_bad }
		}

		if = {
			limit = { has_character_flag = wisdom_outcome_great }
			set_character_flag = alchemist_learnt_from_wisdom
			if = {
				limit = {
					NAND = {
						has_education_learning_trigger = yes
						NOT = { trait = mastermind_theologian }
					}
				}
				change_learning = 3
			}
			if = {
				limit = {
					has_education_learning_trigger = yes
					NOT = { trait = mastermind_theologian }
				}
				upgrade_education_effect = yes
			}
			add_society_currency_medium_effect = yes
			FROM = {
				if = {
					limit = {
						NOT = { is_friend = ROOT }
						opinion = { who = ROOT value = 30 }
						reverse_opinion = { who = ROOT value = 30 }
					}
					tooltip = { add_friend = ROOT }
				}
				if = {
					limit = {
						NAND = {
							NOT = { is_friend = ROOT }
							opinion = { who = ROOT value = 30 }
							reverse_opinion = { who = ROOT value = 30 }
						}
					}
					opinion = { who = ROOT modifier = opinion_good_student months = 120 multiplier = 2 }
				}
			}
		}
		if = {
			limit = { has_character_flag = wisdom_outcome_good }
			set_character_flag = alchemist_learnt_from_wisdom
			if = {
				limit = {
					NAND = {
						has_education_learning_trigger = yes
						NOT = { trait = mastermind_theologian }
					}
				}
				change_learning = 2
			}
			if = {
				limit = {
					has_education_learning_trigger = yes
					NOT = { trait = mastermind_theologian }
				}
				random_list = {
					50 = { upgrade_education_effect = yes }
					50 = { change_learning = 2 }
				}
			}
			add_society_currency_minor_effect = yes
			FROM = {
				if = {
					limit = {
						NOT = { is_friend = ROOT }
						opinion = { who = ROOT value = 50 }
						reverse_opinion = { who = ROOT value = 50 }
					}
					tooltip = { add_friend = ROOT }
				}
				if = {
					limit = {
						NAND = {
							NOT = { is_friend = ROOT }
							opinion = { who = ROOT value = 50 }
							reverse_opinion = { who = ROOT value = 50 }
						}
					}
					opinion = { who = ROOT modifier = opinion_good_student months = 120 }
				}
			}
		}
		if = {
			limit = { has_character_flag = wisdom_outcome_ok }
			set_character_flag = alchemist_learnt_from_wisdom
			if = {
				limit = {
					NAND = {
						has_education_learning_trigger = yes
						NOT = { trait = mastermind_theologian }
					}
				}
				change_learning = 1
			}
			if = {
				limit = {
					has_education_learning_trigger = yes
					NOT = { trait = mastermind_theologian }
				}
				random_list = {
					20 = { upgrade_education_effect = yes }
					80 = { change_learning = 1 }
				}
			}
			add_society_currency_tiny_effect = yes
		}
		if = {
			limit = { has_character_flag = wisdom_outcome_bad }
			FROM = {
				opinion = { who = ROOT modifier = opinion_bad_student months = 120 }
			}
			detract_society_currency_tiny_effect = yes
		}
	}
	after = {
		clr_quest = quest_alchemists_learn_from_wisdom
		remove_trait = wikid
		clr_character_flag = on_a_foreign_tour_alchemist
		hidden_tooltip = {
			character_event = { id = wikid.340 } #clear flags
			FROM = { character_event = { id = wildfire.102 } }
		}
	}
}
character_event = { #wisdom outcome event event
	id = wildfire.102
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.102A"
		trigger = { FROM = { has_character_flag = wisdom_outcome_great } }
	}
	desc = {
		text = "EVTDESCwildfire.102B"
		trigger = { FROM = { has_character_flag = wisdom_outcome_good } }
	}
	desc = {
		text = "EVTDESCwildfire.102C"
		trigger = { FROM = { has_character_flag = wisdom_outcome_ok } }
	}
	desc = {
		text = "EVTDESCwildfire.102D"
		trigger = { FROM = { has_character_flag = wisdom_outcome_bad } }
	}

	option = {
		name = {
			text = "EVTOPTAwildfire.102A"
			trigger = { FROM = { has_character_flag = wisdom_outcome_great } }
		}
		name = {
			text = "EVTOPTAwildfire.102B"
			trigger = { FROM = { has_character_flag = wisdom_outcome_good } }
		}
		name = {
			text = "EVTOPTAwildfire.102C"
			trigger = { FROM = { has_character_flag = wisdom_outcome_ok } }
		}
		name = {
			text = "EVTOPTAwildfire.102D"
			trigger = { FROM = { has_character_flag = wisdom_outcome_bad } }
		}

		if = {
			limit = { FROM = { has_character_flag = wisdom_outcome_great } }
			if = {
				limit = {
					NAND = {
						has_education_learning_trigger = yes
						NOT = { trait = mastermind_theologian }
					}
				}
				change_learning = 1
			}
			if = {
				limit = {
					has_education_learning_trigger = yes
					NOT = { trait = mastermind_theologian }
				}
				random_list = {
					20 = { upgrade_education_effect = yes }
					80 = { change_learning = 1 }
				}
			}
			add_society_currency_medium_effect = yes
			FROM = {
				if = {
					limit = {
						NOT = { is_friend = ROOT }
						opinion = { who = ROOT value = 30 }
						reverse_opinion = { who = ROOT value = 30 }
					}
					add_friend = ROOT
					break = yes
				}
				if = {
					limit = {
						NAND = {
							NOT = { is_friend = ROOT }
							opinion = { who = ROOT value = 30 }
							reverse_opinion = { who = ROOT value = 30 }
						}
					}
					opinion = { who = ROOT modifier = opinion_good_mentor months = 120 multiplier = 2 }
				}
			}
		}
		if = {
			limit = { FROM = { has_character_flag = wisdom_outcome_good } }
			add_society_currency_minor_effect = yes
			FROM = {
				if = {
					limit = {
						NOT = { is_friend = ROOT }
						opinion = { who = ROOT value = 50 }
						reverse_opinion = { who = ROOT value = 50 }
					}
					add_friend = ROOT
					break = yes
				}
				if = {
					limit = {
						NAND = {
							NOT = { is_friend = ROOT }
							opinion = { who = ROOT value = 50 }
							reverse_opinion = { who = ROOT value = 50 }
						}
					}
					opinion = { who = ROOT modifier = opinion_good_mentor months = 120 }
				}
			}
		}
		if = {
			limit = { FROM = { has_character_flag = wisdom_outcome_ok } }
			add_society_currency_tiny_effect = yes
		}
		if = {
			limit = { FROM = { has_character_flag = wisdom_outcome_bad } }
			FROM = {
				opinion = { who = ROOT modifier = opinion_bad_mentor months = 120 }
			}
			detract_society_currency_tiny_effect = yes
		}
	}
	after = {
		clr_quest = quest_alchemists_teach_acolyte
		FROM = {
			clr_character_flag = wisdom_outcome_great
			clr_character_flag = wisdom_outcome_good
			clr_character_flag = wisdom_outcome_ok
			clr_character_flag = wisdom_outcome_bad
		}
	}
}
#MISSION: Study knowledge stores
#Ping event for mission
character_event = {
	id = wildfire.110
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		FROM = { society_quest_event = { id = wildfire.111 } }
	}
}
society_quest_event = {
	id = wildfire.111
	desc = EVTDESCwildfire.111
	quest_target = ROOT

	is_triggered_only = yes

	option = { #accept
		name = ACCEPT
		custom_tooltip = {
			text = TOOLTIPwildfire.111
		}
		hidden_tooltip = {
			ROOT = {
				set_quest_target = {
					id = quest_alchemists_study_knowledge_stores
					holder = ROOT
				}
			}
			character_event = { id = wildfire.112 days = 30 random = 15 }
		}
	}
	option = { #nah thx
		name = DECLINE
		custom_tooltip = { text = decline_quest_tooltip }

		hidden_tooltip = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1000
			}
		}
		ai_chance = { factor = 0 }
	}
}
#Guildhall ready, what would you like to study?
character_event = {
	id = wildfire.112
	desc = "EVTDESCwildfire.112"
	picture = GFX_evt_alchemists_guild

	is_triggered_only = yes

	trigger = {
		society_member_of = alchemists_guild
		has_quest = quest_alchemists_study_knowledge_stores
	}

	immediate = {
		if = { #find acolyte for loc falvour
			limit = { ai = no }
			random_courtier = {
				limit = {
					society_member_of = alchemists_guild
					society_rank == 2
					is_incapable = no
					prisoner = no
				}
				save_event_target_as = acolyte
				break = yes
			}
			society = {
				random_society_member = {
					limit = {
						society_member_of = alchemists_guild
						society_rank == 2
						is_incapable = no
						prisoner = no

						is_liege_or_above = ROOT
					}
					save_event_target_as = acolyte
					break = yes
				}
				random_society_member = {
					limit = {
						society_member_of = alchemists_guild
						society_rank == 2
						is_incapable = no
						prisoner = no
					}
					save_event_target_as = acolyte
					break = yes
				}
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.112" #Wildfire
		#Possible outcomes:
			# -Mild success
			# -Great Success
			# -Mild failiure
			# -Catasrophic failiure (explosions)
			# -Discover/learn about flame creatures (rare, magic return required)
		custom_tooltip = {
			text = TOOLTIPwildfire.112A
		}
		set_character_flag = studying_wildfire
		event_target:acolyte = { show_portrait = yes }
	}
	option = {
		name = "EVTOPTBwildfire.112" #Alchemy
		#Possible outcomes:
			# -Mild success (increased forgery prowess)
			# -Great Success
			# -Mild failiure
			# -Catasrophic failiure (poisoned)
			# -Discover/learn about transmutation (rare, magic return required)
		custom_tooltip = {
			text = TOOLTIPwildfire.112B
		}
		set_character_flag = studying_alchemy
	}
	option = {
		name = "EVTOPTCwildfire.112" #Arcane history and knowledge
		#Possible outcomes:
			# -Mild success
			# -Great Success
			# -Mild failiure
			# -Catasrophic failiure (lunacy/stress)
			# -Discover/learn about elixirs of healing/immortality (rare, magic return required)
		custom_tooltip = {
			text = TOOLTIPwildfire.112C
		}
		set_character_flag = studying_arcane
	}
	after = {
		hidden_tooltip = {
			random_list = {
				60 = { #Great Success
					modifier = {
						factor = 1.5
						trait = mystic
					}
					modifier = {
						factor = 1.5
						trait = scholar
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.33
						learning = 12
					}
					modifier = {
						factor = 1.33
						learning = 15
					}
					modifier = {
						factor = 1.33
						learning = 18
					}
					modifier = {
						factor = 1.33
						learning = 21
					}
					character_event = { id = wildfire.113 days = 30 random = 15 }
				}
				140 = { #Mild success
					modifier = {
						factor = 1.5
						trait = mystic
					}
					modifier = {
						factor = 1.5
						trait = scholar
					}
					modifier = {
						factor = 1.5
						trait = patient
					}
					modifier = {
						factor = 1.33
						learning = 12
					}
					modifier = {
						factor = 1.33
						learning = 15
					}
					modifier = {
						factor = 1.33
						learning = 18
					}
					modifier = {
						factor = 1.33
						learning = 21
					}
					character_event = { id = wildfire.114 days = 30 random = 15 }
				}
				140 = { #Mild failiure
					modifier = {
						factor = 1.5
						trait = wroth
					}
					modifier = {
						factor = 1.33
						learning < 9
					}
					modifier = {
						factor = 1.33
						learning < 6
					}
					modifier = {
						factor = 1.33
						learning < 3
					}
					character_event = { id = wildfire.115 days = 30 random = 15 }
				}
				60 = { #Catasrophic failiure
					modifier = {
						factor = 1.5
						trait = wroth
					}
					modifier = {
						factor = 1.33
						learning < 9
					}
					modifier = {
						factor = 1.33
						learning < 6
					}
					modifier = {
						factor = 1.33
						learning < 3
					}
					character_event = { id = wildfire.116 days = 30 random = 15 }
				}
				1 = { #Rare discovery
					trigger = {
						magic_returned_trigger = yes
						OR = {
							learning = 18
							AND = { #easier to learn if already discovered
								learning = 12
								has_character_flag = studying_wildfire
								has_global_flag = alchemist_flame_creature_discovered
							}
							AND = {
								learning = 12
								has_character_flag = studying_alchemy
								has_global_flag = alchemist_transmutation_discovered
							}
							AND = {
								learning = 12
								has_character_flag = studying_arcane
								has_global_flag = alchemist_elixirs_discovered
							}
						}
						OR = {
							AND = {
								has_character_flag = studying_wildfire
								NOT = { has_character_flag = alchemist_flame_creature }
							}
							AND = {
								has_character_flag = studying_alchemy
								NOT = { has_character_flag = alchemist_transmutation }
							}
							AND = {
								has_character_flag = studying_arcane
								NOT = { has_character_flag = alchemist_elixirs }
							}
						}
					}
					#easier if already discovered
					modifier = {
						factor = 10
						has_character_flag = studying_wildfire
						has_global_flag = alchemist_flame_creature_discovered
					}
					modifier = {
						factor = 10
						has_character_flag = studying_alchemy
						has_global_flag = alchemist_transmutation_discovered
					}
					modifier = {
						factor = 10
						has_character_flag = studying_arcane
						has_global_flag = alchemist_elixirs_discovered
					}
					#expert in field
					modifier = {
						factor = 2
						has_character_flag = studying_wildfire
						has_character_modifier = alchemist_master_pyromancer
					}
					modifier = {
						factor = 2
						has_character_flag = studying_alchemy
						has_character_modifier = alchemist_master_alchemist
					}
					modifier = {
						factor = 2
						has_character_flag = studying_arcane
						has_character_modifier = alchemist_master_of_the_arcane
					}
					modifier = {
						factor = 1.5
						trait = mystic
					}
					modifier = {
						factor = 1.5
						trait = scholar
					}
					modifier = {
						factor = 1.5
						learning = 15
					}
					modifier = {
						factor = 1.5
						learning = 18
					}
					modifier = {
						factor = 1.5
						learning = 21
					}
					modifier = {
						factor = 1.66
						learning = 24
					}
					modifier = {
						factor = 1.66
						learning = 27
					}
					character_event = { id = wildfire.117 days = 30 random = 15 }
				}
			}
		}
	}
}
#Great success
character_event = {
	id = wildfire.113
	picture = GFX_evt_experiment

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.113A"
		trigger = { has_character_flag = studying_wildfire }
	}
	desc = {
		text = "EVTDESCwildfire.113B"
		picture = GFX_evt_scientist
		trigger = { has_character_flag = studying_alchemy }
	}
	desc = {
		text = "EVTDESCwildfire.113C"
		picture = GFX_evt_monk
		trigger = { has_character_flag = studying_arcane }
	}

	option = {
		name = {
			text = "EVTOPTAwildfire.113A"
			trigger = { has_character_flag = studying_wildfire }
		}
		name = {
			text = "EVTOPTAwildfire.113B"
			trigger = { has_character_flag = studying_alchemy }
		}
		name = {
			text = "EVTOPTAwildfire.113C"
			trigger = { has_character_flag = studying_arcane }
		}
		if = {
			limit = {
				has_character_flag = studying_wildfire
				NOT = { has_character_modifier = alchemist_master_pyromancer }
			}
			add_character_modifier = {
				name = alchemist_master_pyromancer
				duration = -1
			}
		}
		if = {
			limit = {
				has_character_flag = studying_alchemy
				NOT = { has_character_modifier = alchemist_master_alchemist }
			}
			add_character_modifier = {
				name = alchemist_master_alchemist
				duration = -1
			}
			if = {
				limit = {
					NOT = { trait = metallurgist }
					NOT = { lifestyle_traits = 1 }
				}
				add_trait = metallurgist
			}
		}
		if = {
			limit = {
				has_character_flag = studying_arcane
				NOT = { has_character_modifier = alchemist_master_of_the_arcane }
			}
			add_character_modifier = {
				name = alchemist_master_of_the_arcane
				duration = -1
			}
		}
		if = {
			limit = {
				has_education_learning_trigger = yes
				NOT = { trait = mastermind_theologian }
			}
			random = {
				chance = 20
				upgrade_education_effect = yes
			}
		}
		add_society_currency_medium_effect = yes
	}
	after = {
		clr_quest = quest_alchemists_study_knowledge_stores
		clr_character_flag = studying_wildfire
		clr_character_flag = studying_alchemy
		clr_character_flag = studying_arcane
		hidden_tooltip = {
			add_character_modifier = { #5 year cooldown on this mission
				name = alchemist_studied_knowledge_stores
				duration = 1825
				hidden = yes
			}
		}
	}
}
#Mild success
character_event = {
	id = wildfire.114
	picture = GFX_evt_experiment

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.114A"
		trigger = { has_character_flag = studying_wildfire }
	}
	desc = {
		text = "EVTDESCwildfire.114B"
		trigger = { has_character_flag = studying_alchemy }
	}
	desc = {
		text = "EVTDESCwildfire.114C"
		picture = GFX_evt_library
		trigger = { has_character_flag = studying_arcane }
	}

	option = {
		name = {
			text = "EVTOPTAwildfire.114A"
			trigger = { has_character_flag = studying_wildfire }
		}
		name = {
			text = "EVTOPTAwildfire.114B"
			trigger = { has_character_flag = studying_alchemy }
		}
		name = {
			text = "EVTOPTAwildfire.114C"
			trigger = { has_character_flag = studying_arcane }
		}
		if = {
			limit = {
				has_character_flag = studying_wildfire
				NOT = { has_character_modifier = alchemist_master_pyromancer }
			}
			random = {
				chance = 33
				add_character_modifier = {
					name = alchemist_master_pyromancer
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_character_flag = studying_alchemy
				NOT = { has_character_modifier = alchemist_master_alchemist }
			}
			random = {
				chance = 33
				add_character_modifier = {
					name = alchemist_master_alchemist
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_character_flag = studying_arcane
				NOT = { has_character_modifier = alchemist_master_of_the_arcane }
			}
			random = {
				chance = 33
				add_character_modifier = {
					name = alchemist_master_of_the_arcane
					duration = -1
				}
			}
		}
		if = {
			limit = {
				has_education_learning_trigger = yes
				NOT = { trait = mastermind_theologian }
			}
			random = {
				chance = 10
				upgrade_education_effect = yes
			}
		}
		add_society_currency_minor_effect = yes
	}
	after = {
		clr_quest = quest_alchemists_study_knowledge_stores
		clr_character_flag = studying_wildfire
		clr_character_flag = studying_alchemy
		clr_character_flag = studying_arcane
		hidden_tooltip = {
			add_character_modifier = { #5 year cooldown on this mission
				name = alchemist_studied_knowledge_stores
				duration = 1825
				hidden = yes
			}
		}
	}
}
#Mild failiure
character_event = {
	id = wildfire.115
	picture = GFX_evt_experiment

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.115A"
		trigger = { has_character_flag = studying_wildfire }
	}
	desc = {
		text = "EVTDESCwildfire.115B"
		trigger = { has_character_flag = studying_alchemy }
	}
	desc = {
		text = "EVTDESCwildfire.115C"
		picture = GFX_evt_monk
		trigger = { has_character_flag = studying_arcane }
	}

	option = {
		name = {
			text = "EVTOPTAwildfire.115A"
			trigger = { has_character_flag = studying_wildfire }
		}
		name = {
			text = "EVTOPTAwildfire.115B"
			trigger = { has_character_flag = studying_alchemy }
		}
		name = {
			text = "EVTOPTAwildfire.115C"
			trigger = { has_character_flag = studying_arcane }
		}
		add_society_currency_tiny_effect = yes
	}
	after = {
		clr_quest = quest_alchemists_study_knowledge_stores
		clr_character_flag = studying_wildfire
		clr_character_flag = studying_alchemy
		clr_character_flag = studying_arcane
		hidden_tooltip = {
			add_character_modifier = { #5 year cooldown on this mission
				name = alchemist_studied_knowledge_stores
				duration = 1825
				hidden = yes
			}
		}
	}
}
#Catasrophic failiure
character_event = {
	id = wildfire.116
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.116A"
		picture = GFX_evt_wildfire_city
		trigger = { has_character_flag = studying_wildfire }
	}
	desc = {
		text = "EVTDESCwildfire.116B"
		picture = GFX_evt_illness
		trigger = { has_character_flag = studying_alchemy }
	}
	desc = {
		text = "EVTDESCwildfire.116C"
		picture = GFX_evt_lunatic
		trigger = { has_character_flag = studying_arcane }
	}

	option = {
		name = {
			text = "EVTOPTAwildfire.116A"
			trigger = { has_character_flag = studying_wildfire }
		}
		name = {
			text = "EVTOPTAwildfire.116B"
			trigger = { has_character_flag = studying_alchemy }
		}
		name = {
			text = "EVTOPTAwildfire.116C"
			trigger = { has_character_flag = studying_arcane }
		}
		if = {
			limit = {
				has_character_flag = studying_wildfire
				NOT = { has_character_modifier = alchemist_master_pyromancer }
			}
			random_list = {
				45 = {
				}
				25 = {
					trigger = {
						NOT = { trait = wounded }
						NOT = { is_maimed_trigger = yes }
					}
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				15 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				10 = {
					trigger = { NOT = { is_maimed_trigger = yes } }
					add_maimed_trait_effect = yes
					hidden_tooltip = {
						remove_trait = wounded
					}
				}
				5 = {
					hidden_tooltip = { add_trait = burned }
					death = {
						death_reason = death_accident_wildfire
					}
				}
			}
		}
		if = {
			limit = {
				has_character_flag = studying_alchemy
				NOT = { has_character_modifier = alchemist_master_alchemist }
			}
			random_list = {
				45 = {
				}
				40 = {
					trigger = { is_ill = no }
					if = {
						limit = { NOT = { has_dlc = "Reapers" } }
						add_trait = ill
						# hidden_tooltip = { character_event = { id = 38190 } }
					}
					if = {
						limit = { has_dlc = "Reapers" }
						set_character_flag = disease_not_serious
						add_symptom_effect = yes
					}
				}
				10 = {
					trigger = { is_ill = no }
					if = {
						limit = { NOT = { has_dlc = "Reapers" } }
						add_trait = pneumonic
						blessing_removes_disease_effect = yes
						deaths_gift_removes_disease_effect = yes
						# hidden_tooltip = { character_event = { id = 38190 } }
					}
					if = {
						limit = { has_dlc = "Reapers" }
						add_symptom_effect = yes
					}
				}
				5 = {
					death = {
						death_reason = death_accident_wildfire
					}
				}
			}
		}
		if = {
			limit = {
				has_character_flag = studying_arcane
				NOT = { has_character_modifier = alchemist_master_of_the_arcane }
			}
			random_list = {
				45 = {
				}
				40 = {
					trigger = { NOT = { trait = stressed }  }
					add_trait = stressed
					# hidden_tooltip = { character_event = { id = 38182 } }
				}
				10 = {
					trigger = { NOT = { trait = lunatic }  }
					add_trait = lunatic
					hidden_tooltip = { character_event = { id = 38304 } }
				}
				5 = {
					death = {
						death_reason = death_accident_wildfire
					}
				}
			}
		}
		detract_society_currency_tiny_effect = yes
	}
	after = {
		clr_quest = quest_alchemists_study_knowledge_stores
		clr_character_flag = studying_wildfire
		clr_character_flag = studying_alchemy
		clr_character_flag = studying_arcane
		hidden_tooltip = {
			add_character_modifier = { #5 year cooldown on this mission
				name = alchemist_studied_knowledge_stores
				duration = 1825
				hidden = yes
			}
		}
	}
}
#Discovers rare knowledge
character_event = {
	id = wildfire.117
	picture = GFX_evt_experiment

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.117A"
		picture = GFX_evt_wildfire
		trigger = {
			has_character_flag = studying_wildfire
			NOT = { has_global_flag = alchemist_flame_creature_discovered }
		}
	}
	desc = {
		text = "EVTDESCwildfire.117B"
		picture = GFX_evt_wildfire
		trigger = {
			has_character_flag = studying_wildfire
			has_global_flag = alchemist_flame_creature_discovered
		}
	}
	desc = {
		text = "EVTDESCwildfire.117C"
		trigger = {
			has_character_flag = studying_alchemy
			NOT = { has_global_flag = alchemist_transmutation_discovered }
		}
	}
	desc = {
		text = "EVTDESCwildfire.117D"
		trigger = {
			has_character_flag = studying_alchemy
			has_global_flag = alchemist_transmutation_discovered
		}
	}
	desc = {
		text = "EVTDESCwildfire.117E"
		trigger = {
			has_character_flag = studying_arcane
			NOT = { has_global_flag = alchemist_elixirs_discovered }
		}
	}
	desc = {
		text = "EVTDESCwildfire.117F"
		trigger = {
			has_character_flag = studying_arcane
			has_global_flag = alchemist_elixirs_discovered
		}
	}
	option = {
		name = {
			text = "EVTOPTAwildfire.117A"
			trigger = { has_character_flag = studying_wildfire }
		}
		name = {
			text = "EVTOPTAwildfire.117B"
			trigger = { has_character_flag = studying_alchemy }
		}
		name = {
			text = "EVTOPTAwildfire.117C"
			trigger = { has_character_flag = studying_arcane }
		}
		if = {
			limit = { has_character_flag = studying_wildfire }
			if = {
				limit = { NOT = { has_character_modifier = alchemist_master_pyromancer } }
				add_character_modifier = {
					name = alchemist_master_pyromancer
					duration = -1
				}
			}
			custom_tooltip = {
				text = TOOLTIPwildfire.117FLAMECREATURES
				set_character_flag = alchemist_flame_creature
			}
			if = {
				limit = { NOT = { has_global_flag = alchemist_flame_creature_discovered } }
				hidden_tooltip = {
					any_playable_ruler = { #inform world
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = wildfire.118 }
					}
				}
				set_global_flag = alchemist_flame_creature_discovered
			}
		}
		if = {
			limit = { has_character_flag = studying_alchemy }
			if = {
				limit = { NOT = { has_character_modifier = alchemist_master_alchemist } }
				add_character_modifier = {
					name = alchemist_master_alchemist
					duration = -1
				}
			}
			custom_tooltip = {
				text = TOOLTIPwildfire.117TRANSMUTATION
				set_character_flag = alchemist_transmutation
			}
			if = {
				limit = { NOT = { has_global_flag = alchemist_transmutation_discovered } }
				hidden_tooltip = {
					any_playable_ruler = { #inform world
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = wildfire.119 }
					}
				}
				set_global_flag = alchemist_transmutation_discovered
			}
		}
		if = {
			limit = { has_character_flag = studying_arcane }
			if = {
				limit = { NOT = { has_character_modifier = alchemist_master_of_the_arcane } }
				add_character_modifier = {
					name = alchemist_master_of_the_arcane
					duration = -1
				}
			}
			custom_tooltip = {
				text = TOOLTIPwildfire.117ELIXIRS
				set_character_flag = alchemist_elixirs
			}
			if = {
				limit = { NOT = { has_global_flag = alchemist_elixirs_discovered } }
				hidden_tooltip = {
					any_playable_ruler = { #inform world
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = wildfire.120 }
					}
				}
				set_global_flag = alchemist_elixirs_discovered
			}
		}
		if = {
			limit = {
				has_character_flag = studying_alchemy
				NOT = { trait = metallurgist }
			}
			add_trait = metallurgist
		}
		else_if = {
			limit = {
				NOT = { trait = mystic }
				NOT = { has_character_flag = studying_alchemy }
			}
			add_trait = mystic
		}
		if = {
			limit = {
				has_education_learning_trigger = yes
				NOT = { trait = mastermind_theologian }
			}
			random = {
				chance = 33
				upgrade_education_effect = yes
			}
		}
		add_society_currency_major_effect = yes
	}
	after = {
		clr_quest = quest_alchemists_study_knowledge_stores
		clr_character_flag = studying_wildfire
		clr_character_flag = studying_alchemy
		clr_character_flag = studying_arcane
		hidden_tooltip = {
			add_character_modifier = { #5 year cooldown on this mission
				name = alchemist_studied_knowledge_stores
				duration = 1825
				hidden = yes
			}
		}
	}
}
character_event = { #Inform world flame creatures
	id = wildfire.118
	picture = GFX_evt_wildfire
	desc = "EVTDESCwildfire.118"

	is_triggered_only = yes

	option = {
		name = {
			text = "EVTOPTAwildfire.118A"
			trigger = { society_member_of = alchemists_guild }
		}
		name = {
			text = "EVTOPTAwildfire.118B"
			trigger = { NOT = { society_member_of = alchemists_guild } }
		}
	}
}
character_event = { #Inform world transmutation
	id = wildfire.119
	picture = GFX_evt_experiment
	desc = "EVTDESCwildfire.119"

	is_triggered_only = yes

	option = {
		name = {
			text = "EVTOPTAwildfire.119A"
			trigger = { society_member_of = alchemists_guild }
		}
		name = {
			text = "EVTOPTAwildfire.119B"
			trigger = { NOT = { society_member_of = alchemists_guild } }
		}
	}
}
character_event = { #Inform world elixirs
	id = wildfire.120
	picture = GFX_evt_pyromancer
	desc = "EVTDESCwildfire.120"

	is_triggered_only = yes

	option = {
		name = {
			text = "EVTOPTAwildfire.120A"
			trigger = { society_member_of = alchemists_guild }
		}
		name = {
			text = "EVTOPTAwildfire.120B"
			trigger = { NOT = { society_member_of = alchemists_guild } }
		}
	}
}
#POWER: transmutate metals
character_event = {
	id = wildfire.130
	desc = "EVTDESCwildfire.130"
	picture = GFX_evt_experiment

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_character_flag = alchemist_transmutation }
			save_event_target_as = alchemist_transmutater
			break = yes
		}
		random_courtier = {
			limit = {
				society_member_of = alchemists_guild
				has_character_flag = alchemist_transmutation
				prisoner = no
				is_incapable = no
				liege = { character = ROOT }
				ai = yes
			}
			preferred_limit = { trait = metallurgist }
			save_event_target_as = alchemist_transmutater
			break = yes
		}
	}

	option = {
		name = "EVTOPTAwildfire.130" #gold
		event_target:alchemist_transmutater = {
			random_list = {
				35 = { #success
					modifier = {
						factor = 1.5
						trait = metallurgist
					}
					modifier = {
						factor = 0.66
						learning < 9
					}
					modifier = {
						factor = 1.5
						learning = 15
					}
					modifier = {
						factor = 1.5
						learning = 18
					}
					modifier = {
						factor = 1.5
						learning = 21
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.130A
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.131 days = 3 } }
						}
					}
				}
				20 = { #fail
					custom_tooltip = {
						text = TOOLTIPwildfire.130B
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.132 days = 3 } }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTBwildfire.130" #flood economy with lots of silver
		trigger = { higher_tier_than = BARON }
		event_target:alchemist_transmutater = {
			random_list = {
				80 = { #success
					modifier = {
						factor = 1.5
						trait = metallurgist
					}
					modifier = {
						factor = 0.66
						learning < 9
					}
					modifier = {
						factor = 1.5
						learning = 15
					}
					modifier = {
						factor = 1.5
						learning = 18
					}
					modifier = {
						factor = 1.5
						learning = 21
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.130C
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.133 days = 3 } }
						}
					}
				}
				20 = { #fail
					custom_tooltip = {
						text = TOOLTIPwildfire.130D
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.134 days = 3 } }
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTCwildfire.130" #valyrian steel
		trigger = {
			higher_tier_than = BARON
			NOT = { has_artifact = valyrian_steel }
		}
		wealth = -50
		event_target:alchemist_transmutater = {
			random_list = {
				10 = { #success
					modifier = {
						factor = 1.5
						trait = metallurgist
					}
					modifier = {
						factor = 0.66
						learning < 9
					}
					modifier = {
						factor = 1.5
						learning = 15
					}
					modifier = {
						factor = 1.5
						learning = 18
					}
					modifier = {
						factor = 1.5
						learning = 21
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.130E
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.135 days = 3 } }
						}
					}
				}
				60 = { #fail
					custom_tooltip = {
						text = TOOLTIPwildfire.130F
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.136 days = 3 } }
						}
					}
				}
				20 = { #fail + accident
					custom_tooltip = {
						text = TOOLTIPwildfire.130G
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.137 days = 3 } }
						}
					}
				}
			}
		}
	}
}
character_event = { #gold success
	id = wildfire.131
	picture = GFX_evt_bribe_accepted
	desc = "EVTDESCwildfire.131"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.131"
		if = {
			limit = { character = event_target:alchemist_transmutater }
			wealth = 50
		}
		if = {
			limit = { NOT = { character = event_target:alchemist_transmutater } }
			wealth = 35
			event_target:alchemist_transmutater = { wealth = 15 }
		}
		event_target:alchemist_transmutater = { show_portrait = yes }
	}
}
character_event = { #gold fail
	id = wildfire.132
	picture = GFX_evt_quarrel
	desc = "EVTDESCwildfire.132"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.132"
		event_target:alchemist_transmutater = { show_portrait = yes }
	}
}
character_event = { #silver success
	id = wildfire.133
	picture = GFX_evt_market
	desc = "EVTDESCwildfire.133"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.133"
		scaled_wealth = { value = 2 min = 200 max = 700 }
		if = { #Alchemist gets 30%
			limit = { NOT = { character = event_target:alchemist_transmutater } }
			transfer_scaled_wealth = { to = event_target:alchemist_transmutater value = 0.6 min = 60 max = 210 }
		}
		capital_scope = {
			add_province_modifier = {
				name = inflation_problem
				duration = 1095
			}
		}
		event_target:alchemist_transmutater = { show_portrait = yes }
	}
}
character_event = { #silver fail
	id = wildfire.134
	picture = GFX_evt_quarrel
	desc = "EVTDESCwildfire.134"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.134"
		event_target:alchemist_transmutater = { show_portrait = yes }
	}
}
character_event = { #valyrian steel success
	id = wildfire.135
	picture = "GFX_evt_valyrian_steel"
	desc = "EVTDESCwildfire.135"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.135"
		add_artifact = valyrian_steel
		new_artifact = {
			set_artifact_flag = heirloom_@PREV
			get_random_sword_name_effect = yes
		}
		prestige = 100
		if = {
			limit = { NOT = { character = event_target:alchemist_transmutater } }
			event_target:alchemist_transmutater = {
				show_portrait = yes
				wealth = 50
				prestige = 100
			}
		}
		custom_tooltip = {
			text = TOOLTIPRENAMEARTIFACTADVICE
		}
	}
}
character_event = { #valyrian steel fail
	id = wildfire.136
	picture = GFX_evt_quarrel
	desc = "EVTDESCwildfire.136"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.136"
		event_target:alchemist_transmutater = { show_portrait = yes }
	}
}
character_event = { #valyrian steel accident
	id = wildfire.137
	picture = GFX_evt_illness
	desc = "EVTDESCwildfire.137"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.137"
		random_list = {
			45 = {
			}
			25 = {
				trigger = {
					NOT = { trait = wounded }
					NOT = { is_maimed_trigger = yes }
				}
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = 38280 } }
			}
			15 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			10 = {
				trigger = { NOT = { is_maimed_trigger = yes } }
				add_maimed_trait_effect = yes
				hidden_tooltip = {
					remove_trait = wounded
				}
			}
			5 = {
				hidden_tooltip = { add_trait = burned }
				death = {
					death_reason = death_accident_wildfire
					killer = event_target:alchemist_transmutater
				}
			}
		}
		if = {
			limit = { NOT = { character = event_target:alchemist_transmutater } }
			event_target:alchemist_transmutater = {
				show_portrait = yes
				random_list = {
					45 = {
					}
					25 = {
						trigger = {
							NOT = { trait = wounded }
							NOT = { is_maimed_trigger = yes }
						}
						add_trait_silently_wounded_effect = yes
						hidden_tooltip = { character_event = { id = 38280 } }
					}
					15 = {
						trigger = { NOT = { trait = burned } }
						add_trait = burned
						hidden_tooltip = { character_event = { id = trait_notification.23 } }
					}
					10 = {
						trigger = { NOT = { is_maimed_trigger = yes } }
						add_maimed_trait_effect = yes
						hidden_tooltip = {
							remove_trait = wounded
						}
					}
					5 = {
						hidden_tooltip = { add_trait = burned }
						death = {
							death_reason = death_accident_wildfire
							killer = ROOT
						}
					}
				}
			}
		}
	}
}
#POWER: flame creatures used in battle
character_event = {
	id = wildfire.138
	picture = GFX_evt_pyromancer
	desc = "EVTDESCwildfire.138"
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
	only_rulers = yes
	has_global_flag = alchemist_flame_creature_discovered
	is_in_society = yes

	trigger = {
		society_member_of = alchemists_guild
		magic_returned_trigger = yes
		OR = {
			has_character_flag = alchemist_flame_creature
			any_courtier = {
				society_member_of = alchemists_guild
				has_character_flag = alchemist_flame_creature
				prisoner = no
				is_incapable = no
				liege = { character = ROOT }
				ai = yes
			}
		}
		capital_scope = {
			owner = { character = ROOT }
			has_province_modifier = alchemist_guild
			OR = {
				has_province_modifier = wildfire_1
				has_province_modifier = wildfire_2
				has_province_modifier = wildfire_3
				has_province_modifier = wildfire_4
				has_province_modifier = wildfire_5
			}
		}
		has_society_currency_minor_trigger = yes
		NOT = { has_character_modifier = used_flame_creature }
	}

	immediate = {
		hidden_tooltip = {
			add_character_modifier = {
				name = used_flame_creature
				duration = 30
				hidden = yes
			}
		}
		if = {
			limit = { has_character_flag = alchemist_flame_creature }
			save_event_target_as = alchemist_flame_creature
			break = yes
		}
		random_courtier = {
			limit = {
				society_member_of = alchemists_guild
				has_character_flag = alchemist_flame_creature
				prisoner = no
				is_incapable = no
				liege = { character = ROOT }
				ai = yes
			}
			save_event_target_as = alchemist_flame_creature
			break = yes
		}
	}

	option = {
		name = "EVTOPTAwildfire.138" #yes
		event_target:alchemist_flame_creature = {
			show_portrait = yes
			random_list = {
				60 = { #success
					modifier = {
						factor = 1.25
						trait = mystic
					}
					modifier = {
						factor = 0.8
						learning < 3
					}
					modifier = {
						factor = 0.8
						learning < 6
					}
					modifier = {
						factor = 0.8
						learning < 9
					}
					modifier = {
						factor = 1.25
						learning = 12
					}
					modifier = {
						factor = 1.25
						learning = 15
					}
					modifier = {
						factor = 1.25
						learning = 18
					}
					modifier = {
						factor = 1.25
						learning = 21
					}
					modifier = {
						factor = 1.25
						learning = 24
					}
					custom_tooltip = {
						text = TOOLTIPwildfire.136A
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.139 } }
						}
					}
				}
				40 = { #fail
					custom_tooltip = {
						text = TOOLTIPwildfire.136B
						hidden_tooltip = {
							ROOT = { character_event = { id = wildfire.142 } }
						}
					}
				}
			}
		}
		detract_society_currency_minor_effect = yes
		capital_scope = {
			if = {
				limit = { has_province_modifier = wildfire_1 }
				remove_province_modifier = wildfire_1
			}
			if = {
				limit = { has_province_modifier = wildfire_2 }
				remove_province_modifier = wildfire_2
				add_province_modifier = { name = wildfire_1 duration = -1 }
			}
			if = {
				limit = { has_province_modifier = wildfire_3 }
				remove_province_modifier = wildfire_3
				add_province_modifier = { name = wildfire_2 duration = -1 }
			}
			if = {
				limit = { has_province_modifier = wildfire_4 }
				remove_province_modifier = wildfire_4
				add_province_modifier = { name = wildfire_3 duration = -1 }
			}
			if = {
				limit = { has_province_modifier = wildfire_5 }
				remove_province_modifier = wildfire_5
				add_province_modifier = { name = wildfire_4 duration = -1 }
			}
		}
	}
	option = {
		name = "EVTOPTBwildfire.138" #no
	}
}
character_event = { #success
	id = wildfire.139
	picture = GFX_evt_wildfire
	desc = "EVTDESCwildfire.139"
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.139"
		event_target:alchemist_flame_creature = {
			show_portrait = yes
			prestige = 30
		}
		morale = 0.2
		if = {
			limit = {
				is_ruler = yes
				war = yes
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
					independent = yes
				}
			}
			any_current_enemy = {
				limit = {
					at_location = ROOT
					in_command = yes
					prisoner = no
				}
				troops = -0.15
				morale = -0.35
				set_character_flag = flame_creature_event
				hidden_tooltip = { character_event = { id = wildfire.140 } }
			}
			any_current_enemy = {
				any_realm_character = {
					limit = {
						at_location = ROOT
						in_command = yes
						prisoner = no
						NOT = { has_character_flag = flame_creature_event }
					}
					troops = -0.15
					morale = -0.35
					set_character_flag = flame_creature_event
					hidden_tooltip = { character_event = { id = wildfire.140 } }
				}
			}
			hidden_tooltip = { #inform non-commander enemy
				any_current_enemy = {
					limit = {
						NAND = {
							at_location = ROOT
							in_command = yes
							prisoner = no
						}
					}
					character_event = { id = wildfire.141 }
				}
			}
		}
		any_liege = {
			limit = {
				NOT = { character = ROOT }
				war = yes
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
					independent = yes
				}
			}
			any_current_enemy = {
				limit = {
					at_location = ROOT
					in_command = yes
					prisoner = no
					NOT = { has_character_flag = flame_creature_event }
				}
				troops = -0.15
				morale = -0.35
				set_character_flag = flame_creature_event
				hidden_tooltip = { character_event = { id = wildfire.140 } }
			}
			any_current_enemy = {
				any_realm_character = {
					limit = {
						at_location = ROOT
						in_command = yes
						prisoner = no
						NOT = { has_character_flag = flame_creature_event }
					}
					troops = -0.15
					morale = -0.35
					set_character_flag = flame_creature_event
					hidden_tooltip = { character_event = { id = wildfire.140 } }
				}
			}
			hidden_tooltip = { #inform non-commander enemy
				any_current_enemy = {
					limit = {
						NAND = {
							at_location = ROOT
							in_command = yes
							prisoner = no
						}
					}
					character_event = { id = wildfire.141 }
				}
			}
		}
		if = {
			limit = { NOT = { trait = fire_obsessed } }
			random = {
				chance = 5
				modifier = {
					factor = 2
					society_member_of = alchemists_guild
				}
				add_trait = fire_obsessed
				hidden_tooltip = { character_event = { id = trait_notification.2 }  }
			}
		}
	}
}
character_event = { #inform defenders
	id = wildfire.140
	desc = "EVTDESCwildfire.140"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.140"
		clr_character_flag = flame_creature_event
		event_target:alchemist_flame_creature = {
			show_portrait = yes
		}
		random_list = {
			50 = { }
			15 = {
				trigger = { NOT = { trait = wounded } }
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = {
						id = 38280 #Notify
					}
				}
			}
			10 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			15 = {
				add_maimed_trait_effect = yes
			}
			10 = { death = { killer = FROM death_reason = death_battle } }
		}
	}
}
character_event = { #inform enemy
	id = wildfire.141
	desc = "EVTDESCwildfire.141"
	picture = GFX_evt_wildfire
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.141"
		event_target:alchemist_flame_creature = {
			show_portrait = yes
		}
	}
}

character_event = { #failiure
	id = wildfire.142
	picture = "GFX_evt_dragon_flame_death"
	desc = "EVTDESCwildfire.142"
	border = GFX_event_normal_frame_war

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.142"
		morale = -0.2
		if = {
			limit = {
				is_ruler = yes
				war = yes
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
					independent = yes
				}
			}
			any_current_enemy = {
				limit = {
					at_location = ROOT
					in_command = yes
					prisoner = no
				}
				morale = 0.1
				set_character_flag = flame_creature_event
				hidden_tooltip = { character_event = { id = wildfire.143 } }
			}
			any_current_enemy = {
				any_realm_character = {
					limit = {
						at_location = ROOT
						in_command = yes
						prisoner = no
						NOT = { has_character_flag = flame_creature_event }
					}
					morale = 0.1
					set_character_flag = flame_creature_event
					hidden_tooltip = { character_event = { id = wildfire.143 } }
				}
			}
			hidden_tooltip = { #inform non-commander enemy
				any_current_enemy = {
					limit = {
						NAND = {
							at_location = ROOT
							in_command = yes
							prisoner = no
						}
					}
					character_event = { id = wildfire.144 }
				}
			}
		}
		any_liege = {
			limit = {
				NOT = { character = ROOT }
				war = yes
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
					independent = yes
				}
			}
			any_current_enemy = {
				limit = {
					at_location = ROOT
					in_command = yes
					prisoner = no
					NOT = { has_character_flag = flame_creature_event }
				}
				morale = 0.1
				set_character_flag = flame_creature_event
				hidden_tooltip = { character_event = { id = wildfire.143 } }
			}
			any_current_enemy = {
				any_realm_character = {
					limit = {
						at_location = ROOT
						in_command = yes
						prisoner = no
						NOT = { has_character_flag = flame_creature_event }
					}
					morale = 0.1
					set_character_flag = flame_creature_event
					hidden_tooltip = { character_event = { id = wildfire.143 } }
				}
			}
			hidden_tooltip = { #inform non-commander enemy
				any_current_enemy = {
					limit = {
						NAND = {
							at_location = ROOT
							in_command = yes
							prisoner = no
						}
					}
					character_event = { id = wildfire.144 }
				}
			}
		}
		event_target:alchemist_flame_creature = {
			show_portrait = yes
			random_list = {
				45 = {
				}
				25 = {
					trigger = {
						NOT = { trait = wounded }
						NOT = { is_maimed_trigger = yes }
					}
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				15 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				10 = {
					trigger = { NOT = { is_maimed_trigger = yes } }
					add_maimed_trait_effect = yes
					hidden_tooltip = {
						remove_trait = wounded
					}
				}
				5 = {
					hidden_tooltip = { add_trait = burned }
					death = {
						death_reason = death_accident_wildfire
					}
				}
			}
		}
		if = {
			limit = { NOT = { character = event_target:alchemist_flame_creature } }
			random_list = {
				45 = {
				}
				25 = {
					trigger = {
						NOT = { trait = wounded }
						NOT = { is_maimed_trigger = yes }
					}
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				15 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				10 = {
					trigger = { NOT = { is_maimed_trigger = yes } }
					add_maimed_trait_effect = yes
					hidden_tooltip = {
						remove_trait = wounded
					}
				}
				5 = {
					hidden_tooltip = { add_trait = burned }
					death = {
						death_reason = death_accident_wildfire
					}
				}
			}
		}
	}
}
character_event = { #inform defenders
	id = wildfire.143
	desc = "EVTDESCwildfire.143"
	picture = "GFX_evt_dragon_flame_death"
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.143"
		clr_character_flag = flame_creature_event
	}
}
character_event = { #inform enemy
	id = wildfire.144
	desc = "EVTDESCwildfire.144"
	picture = "GFX_evt_dragon_flame_death"
	border = "GFX_event_normal_frame_war"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.144"
		event_target:alchemist_flame_creature = {
			show_portrait = yes
		}
	}
}

#POWER: Elixir of healing
# Target receives proposal
character_event = {
	id = wildfire.150
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	desc = {
		text = EVTDESCwildfire.150
		trigger = { NOT = { character = event_target:healing_proposer } }
	}
	desc = {
		text = EVTDESCwildfire.150B
		trigger = { character = event_target:healing_proposer }
	}

	is_triggered_only = yes
	show_from_from = yes

	option = { #yes
		name = EVTOPTAwildfire.150
		ai_chance = {
			factor = 50 ##powerful healing less likely refused

			modifier = {
				factor = 100
				society_member_of = alchemists_guild
			}

			modifier = {
				factor = 0
				NOT = { religion = event_target:healing_proposer }
				trait = zealous
			}
			modifier = {
				factor = 0.2
				trait = cynical
			}
			modifier = {
				factor = 0.66
				trait = paranoid
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.66
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = humble
			}

			modifier = {
				factor = 0.75
				higher_tier_than = BARON
				NOT = { liege = { character = event_target:healing_proposer } }
			}
			modifier = {
				factor = 0.5
				higher_tier_than = COUNT
				NOT = { liege = { character = event_target:healing_proposer } }
			}
			modifier = {
				factor = 0.25
				higher_tier_than = DUKE
				NOT = { liege = { character = event_target:healing_proposer } }
			}
			modifier = {
				factor = 0.1
				tier = EMPEROR
			}
			modifier = {
				factor = 2
				liege = { character = event_target:healing_proposer }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:healing_proposer value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:healing_proposer value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:healing_proposer value = 25 }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = event_target:healing_proposer value = -25 } }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = event_target:healing_proposer value = -50 } }
			}
		}
		event_target:alchemist_healer = {
			show_portrait = yes
			random_list = {
				100 = {
					custom_tooltip = {
						text = TOOLTIPredgod_heal_basicSUCCESS
						hidden_tooltip = {
							event_target:healing_proposer = {
								if = {
									limit = { NOT = { character = ROOT } }
									character_event = { id = wildfire.152 }
									break = yes
								}
								character_event = { id = wildfire.154 }
							}
						}
					}
					modifier = {
						factor = 2
						trait = mystic
					}
					modifier = {
						factor = 0.66
						learning < 4
					}
					modifier = {
						factor = 0.66
						learning < 8
					}
					modifier = {
						factor = 1.5
						learning = 12
					}
					modifier = {
						factor = 1.5
						learning = 16
					}
					modifier = {
						factor = 1.5
						learning = 20
					}

					modifier = {
						factor = 0.66
						intrigue < 4
					}
					modifier = {
						factor = 0.66
						intrigue < 8
					}
					modifier = {
						factor = 1.5
						intrigue = 12
					}
					modifier = {
						factor = 1.5
						intrigue = 16
					}
					modifier = {
						factor = 1.5
						intrigue = 20
					}
				}
				50 = {
					custom_tooltip = {
						text = TOOLTIPredgod_heal_basicFAIL
						hidden_tooltip = {
							event_target:healing_proposer = {
								if = {
									limit = { NOT = { character = ROOT } }
									character_event = { id = wildfire.153 }
									break = yes
								}
								character_event = { id = wildfire.155 }
							}
						}
					}
				}
			}
		}
	}

	option = { #refuse conversion and gift
		name = EVTOPTBwildfire.150
		trigger = {
			is_adult = yes
			NOT = { character = event_target:healing_proposer }
		}
		ai_chance = {
			factor = 50
		}
		event_target:healing_proposer = { character_event = { id = wildfire.151 } }
		reverse_opinion = {
			modifier = opinion_refused_healing
			who = event_target:healing_proposer
			months = 36
		}
	}
}
# Inform refused healing and conversion.
character_event = {
	id = wildfire.151
	picture = GFX_evt_shadowy_cabal
	border = GFX_event_normal_frame_intrigue

	desc = "EVTDESCwildfire.151"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.151"
	}
}
#Heal courtier basic
character_event = { #Success
	id = wildfire.152
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_experiment

	is_triggered_only = yes

	desc = "EVTDESCwildfire.152"

	option = {
		name = "EVTOPTAwildfire.152"
		detract_society_currency_minor_effect = yes
		event_target:alchemist_healer = { show_portrait = yes }
		FROM = {
			tooltip = {
				heal_basic_effect = yes
				if = {
					limit = {
						NOT = { trait = fire_obsessed }
					}
					random = {
						chance = 10
						add_trait = fire_obsessed
						hidden_tooltip = { character_event = { id = trait_notification.2 } }
					}
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_healed_me
			}
			hidden_tooltip = {
				character_event = { id = wildfire.154 }
			}
		}
		event_target:alchemist_healer = {
			if = {
				limit = {
					NOT = { trait = fire_obsessed }
				}
				random = {
					chance = 20
					add_trait = fire_obsessed
					hidden_tooltip = { character_event = { id = trait_notification.2 } }
				}
			}
			if = {
				limit = {
					NOT = { trait = mystic }
				}
				random = {
					chance = 20
					add_trait = mystic
					hidden_tooltip = { character_event = { id = trait_notification.19 } }
				}
			}
		}
	}
}
character_event = { #Fail courtier basic
	id = wildfire.153
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_illness

	is_triggered_only = yes

	desc = "EVTDESCwildfire.153"

	option = {
		name = "EVTOPTAwildfire.153"
		detract_society_currency_minor_effect = yes
		event_target:alchemist_healer = { show_portrait = yes }
		FROM = {
			tooltip = {
				random_list = {
					45 = {
					}
					25 = {
						trigger = {
							NOT = { trait = wounded }
							NOT = { is_maimed_trigger = yes }
						}
						add_trait_silently_wounded_effect = yes
						hidden_tooltip = { character_event = { id = 38280 } }
					}
					15 = {
						trigger = { NOT = { trait = burned } }
						add_trait = burned
						hidden_tooltip = { character_event = { id = trait_notification.23 } }
					}
					10 = {
						trigger = { NOT = { is_maimed_trigger = yes } }
						add_maimed_trait_effect = yes
						hidden_tooltip = {
							remove_trait = wounded
						}
					}
					5 = {
						hidden_tooltip = { add_trait = burned }
						death = {
							death_reason = death_accident_wildfire
							killer = ROOT
						}
					}
				}
			}
			opinion = {
				who = PREV
				modifier = opinion_failed_to_heal_me
			}
			hidden_tooltip = {
				character_event = { id = wildfire.155 }
			}
		}
		event_target:alchemist_healer = {
			if = {
				limit = {
					NOT = { trait = fire_obsessed }
				}
				random = {
					chance = 10
					add_trait = fire_obsessed
					hidden_tooltip = { character_event = { id = trait_notification.2 } }
				}
			}
			random_list = {
				45 = {
				}
				25 = {
					trigger = {
						NOT = { trait = wounded }
						NOT = { is_maimed_trigger = yes }
					}
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				15 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				10 = {
					trigger = { NOT = { is_maimed_trigger = yes } }
					add_maimed_trait_effect = yes
					hidden_tooltip = {
						remove_trait = wounded
					}
				}
				5 = {
					hidden_tooltip = { add_trait = burned }
					death = {
						death_reason = death_accident_wildfire
						killer = ROOT
					}
				}
			}
		}
	}
}
character_event = { #Inform target Success basic
	id = wildfire.154
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_experiment

	is_triggered_only = yes

	desc = "EVTDESCwildfire.154"

	option = {
		name = "EVTOPTAwildfire.154"
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "EVTOPTBwildfire.154" #Join society
		trigger = {
			NOT = { is_in_society = yes }
			age = 16
			is_nomadic = no
			NOR = {
				trait = kingsguard
				#trait = nightswatch
				trait = maester
				trait = archmaester
				has_priest_trait_trigger = yes
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 1000
				OR = {
					trait = mystic
					trait = scholar
					trait = fire_obsessed
					trait = lunatic
				}
			}
			modifier = {
				factor = 0.5
				is_ruler = yes
				is_lowborn = no
			}
			modifier = {
				factor = 0.5
				is_lowborn = no
			}
		}
		join_society = alchemists_guild
		FROM = {
			hidden_tooltip = {
				character_event = { id = wildfire.156 days = 1 }
			}
		}
	}

	after = {
		event_target:alchemist_healer = { show_portrait = yes }
		heal_basic_effect = yes
		if = {
			limit = {
				NOT = { trait = fire_obsessed }
			}
			random = {
				chance = 10
				add_trait = fire_obsessed
				hidden_tooltip = { character_event = { id = trait_notification.2 } }
			}
		}
		hidden_tooltip = { remove_character_modifier = wildfire_healing_timer }
		if = {
			limit = { character = FROM } #healing self
			detract_society_currency_minor_effect = yes
			event_target:alchemist_healer = {
				if = {
					limit = {
						NOT = { trait = fire_obsessed }
					}
					random = {
						chance = 20
						add_trait = fire_obsessed
						hidden_tooltip = { character_event = { id = trait_notification.2 } }
					}
				}
				if = {
					limit = {
						NOT = { trait = mystic }
					}
					random = {
						chance = 20
						add_trait = mystic
						hidden_tooltip = { character_event = { id = trait_notification.19 } }
					}
				}
			}
		}
	}
}
character_event = { #Inform target Fail basic
	id = wildfire.155
	border = GFX_event_normal_frame_intrigue
	picture = GFX_evt_illness

	is_triggered_only = yes

	desc = "EVTDESCwildfire.155"

	option = {
		name = "EVTOPTAwildfire.155"
		event_target:alchemist_healer = { show_portrait = yes }
		random_list = {
			45 = {
			}
			25 = {
				trigger = {
					NOT = { trait = wounded }
					NOT = { is_maimed_trigger = yes }
				}
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = 38280 } }
			}
			15 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			10 = {
				trigger = { NOT = { is_maimed_trigger = yes } }
				add_maimed_trait_effect = yes
				hidden_tooltip = {
					remove_trait = wounded
				}
			}
			5 = {
				hidden_tooltip = { add_trait = burned }
				death = {
					death_reason = death_accident_wildfire
					killer = FROM
				}
			}
		}
		if = {
			limit = { character = FROM } #healing self
			detract_society_currency_minor_effect = yes
			if = {
				limit = { NOT = { character = event_target:alchemist_healer } }
				event_target:alchemist_healer = {
					random_list = {
						45 = {
						}
						25 = {
							trigger = {
								NOT = { trait = wounded }
								NOT = { is_maimed_trigger = yes }
							}
							add_trait_silently_wounded_effect = yes
							hidden_tooltip = { character_event = { id = 38280 } }
						}
						15 = {
							trigger = { NOT = { trait = burned } }
							add_trait = burned
							hidden_tooltip = { character_event = { id = trait_notification.23 } }
						}
						10 = {
							trigger = { NOT = { is_maimed_trigger = yes } }
							add_maimed_trait_effect = yes
							hidden_tooltip = {
								remove_trait = wounded
							}
						}
						5 = {
							hidden_tooltip = { add_trait = burned }
							death = {
								death_reason = death_accident_wildfire
								killer = ROOT
							}
						}
					}
				}
			}
		}
	}
}
character_event = { #Inform target joined society
	id = wildfire.156
	desc = "EVTDESCwildfire.156"
	border = GFX_event_normal_frame_intrigue

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.156"
		add_society_currency_minor_effect = yes
	}
}
#POWER: Elixir of immortality
character_event = {
	id = wildfire.160
	desc = "EVTDESCwildfire.160"
	picture = GFX_evt_experiment

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.160" #Do it!
		detract_society_currency_major_effect = yes
		random_list = {
			50 = { #success
				modifier = {
					factor = 1.5
					learning = 18
				}
				modifier = {
					factor = 1.5
					learning = 21
				}
				modifier = {
					factor = 1.5
					learning = 24
				}
				modifier = {
					factor = 1.5
					learning = 27
				}
				custom_tooltip = {
					text = TOOLTIPwildfire.160A
					hidden_tooltip = {
						character_event = { id = wildfire.161 days = 3 }
					}
				}
			}
			50 = { #fail
				modifier = {
					factor = 1.5
					learning < 12
				}
				custom_tooltip = {
					text = TOOLTIPwildfire.160B
					hidden_tooltip = {
						character_event = { id = wildfire.162 days = 3 }
					}
				}
			}
			50 = { #catasrophic fail
				modifier = {
					factor = 1.5
					learning < 12
				}
				modifier = {
					factor = 1.5
					learning < 9
				}
				modifier = {
					factor = 1.5
					learning < 6
				}
				custom_tooltip = {
					text = TOOLTIPwildfire.160C
					hidden_tooltip = {
						character_event = { id = wildfire.163 days = 3 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTBwildfire.160" #No
		ai_chance = { factor = 0 }
		hidden_tooltip = { remove_character_modifier = attempted_elixir_of_immortaility }
	}
}
character_event = { #Success!
	id = wildfire.161
	desc = "EVTDESCwildfire.161"
	picture = GFX_evt_powerful_ruler

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.161"
		add_trait = immortal
		if = {
			limit = {
				NOT = { trait = fire_obsessed }
			}
			random = {
				chance = 50
				add_trait = fire_obsessed
				hidden_tooltip = { character_event = { id = trait_notification.2 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = lunatic }
			}
			random = {
				chance = 33
				add_trait = lunatic
				hidden_tooltip = { character_event = { id = 38304 } }
			}
		}
	}
}
character_event = { #Fail
	id = wildfire.162
	desc = "EVTDESCwildfire.162"
	picture = GFX_evt_scientist

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.162"
		if = {
			limit = {
				NOT = { trait = fire_obsessed }
			}
			random = {
				chance = 25
				add_trait = fire_obsessed
				hidden_tooltip = { character_event = { id = trait_notification.2 } }
			}
		}
	}
}
character_event = { #Catasrophic Fail
	id = wildfire.163
	desc = "EVTDESCwildfire.163"
	picture = GFX_evt_illness

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.163"
		random_list = {
			25 = {
			}
			40 = {
				trigger = { is_ill = no }
				if = {
					limit = { NOT = { has_dlc = "Reapers" } }
					add_trait = ill
					# hidden_tooltip = { character_event = { id = 38190 } }
				}
				if = {
					limit = { has_dlc = "Reapers" }
					set_character_flag = disease_not_serious
					add_symptom_effect = yes
				}
			}
			10 = {
				trigger = { is_ill = no }
				if = {
					limit = { NOT = { has_dlc = "Reapers" } }
					add_trait = pneumonic
					blessing_removes_disease_effect = yes
					deaths_gift_removes_disease_effect = yes
					# hidden_tooltip = { character_event = { id = 38190 } }
				}
				if = {
					limit = { has_dlc = "Reapers" }
					add_symptom_effect = yes
				}
			}
			10 = {
				death = {
					death_reason = death_accident_wildfire
				}
			}
		}
		if = {
			limit = {
				NOT = { trait = fire_obsessed }
			}
			random = {
				chance = 15
				add_trait = fire_obsessed
				hidden_tooltip = { character_event = { id = trait_notification.2 } }
			}
		}
	}
}
#Inform player no wisdoms like them
character_event = {
	id = wildfire.170
	desc = "EVTDESCwildfire.170"
	picture = GFX_evt_pyromancer

	is_triggered_only = yes

	immediate = { job_chancellor = { save_event_target_as = advisor } }

	option = {
		name = "EVTOPTAwildfire.170"
		custom_tooltip = {
			text = TOOLTIPwildfire.170
		}
	}
}

#Siege lost, burn them all???
character_event = {
	id = wildfire.180
	picture = GFX_evt_pyromancer
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	desc = {
		text = "EVTDESCwildfire.180"
		trigger = {
			NOT = { event_target:siege_alchemist = { always = yes } }
		}
	}
	desc = {
		text = "EVTDESCwildfire.180B"
		trigger = {
			event_target:siege_alchemist = { character = ROOT }
		}
	}
	desc = {
		text = "EVTDESCwildfire.180C"
		trigger = {
			event_target:siege_alchemist = { NOT = { character = ROOT } }
		}
	}

	immediate = {
		FROM = { save_event_target_as = siege_leader }
		#find alcemist for loc
		if = {
			limit = { ai = no }
			if = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 3
					prisoner = no
					is_incapable = no
					NOT = { is_inaccessible_trigger = yes }
				}
				save_event_target_as = siege_alchemist
			}
			random_courtier = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 3
					OR = {
						opinion = { who = ROOT value = 0 }
						ROOT = { society_member_of = alchemists_guild }
					}
					NOT = { trait = kind }
					NOT = { trait = honorable }
				}
				save_event_target_as = siege_alchemist
			}
			if = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 2
					prisoner = no
					is_incapable = no
					NOT = { is_inaccessible_trigger = yes }
				}
				save_event_target_as = siege_alchemist
			}
			random_courtier = {
				limit = {
					society_member_of = alchemists_guild
					society_rank >= 2
					OR = {
						opinion = { who = ROOT value = 0 }
						ROOT = { society_member_of = alchemists_guild }
					}
					NOT = { trait = kind }
					NOT = { trait = honorable }
				}
				save_event_target_as = siege_alchemist
			}
		}
	}

	option = {
		name = "EVTOPTAwildfire.180"
		tooltip_info = lunatic
		custom_tooltip = {
			text = TOOLTIPwildfire.180
			hidden_tooltip = {
				random = { #Chance courtier intervenes
					chance = 50
					random_realm_character = {
						limit = {
							is_liege_or_above = ROOT
							location = { province_id = event_target:siege_location }
							in_command = no
							prisoner = no
							is_incapable = no
							is_adult = yes
							has_pilgrimage_trait_trigger = no
							has_severe_disability_trigger = no
							OR = {
								AND = {
									liege = { character = ROOT }
									OR = {
										is_voter = yes
										has_minor_title = title_bodyguard
										has_minor_title = title_bloodrider
										has_minor_title = title_captain_of_guard
									}
								}
								trait = kingsguard
								sibling = ROOT
								is_parent_of = ROOT
								is_child_of = ROOT
								is_married = ROOT
								any_consort = { character = ROOT }
							}
							OR = {
								combat_rating = 70
								diplomacy = 12
								intrigue = 12
								higher_tier_than = BARON
								trait = kingsguard
								has_minor_title = title_bodyguard
								has_minor_title = title_bloodrider
								has_minor_title = title_captain_of_guard
							}
							NAND = {
								trait = lunatic
								opinion = { who = ROOT value = 0 }
							}
							NOT = { character = ROOT }
							NOT = { character = event_target:siege_alchemist }
						}
						character_event = { id = wildfire.185 }
						break = yes
					}
				}
				#Success
				random_list = {
					50 = { #Wildfire outbreak
						character_event = { id = wildfire.181 }
					}
					50 = { #Province becomes ruin, kills all those present
						character_event = { id = wildfire.183 }
					}
				}
			}
		}
		event_target:siege_alchemist = {
			tooltip = { show_portrait = yes }
		}

		ai_chance = {
			factor = 100
			modifier = {
				factor = 4
				trait = fire_obsessed
			}
			modifier = {
				factor = 4
				trait = possessed
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
		}
	}

	option = {
		name = "EVTOPTBwildfire.180"
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = craven
			}
		}
	}
}
character_event = { #Succeeds- outbreak!
	id = wildfire.181
	desc = "EVTDESCwildfire.181"
	picture = GFX_evt_wildfire_city

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.181"
		FROMFROMFROM = {
			location = {
				add_province_modifier = {
					name = wildfire_outbreak
					duration = 365
				}
				if = {
					limit = { has_province_modifier = making_wildfire }
					remove_province_modifier = making_wildfire
				}
				if = {
					limit = { has_province_modifier = wildfire_1 }
					remove_province_modifier = wildfire_1
				}
				if = {
					limit = { has_province_modifier = wildfire_2 }
					remove_province_modifier = wildfire_2
				}
				if = {
					limit = { has_province_modifier = wildfire_3 }
					remove_province_modifier = wildfire_3
				}
				if = {
					limit = { has_province_modifier = wildfire_4 }
					remove_province_modifier = wildfire_4
				}
				if = {
					limit = { has_province_modifier = wildfire_5 }
					remove_province_modifier = wildfire_5
				}
				hidden_tooltip = {
					province_event = { id = wildfire.22 days = 240 random = 110 }  #outbreak ends
				}
			}
		}
		random_list = {
			15 = { }
			25 = {
				trigger = { NOT = { trait = burned } }
				add_trait = burned
				hidden_tooltip = { character_event = { id = trait_notification.23 } }
			}
			25 = {
				trigger = { NOT = { trait = wounded } }
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = {
						id = 38280 #Notify
					}
				}
			}
			20 = {
				trigger = { is_maimed_trigger = no }
				add_maimed_trait_effect = yes
			}
			15 = {
				hidden_tooltip = { add_trait = burned }
				red_god_resurrect_effect = yes #check for rhllor resurrection
				death = { death_reason = death_accident_wildfire }
			}
		}
		hidden_tooltip = {
			event_target:siege_leader = { character_event = { id = wildfire.182 } }
			any_player = {
				limit = {
					OR = {
						same_realm = ROOT
						same_realm = event_target:siege_leader
						is_within_diplo_range = ROOT
					}
					NOT = { character = event_target:siege_leader }
					NOT = { character = ROOT }
				}
				character_event = { id = wildfire.182 }
			}
		}
	}
}
character_event = { #Inform
	id = wildfire.182
	desc = "EVTDESCwildfire.182"
	picture = GFX_evt_wildfire_city

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.182"
		if = {
			limit = { character = event_target:siege_leader }
			random_list = {
				15 = { }
				25 = {
					trigger = { NOT = { trait = burned } }
					add_trait = burned
					hidden_tooltip = { character_event = { id = trait_notification.23 } }
				}
				25 = {
					trigger = { NOT = { trait = wounded } }
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = {
						character_event = {
							id = 38280 #Notify
						}
					}
				}
				20 = {
					trigger = { is_maimed_trigger = no }
					add_maimed_trait_effect = yes
				}
				15 = {
					hidden_tooltip = { add_trait = burned }
					red_god_resurrect_effect = yes #check for rhllor resurrection
					death = { death_reason = death_accident_wildfire killer = FROM }
				}
			}
		}
	}
}
character_event = { #Succeeds- province ruined!
	id = wildfire.183
	desc = "EVTDESCwildfire.183"
	picture = GFX_evt_wildfire_city

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.183"
		FROMFROMFROM = {
			location = {
				hidden_tooltip = {
					any_character = {
						limit = {
							OR = {
								character = event_target:siege_leader
								location = { province_id = PREVPREV }
							}
							NOT = { character = ROOT }
							NOT = { has_pilgrimage_trait_trigger = yes }
						}
						set_character_flag = wildfire_death
						character_event = { id = wildfire.184 }
					}
				}
				custom_tooltip = {
					text = TOOLTIPwildfire.183
					make_province_ruin_effect = yes
				}
			}
		}
		hidden_tooltip = {
			any_player = {
				limit = {
					OR = {
						same_realm = ROOT
						same_realm = event_target:siege_leader
						is_within_diplo_range = ROOT
					}
					NOT = { character = ROOT }
					NOT = { has_character_flag = wildfire_death }
				}
				character_event = { id = wildfire.184 }
			}
		}
		add_trait = burned
		red_god_resurrect_effect = yes #check for rhllor resurrection
		death = { death_reason = death_accident_wildfire }
	}
}
character_event = { #Inform
	id = wildfire.184
	desc = "EVTDESCwildfire.184"
	picture = GFX_evt_wildfire_city

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.184"
		if = {
			limit = { has_character_flag = wildfire_death }
			add_trait = burned
			red_god_resurrect_effect = yes #check for rhllor resurrection
			death = { death_reason = death_accident_wildfire killer = FROM }
			clr_character_flag = wildfire_death
		}
	}
}
character_event = { #Courtier intervenes
	id = wildfire.185
	desc = "EVTDESCwildfire.185"
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.185" #Take into custody and give to siege winner
		ai_chance = {
			factor = 50
		}
		prestige = 100
		custom_tooltip = {
			text = TOOLTIPwildfire.185
			FROM = { character_event = { id = wildfire.186 } }
		}
	}
	option = {
		name = "EVTOPTBwildfire.185" #Kill...
		trigger = {
			NOT = { trait = honorable }
			NOT = { trait = honest }
		}
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				trait = kind
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						is_child_of = ROOT # Not my own children
						is_grandchild_of = ROOT
						has_blood_oath_with = ROOT
						is_lover = ROOT
						is_friend = ROOT
					}
				}
			}

			modifier = { #motives
				factor = 0
				NOR = {
					# Rivals
					is_foe = FROM

					# Kill a kinslayer if im kin
					AND = {
						is_lowborn = no
						dynasty = FROM
						NOT = { has_cutthroat_religion_trigger = yes }
						FROM = { is_any_kinslayer_trigger = yes }
					}

					# A lover of spouse...
					AND = {
						OR = {
							trait = envious
							trait = proud
							trait = just
							NOT = { opinion = { who = FROM value = 0 } }
						}
						any_spouse = { is_lover = FROM }
					}

					# Liege...
					AND = { #Heathen
						NOT = { religion_group = FROM }
						NOT = { trait = cynical }
						OR = {
							trait = zealous
							has_landed_title = k_the_most_devout
							has_opinion_modifier = { who = FROM modifier = opinion_religion_threatened }
						}
					}
					FROM = { #Tyrant
						check_variable = { which = "tyrant" value = 14.9 }
						NOT = { trait = tyrannical_stain }
					}

					# Night's Watch broke vows
					AND = {
						trait = nightswatch
						FROM = {
							OR = {
								has_landed_title = k_nightswatch
								has_character_modifier = NW_broken_vows
							}
						}
					}

					# Titles/Family concerns
					AND = {
						OR = {
							trait = envious
							trait = ambitious
							trait = greedy
							trait = selfish
							trait = proud
							AND = {
								trait = familyperson
								NOT = { is_close_relative = FROM }
							}
							NOT = { opinion = { who = FROM value = 0 } }
						}
						OR = {
							AND = {
								OR = {
									any_pretender_title = { # Get rid of the current ruler or heir if I'm a pretender
										OR = {
											current_heir = { character = FROM }
											holder_scope = { character = FROM }
										}
									}
									any_heir_title = { # Kill a ruler if I'm the heir
										holder_scope = { character = FROM }
										NOT = { has_law = succ_appointment }
									}
								}
								OR = {
									NOT = { trait = just }
									OR = {
										has_opinion_modifier = { who = FROM modifier = opinion_usurped_title }
										any_pretender_title = {
											current_heir = { character = FROM }
											holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
										}
									}
								}
							}
							any_child = { # Gets rid of obstacles in the way of a child's succession
								OR = {
									any_pretender_title = {
										current_heir = { character = FROM }
									}
									any_heir_title = {
										holder_scope = { character = FROM }
									}
								}
								OR = {
									PREV = { NOT = { trait = just } }
									any_pretender_title = {
										current_heir = { character = FROM }
										holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
									}
									has_opinion_modifier = { who = FROM modifier = opinion_usurped_title }
								}
							}
							any_spouse = {	# Gets rid of obstacles in the way of a spouse's succession
								OR = {
									any_pretender_title = { # Get rid of the current heir to a title the character's spouse is a pretender to
										current_heir = { character = FROM }
									}
									any_heir_title = { # Get rid of a ruler the spouse is heir to
										holder_scope = { character = FROM }
									}
								}
								OR = {
									PREV = { NOT = { trait = just } }
									any_pretender_title = {
										current_heir = { character = FROM }
										holder_scope = { reverse_has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
									}
									has_opinion_modifier = { who = FROM modifier = opinion_usurped_title }
								}
							}
							FROM = { #Is married/betrothed to me/relative and is a douche
								is_ruler = yes
								is_female = no
								OR = {
									any_spouse = {
										OR = {
											character = FROM
											is_close_relative = FROM
										}
										NOT = { opinion = { who = PREV value = 0 } }
									}
									betrothed = {
										OR = {
											character = FROM
											is_close_relative = FROM
										}
										NOT = { opinion = { who = PREV value = 0 } }
									}
								}
								NOT = { reverse_opinion = { who = PREV value = 0 } }
								OR = {
									trait = cruel
									trait = lunatic
									trait = impaler
									trait = arbitrary
								}
							}
						}
					}

					AND = { #These motives are invalid for just characters
						NOT = { trait = just }
						OR = {
							trait = ruthless
							trait = ambitious
							trait = proud
							trait = greedy
							trait = envious
							trait = selfish
							trait = arbitrary
						}
						OR = {
							# Claimant, kill competent holder
							FROM = {
								is_ruler = yes
								any_demesne_title = {
									FROM = { has_claim = PREV }
								}
								is_incapable = no
								age = 16
								NOT = { trait = bastard }
								NOT = { trait = lunatic }
								NOT = { check_variable = { which = "tyrant" value = 9.9 } }
								martial = 8
								stewardship = 8
								diplomacy = 8
								intrigue = 8
								NOT = { has_character_modifier = suspected_bastard }
							}
							# I want to be regent
							AND = {
								has_ambition = obj_become_regent
								has_minor_title = title_appointed_regent
								FROM = {
									is_liege_of = PREV
									current_heir = {
										OR = {
											trait = incapable
											NOT = { age = 16 }
										}
									}
								}
							}
						}
					}
				}
			}
			modifier = {
				factor = 0
				pacifist = yes
				NOT = { trait = cynical }
			}

			modifier = {
				factor = 0.01
				trait = content
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}

			modifier = {
				factor = 0
				# Kinslaying is generally discouraged
				OR = {
					AND = {
						is_lowborn = no
						dynasty = FROM
					}
					is_close_relative = FROM
				}
				NOT = { trait = arbitrary }
				NOT = { trait = ruthless }
				NOT = { trait = cruel }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}

			modifier = {
				factor = 6
				trait = just # If a just character actually can get this plot, be extra-willing to use it
			}
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = { #non trusting kin will really try to kill kinslayers
				factor = 10
				is_lowborn = no
				dynasty = FROM
				NOT = { trait = trusting }
				FROM = { is_any_kinslayer_trigger = yes }
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 2.0
				trait = cruel
			}
			modifier = {
				factor = 2.0
				trait = deceitful
			}
			modifier = {
				factor = 3.0
				trait = ambitious
			}
			modifier = {
				factor = 0
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -9 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -29 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 1.25
				NOT = { opinion = { who = FROM value = -69 } }
			}
			modifier = {
				factor = 1.35
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 1.45
				NOT = { opinion = { who = FROM value = -89 } }
			}
			modifier = {
				factor = 1.6
				NOT = { opinion = { who = FROM value = -99 } }
			}

			#Enemies
			modifier = {
				factor = 10
				is_foe = FROM
			}

			# People with ambitions should always target the natural obstacles to those ambitions
			modifier = {
				factor = 10
				has_ambition = obj_become_heir
				any_pretender_title = {
					OR = {
						current_heir = { character = FROM }
						holder_scope = { character = FROM }
					}
				}
			}
			modifier = {
				factor = 10
				has_ambition = obj_become_king
				OR = {
					any_pretender_title = {
						tier = EMPEROR
						OR = {
							current_heir = { character = FROM }
							holder_scope = { character = FROM }
						}
					}
					any_heir_title = {
						tier = EMPEROR
						holder_scope = { character = FROM }
					}
					FROM = {
						is_ruler = yes
						any_demesne_title = {
							tier = EMPEROR
							FROM = { has_claim = PREV }
						}
						is_incapable = no
						age = 16
						NOT = { trait = bastard }
						NOT = { trait = lunatic }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
						martial = 8
						stewardship = 8
						diplomacy = 8
						intrigue = 8
						NOT = { has_character_modifier = suspected_bastard }
					}
				}
			}
			modifier = {
				factor = 10
				has_ambition = obj_become_lord_paramount
				OR = {
					any_pretender_title = {
						higher_tier_than = PREV
						OR = {
							current_heir = { character = FROM }
							holder_scope = { character = FROM }
						}
					}
					any_heir_title = {
						higher_tier_than = PREV
						holder_scope = { character = FROM }
					}
					FROM = {
						is_ruler = yes
						any_demesne_title = {
							higher_tier_than = PREVPREV
							FROM = { has_claim = PREV }
						}
						is_incapable = no
						age = 16
						NOT = { trait = bastard }
						NOT = { trait = lunatic }
						NOT = { check_variable = { which = "tyrant" value = 9.9 } }
						martial = 8
						stewardship = 8
						diplomacy = 8
						intrigue = 8
						NOT = { has_character_modifier = suspected_bastard }
					}
				}
			}
			modifier = {
				factor = 10
				has_ambition = obj_wants_landed_title
				OR = {
					any_pretender_title = {
						OR = {
							current_heir = { character = FROM }
							holder_scope = { character = FROM }
						}
					}
					any_heir_title = { holder_scope = { character = FROM } }
				}
			}
			modifier = {
				factor = 10
				has_ambition = obj_bloodline_iron_throne
				e_iron_throne = {
					OR = {
						current_heir = { character = FROM }
						holder_scope = { character = FROM }
					}
				}
				OR = {
					any_pretender_title = { title = e_iron_throne }
					any_spouse = {
						any_pretender_title = { title = e_iron_throne }
					}
					any_dynasty_member = {
						any_pretender_title = { title = e_iron_throne }
					}
					e_iron_throne = {
						holder_scope = { character = FROM }
						current_heir = {
							OR = {
								character = PREVPREV
								is_married = PREVPREV
								dynasty = PREVPREV
							}
						}
					}
				}
			}

			modifier = {
				factor = 10
				trait = nightswatch
				FROM = {
					OR = {
						has_landed_title = k_nightswatch
						has_character_modifier = NW_broken_vows
					}
				}
			}
		}
		prestige = 200
		tooltip = { change_variable = { which = "dishonorable" value = 10 } }
		custom_tooltip = {
			text = TOOLTIPwildfire.185B
			FROM = { character_event = { id = wildfire.188 } }
			if = {
				limit = {
					has_nickname = no
				}
				if = {
					limit = {
						FROM = {
							is_female = no
							is_feudal_monarch_trigger = yes
							NOT = { culture = dothraki }
							NOT = { culture = jogos_nhai }
							NOT = { culture_group = hyrkoon_group }
							NOT = { culture_group = yi_ti_group }
							NOT = { culture = qartheen }
							NOT = { #Not eastern emperors
								AND = {
									tier = EMPEROR
									NOT = {
										OR = {
											culture_group = andal
											culture_group = dornish
											culture_group = first_men
											culture_group = free_folk
											culture = summer_islander
											primary_title = {
												OR = {
													capital_scope = { region = world_westeros }
													title = e_iron_isles #These titles dont have capitals
													title = e_riverlands
													title = e_iron_throne
												}
											}
										}
									}
								}
							}
						}
						lower_tier_than = KING
					}
					random = {
						chance = 50
						give_nickname = nick_the_kingslayer
					}
				}
			}
		}
	}
}
character_event = { #Inform apprehended by courtier
	id = wildfire.186
	desc = "EVTDESCwildfire.186"
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.186"
		set_character_flag = captured_in_battle
		event_target:siege_leader = {
			if = {
				limit = { is_ruler = yes }
				ROOT = { imprison = PREV }
				character_event = { id = wildfire.187 }
			}
			else = {
				liege = {
					ROOT = { imprison = PREV }
					character_event = { id = wildfire.187 }
				}
			}
		}
	}
}
character_event = { #Inform target caught
	id = wildfire.187
	desc = "EVTDESCwildfire.187"
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.187"
		show_portrait = FROMFROM
	}
}
character_event = { #Inform killed by courtier
	id = wildfire.188
	desc = "EVTDESCwildfire.188"
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.188"
		hidden_tooltip = {
			any_player = {
				limit = {
					OR = {
						same_realm = ROOT
						same_realm = event_target:siege_leader
						is_within_diplo_range = ROOT
					}
					NOT = { character = event_target:siege_leader }
					NOT = { character = ROOT }
					NOT = { has_character_flag = wildfire_death }
				}
				character_event = { id = wildfire.189 }
			}
		}
		save_event_target_as = target_victim
		FROM = {
			set_character_flag = murder_event_override
			character_event = { id = 10 } #murder consequences
		}
		FROM_murder_red_god_resurrect_effect = yes
		death = {
			death_reason = death_murder_slayed
			killer = FROM
		}
	}
}
character_event = { #Inform world
	id = wildfire.189
	desc = "EVTDESCwildfire.189"
	picture = GFX_evt_lunatic

	is_triggered_only = yes

	option = {
		name = "EVTOPTAwildfire.189"
		show_portrait = FROMFROM
	}
}