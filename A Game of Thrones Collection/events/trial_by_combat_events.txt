namespace = trial_by_combat

#Rodri's Trial-By-Combat event chain
#adapted for the duel engine by knuckey

#Demanded trial by combat player info event
character_event = {
	id = trial_by_combat.999
	desc = EVTDESCtrial_by_combat.999
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.999"
		custom_tooltip = {
			text = TOOLTIPtrial_by_combat.999
		}
	}
}

#Character receives champion request from prisoner
letter_event = {
	id = trial_by_combat.1
	desc = "EVTDESCtrial_by_combat.1"
	picture = "GFX_trial_by_combat"
	is_triggered_only = yes

	show_from_from = yes

	trigger = {
		FROM = {
			FROM = {
				prisoner = yes
				is_alive = yes
				has_character_flag = choosing_champion
				ROOT = {
					OR = {
						AND = {
							dynasty = PREV
							is_close_relative = PREV
						}
						liege = { character = PREVPREV }
						is_friend = PREV
					}
				}
			}
		}
	}

	immediate = { FROMFROM = { host = { save_event_target_as = FROMFROM_captor } } }

	option = { # yes he will fight
		name = "EVTOPTAtrial_by_combat.1"
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				NOT = { opinion = { who = FROMFROM value = -30 } }
				NOR = {
					trait = honorable
					trait = just
					trait = kingsguard
					AND = {
						is_close_relative = FROMFROM
						trait = familyperson
					}
				}
			}
			modifier = { #will not fight against family host
				factor = 0
				OR = {
					is_child_of = event_target:FROMFROM_captor
					is_grandchild_of = event_target:FROMFROM_captor
					is_parent_of = event_target:FROMFROM_captor
					is_married = event_target:FROMFROM_captor
					sibling = event_target:FROMFROM_captor
				}
				OR = {
					opinion = { who = event_target:FROMFROM_captor value = -25 }
					NOT = { opinion = { who = FROMFROM value = 25 } }
				}
				NOT = { trait = kingsguard }
			}
			modifier = { #will not usually fight against close relative host
				factor = 0
				OR = {
					is_close_relative = event_target:FROMFROM_captor
					AND = {
						dynasty = event_target:FROMFROM_captor
						is_lowborn = no
					}
				}
				OR = {
					opinion = { who = event_target:FROMFROM_captor value = -25 }
					NOT = { opinion = { who = FROMFROM value = 25 } }
				}
				NOR = {
					is_close_relative = FROMFROM
					is_married = FROMFROM
					AND = {
						dynasty = FROMFROM
						is_lowborn = no
					}
					opinion = { who = FROMFROM value = 30 }
				}
				NOT = { trait = kingsguard }
			}

			modifier = {
				factor = 2
				trait = kingsguard
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 1.5
				combat_rating = 80
			}
			modifier = {
				factor = 1.5
				combat_rating = 60
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 15 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 40 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 65 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 90 }
			}
			modifier = {
				factor = 3
				is_friend = FROMFROM
			}
			modifier = {
				factor = 1.5
				dynasty = FROMFROM
			}
			modifier = {
				factor = 1.5
				is_close_relative = FROMFROM
			}
			modifier = {
				factor = 5
				trait = familyperson
				is_close_relative = FROMFROM
			}


			modifier = {
				factor = 1.5
				NOT = { opinion = { who = event_target:FROMFROM_captor value = -15 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = event_target:FROMFROM_captor value = -40 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = event_target:FROMFROM_captor value = -65 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = event_target:FROMFROM_captor value = -90 } }
			}
			modifier = {
				factor = 3
				is_rival = event_target:FROMFROM_captor
			}
		}
		FROM = {
			FROM = {
				opinion = { who = ROOT modifier = champion_of_relative }
				letter_event = { id = trial_by_combat.2 tooltip = EVTTOOLTIPtrial_by_combat.2 }
			}
		}
		piety = 35
	}

	option = { # no
		name = "EVTOPTBtrial_by_combat.1"
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				NOT = { trait = craven }
				NOT = { trait = selfish }
				opinion = { who = FROMFROM value = 15 }
				OR = {
					trait = honorable
					trait = just
					trait = kingsguard
					AND = {
						is_close_relative = FROMFROM
						trait = familyperson
					}
					combat_rating = 60
				}
				NOR = {
					is_close_relative = event_target:FROMFROM_captor
					is_married = event_target:FROMFROM_captor
					AND = {
						dynasty = event_target:FROMFROM_captor
						is_lowborn = no
					}
				}
			}
			modifier = {
				factor = 2
				trait = selfish
			}
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 1.5
				NOT = { combat_rating = 20 }
			}
			modifier = {
				factor = 1.5
				NOT = { combat_rating = 40 }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -15 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -40 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -65 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROMFROM value = -90 } }
			}
			modifier = {
				factor = 1.5
				is_ruler = yes
			}
			modifier = {
				factor = 1.5
				is_primary_heir = yes
			}

			modifier = {
				factor = 1.5
				opinion = { who = event_target:FROMFROM_captor value = 15 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:FROMFROM_captor value = 40 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:FROMFROM_captor value = 65 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = event_target:FROMFROM_captor value = 90 }
			}
			modifier = {
				factor = 3
				is_friend = event_target:FROMFROM_captor
			}
			modifier = {
				factor = 1.5
				dynasty = event_target:FROMFROM_captor
			}
			modifier = {
				factor = 1.5
				is_close_relative = event_target:FROMFROM_captor
			}
		}
		FROM = {
			FROM = {
				opinion = {
					who = ROOT
					modifier = refused_championing
					months = 60
				}
				letter_event = { id = trial_by_combat.3 tooltip = EVTTOOLTIPtrial_by_combat.3 }
			}
		}
	}
}
letter_event = { # inform accept
	id = trial_by_combat.2
	desc = "EVTDESCtrial_by_combat.2"

	is_triggered_only = yes

	trigger = {
		FROM = { NOT = { character = ROOT } }
		has_opinion_modifier = { who = FROM modifier = champion_of_relative }
	}

	option = { #
		name = "EVTOPTAtrial_by_combat.2"
		clr_character_flag = choosing_champion
		hidden_tooltip = {
			FROM = { set_character_flag = champion_of_relative }
			host = {
				set_character_flag = prisoner_has_champion
				character_event = {
					id = trial_by_combat.4
					days = 2
				}
			}
		}
	}
}
letter_event = { # inform reject
	id = trial_by_combat.3
	desc = "EVTDESCtrial_by_combat.3"

	is_triggered_only = yes

	trigger = {
		FROM = { NOT = { character = ROOT } }
		has_opinion_modifier = { who = FROM modifier = refused_championing }
	}

	option = { #
		name = "EVTOPTAtrial_by_combat.3"
		set_character_flag = select_champion
		if = {
			limit = { ai = yes } #try again
			character_event = { id = trial_by_combat.27 days = 2 }
		}
	}
}
#Inform Host prisoner demands trial by combat
character_event = { #elijo champion
	id = trial_by_combat.4
	picture = "GFX_trial_by_combat"

	only_rulers = yes
	is_triggered_only = yes

	desc = {
		text = EVTDESCtrial_by_combat.4 #prisoner fights personally
		trigger = { NOT = { has_character_flag = prisoner_has_champion } }
	}
	desc = {
		text = EVTDESCtrial_by_combat.13 #prisoner has champion
		trigger = { has_character_flag = prisoner_has_champion }
	}

	trigger = {
		OR = {
			has_character_flag = lunatic_trial
			FROM = {
				host = {
					character = ROOT
					NOT = { has_character_flag = trial_by_combat }
				}
				prisoner = yes
			}
		}
	}

	immediate = {
		FROM = {
			opinion = { who = ROOT modifier = host_of_prisoner months = 1200 }
			set_character_flag = demmanded_trial_by_combat
			clr_character_flag = choosing_champion
			#Diplomatic immunity to prevent hostile actions during trial
			diplomatic_immunity = yes
			character_event = { id = trial.500 days = 365 } #failsafe
		}
		set_character_flag = trial_by_combat
	}

	option = { # Pick finest warriors    (cualquiera / lider e hijos incluidos)
		name = "EVTOPTAtrial_by_combat.4"
		trigger = {
			OR = {
				any_courtier = {
					NOT = { reverse_has_opinion_modifier = { who = FROM modifier = champion_of_relative } }
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					ai = yes
				}
				AND = {
					has_landed_title = e_iron_throne
					kingsguard = {
						is_alive = yes
						prisoner = no
						NOT = { has_severe_disability_trigger = yes }
					}
				}
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2.5
				any_courtier = {
					trait = skilled_warrior
				}
			}
			modifier = {
				factor = 5
				any_courtier = {
					trait = master_warrior
				}
			}
		}
		show_portrait = FROMFROM
		set_character_flag = sons_can_fight
		hidden_tooltip = { character_event = { id = trial_by_combat.6 } }
	}
	option = { # NO SONS
		name = "EVTOPTBtrial_by_combat.4"
		trigger = {
			NOT = {
				AND = {
					trait = cruel
					trait = lunatic
					OR = {
						trait = fire_obsessed
						religion = rhllor
					}
				}
			}
			any_courtier = {
				NOT = { reverse_has_opinion_modifier = { who = FROM modifier = champion_of_relative } }
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				ai = yes
				is_child_of = ROOT
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2.5
				any_courtier = {
					NOT = { is_child_of = ROOT }
					trait = skilled_warrior
				}
			}
			modifier = {
				factor = 5
				any_courtier = {
					NOT = { is_child_of = ROOT }
					trait = master_warrior
				}
			}
			modifier = {
				factor = 2
				trait = familyperson
			}
			modifier = {
				factor = 2
				NOT = { num_of_children = 3 }
			}
			modifier = {
				factor = 2
				NOT = { num_of_children = 2 }
			}
		}
		show_portrait = FROMFROM
		hidden_tooltip = { character_event = { id = trial_by_combat.6 } }
	}
	option = {
		name = "EVTOPTDtrial_by_combat.4"  #I will fight!
		trigger = {
			NOT = { character = FROM }
			OR = {
				trait = poor_warrior
				trait = trained_warrior
				trait = skilled_warrior
				trait = master_warrior
			}
			age = 16
			is_ill = no
			NOT = { has_severe_disability_trigger = yes }
			OR = {
				is_female = no
				female_get_masculine_event_trigger = yes
			}
			OR = {
				NOT = { is_short_trigger = yes }
				trait = skilled_warrior
			}
		}
		ai_chance = {
			factor = 5

			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = lunatic
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = humble
			}

			modifier = {
				factor = 10
				trait = master_warrior
			}
			modifier = {
				factor = 6
				trait = skilled_warrior
			}
			modifier = {
				factor = 3
				trait = trained_warrior
			}
			# Physical Strength Effects
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 0.5
				is_weak_trigger = yes
			}
			modifier = {
				factor = 0.5
				is_lazy_trigger = yes
			}

			# Cunning/Intelligence Effects
			modifier = {
				factor = 2
				is_genius_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 0.5
				is_imbecile_trigger = yes
			}
			modifier = {
				factor = 0.66
				is_dumb_trigger = yes
			}

			# Personality Effects
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.05
				trait = craven
			}

			# Wound Effects
			modifier = {
				factor = 0.5
				trait = wounded
			}

			# Health Effects
			modifier = {
				factor = 0.5
				is_ill = yes
			}
			modifier = {
				factor = 0.1
				has_epidemic = yes
			}

			# Body Shape Effects
			modifier = {
				factor = 4
				is_tall_trigger = yes
			}
			modifier = {
				factor = 0.25
				trait = hunchback
			}
			modifier = {
				factor = 0.25
				is_short_trigger = yes
			}
			modifier = {
				factor = 0.25
				trait = clubfooted
			}
			modifier = {
				factor = 0.8
				FROM = { trait = trained_warrior }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = skilled_warrior }
			}
			modifier = {
				factor = 0.3
				FROM = { trait = master_warrior }
			}
			modifier = {
				factor = 0.5
				tier = EMPEROR
			}
			modifier = {
				factor = 0.75
				tier = KING
			}
		}
		prestige = 50
		set_character_flag = elected_champion
		if = {
			limit = { NOT = { has_character_flag = prisoner_has_champion } }
			set_character_flag = self_elected_champion
			FROM = {
				hidden_tooltip = { character_event = { id = trial_by_combat.9 days = 1 }	 }
			}
		}
		if = {
			limit = { has_character_flag = prisoner_has_champion }
			set_character_flag = self_elected_champion_b
			show_portrait = FROMFROM
			FROM = {
				hidden_tooltip = { character_event = { id = trial_by_combat.17 days = 1 }	 }
			}
		}
	}

	option = {
		name = "EVTOPTEtrial_by_combat.4" # Denied
		trigger = {
			NOT = { has_character_modifier = giving_justice }
			NOT = { character = FROM }
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				trait = just
			}
			modifier = {
				factor = 0
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = honest
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 0.25
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = cynical
			}
		}
		show_portrait = FROMFROM
		any_courtier = {
			limit = { has_opinion_modifier = { who = ROOT modifier = host_of_prisoner } }
			hidden_tooltip = {
				clr_character_flag = demmanded_trial_by_combat
				add_character_modifier = { name = getting_justice duration = 365 }
				remove_opinion = {
					who = ROOT modifier = host_of_prisoner
				}
			}
			opinion = {
				who = ROOT modifier = denied_trial_by_combat  months = 60
			}
			character_event = { id = trial_by_combat.5 tooltip = "TOOLTIPtrial_by_combat.5" }
		}
		clr_character_flag = trial_by_combat
		hidden_tooltip = { remove_character_modifier = giving_justice }
		prestige = -100
	}

	option = { # Fire will be my champion
		name = "EVTOPTFtrial_by_combat.4"
		ai_chance = {
			factor = 100
		}
		trigger = {
			#has_character_flag = targaryen
			NOT = { character = FROM }
			trait = cruel
			trait = lunatic
			OR = {
				trait = fire_obsessed
				religion = rhllor
			}
		}
		clr_character_flag = trial_by_combat
		hidden_tooltip = { remove_character_modifier = giving_justice }
		if = {
			limit = { NOT = { religion = rhllor } }
			piety = -100
		}
		if = {
			limit = { NOT = { has_character_flag = prisoner_has_champion } }
			FROM = {
				character_event = { id = trial_by_combat.24 tooltip = EVTTOOLTIPtrial_by_combat.24 }
			}
		}
		if = {
			limit = { has_character_flag = prisoner_has_champion }
			clr_character_flag = prisoner_has_champion
			show_portrait = FROMFROM
			FROM = {
				character_event = { id = trial_by_combat.26 days = 1 tooltip = EVTTOOLTIPtrial_by_combat.26 }
			}
			FROMFROM = {
				character_event = { id = trial_by_combat.24 tooltip = EVTTOOLTIPtrial_by_combat.24 }
			}
		}
		if = {
			limit = { higher_tier_than = COUNT }
			change_variable = { which = fear_actions value = 5 }
			hidden_tooltip = { character_event = { id = faction_event_new.90 } }
		}
		if = {
			limit = { religion = rhllor }
			piety = 30
			increase_red_god_magic = yes
		}
	}

	option = { # Random Warrior
		name = "EVTOPTGtrial_by_combat.4"
		trigger = {
			NOR = {
				any_courtier = {
					NOT = { reverse_has_opinion_modifier = { who = FROM modifier = champion_of_relative } }
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					ai = yes
					combat_rating = 40
				}
				AND = {
					has_landed_title = e_iron_throne
					kingsguard = {
						is_alive = yes
						prisoner = no
						NOT = { has_severe_disability_trigger = yes }
					}
				}
			}
		}
		ai_chance = {
			factor = 25
		}
		capital_scope = {
			ROOT = {
				if = {
					limit = {
						NOT = { female_warrior_culture_trigger = yes }
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = no
						religion = PREV
						culture = PREV
					}
				}
				if = {
					limit = {
						female_warrior_culture_trigger = yes
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = yes
						religion = PREV
						culture = PREV
					}
				}
				new_character = {
					remove_trait = weak
					remove_trait = weak_1
					remove_trait = weak_2
					remove_trait = imbecile
					remove_trait = imbecile_1
					remove_trait = dwarf
					remove_trait = dwarf_1
					remove_trait = dwarf_2
					remove_trait = clubfooted
					remove_trait = hunchback
					remove_trait = inbred
					remove_trait = craven
					random_list = {
						15 = { add_trait = poor_warrior }
						70 = { add_trait = trained_warrior }
						15 = { add_trait = skilled_warrior }
					}
					if = {
						limit = { religion = the_seven }
						add_trait = knight
						if = {
							limit = {
								is_ruler = no
								NOT = { has_minor_title = title_prince }
								NOT = { has_minor_title = title_prince_AGOT }
								NOT = { has_minor_title = title_queen_mother }
								NOT = { has_minor_title = title_ruler_consort }
							}
							if = {
								limit = { is_female = no }
								set_special_character_title = title_ser
							}
							if = {
								limit = { is_female = yes }
								set_special_character_title = title_lady
							}
						}
					}
					hidden_tooltip = { character_event = { id = trial_by_combat.7 days = 1 } }
				}
			}
		}
	}
}
character_event = { # inform reject
	id = trial_by_combat.5
	desc = "EVTDESCtrial_by_combat.5"
	is_triggered_only = yes

	option = { #
		name = "EVTOPTAtrial_by_combat.5"
		hidden_tooltip = {
			random_opinion_modifier_target = {
				limit = {
					has_character_flag = champion_of_relative
					reverse_has_opinion_modifier = { who = ROOT modifier = champion_of_relative }
				}
				clr_character_flag = champion_of_relative
				reverse_remove_opinion = { who = ROOT modifier = champion_of_relative }
			}
		}
	}
}
character_event = { #select champion
	id = trial_by_combat.6
	desc = "EVTDESCtrial_by_combat.6"
	picture = "GFX_trial_by_combat"

	only_rulers = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_landed_title = e_iron_throne }
			clear_event_target = kingsguard_champ
			kingsguard = {
				limit = {
					combat_rating = 80
					is_alive = yes
					prisoner = no
					NOT = { has_severe_disability_trigger = yes }
					NOT = {
						ROOT = {
							any_courtier = {
								has_opinion_modifier = { who = PREV modifier = host_of_prisoner  }
								dynasty = PREVPREV
							}
						}
					}
					NOT = {
						liege = {
							NOT = { character = ROOT }
							reverse_has_opinion_modifier = { who = PREV modifier = loan_kingsguard }
						}
					}
					NOR = {
						war_with = ROOT
						any_liege = { war_with = ROOT }
					}
				}
				save_event_target_as = kingsguard_champ
			}
			if = {
				limit = { NOT = { event_target:kingsguard_champ = { always = yes } } }
				kingsguard = {
					limit = {
						combat_rating = 50
						is_alive = yes
						prisoner = no
						NOT = { has_severe_disability_trigger = yes }
						NOT = {
							ROOT = {
								any_courtier = {
									has_opinion_modifier = { who = PREV modifier = host_of_prisoner  }
									dynasty = PREVPREV
								}
							}
						}
						NOT = {
							liege = {
								NOT = { character = ROOT }
								reverse_has_opinion_modifier = { who = PREV modifier = loan_kingsguard }
							}
						}
						NOR = {
							war_with = ROOT
							any_liege = { war_with = ROOT }
						}
					}
					save_event_target_as = kingsguard_champ
				}
				if = {
					limit = { NOT = { event_target:kingsguard_champ = { always = yes } } }
					kingsguard = {
						limit = {
							combat_rating = 20
							is_alive = yes
							prisoner = no
							NOT = { has_severe_disability_trigger = yes }
							NOT = {
								ROOT = {
									any_courtier = {
										has_opinion_modifier = { who = PREV modifier = host_of_prisoner  }
										dynasty = PREVPREV
									}
								}
							}
							NOT = {
								liege = {
									NOT = { character = ROOT }
									reverse_has_opinion_modifier = { who = PREV modifier = loan_kingsguard }
								}
							}
							NOR = {
								war_with = ROOT
								any_liege = { war_with = ROOT }
							}
						}
						save_event_target_as = kingsguard_champ
					}
				}
			}
		}
		random_courtier = {
			limit = {
				trait = master_warrior
				liege = { character = ROOT }
				OR = {
					NOT = { is_child_of = ROOT }
					FROM = { has_character_flag = sons_can_fight }
				}
				NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
				OR = {
					AND = {
						NOT = { is_close_relative = FROMFROM }
						NOT = { is_friend = FROMFROM }
					}
					NOT = { opinion = { who = FROMFROM value = -15 } }
				}
				ai = yes
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
			}
			save_event_target_as = champion_1
			set_character_flag = champion
		}
		random_courtier = {
			limit = {
				trait = master_warrior
				OR = {
					NOT = { is_child_of = ROOT }
					FROM = { has_character_flag = sons_can_fight }
				}
				NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
				OR = {
					AND = {
						NOT = { is_close_relative = FROMFROM }
						NOT = { is_friend = FROMFROM }
					}
					NOT = { opinion = { who = FROMFROM value = -15 } }
				}
				ai = yes
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				NOT = { has_character_flag = champion }
			}
			save_event_target_as = champion_2
			set_character_flag = champion
		}
		random_courtier = {
			limit = {
				trait = master_warrior
				OR = {
					NOT = { is_child_of = ROOT }
					FROM = { has_character_flag = sons_can_fight }
				}
				NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
				OR = {
					AND = {
						NOT = { is_close_relative = FROMFROM }
						NOT = { is_friend = FROMFROM }
					}
					NOT = { opinion = { who = FROMFROM value = -15 } }
				}
				ai = yes
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				NOT = { has_character_flag = champion }
			}
			save_event_target_as = champion_3
			set_character_flag = champion
		}
		random_courtier = {
			limit = {
				trait = master_warrior
				OR = {
					NOT = { is_child_of = ROOT }
					FROM = { has_character_flag = sons_can_fight }
				}
				NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
				OR = {
					AND = {
						NOT = { is_close_relative = FROMFROM }
						NOT = { is_friend = FROMFROM }
					}
					NOT = { opinion = { who = FROMFROM value = -15 } }
				}
				ai = yes
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				NOT = { has_character_flag = champion }
			}
			save_event_target_as = champion_4
			set_character_flag = champion
			break = yes
		}
		if = {
			limit = { NOT = { event_target:champion_1 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = skilled_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_1
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_2 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = skilled_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_2
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_3 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = skilled_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_3
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_4 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = skilled_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_4
				set_character_flag = champion
				break = yes
			}
		}
		if = {
			limit = { NOT = { event_target:champion_1 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = trained_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_1
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_2 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = trained_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_2
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_3 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = trained_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_3
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_4 = { always = yes } } }
			random_courtier = {
				limit = {
					trait = trained_warrior
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_4
				set_character_flag = champion
				break = yes
			}
		}
		if = {
			limit = { NOT = { event_target:champion_1 = { always = yes } } }
			random_courtier = {
				limit = {
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_1
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_2 = { always = yes } } }
			random_courtier = {
				limit = {
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_2
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_3 = { always = yes } } }
			random_courtier = {
				limit = {
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_3
				set_character_flag = champion
			}
		}
		if = {
			limit = { NOT = { event_target:champion_4 = { always = yes } } }
			random_courtier = {
				limit = {
					OR = {
						NOT = { is_child_of = ROOT }
						FROM = { has_character_flag = sons_can_fight }
					}
					NOT = { reverse_has_opinion_modifier = { who = FROMFROM modifier = champion_of_relative } }
					OR = {
						AND = {
							NOT = { is_close_relative = FROMFROM }
							NOT = { is_friend = FROMFROM }
						}
						NOT = { opinion = { who = FROMFROM value = -15 } }
					}
					ai = yes
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = champion }
				}
				save_event_target_as = champion_4
				set_character_flag = champion
				break = yes
			}
		}
	}

	option = { # champion 1
		name = "EVTOPTAtrial_by_combat.6"
		trigger = {
			event_target:champion_1 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				event_target:champion_1 = { trait = master_warrior }
			}
			modifier = {
				factor = 6
				event_target:champion_1 = { trait = skilled_warrior }
			}
			modifier = {
				factor = 3
				event_target:champion_1 = { trait = trained_warrior }
			}
			# Physical Strength Effects
			modifier = {
				factor = 2
				event_target:champion_1 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:champion_1 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_1 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_1 = { is_lazy_trigger = yes }
			}

			# Cunning/Intelligence Effects
			modifier = {
				factor = 2
				event_target:champion_1 = { is_genius_trigger = yes }
			}
			modifier = {
				factor = 1.5
				event_target:champion_1 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_1 = { is_imbecile_trigger = yes }
			}
			modifier = {
				factor = 0.66
				event_target:champion_1 = { is_dumb_trigger = yes }
			}

			# Personality Effects
			modifier = {
				factor = 2
				event_target:champion_1 = { trait = brave }
			}
			modifier = {
				factor = 0.5
				event_target:champion_1 = { trait = craven }
			}

			# Wound Effects
			modifier = {
				factor = 0.5
				event_target:champion_1 = { trait = wounded }
			}

			# Health Effects
			modifier = {
				factor = 0.5
				event_target:champion_1 = { is_ill = yes }
			}
			modifier = {
				factor = 0.1
				event_target:champion_1 = { has_epidemic = yes }
			}

			# Body Shape Effects
			modifier = {
				factor = 4
				event_target:champion_1 = { is_tall_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_1 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:champion_1 = { is_short_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_1 = { trait = clubfooted }
			}
		}
		event_target:champion_1 = {
			clr_character_flag = champion
			custom_tooltip = { text = TOOLTIPCHOOSETHISPERSON }
			hidden_tooltip = { character_event = { id = trial_by_combat.7 } }
		}
		clr_character_flag = sons_can_fight
		hidden_tooltip = {
			event_target:champion_4 = { clr_character_flag = champion }
			event_target:champion_2 = { clr_character_flag = champion }
			event_target:champion_3 = { clr_character_flag = champion }
			clear_event_target = champion_1
			clear_event_target = champion_2
			clear_event_target = champion_3
			clear_event_target = champion_4
			clear_event_target = kingsguard_champ
			event_target:kingsguard_champ = { clr_character_flag = kingsguard_champ }
		}
	}
	option = { # champion 2
		name = "EVTOPTBtrial_by_combat.6"
		trigger = {
			event_target:champion_2 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				event_target:champion_2 = { trait = master_warrior }
			}
			modifier = {
				factor = 6
				event_target:champion_2 = { trait = skilled_warrior }
			}
			modifier = {
				factor = 3
				event_target:champion_2 = { trait = trained_warrior }
			}
			# Physical Strength Effects
			modifier = {
				factor = 2
				event_target:champion_2 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:champion_2 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_2 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_2 = { is_lazy_trigger = yes }
			}

			# Cunning/Intelligence Effects
			modifier = {
				factor = 2
				event_target:champion_2 = { is_genius_trigger = yes }
			}
			modifier = {
				factor = 1.5
				event_target:champion_2 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_2 = { is_imbecile_trigger = yes }
			}
			modifier = {
				factor = 0.66
				event_target:champion_2 = { is_dumb_trigger = yes }
			}

			# Personality Effects
			modifier = {
				factor = 2
				event_target:champion_2 = { trait = brave }
			}
			modifier = {
				factor = 0.5
				event_target:champion_2 = { trait = craven }
			}

			# Wound Effects
			modifier = {
				factor = 0.5
				event_target:champion_2 = { trait = wounded }
			}

			# Health Effects
			modifier = {
				factor = 0.5
				event_target:champion_2 = { is_ill = yes }
			}
			modifier = {
				factor = 0.1
				event_target:champion_2 = { has_epidemic = yes }
			}

			# Body Shape Effects
			modifier = {
				factor = 4
				event_target:champion_2 = { is_tall_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_2 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:champion_2 = { is_short_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_2 = { trait = clubfooted }
			}
		}
		event_target:champion_2 = {
			custom_tooltip = { text = TOOLTIPCHOOSETHISPERSON }
			hidden_tooltip = { character_event = { id = trial_by_combat.7 } }
		}
		clr_character_flag = sons_can_fight
		hidden_tooltip = {
			event_target:champion_1 = { clr_character_flag = champion }
			event_target:champion_4 = { clr_character_flag = champion }
			event_target:champion_3 = { clr_character_flag = champion }
			clear_event_target = champion_1
			clear_event_target = champion_2
			clear_event_target = champion_3
			clear_event_target = champion_4
			clear_event_target = kingsguard_champ
			event_target:kingsguard_champ = { clr_character_flag = kingsguard_champ }
		}
	}
	option = { # champion 3
		name = "EVTOPTCtrial_by_combat.6"
		trigger = {
			event_target:champion_3 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				event_target:champion_3 = { trait = master_warrior }
			}
			modifier = {
				factor = 6
				event_target:champion_3 = { trait = skilled_warrior }
			}
			modifier = {
				factor = 3
				event_target:champion_3 = { trait = trained_warrior }
			}
			# Physical Strength Effects
			modifier = {
				factor = 2
				event_target:champion_3 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:champion_3 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_3 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_3 = { is_lazy_trigger = yes }
			}

			# Cunning/Intelligence Effects
			modifier = {
				factor = 2
				event_target:champion_3 = { is_genius_trigger = yes }
			}
			modifier = {
				factor = 1.5
				event_target:champion_3 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_3 = { is_imbecile_trigger = yes }
			}
			modifier = {
				factor = 0.66
				event_target:champion_3 = { is_dumb_trigger = yes }
			}

			# Personality Effects
			modifier = {
				factor = 2
				event_target:champion_3 = { trait = brave }
			}
			modifier = {
				factor = 0.5
				event_target:champion_3 = { trait = craven }
			}

			# Wound Effects
			modifier = {
				factor = 0.5
				event_target:champion_3 = { trait = wounded }
			}

			# Health Effects
			modifier = {
				factor = 0.5
				event_target:champion_3 = { is_ill = yes }
			}
			modifier = {
				factor = 0.1
				event_target:champion_3 = { has_epidemic = yes }
			}

			# Body Shape Effects
			modifier = {
				factor = 4
				event_target:champion_3 = { is_tall_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_3 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:champion_3 = { is_short_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_3 = { trait = clubfooted }
			}
		}
		event_target:champion_3 = {
			clr_character_flag = champion
			custom_tooltip = { text = TOOLTIPCHOOSETHISPERSON }
			hidden_tooltip = { character_event = { id = trial_by_combat.7 } }
		}
		clr_character_flag = sons_can_fight
		hidden_tooltip = {
			event_target:champion_1 = { clr_character_flag = champion }
			event_target:champion_2 = { clr_character_flag = champion }
			event_target:champion_4 = { clr_character_flag = champion }
			clear_event_target = champion_1
			clear_event_target = champion_2
			clear_event_target = champion_3
			clear_event_target = champion_4
			clear_event_target = kingsguard_champ
			event_target:kingsguard_champ = { clr_character_flag = kingsguard_champ }
		}
	}
	option = { # kingsguard
		name = "EVTOPTEtrial_by_combat.6"
		trigger = {
			has_landed_title = e_iron_throne
			event_target:kingsguard_champ = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				event_target:kingsguard_champ = { trait = master_warrior }
			}
			modifier = {
				factor = 6
				event_target:kingsguard_champ = { trait = skilled_warrior }
			}
			modifier = {
				factor = 3
				event_target:kingsguard_champ = { trait = trained_warrior }
			}
			# Physical Strength Effects
			modifier = {
				factor = 2
				event_target:kingsguard_champ = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:kingsguard_champ = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:kingsguard_champ = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:kingsguard_champ = { is_lazy_trigger = yes }
			}

			# Cunning/Intelligence Effects
			modifier = {
				factor = 2
				event_target:kingsguard_champ = { is_genius_trigger = yes }
			}
			modifier = {
				factor = 1.5
				event_target:kingsguard_champ = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:kingsguard_champ = { is_imbecile_trigger = yes }
			}
			modifier = {
				factor = 0.66
				event_target:kingsguard_champ = { is_dumb_trigger = yes }
			}

			# Personality Effects
			modifier = {
				factor = 2
				event_target:kingsguard_champ = { trait = brave }
			}
			modifier = {
				factor = 0.5
				event_target:kingsguard_champ = { trait = craven }
			}

			# Wound Effects
			modifier = {
				factor = 0.5
				event_target:kingsguard_champ = { trait = wounded }
			}

			# Health Effects
			modifier = {
				factor = 0.5
				event_target:kingsguard_champ = { is_ill = yes }
			}
			modifier = {
				factor = 0.1
				event_target:kingsguard_champ = { has_epidemic = yes }
			}

			# Body Shape Effects
			modifier = {
				factor = 4
				event_target:kingsguard_champ = { is_tall_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:kingsguard_champ = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:kingsguard_champ = { is_short_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:kingsguard_champ = { trait = clubfooted }
			}
		}
		event_target:kingsguard_champ = {
			custom_tooltip = { text = TOOLTIPCHOOSETHISPERSON }
			hidden_tooltip = { character_event = { id = trial_by_combat.7 } }
			clr_character_flag = kingsguard_champ
		}
		clr_character_flag = sons_can_fight
		hidden_tooltip = {
			event_target:champion_1 = { clr_character_flag = champion }
			event_target:champion_2 = { clr_character_flag = champion }
			event_target:champion_3 = { clr_character_flag = champion }
			event_target:champion_4 = { clr_character_flag = champion }
			clear_event_target = champion_1
			clear_event_target = champion_2
			clear_event_target = champion_3
			clear_event_target = champion_4
			clear_event_target = kingsguard_champ
		}
	}
	option = { # champion 4
		name = "EVTOPTDtrial_by_combat.6"
		trigger = {
			event_target:champion_4 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				event_target:champion_4 = { trait = master_warrior }
			}
			modifier = {
				factor = 6
				event_target:champion_4 = { trait = skilled_warrior }
			}
			modifier = {
				factor = 3
				event_target:champion_4 = { trait = trained_warrior }
			}
			# Physical Strength Effects
			modifier = {
				factor = 2
				event_target:champion_4 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:champion_4 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_4 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_4 = { is_lazy_trigger = yes }
			}

			# Cunning/Intelligence Effects
			modifier = {
				factor = 2
				event_target:champion_4 = { is_genius_trigger = yes }
			}
			modifier = {
				factor = 1.5
				event_target:champion_4 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:champion_4 = { is_imbecile_trigger = yes }
			}
			modifier = {
				factor = 0.66
				event_target:champion_4 = { is_dumb_trigger = yes }
			}

			# Personality Effects
			modifier = {
				factor = 2
				event_target:champion_4 = { trait = brave }
			}
			modifier = {
				factor = 0.5
				event_target:champion_4 = { trait = craven }
			}

			# Wound Effects
			modifier = {
				factor = 0.5
				event_target:champion_4 = { trait = wounded }
			}

			# Health Effects
			modifier = {
				factor = 0.5
				event_target:champion_4 = { is_ill = yes }
			}
			modifier = {
				factor = 0.1
				event_target:champion_4 = { has_epidemic = yes }
			}

			# Body Shape Effects
			modifier = {
				factor = 4
				event_target:champion_4 = { is_tall_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_4 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:champion_4 = { is_short_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:champion_4 = { trait = clubfooted }
			}
		}
		event_target:champion_4 = {
			clr_character_flag = champion
			custom_tooltip = { text = TOOLTIPCHOOSETHISPERSON }
			hidden_tooltip = { character_event = { id = trial_by_combat.7 } }
		}
		clr_character_flag = sons_can_fight
		hidden_tooltip = {
			event_target:champion_1 = { clr_character_flag = champion }
			event_target:champion_2 = { clr_character_flag = champion }
			event_target:champion_3 = { clr_character_flag = champion }
			clear_event_target = champion_1
			clear_event_target = champion_2
			clear_event_target = champion_3
			clear_event_target = champion_4
			clear_event_target = kingsguard_champ
			event_target:kingsguard_champ = { clr_character_flag = kingsguard_champ }
		}
	}

	option = { # Random
		name = "EVTOPTFtrial_by_combat.6"
		trigger = {
			OR = {
				ai = no
				NOT = { event_target:champion_3 = { always = yes } }
			}
		}
		ai_chance = {
			factor = 30
		}
		wealth = -30
		custom_tooltip = {
			text = TOOLTIPtrial_by_combat.6
		}
		hidden_tooltip = {
			capital_scope = {
				ROOT = {
					if = {
						limit = {
							NOT = { female_warrior_culture_trigger = yes }
						}
						create_random_soldier = {
							random_traits = yes
							dynasty = none
							female = no
							religion = PREV
							culture = PREV
						}
					}
					if = {
						limit = {
							female_warrior_culture_trigger = yes
						}
						create_random_soldier = {
							random_traits = yes
							dynasty = none
							female = yes
							religion = PREV
							culture = PREV
						}
					}
					new_character = {
						remove_trait = weak
						remove_trait = weak_1
						remove_trait = weak_2
						remove_trait = imbecile
						remove_trait = imbecile_1
						remove_trait = dwarf
						remove_trait = dwarf_1
						remove_trait = dwarf_2
						remove_trait = clubfooted
						remove_trait = hunchback
						remove_trait = inbred
						remove_trait = maimed
						random_list = {
							20 = { add_trait = poor_warrior }
							60 = { add_trait = trained_warrior }
							20 = { add_trait = skilled_warrior }
						}
						if = {
							limit = { religion = the_seven }
							add_trait = knight
							if = {
								limit = {
									is_ruler = no
									NOT = { has_minor_title = title_prince }
									NOT = { has_minor_title = title_prince_AGOT }
									NOT = { has_minor_title = title_queen_mother }
									NOT = { has_minor_title = title_ruler_consort }
								}
								if = {
									limit = { is_female = no }
									set_special_character_title = title_ser
								}
								if = {
									limit = { is_female = yes }
									set_special_character_title = title_lady
								}
							}
						}
						character_event = { id = trial_by_combat.7 }
					}
				}
			}
		}
		clr_character_flag = sons_can_fight
		hidden_tooltip = {
			event_target:champion_1 = { clr_character_flag = champion }
			event_target:champion_2 = { clr_character_flag = champion }
			event_target:champion_3 = { clr_character_flag = champion }
			event_target:champion_4 = { clr_character_flag = champion }
			clear_event_target = champion_1
			clear_event_target = champion_2
			clear_event_target = champion_3
			clear_event_target = champion_4
			clear_event_target = kingsguard_champ
			event_target:kingsguard_champ = { clr_character_flag = kingsguard_champ }
		}
	}
}
#Inform character they will champion for liege
character_event = {
	id = trial_by_combat.7
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	desc = {
		text = EVTDESCtrial_by_combat.7
		trigger = { FROM = { NOT = { has_character_flag = prisoner_has_champion } } }
	}
	desc = {
		text = EVTDESCtrial_by_combat.14
		trigger = { FROM = { has_character_flag = prisoner_has_champion } }
	}

	option = {
		name = "EVTOPTAtrial_by_combat.7"
		set_character_flag = elected_champion
		FROM = {
			opinion = { who = ROOT modifier = champion_of_liege months = 60 }
			hidden_tooltip = { character_event = { id = trial_by_combat.8 days = 1 } } ##tooltip
		}
	}
}
#Ping back to host
character_event = {
	id = trial_by_combat.8
	desc = "EVTDESCtrial_by_combat.8"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	immediate = {
		clr_character_flag = elected_champion
		clr_character_flag = has_champion
	}

	option = {  #
		name = "EVTOPTAtrial_by_combat.8"
		FROMFROMFROMFROM = {
			if = {
				limit = {
					NOT = { character = ROOT }
					ROOT = {  NOT = { has_character_flag = prisoner_has_champion } }
				}
				custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON_HOST_CHAMP }
				hidden_tooltip = {
					character_event = {
						id = trial_by_combat.9
					}
				}
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ROOT = { has_character_flag = prisoner_has_champion }
				}
				character_event = {
					id = trial_by_combat.16
				}
			}
		}
		if = {
			limit = { has_character_flag = lunatic_trial }
			custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON_HOST_CHAMP }
			hidden_tooltip = {
				character_event = {
					id = trial_by_combat.9
				}
				any_realm_lord = {
					character_event = {
						id = 6461
					}
				}
			}
		}
	}
}

##Prisoner is Fighting##
# Prisoner Event
character_event = {
	id = trial_by_combat.9
	desc = "EVTDESCtrial_by_combat.9"
	picture = "GFX_trial_by_combat"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.9"
		#set_character_flag = flag_duel_to_the_death
		if = {
			limit = { FROM = { has_character_flag = self_elected_champion } }
			FROM = { custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON_HOST } }
			hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.0 } } } }
		}
		if = {
			limit = {
				NOT = { FROM = { has_character_flag = self_elected_champion } }
				NOT = { has_character_flag = lunatic_trial }
			}
			FROMFROM = {
				custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON }
				hidden_tooltip = { character_event = { id = trial_by_combat.10 } }
			}
		}
		if = {
			limit = { has_character_flag = lunatic_trial }
			FROMFROM = {
				custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON }
				hidden_tooltip = { character_event = { id = trial_by_combat.10 } }
			}
		}
	}
}
#Champion Event
character_event = { # fight takes place / champion fights
	id = trial_by_combat.10
	desc = "EVTDESCtrial_by_combat.10"
	picture = "GFX_trial_by_combat"
	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.10"
		#set_character_flag = flag_duel_to_the_death
		hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.0 } } } }
	}
}
##Prisoner has Champion##
# Prisoner Event
character_event = { # prisoner is readied to spectate trial
	id = trial_by_combat.16
	desc = "EVTDESCtrial_by_combat.16"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAtrial_by_combat.16"
		hidden_tooltip = { add_trait = assign_mission_target } #so they can be found after fight
		random_opinion_modifier_target = {
			limit = {
				reverse_has_opinion_modifier = { who = ROOT modifier = champion_of_relative }
				has_character_flag = champion_of_relative
			}
			custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON_CHAMP }
			hidden_tooltip = { character_event = { id = trial_by_combat.18 } }
		}
	}
}
character_event = { #Host is personally fighting
	id = trial_by_combat.17
	desc = "EVTDESCtrial_by_combat.17"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.17"
		hidden_tooltip = { add_trait = assign_mission_target } #so they can be found after fight
		random_opinion_modifier_target = {
			limit = {
				reverse_has_opinion_modifier = { who = ROOT modifier = champion_of_relative }
				has_character_flag = champion_of_relative
			}
			custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON_HOST_CHAMP }
			hidden_tooltip = { character_event = { id = trial_by_combat.18 } }
		}
	}
}
#Prisoner's Champion
character_event = {
	id = trial_by_combat.18
	desc = "EVTDESCtrial_by_combat.18"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.18"
		#set_character_flag = flag_duel_to_the_death
		clr_character_flag = trial_by_combat.18fired
		if = {
			limit = { FROMFROM = { has_character_flag = self_elected_champion_b  } }
			FROMFROM = {
				custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON }
				hidden_tooltip = { character_event = { id = trial_by_combat.19 } }
			}
		}
		if = {
			limit = { FROMFROM = { NOT = { has_character_flag = self_elected_champion_b  } } }
			FROMFROMFROM = {
				custom_tooltip = { text = TOOLTIPFIGHTTHISPERSON }
				hidden_tooltip = { character_event = { id = trial_by_combat.19 } }
			}
		}
	}
}
#Host's Champion
character_event = {
	id = trial_by_combat.19
	desc = "EVTDESCtrial_by_combat.19"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.19"
		#set_character_flag = flag_duel_to_the_death
		hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.0 } } } }
	}
}

###Outcome Events###
#Prisoner is fighting directly
#Prisoner Loses
character_event = {
	id = trial_by_combat.11
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes
	show_from_from = yes

	desc = {
		text = "EVTDESCtrial_by_combat.11"
		trigger = {
			FROMFROM = { is_alive = yes }
			NOT = { character = FROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.11B"
		trigger = {
			FROMFROM = { is_alive = no }
			NOT = { character = FROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.11C"
		trigger = {
			FROMFROM = { is_alive = yes }
			character = FROM
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.11D"
		trigger = {
			FROMFROM = { is_alive = no }
			character = FROM
		}
	}

	immediate = {
		clr_character_flag = trial_by_combat
		hidden_tooltip = { remove_character_modifier = giving_justice }
		clr_character_flag = prisoner_has_champion
		clr_character_flag = self_elected_champion
		clr_character_flag = self_elected_champion_b
		clr_character_flag = lunatic_trial
		FROMFROM = {
			clr_character_flag = elected_champion
			remove_opinion = {
				who = ROOT modifier = host_of_prisoner
			}
			if = {
				limit = { is_alive = yes }
				character_event = { id = trial_by_combat.119 days = 1 } #Host picks punishment
			}
		}
		hidden_tooltip = {
			any_player = { #Inform world/realm
				limit = {
					NOT = { character = ROOT }
					NOT = { character = FROMFROM }
					OR = {
						dynasty = FROMFROM
						is_close_relative = FROMFROM
						AND = {
							OR = {
								is_liege_or_above = ROOT
								AND = {
									ROOT = { higher_tier_than = DUKE }
									is_within_diplo_range = ROOT
									OR = {
										same_realm = ROOT
										culture_group = ROOT
										religion_group = ROOT
									}
								}
							}
							FROMFROM = {
								OR = {
									is_ruler = yes
									is_close_relative = ROOT
									father_even_if_dead = { higher_tier_than = BARON }
									mother_even_if_dead = { higher_tier_than = BARON }
									trait = dragon_rider
								}
							}
						}
					}
				}
				character_event = { id = trial_by_combat.30 days = 3 }
			}
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.11"
		show_portrait = FROM
	}
}
#Prisoner Wins
character_event = {
	id = trial_by_combat.12
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	desc = {
		text = "EVTDESCtrial_by_combat.12"
		trigger = {
			FROMFROM = { is_alive = yes }
			NOT = { character = FROMFROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.12B"
		trigger = {
			FROMFROM = { is_alive = no }
			NOT = { character = FROMFROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.12C"
		trigger = {
			character = FROMFROM
		}
	}

	immediate = {
		clr_character_flag = trial_by_combat
		hidden_tooltip = { remove_character_modifier = giving_justice }
		clr_character_flag = prisoner_has_champion
		clr_character_flag = self_elected_champion
		clr_character_flag = self_elected_champion_b
		FROM = {
			clr_character_flag = elected_champion
			if = {
				limit = { any_claim = { tier = EMPEROR holder_scope = { character = ROOT } } }
				clr_character_flag = exiled_royal_family
				reverse_remove_opinion = {
					who = ROOT
					modifier = opinion_exiled_pretender
				}
			}
		}
		reverse_remove_opinion = {
			who = FROM modifier = host_of_prisoner
		}
		clr_character_flag = lunatic_trial

		hidden_tooltip = {
			any_player = { #Inform world/realm
				limit = {
					NOT = { character = ROOT }
					NOT = { character = FROM }
					OR = {
						dynasty = FROM
						is_close_relative = FROM
						AND = {
							OR = {
								is_liege_or_above = ROOT
								AND = {
									ROOT = { higher_tier_than = DUKE }
									is_within_diplo_range = ROOT
									OR = {
										same_realm = ROOT
										culture_group = ROOT
										religion_group = ROOT
									}
								}
							}
							FROM = {
								OR = {
									is_ruler = yes
									is_close_relative = ROOT
									father_even_if_dead = { higher_tier_than = BARON }
									mother_even_if_dead = { higher_tier_than = BARON }
									trait = dragon_rider
								}
							}
						}
					}
				}
				character_event = { id = trial_by_combat.31 days = 1 }
			}
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.12"
		show_portrait = FROMFROM
		FROM = {
			prisoner = no
			clr_character_flag = demmanded_first_trial_by_combat
			hidden_tooltip = {
				clear_delayed_event = { id = trial.500 }
				diplomatic_immunity = no
				if = {
					limit = {
						is_ruler = no
						liege = { character = ROOT }
						NOT = { character = ROOT }
					}
					character_event = { id = trial_by_combat.239 } # Prisoner leaves court
				}
			}
		}
	}
}

#Prisoner has champion
#Champion Loses
character_event = { #Prisoner Event
	id = trial_by_combat.20
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes
	show_from_from = yes

	desc = {
		text = "EVTDESCtrial_by_combat.20"
		trigger = {
			FROMFROM = { is_alive = yes }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.20B"
		trigger = {
			FROMFROM = { is_alive = no }
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.20"
		show_portrait = FROM
		host = {
			show_portrait = yes
			hidden_tooltip = {
				character_event = { id = trial_by_combat.21 }
				character_event = { id = trial_by_combat.120 days = 1 } #Host picks punishment
			}
		}
		clr_character_flag = demmanded_trial_by_combat
	}
}
#Inform host
character_event = {
	id = trial_by_combat.21
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	desc = {
		text = "EVTDESCtrial_by_combat.21"
		trigger = {
			FROMFROMFROM = { is_alive = yes }
			NOT = { character = FROMFROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.21B"
		trigger = {
			FROMFROMFROM = { is_alive = no }
			NOT = { character = FROMFROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.21C"
		trigger = {
			FROMFROMFROM = { is_alive = yes }
			character = FROMFROM
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.21D"
		trigger = {
			FROMFROMFROM = { is_alive = no }
			character = FROMFROM
		}
	}

	immediate = {
		clr_character_flag = trial_by_combat
		hidden_tooltip = { remove_character_modifier = giving_justice }
		clr_character_flag = prisoner_has_champion
		clr_character_flag = self_elected_champion
		clr_character_flag = self_elected_champion_b
		FROM = {
			clr_character_flag = elected_champion
			remove_opinion = {
				who = ROOT modifier = host_of_prisoner
			}
		}

		hidden_tooltip = {
			any_player = { #Inform world/realm
				limit = {
					NOT = { character = ROOT }
					NOT = { character = FROM }
					OR = {
						dynasty = FROM
						is_close_relative = FROM
						AND = {
							OR = {
								is_liege_or_above = ROOT
								AND = {
									ROOT = { higher_tier_than = DUKE }
									is_within_diplo_range = ROOT
									OR = {
										same_realm = ROOT
										culture_group = ROOT
									}
								}
							}
							FROM = {
								OR = {
									is_ruler = yes
									is_close_relative = ROOT
									father_even_if_dead = { higher_tier_than = BARON }
									mother_even_if_dead = { higher_tier_than = BARON }
									trait = dragon_rider
								}
							}
						}
					}
				}
				character_event = { id = trial_by_combat.32 days = 3 }
			}
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.21" #Death
		show_portrait = FROMFROMFROM
		show_portrait = FROMFROM
	}
}
#Champion Wins
character_event = { # inform prisoner his champ is winner
	id = trial_by_combat.22
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	desc = {
		text = "EVTDESCtrial_by_combat.22"
		trigger = {
			FROMFROM = { is_alive = yes }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.22B"
		trigger = {
			FROMFROM = { is_alive = no }
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.22"
		show_portrait = FROMFROM
		host = {
			show_portrait = yes
			hidden_tooltip = { character_event = { id = trial_by_combat.23 } }
		}
		prisoner = no
		clr_character_flag = demmanded_trial_by_combat
		clr_character_flag = demmanded_first_trial_by_combat
	}
}
character_event = { # inform host death of his own champ
	id = trial_by_combat.23
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	desc = {
		text = "EVTDESCtrial_by_combat.23"
		trigger = {
			FROMFROMFROM = { is_alive = yes }
			NOT = { character = FROMFROMFROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.23B"
		trigger = {
			FROMFROMFROM = { is_alive = no }
			NOT = { character = FROMFROMFROM }
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.23C"
		trigger = {
			character = FROMFROMFROM
		}
	}

	immediate = {
		clr_character_flag = trial_by_combat
		hidden_tooltip = { remove_character_modifier = giving_justice }
		clr_character_flag = prisoner_has_champion
		clr_character_flag = self_elected_champion
		clr_character_flag = self_elected_champion_b
		FROM = {
			clr_character_flag = elected_champion
			remove_opinion = {
				who = ROOT modifier = host_of_prisoner
			}
			if = {
				limit = { any_claim = { tier = EMPEROR holder_scope = { character = ROOT } } }
				clr_character_flag = exiled_royal_family
				reverse_remove_opinion = {
					who = ROOT
					modifier = opinion_exiled_pretender
				}
			}
		}
		hidden_tooltip = {
			any_player = { #Inform world/realm
				limit = {
					NOT = { character = ROOT }
					NOT = { character = FROM }
					OR = {
						dynasty = FROM
						is_close_relative = FROM
						AND = {
							OR = {
								is_liege_or_above = ROOT
								AND = {
									ROOT = { higher_tier_than = DUKE }
									is_within_diplo_range = ROOT
									OR = {
										same_realm = ROOT
										culture_group = ROOT
									}
								}
							}
							FROM = {
								OR = {
									is_ruler = yes
									is_close_relative = ROOT
									father_even_if_dead = { higher_tier_than = BARON }
									mother_even_if_dead = { higher_tier_than = BARON }
									trait = dragon_rider
								}
							}
						}
					}
				}
				character_event = { id = trial_by_combat.33 days = 1 }
			}
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.23"
		show_portrait = FROMFROMFROM
		show_portrait = FROMFROM
		FROM = {
			tooltip = { prisoner = no }
			clr_character_flag = demmanded_first_trial_by_combat
			hidden_tooltip = {
				if = {
					limit = {
						is_ruler = no
						liege = { character = ROOT }
						NOT = { character = ROOT }
					}
					character_event = { id = trial_by_combat.239 } # Prisoner leaves court
				}
				clear_delayed_event = { id = trial.500 }
				diplomatic_immunity = no
			}
		}
	}
}
# Prisoner wins and leaves court, FROM is the exiler
character_event = {
	id = trial_by_combat.239

	is_triggered_only = yes
	hide_window = yes

	trigger = { is_ruler = no }

	immediate = {
		if = {
			limit = { trait = slave }
			character_event = { id = slavery.0 }
		}
		if = {
			limit = { is_consort = yes }
			consort = { remove_consort = PREV }
			remove_trait = salt_wife
			clr_character_flag = no_court_invites
		}
		set_character_flag = trial_exile
		random_dynasty_member = {
			limit = {
				valid_exile_destination_ROOT_trigger = yes
				is_alive = yes
			}
			reverse_banish = ROOT
			break = yes
		}
		random_dynasty_member = {
			limit = {
				is_alive = yes
				NOT = { character = ROOT }
				is_ruler = no
				can_press_claims_trigger = yes
				liege = { valid_exile_destination_ROOT_trigger = yes	}
			}
			liege = { reverse_banish = ROOT }
			break = yes
		}
		random_playable_ruler = {
			limit = {
				valid_exile_destination_ROOT_trigger = yes

				culture_group = ROOT
			}
			reverse_banish = ROOT
			break = yes
		}
		random_playable_ruler = {
			limit = {
				valid_exile_destination_ROOT_trigger = yes

				religion_group = ROOT
			}
			reverse_banish = ROOT
			break = yes
		}
		random_playable_ruler = {
			limit = {
				valid_exile_destination_ROOT_trigger = yes

				higher_tier_than = DUKE
			}
			reverse_banish = ROOT
			break = yes
		}
		banish = yes
	}

	option = {
		name = OK
	}

	after = {
		clr_character_flag = trial_exile
	}
}
###Judgement Event##
character_event = { #prisoner ping event
	id = trial_by_combat.119

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = { character_event = { id = trial_by_combat.120 } }
	}

	option = {
		name = OK
	}
}
#Inform host, choose punishment
character_event = {
	id = trial_by_combat.120
	desc = "EVTDESCtrial_by_combat.120"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.120" #Death
		trigger = {
			OR = {
				NOT = { has_dlc = "Zeus" }
				AND = {
					has_regent = no
					NOT = { primary_title = { has_law = justice_voting_power_1 } }
				}
			}
		}
		ai_chance = {
			factor = 25

			modifier = { #avoid kinslayer
				factor = 0
				NOT = { has_cutthroat_religion_trigger = yes }
				OR = {
					is_close_relative = FROM
					AND = {
						dynasty = FROM
						is_lowborn = no
					}
				}
				OR = {
					trait = honorable
					trait = familyperson
					NOR = {
						trait = zealous
						trait = ruthless
						trait = cruel
						trait = lunatic
					}
				}
			}
			modifier = { #avoid kinslayer
				factor = 0.25
				NOT = { has_cutthroat_religion_trigger = yes }
				OR = {
					is_close_relative = FROM
					AND = {
						dynasty = FROM
						is_lowborn = no
					}
				}
			}
			modifier = {
				factor = 0
				opinion = { who = FROM value = 50 }
				NOR = {
					trait = just
					trait = zealous
					trait = ruthless
					trait = cruel
					trait = lunatic
				}
			}
			modifier = {
				factor = 4
				trait = zealous
			}
			modifier = {
				factor = 4
				trait = cruel
			}
			modifier = {
				factor = 4
				trait = wroth
			}
			modifier = {
				factor = 4
				trait = proud
			}
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = {
				factor = 4
				OR = {
					trait = paranoid
					trait = ruthless
				}
				FROM = { any_claim = { holder_scope = { character = ROOT } } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -10 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -35 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -85 } }
			}
		}
		FROM = { character_event = { id = trial_by_combat.121 tooltip = TOOLTIPtrial_by_combat.121 } }
	}

	option = {
		name = "EVTOPTBtrial_by_combat.120" #To the Wall
		trigger = {
			OR = {
				NOT = { has_dlc = "Zeus" }
				AND = {
					has_regent = no
					NOT = { primary_title = { has_law = justice_voting_power_1 } }
				}
			}
			NOT = { trait = nightswatch }
			NOT = { trait = deserter }
			FROM = {
				is_female = no
				age = 14
				NOT = { trait = nightswatch }
			}
			nightswatch_culture_trigger = yes
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 4
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 3
				trait = diligent
			}
		}
		FROM = {
			custom_tooltip = {
				text = TOOLTIPBANISHTONW
				hidden_tooltip = { character_event = { id = nightswatch.2098 } } #set banisher as FROMFROM
			}
			hidden_tooltip = { character_event = { id = trial_by_combat.122 } }
		}
		piety = 40
	}
	option = {
		name = "EVTOPTFtrial_by_seven_13" ##Exile
		trigger = {
			OR = {
				NOT = { has_dlc = "Zeus" }
				AND = {
					has_regent = no
					NOT = { primary_title = { has_law = justice_voting_power_1 } }
				}
			}
			NAND = {
				NOT = { trait = nightswatch }
				NOT = { trait = deserter }
				FROM = {
					is_female = no
					age = 14
					NOT = { trait = nightswatch }
				}
				nightswatch_culture_trigger = yes
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 4
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 3
				trait = diligent
			}
		}
		FROM = {
			tooltip = { banish = yes }
			hidden_tooltip = {
				character_event = { id = trial_by_combat.126 }
				character_event = { id = 155 days = 1 }
			}
		}
		piety = 20
	}
	option = {
		name = "EVTOPTDtrial_by_seven_13" ##Send to priesthood
		trigger = {
			OR = {
				NOT = { has_dlc = "Zeus" }
				AND = {
					has_regent = no
					NOT = { primary_title = { has_law = justice_voting_power_1 } }
				}
			}
			FROM = {
				is_female = yes
				OR = {
					AND = {
						religion = the_seven
						ROOT = { religion = the_seven }
						NOT = { trait = silent_sister }
						NOT = { trait = septa }
					}
					AND = {
						OR = {
							religion = harpy
							religion = harpy_reformed
						}
						ROOT = {
							OR = {
								religion = harpy
								religion = harpy_reformed
							}
						}
						NOT = { trait = grace }
					}
				}
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 4
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 3
				trait = diligent
			}
		}
		FROM = {
			tooltip = {
				if = {
					limit = { religion = the_seven }
					add_trait = silent_sister
				}
				if = {
					limit = {
						OR = {
							religion = harpy
							religion = harpy_reformed
						}
					}
					add_trait = grace
				}
			}
			hidden_tooltip = { character_event = { id = trial_by_combat.125 } }
		}
	}#option
	option = {
		name = {
			text = "EVTOPTCtrial_by_combat.120" #Back to the Dungeon
			trigger = {
				OR = {
					NOT = { has_dlc = "Zeus" }
					AND = {
						has_regent = no
						NOT = { primary_title = { has_law = justice_voting_power_1 } }
					}
				}
			}
		}
		name = {
			text = "EVTOPTFtrial_by_combat.120" #Council decide
			trigger = {
				has_dlc = "Zeus"
				OR = {
					has_regent = yes
					primary_title = { has_law = justice_voting_power_1 }
				}
			}
		}
		ai_chance = {
			factor = 10

			modifier = {
				factor = 0.25
				FROM = { any_claim = { holder_scope = { character = ROOT } } }
			}
			modifier = {
				factor = 4
				trait = slothful
			}
			modifier = {
				factor = 4
				trait = arbitrary
			}
			modifier = {
				factor = 4
				trait = patient
			}
			modifier = {
				factor = 4
				trait = cynical
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 35 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 85 }
			}
		}
		if = {
			limit = {
				has_dlc = "Zeus"
				OR = {
					has_regent = yes
					primary_title = { has_law = justice_voting_power_1 }
				}
			}
			opinion = {
				who = FROM
				modifier = opinion_found_guilty
			}
			FROM = { custom_tooltip = { text = TOOLTIPtrial.239 } }
		}
		FROM = { character_event = { id = trial_by_combat.123 tooltip = TOOLTIPtrial_by_combat.123 } }
	}

	option = {
		name = "EVTOPTDtrial_by_combat.120" #House Arrest
		ai_chance = {
			factor = 10

			modifier = {
				factor = 0.25
				FROM = { any_claim = { holder_scope = { character = ROOT } } }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = -30 } }
				NOR = {
					trait = kind
					trait = humble
					trait = honorable
					AND = {
						trait = familyperson
						OR = {
							is_close_relative = FROM
							AND = {
								dynasty = FROM
								is_lowborn = no
							}
						}
					}
				}
			}
			modifier = {
				factor = 4
				trait = kind
			}
			modifier = {
				factor = 4
				trait = patient
			}
			modifier = {
				factor = 4
				trait = humble
			}
			modifier = {
				factor = 4
				trait = cynical
			}
			modifier = {
				factor = 4
				trait = honorable
				FROM = {
					OR = {
						is_ruler = yes
						trait = knight
						has_priest_trait_trigger = yes
					}
				}
			}
			modifier = {
				factor = 2
				is_lowborn = no
				FROM = { dynasty = ROOT }
			}
			modifier = {
				factor = 3
				is_close_relative = FROM
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 10 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 35 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 85 }
			}
		}
		if = {
			limit = {
				has_dlc = "Zeus"
				OR = {
					has_regent = yes
					primary_title = { has_law = justice_voting_power_1 }
				}
			}
			opinion = {
				who = FROM
				modifier = opinion_found_guilty
			}
			FROM = { custom_tooltip = { text = TOOLTIPtrial.239 } }
		}
		FROM = {
			character_event = { id = trial_by_combat.124 tooltip = TOOLTIPtrial_by_combat.124 }
			opinion = {
				who = ROOT
				modifier = opinion_merciful
				months = 60
			}
		}
	}
}
#Inform DEATH
character_event = {
   id = trial_by_combat.121
   desc = "EVTDESCtrial_by_combat.121"
   picture = GFX_evt_beheading

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial.22" ##I got killed. Wah!
		tooltip = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = imprisoned.10 } } } #Select execution method
	}
}
#Inform Sent to wall
character_event = {
	id = trial_by_combat.122
	desc = "EVTDESCtrial_by_combat.122"
	picture = GFX_evt_the_wall

	is_triggered_only = yes

	immediate = {
		clr_character_flag = demmanded_trial_by_combat
		clr_character_flag = demmanded_first_trial_by_combat
		clear_delayed_event = { id = trial.500 }
		diplomatic_immunity = no
	}

	option = {
		name = "EVTOPTAtrial.23" ##I got sent to the wall. Wah!
	}
}
#Inform dungeon
character_event = {
   id = trial_by_combat.123
   desc = "EVTDESCtrial_by_combat.123"
    picture = "GFX_evt_into_the_dungeon"

	is_triggered_only = yes

	immediate = {
		set_character_flag = lost_trial_by_combat
		clr_character_flag = demmanded_trial_by_combat
		clr_character_flag = demmanded_first_trial_by_combat
		clear_delayed_event = { id = trial.500 }
		diplomatic_immunity = no
	}

	option = {
		name = "EVTOPTAtrial_by_combat.123"
		hidden_tooltip = {
			remove_character_modifier = house_arrest
			remove_character_modifier = the_oubliette
			remove_character_modifier = the_dungeon
		}
		if = {
			limit = { NOT = { character = FROM } }
			add_character_modifier = {
				name = the_dungeon
				duration = -1
			}
		}
		if = {
			limit = { character = FROM }
			add_character_modifier = {
				name = the_dungeon
				duration = 365
			}
		}
	}
}
#Inform house arrest
character_event = {
   id = trial_by_combat.124
   desc = "EVTDESCtrial_by_combat.124"
   picture = "GFX_evt_into_the_dungeon"

	is_triggered_only = yes

	immediate = {
		set_character_flag = lost_trial_by_combat
		clr_character_flag = demmanded_trial_by_combat
		clr_character_flag = demmanded_first_trial_by_combat
		clear_delayed_event = { id = trial.500 }
		diplomatic_immunity = no
	}

	option = {
		name = "EVTOPTAtrial_by_combat.124"
		hidden_tooltip = {
			remove_character_modifier = house_arrest
			remove_character_modifier = the_oubliette
			remove_character_modifier = the_dungeon
		}
		if = {
			limit = { NOT = { character = FROM } }
			add_character_modifier = {
				name = house_arrest
				duration = -1
			}
		}
		if = {
			limit = { character = FROM }
			add_character_modifier = {
				name = house_arrest
				duration = 365
			}
		}
		any_dynasty_member = {
			limit = {
				prisoner = yes
				is_close_relative = ROOT
				NOT = { age = 16 }
				host = { character = FROM }
				NOT = { has_character_modifier = house_arrest }
			}
			hidden_tooltip = {
				remove_character_modifier = the_oubliette
				remove_character_modifier = the_dungeon
			}
			add_character_modifier = {
				name = house_arrest
				duration = -1
			}
		}
	}
}
#Inform priesthood
character_event = {
   id = trial_by_combat.125
   desc = "EVTDESCtrial_by_combat.125"
   picture = GFX_evt_lunatic

	is_triggered_only = yes

	immediate = {
		clear_delayed_event = { id = trial.500 }
		diplomatic_immunity = no
	}

	option = {
		name = "EVTOPTAtrial_by_combat.124"
		hidden_tooltip = {
			any_spouse = { remove_spouse = ROOT }
			any_consort = { remove_consort = ROOT }
			betrothed = { break_betrothal = ROOT }
			if = {
				limit = {
					trait = kingsguard
				}
				character_event = { id = kingsguard.1 } #remove from kingsguard
			}
			remove_character_modifier = getting_justice
			diplomatic_immunity = no
		}
		prisoner = no
		clr_character_flag = demmanded_first_trial_by_combat
		if = {
			limit = { religion = the_seven }
			add_trait = silent_sister
		}
		if = {
			limit = {
				OR = {
					religion = harpy
					religion = harpy_reformed
				}
			}
			add_trait = grace
		}
		set_character_flag = no_court_invites
		if = {
			limit = { is_ruler = yes }
			hidden_tooltip = { #Universal on death/abdication event
				if = {
					limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
					set_character_flag = do_not_inherit_sword
				}
				set_character_flag = abdication
				character_event = { id = 45341 }
				clr_character_flag = abdication
				clr_character_flag = do_not_inherit_sword
				if = {
					limit = { is_merchant_republic = no }
					current_heir = { save_event_target_as = wealth_heir }
				}
				if = {
					limit = { is_merchant_republic = yes }
					family_palace = { current_heir = { save_event_target_as = wealth_heir } }
				}
				transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
			}
			abdicate = yes
		}
		FROM = {
			random_realm_lord = {
				limit = {
					religion = ROOT
					is_theocracy = yes
				}
				ROOT = { move_character = PREV }
			}
		}
	}
}
#Inform exiled
character_event = {
	id = trial_by_combat.126
	desc = "EVTDESCtrial_by_combat.126"
	picture = GFX_evt_judged_by_ruler

	is_triggered_only = yes

	immediate = {
		clr_character_flag = demmanded_trial_by_combat
		clr_character_flag = demmanded_first_trial_by_combat
		clear_delayed_event = { id = trial.500 }
		diplomatic_immunity = no
	}

	option = {
		name = "EVTOPTAtrial_by_combat.124"
		hidden_tooltip = {
			remove_character_modifier = getting_justice
		}
		prisoner = no
		if = {
			limit = { is_ruler = yes }
			hidden_tooltip = { #Universal on death/abdication event
				if = {
					limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
					set_character_flag = do_not_inherit_sword
				}
				set_character_flag = abdication
				character_event = { id = 45341 }
				clr_character_flag = abdication
				clr_character_flag = do_not_inherit_sword
				if = {
					limit = { is_merchant_republic = no }
					current_heir = { save_event_target_as = wealth_heir }
				}
				if = {
					limit = { is_merchant_republic = yes }
					family_palace = { current_heir = { save_event_target_as = wealth_heir } }
				}
				transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
			}
			abdicate = yes
		}
		banish = yes
	}
}
###Fire is my Champion!###
#Prisoner/Champion informed Burned alive!
character_event = {
	id = trial_by_combat.24
	desc = "EVTDESCtrial_by_combat.24"
	picture = "GFX_burn_alive"

	is_triggered_only = yes

	immediate = {
		hidden_tooltip = {
			FROM = {
				set_character_flag = unjust_execution
				#set_character_flag = special_execution_found
				save_event_target_as = executioner
			}
			character_event = { id = 45342 } #Universal execution event
		}
		mother = {
			character_event = { id = trial_by_combat.25 }
		}
		father = {
			character_event = { id = trial_by_combat.25 }
		}
		any_child = {
			limit = {
				NOT = { character = FROM }
			}
			character_event = { id = trial_by_combat.25 }
		}
		any_spouse = {
			limit = {
				NOT = { character = FROM }
				opinion = { who = ROOT value = -25 }
			}
			character_event = { id = trial_by_combat.25 }
		}
		any_lover = {
			limit = {
				NOT = { character = FROM }
			}
			character_event = { id = trial_by_combat.25 }
		}
		any_friend = {
			limit = {
				NOT = { character = FROM }
			}
			character_event = { id = trial_by_combat.25 }
		}
		any_dynasty_member = {
			limit = {
				is_close_relative = ROOT
				NOT = { character = FROM }
			}
			character_event = { id = trial_by_combat.25 }
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.24"
		death = {
			death_reason = death_execution
			killer = FROM
		}
	}
}
character_event = { #Inform family
	id = trial_by_combat.25
	desc = "EVTDESCtrial_by_combat.25"
	picture = "GFX_burn_alive"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAtrial_by_combat.24"  #
	}
}
#Inform Prisoner Champion Burned alive!
character_event = {
	id = trial_by_combat.26
	desc = "EVTDESCtrial_by_combat.26"
	picture = "GFX_burn_alive"

	is_triggered_only = yes

	immediate = {
		FROM = {
			set_character_flag = unjust_execution
		}
	}

	option = {
		name = "EVTOPTAtrial_by_combat.26"  #
		FROMFROMFROM = {
			custom_tooltip = { text = TOOLTIPEVTtrial_by_combat.26 }
		}
		tooltip = {
			death = {
				death_reason = death_execution
				killer = FROM
			}
		}
		hidden_tooltip = { FROM = { character_event = { id = imprisoned.10 } } } #Select execution method
	}
}

#AI prisoner selects champion
character_event = {
	id = trial_by_combat.27
	desc = "EVTDESCtrial_by_combat.27"
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes

	trigger = {
		prisoner = yes
		is_incapable = no
	}

	immediate = {
		#Find dynast 1
		random_dynasty_member = {
			limit = {
				combat_rating = 80
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
			}
			save_event_target_as = AI_champion_1
			set_character_flag = tbc_champion
		}
		if = {
			limit = { NOT = { event_target:AI_champion_1 = { always = yes } } }
			random_dynasty_member = {
				limit = {
					combat_rating = 60
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				}
				save_event_target_as = AI_champion_1
				set_character_flag = tbc_champion
			}
			if = {
				limit = { NOT = { event_target:AI_champion_1 = { always = yes } } }
				random_dynasty_member = {
					limit = {
						combat_rating = 30
						eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					}
					save_event_target_as = AI_champion_1
					set_character_flag = tbc_champion
				}
			}
		}
		#Find dynast 2
		if = {
			limit = { has_landed_title = e_iron_throne }
			kingsguard = {
				limit = {
					combat_rating = 60
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = tbc_champion }
				}
				save_event_target_as = AI_champion_2
				set_character_flag = tbc_champion
			}
		}
		else = {
			random_dynasty_member = {
				limit = {
					combat_rating = 60
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = tbc_champion }
				}
				save_event_target_as = AI_champion_2
				set_character_flag = tbc_champion
			}
			if = {
				limit = { NOT = { event_target:AI_champion_2 = { always = yes } } }
				random_dynasty_member = {
					limit = {
						combat_rating = 30
						eligible_trial_by_combat_champion_for_ROOT_trigger = yes
						NOT = { has_character_flag = tbc_champion }
					}
					save_event_target_as = AI_champion_2
					set_character_flag = tbc_champion
				}
				if = { #If no 2nd dynasty found try a courtier
					limit = { NOT = { event_target:AI_champion_2 = { always = yes } } }
					random_courtier = {
						limit = {
							combat_rating = 60
							eligible_trial_by_combat_champion_for_ROOT_trigger = yes
							NOT = { has_character_flag = tbc_champion }
						}
						save_event_target_as = AI_champion_2
						set_character_flag = tbc_champion
					}
					if = {
						limit = { NOT = { event_target:AI_champion_2 = { always = yes } } }
						random_courtier = {
							limit = {
								combat_rating = 30
								eligible_trial_by_combat_champion_for_ROOT_trigger = yes
								NOT = { has_character_flag = tbc_champion }
							}
							save_event_target_as = AI_champion_2
							set_character_flag = tbc_champion
						}
					}
				}
			}
		}
		#Champion 3
		if = {
			limit = { has_landed_title = e_iron_throne }
			kingsguard = {
				limit = {
					combat_rating = 80
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = tbc_champion }
				}
				save_event_target_as = AI_champion_3
				break = yes
			}
			kingsguard = {
				limit = {
					combat_rating = 60
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = tbc_champion }
				}
				save_event_target_as = AI_champion_3
				break = yes
			}
		}
		random_courtier = {
			limit = {
				combat_rating = 80
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				NOT = { has_character_flag = tbc_champion }
			}
			save_event_target_as = AI_champion_3
			break = yes
		}
		random_courtier = {
			limit = {
				combat_rating = 60
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				NOT = { has_character_flag = tbc_champion }
			}
			save_event_target_as = AI_champion_3
			break = yes
		}
		if = {
			limit = { has_landed_title = e_iron_throne }
			kingsguard = {
				limit = {
					combat_rating = 40
					eligible_trial_by_combat_champion_for_ROOT_trigger = yes
					NOT = { has_character_flag = tbc_champion }
				}
				save_event_target_as = AI_champion_3
				break = yes
			}
		}
		random_courtier = {
			limit = {
				combat_rating = 30
				eligible_trial_by_combat_champion_for_ROOT_trigger = yes
				NOT = { has_character_flag = tbc_champion }
			}
			save_event_target_as = AI_champion_3
		}
	}

	option = { # champion 1
		name = "EVTOPTAtrial_by_combat.6"
		trigger = {
			event_target:AI_champion_1 = { always = yes }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				event_target:AI_champion_1 = {
					combat_rating = 40
				}
			}
			modifier = {
				factor = 2
				event_target:AI_champion_1 = {
					combat_rating = 50
				}
			}
			modifier = {
				factor = 2
				event_target:AI_champion_1 = {
					combat_rating = 60
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_1 = {
					combat_rating = 70
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_1 = {
					combat_rating = 80
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_1 = {
					combat_rating = 100
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_1 = {
					combat_rating = 120
				}
			}
		}
		event_target:AI_champion_1 = {
			letter_event = { id = trial_by_combat.1 }
			clr_character_flag = tbc_champion
		}
		hidden_tooltip = {
			event_target:AI_champion_2 = { clr_character_flag = tbc_champion }
			clear_event_target = AI_champion_1
			clear_event_target = AI_champion_2
			clear_event_target = AI_champion_3
		}
	}
	option = { # champion 2 dynast
		name = "EVTOPTBtrial_by_combat.6"
		trigger = {
			event_target:AI_champion_2 = { always = yes }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				event_target:AI_champion_2 = {
					combat_rating = 40
				}
			}
			modifier = {
				factor = 2
				event_target:AI_champion_2 = {
					combat_rating = 50
				}
			}
			modifier = {
				factor = 2
				event_target:AI_champion_2 = {
					combat_rating = 60
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_2 = {
					combat_rating = 70
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_2 = {
					combat_rating = 80
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_2 = {
					combat_rating = 100
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_2 = {
					combat_rating = 120
				}
			}
		}
		event_target:AI_champion_2 = {
			letter_event = { id = trial_by_combat.1 }
			clr_character_flag = tbc_champion
		}
		hidden_tooltip = {
			event_target:AI_champion_1 = { clr_character_flag = tbc_champion }
			clear_event_target = AI_champion_1
			clear_event_target = AI_champion_2
			clear_event_target = AI_champion_3
		}
	}
	option = { # champion 3
		name = "EVTOPTCtrial_by_combat.6"
		trigger = {
			event_target:AI_champion_3 = { always = yes }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				event_target:AI_champion_3 = {
					combat_rating = 40
				}
			}
			modifier = {
				factor = 2
				event_target:AI_champion_3 = {
					combat_rating = 50
				}
			}
			modifier = {
				factor = 2
				event_target:AI_champion_3 = {
					combat_rating = 60
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_3 = {
					combat_rating = 70
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_3 = {
					combat_rating = 80
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_3 = {
					combat_rating = 100
				}
			}
			modifier = {
				factor = 3
				event_target:AI_champion_3 = {
					combat_rating = 120
				}
			}
		}
		event_target:AI_champion_3 = {
			letter_event = { id = trial_by_combat.1 }
		}
		hidden_tooltip = {
			event_target:AI_champion_1 = { clr_character_flag = tbc_champion }
			event_target:AI_champion_2 = { clr_character_flag = tbc_champion }
			clear_event_target = AI_champion_1
			clear_event_target = AI_champion_2
			clear_event_target = AI_champion_3
		}
	}
	option = { # I will fight
		name = "EVTOPTDtrial_by_combat.6"
		trigger = {
			age = 16
			is_ill = no
			NOT = { has_severe_disability_trigger = yes }
			combat_rating = 10
			OR = {
				is_female = no
				female_get_masculine_event_trigger = yes
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				NOT = { combat_rating = 20 }
			}
			modifier = {
				factor = 0.5
				NOT = { combat_rating = 30 }
			}
			modifier = {
				factor = 2
				combat_rating = 40
			}
			modifier = {
				factor = 2
				combat_rating = 50
			}
			modifier = {
				factor = 2
				combat_rating = 60
			}
			modifier = {
				factor = 3
				combat_rating = 70
			}
			modifier = {
				factor = 3
				combat_rating = 80
			}
			modifier = {
				factor = 3
				combat_rating = 100
			}
			modifier = {
				factor = 3
				combat_rating = 120
			}

			modifier = {
				factor = 0.05
				trait = craven
			}
		}
		clr_character_flag = choosing_champion
		hidden_tooltip = {
			event_target:AI_champion_1 = { clr_character_flag = tbc_champion }
			event_target:AI_champion_2 = { clr_character_flag = tbc_champion }
			clear_event_target = AI_champion_1
			clear_event_target = AI_champion_2
			clear_event_target = AI_champion_3
		}
		host = {
			character_event = {
				id = trial_by_combat.4
			}
		}
	}

	option = { # No eligible champions
		name = "EVTOPTDtrial_by_combat.6"
		ai_chance = {
			factor = 25
			modifier = {
				factor = 6
				NOR = {
					combat_rating = 50
					event_target:AI_champion_1 = { combat_rating = 50 }
					event_target:AI_champion_2 = { combat_rating = 50 }
					event_target:AI_champion_3 = { combat_rating = 50 }
				}
				OR = {
					host = {
						combat_rating = 60
						OR = {
							is_female = no
							female_get_masculine_event_trigger = yes
						}
						NOT = { has_severe_disability_trigger = yes }
					}
					host = {
						any_courtier = {
							age = 16
							OR = {
								is_female = no
								female_get_masculine_event_trigger = yes
							}
							liege = { character = PREV }
							NOT = { character = PREV }
							combat_rating = 60
							NOT = { has_severe_disability_trigger = yes }
							is_ill = no
							prisoner = no
						}
					}
					host = {
						has_landed_title = e_iron_throne
						kingsguard = {
							is_alive = yes
							combat_rating = 60
						}
					}
				}
			}
			modifier = {
				factor = 6
				NOR = {
					combat_rating = 80
					event_target:AI_champion_1 = { combat_rating = 80 }
					event_target:AI_champion_2 = { combat_rating = 80 }
					event_target:AI_champion_3 = { combat_rating = 80 }
				}
				OR = {
					host = {
						combat_rating = 100
						OR = {
							is_female = no
							female_get_masculine_event_trigger = yes
						}
						NOT = { has_severe_disability_trigger = yes }
					}
					host = {
						any_courtier = {
							age = 16
							OR = {
								is_female = no
								female_get_masculine_event_trigger = yes
							}
							liege = { character = PREV }
							NOT = { character = PREV }
							combat_rating = 100
							NOT = { has_severe_disability_trigger = yes }
							is_ill = no
							prisoner = no
						}
					}
					host = {
						has_landed_title = e_iron_throne
						kingsguard = {
							is_alive = yes
							combat_rating = 100
						}
					}
				}
			}
		}
		clr_character_flag = choosing_champion
		clear_event_target = AI_champion_1
		clear_event_target = AI_champion_2
		clear_event_target = AI_champion_3
	}
}
##World informed of trial by combat results##
#prisoner loses, fighting for self
long_character_event = {
	id = trial_by_combat.30
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes
	show_from_from_from = yes

	trigger = { NOT = { has_character_flag = do_not_inform_trial_by_combat } }

	desc = {
		text = "EVTDESCtrial_by_combat.30" #Died in combat
		trigger = {
			FROMFROMFROM = { #prisoner
				is_alive = no
				death_reason = death_duel_trial_by_combat
			}
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.30B" #Survived combat
		trigger = {
			NOT = {
				FROMFROMFROM = {
					is_alive = no
					death_reason = death_duel_trial_by_combat
				}
			}
		}
	}

	option = {
		name = OK
		show_portrait = FROM #captor
		show_portrait = FROMFROM #captor champion
	}
	option = {
		name = OPTNOINFORMTRIALCOMBAT
		set_character_flag = do_not_inform_trial_by_combat
	}
}
#prisoner wins, fighting for self
long_character_event = {
	id = trial_by_combat.31
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes
	show_from_from = yes

	trigger = { NOT = { has_character_flag = do_not_inform_trial_by_combat } }

	desc = {
		text = "EVTDESCtrial_by_combat.31" #Champion died in combat
		trigger = {
			FROMFROMFROM = {
				is_alive = no
				death_reason = death_duel_trial_by_combat
			}
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.31B" #Champion survived combat
		trigger = {
			NOT = {
				FROMFROMFROM = {
					is_alive = no
					death_reason = death_duel_trial_by_combat
				}
			}
		}
	}

	option = {
		name = OK
		show_portrait = FROM #captor
		show_portrait = FROMFROMFROM #captor champion
	}
	option = {
		name = OPTNOINFORMTRIALCOMBAT
		set_character_flag = do_not_inform_trial_by_combat
	}
}
#prisoner loses, had champion
long_character_event = {
	id = trial_by_combat.32
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes
	show_from_from = yes

	trigger = { NOT = { has_character_flag = do_not_inform_trial_by_combat } }

	desc = {
		text = "EVTDESCtrial_by_combat.32" #Died in combat
		trigger = {
			FROMFROMFROMFROM = {
				is_alive = no
				death_reason = death_duel_trial_by_combat
			}
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.32B" #Survived combat
		trigger = {
			NOT = {
				FROMFROMFROMFROM = {
					is_alive = no
					death_reason = death_duel_trial_by_combat
				}
			}
		}
	}

	option = {
		name = OK
		show_portrait = FROM #captor
		show_portrait = FROMFROMFROM #captor champion
		show_portrait = FROMFROMFROMFROM #prisoner champion
	}
	option = {
		name = OPTNOINFORMTRIALCOMBAT
		set_character_flag = do_not_inform_trial_by_combat
	}
}
#prisoner wins, had champion
long_character_event = {
	id = trial_by_combat.33
	picture = "GFX_trial_by_combat"

	is_triggered_only = yes
	show_from_from = yes

	trigger = { NOT = { has_character_flag = do_not_inform_trial_by_combat } }

	desc = {
		text = "EVTDESCtrial_by_combat.33" #Died in combat
		trigger = {
			FROMFROMFROMFROM = {
				is_alive = no
				death_reason = death_duel_trial_by_combat
			}
		}
	}
	desc = {
		text = "EVTDESCtrial_by_combat.33B" #Survived combat
		trigger = {
			NOT = {
				FROMFROMFROMFROM = {
					is_alive = no
					death_reason = death_duel_trial_by_combat
				}
			}
		}
	}

	option = {
		name = OK
		show_portrait = FROM
		show_portrait = FROMFROMFROM
		show_portrait = FROMFROMFROMFROM
	}
	option = {
		name = OPTNOINFORMTRIALCOMBAT
		set_character_flag = do_not_inform_trial_by_combat
	}
}