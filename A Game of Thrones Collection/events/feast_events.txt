###################################
#
# Events for Feasts
#
# Id 72000 - 72999 is reserved
#
# Fired from on actions
#
###################################
#
# Designed by Johan Andersson
# Written by Sara Wendel-Ð¦rtqvist
# Re-written for AGOT
###################################
# Galle (Gregory Hayes)
# Added Rains of Castamere option for Lannisters
# Linked duels to duel engine

namespace = feast
###################################
#Random Event Generator
###################################
#Can be used in other event chains using holding_large_feast modfier

##Preperation Events##
character_event = {
	id = feast.1

	is_triggered_only = yes
	hide_window = yes

	trigger = { has_character_modifier = holding_large_feast }

	immediate = {
		random_list = { #trigger one entertainment event
			1 = { character_event = { id = 72000 days = 25 random = 15 } }
			1 = { character_event = { id = 72001 days = 25 random = 15 } }
			1 = { character_event = { id = 72002 days = 25 random = 15 } }
			1 = { character_event = { id = 72006 days = 25 random = 15 } }
			1 = { character_event = { id = 72007 days = 25 random = 15 } }
			1 = { character_event = { id = 72009 days = 25 random = 15 } }
			1 = { character_event = { id = 72120 days = 25 random = 15 } }
			1 = {
				modifier = {
					factor = 5
					culture = summer_islander
				}
				character_event = { id = feast.30 days = 25 random = 15 }
			}
		}
		random = { #Maybe a second
			chance = 20
			random_list = {
				1 = { character_event = { id = 72000 days = 25 random = 15 } }
				1 = { character_event = { id = 72001 days = 25 random = 15 } }
				1 = { character_event = { id = 72002 days = 25 random = 15 } }
				1 = { character_event = { id = 72006 days = 25 random = 15 } }
				1 = { character_event = { id = 72007 days = 25 random = 15 } }
				1 = { character_event = { id = 72009 days = 25 random = 15 } }
				1 = { character_event = { id = 72120 days = 25 random = 15 } }
				1 = { character_event = { id = feast.30 days = 25 random = 15 } }
			}
		}
		random = {
			chance = 7
			character_event = { id = 72004 days = 14 random = 7 } #castle problems
		}
		random = {
			chance = 2
			modifier = {
				factor = 20
				capital_scope = {
					has_province_modifier = highway_robber_band
				}
			}
			character_event = { id = 72005 days = 14 random = 7 } #Send Marshal to deal with Highway Robber Band
		}
		random = {
			chance = 7
			modifier = {
				factor = 2
				trait = hunter
			}
			character_event = { id = 72008 days = 14 random = 7 } #Hunt for boars for winter feast
		}
		if = { #Black Wall Chariot Race?
			limit = {
				OR = {
					capital_scope = { province_id = 419 } #Old Volantis
					AND = {
						is_patrician = yes
						liege = {
							is_merchant_republic = yes
							capital_scope = { province_id = 419 } #Old Volantis
						}
					}
				}
			}
			character_event = { id = feast.36 days = 10 }
		}
	}

	option = {
		name = OK
	}
}
##In Feast Events##
character_event = {
	id = feast.2

	is_triggered_only = yes
	hide_window = yes

	trigger = { has_character_modifier = holding_large_feast }

	immediate = {
		#food event
		random_courtier_or_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = coming_to_feast
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				prisoner = no
				is_incapable = no
				age = 16
			}
			if = {
				limit = { ROOT = { has_character_flag = lavishly_food } }
				character_event = { id = 72020 days = 10 random = 6 }	#Lavish Food
			}
			if = {
				limit = { ROOT = { has_character_flag = medium_food } }
				character_event = { id = 72021 days = 10 random = 6 }	#Medium Food
			}
			if = {
				limit = { ROOT = { has_character_flag = low_food } }
				character_event = { id = 72022 days = 10 random = 6 }	#Low Food
			}
		}
		#Drink too much wine: become drunkard or insult host
		random_courtier_or_vassal = {
			limit = {
				NOT = { trait = drunkard }
				NOT = { trait = temperate }
				liege = { character = ROOT }
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = coming_to_feast
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				prisoner = no
				is_incapable = no
				age = 16
			}
			random = {
				chance = 5
				modifier = {
					factor = 2
					any_claim = {
						holder_scope = {
							character = FROM
						}
					}
				}
				modifier = {
					factor = 2
					trait = gluttonous
				}
				modifier = {
					factor = 4
					trait = hedonist
				}
				modifier = {
					factor = 0.1
					trait = chaste
				}
				character_event = { id = 72045 days = 10 random = 6 }
			}
		}
		if = {
			limit = { has_character_flag = holding_progress_feast }
			event_target:progress_feast_target = {
				random_courtier = {
					limit = {
						NOT = { trait = drunkard }
						NOT = { trait = temperate }
						OR = {
							character = PREV
							AND = {
								is_ruler = no
								is_councillor = no
								is_voter = no
								NOT = { has_minor_title = title_regent }
								in_command = no
								is_abroad = no
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						prisoner = no
						is_incapable = no
						age = 16
					}
					random = {
						chance = 10
						modifier = {
							factor = 2
							any_claim = {
								holder_scope = {
									character = FROM
								}
							}
						}
						modifier = {
							factor = 2
							trait = gluttonous
						}
						modifier = {
							factor = 4
							trait = hedonist
						}
						modifier = {
							factor = 0.1
							trait = chaste
						}
						set_character_flag = progress_trigger
						character_event = { id = 72045 days = 1 random = 3 }
					}
				}
			}
		}
		#drunkard event
		random_courtier_or_vassal = {
			limit = {
				trait = drunkard
				liege = { character = ROOT }
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = coming_to_feast
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				prisoner = no
				is_incapable = no
				age = 16
			}
			random_list = {
				25 = { }
				5 = { #Drink too much wine: Embarass yourself
					modifier = {
						factor = 0
						ROOT = {
							job_treasurer = {
								OR = {
									trait = drunkard
									AND = {
										is_ruler = yes
										NOT = { has_character_flag = coming_to_feast }
									}
								}
							}
						}
					}
					character_event = { id = 72046 days = 10 random = 6 }
				}
				10 = { #Drink too much wine: Fall asleep
					character_event = { id = 72048 days = 10 random = 6 }
				}
			}
		}
		if = {
			limit = { has_character_flag = holding_progress_feast }
			event_target:progress_feast_target = {
				random_courtier = {
					limit = {
						trait = drunkard
						OR = {
							character = PREV
							AND = {
								is_ruler = no
								is_councillor = no
								is_voter = no
								NOT = { has_minor_title = title_regent }
								in_command = no
								is_abroad = no
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						prisoner = no
						is_incapable = no
						age = 16
					}
					random_list = {
						25 = { }
						10 = { #Drink too much wine: Embarass yourself
							modifier = {
								factor = 0
								ROOT = {
									job_treasurer = {
										OR = {
											trait = drunkard
											AND = {
												is_ruler = yes
												NOT = { has_character_flag = coming_to_feast }
											}
										}
									}
								}
							}
							set_character_flag = progress_trigger
							character_event = { id = 72046 days = 1 random = 3 }
						}
						20 = { #Drink too much wine: Fall asleep
							set_character_flag = progress_trigger
							character_event = { id = 72048 days = 1 random = 3 }
						}
					}
				}
			}
		}
		#Highway Robber Band: Guest Complains
		if = {
			limit = { capital_scope = { has_province_modifier = highway_robber_band } }
			random_vassal = {
				limit = {
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = coming_to_feast
					}
					prisoner = no
					is_incapable = no
					age = 16
				}
				random = {
					chance = 50
					character_event = { id = 72050 days = 10 random = 6 }
				}
			}
			event_target:progress_feast_target = {
				random = {
					chance = 50
					set_character_flag = progress_trigger
					character_event = { id = 72050 days = 1 random = 3 }
				}
			}
		}
		#Guest kills Host's servant
		random_courtier_or_vassal = {
			limit = {
				OR = {
					trait = wroth
					trait = cruel
					trait = impaler
				}
				NOT = { trait = just }
				NOT = { trait = honorable }
				is_theocracy = no
				liege = { character = ROOT }
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = coming_to_feast
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				prisoner = no
				is_incapable = no
				age = 16
			}
			random = {
				chance = 2
				character_event = { id = 72055 days = 10 random = 6 }
			}
		}
		if = {
			limit = { has_character_flag = holding_progress_feast }
			event_target:progress_feast_target = {
				random_courtier = {
					limit = {
						OR = {
							trait = wroth
							trait = cruel
							trait = impaler
						}
						NOT = { trait = just }
						NOT = { trait = honorable }
						is_theocracy = no
						OR = {
							character = PREV
							AND = {
								is_ruler = no
								is_councillor = no
								is_voter = no
								NOT = { has_minor_title = title_regent }
								in_command = no
								is_abroad = no
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						prisoner = no
						is_incapable = no
						age = 16
					}
					random = {
						chance = 4
						set_character_flag = progress_trigger
						character_event = { id = 72055 days = 1 random = 3 }
					}
				}
			}
		}

		#Jester jokes about your rule
		random = {
			chance = 5
			character_event = { id = 72060 days = 10 random = 6 }
		}
		#Friendly with another guest's spouse
		if = {
			limit = {
				age = 16
				NOT = { age = 60 }
				fertility = 0.4
				is_pregnant = no
				NOT = { trait = eunuch }
				NOT = { trait = celibate }
				NOT = { trait = chaste }
				is_ill = no
				has_epidemic = no
			}
			random = {
				chance = 5
				modifier = {
					factor = 5
					trait = lustful
				}
				modifier = {
					factor = 2
					trait = hedonist
				}
				character_event = { id = 72075 days = 10 random = 6 }
			}
		}
		#Late night talk: First person
		random = {
			chance = 8
			modifier = {
				factor = 2
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = shy
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			if = {
				limit = { has_character_flag = holding_progress_feast }
				character_event = { id = 72080 days = 1 random = 3 }
			}
			else = {
				character_event = { id = 72080 days = 10 random = 6 }
			}
		}
		#Claim on visitor's title
		if = {
			limit = {
				any_claim = {
					holder_scope = {
						war = no
						has_character_flag = coming_to_feast
						vassal_of = ROOT
					}
				}
			}
			random = {
				chance = 25
				character_event = { id = 72085 days = 10 random = 6 }
			}
		}
		#Host or Host's son falls in love with unmarried daughter of vassal
		if = {
			limit = {
				age = 14
				NOT = { age = 26 }
				is_female = no
				is_married = no
				has_lover = no
				NOT = { trait = shy }
				fertility = 0.4

				NOT = { trait = eunuch }
				NOT = { trait = celibate }
				NOT = { trait = homosexual }
				is_ill = no
				has_epidemic = no
			}
			random = {
				chance = 5
				modifier = {
					factor = 2
					trait = gregarious
				}
				modifier = {
					factor = 2
					has_ambition = obj_make_the_eight
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.05
					trait = paranoid
				}
				character_event = { id = 72090 days = 10 random = 6 }
			}
		}
		random_child = {
			limit = {
				age = 14
				NOT = { age = 26 }
				is_female = no
				is_ruler = no
				liege = { character = ROOT }

				is_married = no
				has_lover = no
				NOT = { trait = shy }
				fertility = 0.4

				NOT = { trait = eunuch }
				NOT = { trait = celibate }
				NOT = { trait = homosexual }
				is_ill = no
				has_epidemic = no

				prisoner = no
				is_incapable = no
			}
			random = {
				chance = 5
				modifier = {
					factor = 2
					trait = gregarious
				}
				modifier = {
					factor = 2
					has_ambition = obj_make_the_eight
				}
				modifier = {
					factor = 1.25
					trait = trusting
				}
				modifier = {
					factor = 0.05
					trait = paranoid
				}
				character_event = { id = 72090 days = 10 random = 6 }
			}
		}
		#Guest chokes to death
		random_courtier_or_vassal = {
			limit = {
				age = 12
				liege = { character = ROOT }
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = coming_to_feast
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				OR = {
					is_dumb_trigger = yes
					is_imbecile_trigger = yes
					trait = inbred
					trait = lunatic
					trait = drunkard
					trait = harelip
					is_lazy_trigger = yes
					is_weak_trigger = yes
				}
				prisoner = no
				is_incapable = no
			}
			random = {
				chance = 2
				character_event = { id = feast.25 days = 10 random = 6 }
			}
		}
		#Prince of Pentos presides over feast
		if = {
			limit = {
				is_patrician = yes
				OR = {
					has_landed_title = k_pentos
					liege = { has_landed_title = k_pentos }
				}
				d_prince_pentos = {
					holder_scope = {
						has_character_flag = coming_to_feast
						is_patrician = no
						same_realm = ROOT
						NOT = { character = ROOT }
					}
				}
			}
			d_prince_pentos = { holder_scope = { character_event = { id = 72132 days = 2 } } }
		}
		#Black Goat/Qohorik offer blood sacrifice
		if = {
			limit = {
				has_black_goat_sacrifice_religion_trigger = yes
			}
			character_event = { id = feast.33 days = 7 }
		}
		if = {
			limit = { has_character_flag = lavishly_food }
			random = { #Fancy centre piece
				chance = 20
				long_character_event = { id = feast.100 days = 10 random = 6 }	#Lavish Food
			}
			random = { #Fancy pie
				chance = 20
				long_character_event = { id = feast.102 days = 10 random = 6 }	#Lavish Food
			}
		}
		#Harvest Feast
		if = {
			limit = {
				capital_scope = {
					NOR = {
						region = world_summer_sea
						region = world_moraq
						has_province_modifier = large_winter_reserve
						has_province_modifier = small_winter_reserve
					}
				}
				OR = {
					had_global_flag = { flag = short_summer days = 500 }
					had_global_flag = { flag = normal_summer days = 1000 }
					had_global_flag = { flag = long_summer days = 2000 }
				}
			}
			character_event = { id = feast.104 days = 10 random = 6 }
		}
		#Petitions
		save_event_target_as = feast_host
		if = {
			limit = {
				OR = {
					has_regent = no
					has_character_flag = holding_progress_feast
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0.25
						has_character_flag = holding_progress_feast
					}
				}
				10 = { #Courtier in Debt
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.105 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.105 days = 10 random = 6 }
					}
				}
				10 = { #Property Dispute
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.106 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.106 days = 10 random = 6 }
					}
				}
				10 = { #Crime problem
					trigger = {
						capital_scope = {
							OR = {
								has_province_modifier = thieves_guild
								has_province_modifier = smugglers_ring
								has_province_modifier = highway_robber_band
							}
						}
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.107 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.107 days = 10 random = 6 }
					}
				}
				10 = { #Courtier accused of crime
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.150 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.150 days = 10 random = 6 }
					}
				}
				10 = { #Storm hit town asks for tax relief
					trigger = {
						any_vassal = {
							tier = BARON
							capital_holding = { holding_type = city }
						}
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.151 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.151 days = 10 random = 6 }
					}
				}
				10 = { #Minor noble violently ousted from lands
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.152 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.152 days = 10 random = 6 }
					}
				}
				10 = { #Temple claims wrongful tax collected
					trigger = {
						any_vassal = {
							tier = BARON
							is_theocracy = yes
							is_unorganised_religion_trigger = no
						}
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.153 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.153 days = 10 random = 6 }
					}
				}
				10 = { #Petition for commision to recruit mariners
					trigger = {
						any_artifact = {
							is_artifact_active = yes
							has_artifact_flag = flagship
						}
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.154 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.154 days = 10 random = 6 }
					}
				}
				10 = { #Town error causes loss to ROOT
					trigger = {
						any_vassal = {
							tier = BARON
							capital_holding = { holding_type = city }
						}
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.155 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.155 days = 10 random = 6 }
					}
				}
				10 = { #Noble requests access to inherited lands
					trigger = {
						any_demesne_province = { is_capital = no }
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.156 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.156 days = 10 random = 6 }
					}
				}
				10 = { #Foreign port requests customs exemption
					trigger = {
						capital_scope = {
							port = yes
							any_disconnected_province = {
								land_gap = yes
								sub_realm = no
								naval_distance = 3

								port = yes
								owner = { NOT = { same_realm = ROOT } }
							}
						}
					}
					if = {
						limit = { has_character_flag = holding_progress_feast }
						event_target:progress_feast_target = { character_event = { id = feast.157 days = 1 random = 3 } }
					}
					else = {
						character_event = { id = feast.157 days = 10 random = 6 }
					}
				}
				10 = { #Soldier seeks grant
					trigger = {
						NOT = { has_character_flag = holding_progress_feast }
						OR = {
							ai = yes #this is mainly for loc purposes anyway
							any_playable_ruler = {
								OR = {
									reverse_has_truce = ROOT
									ROOT = { reverse_has_truce = PREV }
								}
							}
						}
					}
					character_event = { id = feast.158 days = 10 random = 6 }
				}
			}
			#Landless guest seeks redress
			random_realm_character = {
				limit = {
					age = 16
					is_liege_or_above = ROOT
					OR = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					is_abroad = no
					NOT = { trait = slave }
					NOT = { trait = dragon }
					NOT = { is_inaccessible_trigger = yes }
					prisoner = no
					is_incapable = no
					any_opinion_modifier_target = {
						OR = {
							reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder }
							reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder_of_close_kin }
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_cuckolded }
								PREV = { NOT = { is_married = ROOT } }
							}
							reverse_has_opinion_modifier = { who = PREV modifier = kidnapped_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_looted }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_oubilette_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_enslaved_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_consort }
							AND = {
								is_adult = yes
								OR = {
									reverse_has_opinion_modifier = { who = PREV modifier = opinion_vengeance }
									reverse_has_opinion_modifier = { who = PREV modifier = opinion_blackmailed }
								}
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_son }
								PREV = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_castrated_me } } }
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_child }
								PREV = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_blinded_me } } }
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_kin }
								OR = {
									PREV = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_tortured_me } } }
									any_kill_list_character = {
										is_close_relative = PREVPREV
										death_execution_torture_trigger = yes
									}
								}
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_close_kin }
								PREV = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_mutilated_me } } }
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_relative_consort }
								PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_consort } } }
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_kin }
								PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_upon_me } } }
							}
							AND = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_marriage_child }
								PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_marriage } } }
							}
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_slandered }
						}
						is_liege_or_above = ROOT
						NOT = { is_consort = PREV }
						NOT = { #no lower liege who has power over both
							any_liege = {
								lower_tier_than = ROOT
								is_vassal_or_below = PREVPREV
							}
						}
						NOT = { character = event_target:progress_feast_target }
						prisoner = no
						NOT = { has_opinion_modifier = { who = PREV modifier = opinion_sought_liege_redress } }
					}
				}
				if = {
					limit = { ROOT = { has_character_flag = holding_progress_feast } }
					set_character_flag = progress_trigger
					character_event = { id = feast.120 days = 1 random = 3 }
				}
				else = {
					character_event = { id = feast.120 days = 10 random = 6 }
				}
			}
		}
		if = { #ToJ john check
			limit = { has_character_flag = jon_snow }
			character_event = { id = tower_of_joy.5199 }
		}
		if = { #Norvos bears event
			limit = {
				OR = {
					capital_scope = { province_id = 433 } #Norvos
					AND = {
						is_patrician = yes
						liege = {
							is_merchant_republic = yes
							capital_scope = { province_id = 433 } #Norvos
						}
					}
				}
			}
			character_event = { id = feast.39 days = 10 random = 6 }
		}

		clr_character_flag = holding_progress_feast
	}

	option = {
		name = OK
	}
}
##Guest Events##
character_event = {
	id = feast.3

	is_triggered_only = yes
	hide_window = yes

	trigger = { FROM = { has_character_modifier = holding_large_feast } }

	immediate = {
		#Late night talk: First person
		if = {
			limit = {
				FROM = {
					any_courtier_or_vassal = {
						age = 16
						OR = {
							has_character_flag = guest_feast_started
							has_character_flag = coming_to_feast
							AND = {
								is_ruler = no
								is_abroad = no
								location = { ROOT_FROM = { capital_scope = { province_id = PREVPREV } } }
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						liege = { character = ROOT_FROM }
						NOT = { character = ROOT }
						NOT = { is_rival = ROOT }
						NOT = { is_friend = ROOT }
						opinion = { who = ROOT value = 0 }
						reverse_opinion = { who = ROOT value = 0 }
						OR = {
							opinion = { who = ROOT value = 20 }
							NOT = { age_diff = { who = ROOT years = 15 } }
						}
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_character_flag = made_friend_at_feast }
					}
				}
			}
			random = {
				chance = 17
				modifier = {
					factor = 2
					trait = gregarious
				}
				modifier = {
					factor = 2
					trait = trusting
				}
				modifier = {
					factor = 0.5
					trait = shy
				}
				modifier = {
					factor = 0.5
					trait = paranoid
				}
				character_event = { id = 72025 days = 7 random = 8 }
			}
		}
		#Late night talk: First person (mutual dislike of liege)
		if = {
			limit = {
				FROM = {
					NOT = { reverse_opinion = { who = ROOT value = -15 } }
					any_courtier_or_vassal = {
						age = 16
						OR = {
							has_character_flag = guest_feast_started
							has_character_flag = coming_to_feast
							AND = {
								is_ruler = no
								is_abroad = no
								location = { ROOT_FROM = { capital_scope = { province_id = PREVPREV } } }
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						liege = { character = ROOT_FROM }
						NOT = { character = ROOT }
						NOT = { is_rival = ROOT }
						NOT = { is_friend = ROOT }
						NOT = { opinion = { who = PREV value = -15 } }
						opinion = { who = ROOT value = 0 }
						reverse_opinion = { who = ROOT value = 0 }
						OR = {
							opinion = { who = ROOT value = 20 }
							NOT = { age_diff = { who = ROOT years = 15 } }
						}
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_character_flag = made_friend_at_feast }
					}
				}
			}
			random = {
				chance = 17
				modifier = {
					factor = 2
					trait = gregarious
				}
				modifier = {
					factor = 2
					trait = trusting
				}
				modifier = {
					factor = 0.5
					trait = shy
				}
				modifier = {
					factor = 0.5
					trait = paranoid
				}
				character_event = { id = 72027 days = 7 random = 8 }
			}
		}
		#Duel
		if = {
			limit = {
				age = 16
				OR = {
					is_female = no
					female_get_masculine_event_trigger = yes
				}
				NOT = { trait = wounded }
				NOT = { has_severe_disability_trigger = yes }
				martial = 9
				OR = {
					trait = duelist
					trait = brave
					trait = wroth
					trait = cruel
				}
				NOT = { trait = craven }
				FROM = {
					any_courtier_or_vassal = {
						age = 16
						OR = {
							is_female = no
							female_get_masculine_event_trigger = yes
						}
						prisoner = no
						OR = {
							has_character_flag = guest_feast_started
							has_character_flag = coming_to_feast
							AND = {
								is_ruler = no
								is_abroad = no
								location = { ROOT_FROM = { capital_scope = { province_id = PREVPREV } } }
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						liege = { character = ROOT_FROM }
						NOT = {
							character = ROOT
						}
						OR = {
							AND = {
								NOT = {
									reverse_opinion = { who = ROOT value = -10 }
								}
								NOT = {
									opinion = { who = ROOT value = -10 }
								}
							}
							is_rival = ROOT
						}
						NOT = { trait = wounded }
						NOT = { has_severe_disability_trigger = yes }
					}
				}
			}
			random = {
				chance = 10
				modifier = {
					factor = 2
					trait = brave
				}
				modifier = {
					factor = 4
					has_focus = focus_war
				}
				character_event = { id = 72030 days = 7 random = 8 }
			}
		}
		#Friendly with another guest's spouse
		if = {
			limit = {
				age = 16
				NOT = { age = 60 }
				is_married = yes
				OR = {
					trait = lustful
					trait = hedonist
				}
				fertility = 0.4
				is_pregnant = no
				NOT = { trait = eunuch }
				is_ill = no
				has_epidemic = no
				FROM = {
					any_courtier_or_vassal = {
						NOT = { character = ROOT }
						OR = {
							has_character_flag = guest_feast_started
							has_character_flag = coming_to_feast
							AND = {
								is_ruler = no
								is_abroad = no
								location = { ROOT_FROM = { capital_scope = { province_id = PREVPREV } } }
								NOT = { trait = slave }
								NOT = { trait = dragon }
								NOT = { is_inaccessible_trigger = yes }
							}
						}
						liege = { character = ROOT_FROM }
						spouse = {
							prisoner = no
							age = 16
							NOT = { age = 60 }
							is_pregnant = no
							NOT = { trait = eunuch }
							is_ill = no
							has_epidemic = no
							is_alive = yes
							is_abroad = no
							NOT = { trait = celibate }
							OR = {
								is_female = no
								NOT = { age = 40 }
							}
							opinion = { who = ROOT value = 15 }
							NOT = { is_close_relative = ROOT }
							NOT = { is_lover = ROOT }
							OR = {
								AND = {
									NOT = { same_sex = ROOT }
									NOT = { trait = homosexual }
									ROOT = { NOT = { trait = homosexual } }
								}
								AND = {
									same_sex = ROOT
									trait = homosexual
									ROOT = { trait = homosexual }
								}
							}
						}
					}
				}
			}
			random = {
				chance = 33
				modifier = {
					factor = 2
					trait = lustful
				}
				modifier = {
					factor = 2
					has_ambition = obj_make_the_eight
				}
				modifier = {
					factor = 2
					trait = hedonist
				}
				modifier = {
					factor = 0.1
					trait = chaste
				}
				character_event = { id = 72040 days = 7 random = 8 }
			}
		}
		#Befriend Liege
		if = {
			limit = {
				ai = no
				has_ambition = obj_befriend_liege
				liege = { character = FROM }
			}
			random = {
				chance = 50
				modifier = {
					factor = 2
					NOT = { trait = shy }
				}
				character_event = { id = ambition.70 days = 8 random = 4 }
			}
		}
		# Poison rival during liege's feast
		if = {
			limit = {
				intrigue = 10
				any_rival = {
					same_liege = ROOT
					age = 16
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = coming_to_feast
						AND = {
							is_ruler = no
							is_abroad = no
							location = { ROOT_FROM = { capital_scope = { province_id = PREVPREV } } }
							NOT = { trait = slave }
							NOT = { trait = dragon }
							NOT = { is_inaccessible_trigger = yes }
						}
					}
					in_command = no
					prisoner = no
					NOT = { intrigue = ROOT }
					NOT = { character = FROM }
				}
			}
			random = {
				chance = 10
				character_event = { id = 100520 days = 7 random = 8 }
			}
		}
		#Seek justice for grievance
		if = {
			limit = {
				is_liege_or_above = FROM
				any_opinion_modifier_target = {
					OR = {
						reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder }
						reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder_of_close_kin }
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_cuckolded }
							ROOT = { NOT = { is_married = FROM } }
						}
						reverse_has_opinion_modifier = { who = PREV modifier = kidnapped_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_looted }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_oubilette_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_enslaved_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_me }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_consort }
						AND = {
							is_adult = yes
							OR = {
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_vengeance }
								reverse_has_opinion_modifier = { who = PREV modifier = opinion_blackmailed }
							}
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_son }
							ROOT = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_castrated_me } } }
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_child }
							ROOT = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_blinded_me } } }
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_kin }
							OR = {
								ROOT = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_tortured_me } } }
								any_kill_list_character = {
									is_close_relative = PREVPREV
									death_execution_torture_trigger = yes
								}
							}
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_close_kin }
							ROOT = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_mutilated_me } } }
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_relative_consort }
							ROOT = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_consort } } }
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_kin }
							ROOT = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_upon_me } } }
						}
						AND = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_marriage_child }
							ROOT = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_marriage } } }
						}
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_slandered }
					}
					is_liege_or_above = FROM
					NOT = { is_liege_or_above = PREV }
					NOT = { is_consort = PREV }
					NOT = { #no lower liege who has power over both
						any_liege = {
							lower_tier_than = FROM
							is_vassal_or_below = PREVPREV
						}
					}
					prisoner = no
					NOT = { has_opinion_modifier = { who = PREV modifier = opinion_sought_liege_redress } }
				}
			}
			FROM = { save_event_target_as = feast_host }
			character_event = { id = feast.120 days = 10 random = 6 }
		}
		# Petition liege for help with crime?
		if = {
			limit = {
				is_liege_or_above = FROM
				capital_scope = {
					OR = {
						has_province_modifier = thieves_guild
						has_province_modifier = smugglers_ring
						has_province_modifier = highway_robber_band
					}
					NOT = { owner = { character = FROM } }
				}
			}
			character_event = { id = feast.140 days = 10 random = 6 }
		}
		if = { #ToJ john check
			limit = { has_character_flag = jon_snow }
			character_event = { id = tower_of_joy.5199 }
		}
		#Brawl with blood feud target
		if = {
			limit = {
				is_adult = yes
				NOT = { trait = shy }
				NOT = { trait = honorable }
				NOT = { has_severe_disability_trigger = yes }
				is_female = no
				has_any_opinion_modifier = opinion_blood_feud
			}
			random = {
				chance = 10
				FROM = {
					save_event_target_as = blood_feud_brawl_host
					random_courtier_or_vassal = {
						limit = {
							is_adult = yes
							OR = {
								has_character_flag = guest_feast_started
								has_character_flag = coming_to_feast
								AND = {
									is_ruler = no
									is_abroad = no
									location = { ROOT_FROM = { capital_scope = { province_id = PREVPREV } } }
									NOT = { trait = slave }
									NOT = { trait = dragon }
									NOT = { is_inaccessible_trigger = yes }
								}
							}
							liege = { character = ROOT_FROM }
							NOT = { character = PREV }
							NOT = { dynasty = ROOT_FROM }
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_blood_feud }
							NOT = { opinion = { who = ROOT value = 0 } }
							NOT = { reverse_opinion = { who = ROOT value = 0 } }
							is_female = no
							NOT = { trait = shy }
							NOT = { trait = honorable }
							NOT = { has_severe_disability_trigger = yes }
							NOT = { has_character_flag = event_dynastic_rivalry_20 }
						}
						preferred_limit = {
							is_ruler = yes
						}
						save_event_target_as = blood_feud_brawl_target
						ROOT = {
							set_character_flag = event_dynastic_rivalry_20
							character_event = { id = dynastic_rivalry.20 days = 7 random = 8 }
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
	}
}
###################################
#Main events
###################################

#First Event
letter_event = {
	id = 72109
	desc = EVTDESC72109

	is_triggered_only = yes

	option = {
		name = EVTOPTA72109
		hidden_tooltip = {
			character_event = { id = feast.1 } #random prep events
		}
	}
}

### Food Preparations ###
character_event = {
	id = 72003
	desc = EVTDESC72003
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
	}

	immediate = {
		clr_character_flag = lavishly_food
		clr_character_flag = medium_food
		clr_character_flag = low_food
		hidden_tooltip = {
			character_event = { id = 72010 days = 3 } #invites
			character_event = { id = 72112 days = 2 } #cancel feast
		}

		if = {
			limit = {
				any_artifact = {
					has_artifact_flag = cooking
				}
			}
			random_artifact = {
				limit = {
					has_artifact_flag = cooking
					OR = {
						is_artifact_equipped = yes
						AND = {
							artifact_type = the_omnivore #If you're not a cannibal, it's not active, so...
							PREV = { NOT = { trait = cannibal_trait } }
						}
						AND = {
							artifact_type = the_omnivore #If ROOT already cannibal, someone else should be around to become cannical...
							PREV = {
								any_courtier = {
									NOT = { trait = cannibal_trait }
									is_adult = yes
									is_inaccessible_or_incapable_trigger = no
								}
							}
						}
					}
					NOT = { artifact_type = gastronomic_tonics } #Not really about food
				}
				preferred_limit = {
					quality = 3
				}
				preferred_limit = {
					quality = 2
				}
				preferred_limit = {
					quality = 1
				}
				save_event_target_as = book_target
			}
			if = { #If ROOT is already a cannibal_trait...
				limit = {
					event_target:book_target = {
						artifact_type = the_omnivore
					}
					trait = cannibal_trait
				}
				random_courtier = {
					limit = {
						NOT = { trait = cannibal_trait }
						is_adult = yes
						is_inaccessible_or_incapable_trigger = no
					}
					preferred_limit = {
						has_education_stewardship_trigger = yes
						family_of_root_trigger = yes
						is_evil_trigger = yes
					}
					preferred_limit = {
						has_education_stewardship_trigger = yes
						family_of_root_trigger = yes
					}
					preferred_limit = {
						family_of_root_trigger = yes
					}
					preferred_limit = {
						has_education_stewardship_trigger = yes
					}
					save_event_target_as = potential_cannibal
				}
			}
		}
	}

	option = {
		name = {
			text = EVTOPTD72003 #Why don't we use this as inspiration?
			trigger = {
				event_target:book_target = { quality > 1 }
			}
		}
		name = {
			text = EVTOPTD72003_cheap #Let's make use of this little thing
			trigger = {
				event_target:book_target = { quality < 2 }
			}
		}

		tooltip_info_custom = available_because_books_tt
		if = {
			limit = {
				event_target:book_target = {
					artifact_type = the_omnivore
				}
			}
			if = {
				limit = { NOT = { trait = cannibal_trait } }
				custom_tooltip = { text = EVTOPTD72003_cannibal_tt }
				add_trait = cannibal_trait
			}
			else = {
				custom_tooltip = { text = EVTOPTD72003_buddy_cannibal_tt }
				event_target:potential_cannibal = {
					show_scope_change = no
					add_trait = cannibal_trait
				}
			}
			set_character_flag = lavishly_food
			gain_weight_small_effect = yes
			weight_trait_check_effect = yes
			scaled_wealth = { value = -0.05 min = -5 max = -60 }
			scaled_prestige = { value = 0.2 min = 10 max = 50 }
		}
		else_if = {
			limit = {
				event_target:book_target = {
					quality < 2
				}
			}
			set_character_flag = medium_food
			scaled_prestige = { value = 0.1 min = 5 max = 25 }
			scaled_wealth = { value = -0.1 min = -10 max = -120 }
		}
		else = { #means it's quality 3/higher
			set_character_flag = lavishly_food
			gain_weight_small_effect = yes
			weight_trait_check_effect = yes
			scaled_wealth = { value = -0.05 min = -5 max = -60 }
			scaled_prestige = { value = 0.2 min = 10 max = 50 }
		}
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0.5
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 2
				NOT = { trait = gluttonous }
			}
			modifier = {
				factor = 2
				primary_title = { tier = DUKE }
			}
			modifier = {
				factor = 0.05
				event_target:book_target = {
					quality > 1
				}
				OR = {
					AND = {
						NOT = { yearly_income = 100 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 100
						NOT = { scaled_wealth = 0.3 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
		}
		trigger = {
			event_target:book_target = { always = yes }
		}
	}

	option = {
		name = EVTOPTA72003 #Spend lavishly on food
		ai_chance = {
			factor = 30

			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 100 }
						NOT = { treasury = 60 }
					}
					AND = {
						yearly_income = 100
						NOT = { scaled_wealth = 0.6 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}

			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 3
				trait = hedonist
			}
			modifier = {
				factor = 3
				trait = gluttonous
			}
			modifier = {
				factor = 0.05
				trait = temperate
			}
			modifier = {
				factor = 2
				primary_title = { higher_tier_than = DUKE }
			}
		}
		gain_weight_small_effect = yes
		weight_trait_check_effect = yes
		set_character_flag = lavishly_food
		scaled_wealth = { value = -0.2 min = -20 max = -250 }
	}
	option = {
		name = EVTOPTB72003 #Spend medium on food
		ai_chance = {
			factor = 30

			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 100 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 100
						NOT = { scaled_wealth = 0.3 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 2
				NOT = { trait = gluttonous }
			}
			modifier = {
				factor = 2
				tier = DUKE
			}
		}
		set_character_flag = medium_food
		scaled_wealth = { value = -0.1 min = -10 max = -125 }
	}
	option = {
		name = EVTOPTC72003 #Spend low on food
		ai_chance = {
			factor = 30

			modifier = {
				factor = 2.5
				trait = greedy
			}
			modifier = {
				factor = 0.1
				trait = gluttonous
			}
			modifier = {
				factor = 2
				primary_title = { tier = COUNT }
			}
		}
		set_character_flag = low_food
		scaled_wealth = { value = -0.05 min = -5 max = -60 }
	}
}

#Send invites
character_event = {
	id = 72010
	desc = EVTDESC72010
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
		NOT = { has_character_flag = called_grand_council }
		NOT = { has_character_flag = called_great_council }
		NOT = { has_character_modifier = hosting_a_funeral }
		NOT = { has_character_flag = wants_coronation }
		NOT = { has_character_modifier = holding_epic_tournament }
	}

	option = {
		name = EVTOPTA72010
		if = {
			limit = {
				is_patrician = yes
				liege = { has_landed_title = k_pentos NOT = { character = ROOT } }
				d_prince_pentos = {
					holder_scope = {
						is_patrician = no
						same_realm = ROOT
						NOT = { character = ROOT }
						NOT = { has_character_flag = do_not_disturb }
					}
				}
			}
			d_prince_pentos = {
				holder_scope = {
					letter_event = {
						id = 72011
						days = 1
						random = 2
						tooltip = EVTTOOLTIP72011
					}
				}
			}
		}
		any_vassal = {
			limit = {
				prisoner = no
				is_incapable = no
				NOT = { has_character_modifier = holding_large_feast }
				war = no
				age = 16
				NOT = { is_inaccessible_trigger = yes }
				NOT = { has_character_flag = do_not_disturb }
			}
			letter_event = {
				id = 72011
				days = 1
				random = 2
				tooltip = EVTTOOLTIP72011
			}
		}
		hidden_tooltip = {
			character_event = { id = 72015 days = 32 random = 8 } #feast begins
			character_event = { id = 72112 days = 31 } #cancel feast check

			#Maybe foreign adventurer is invited also
			if = {
				limit = {
					OR = {
						higher_tier_than = DUKE
						AND = {
							NOT = { tier = COUNT }
							independent = yes
						}
						is_patrician = yes
					}
				}
				random = {
					chance = 20
					wikid = {
						limit = {
							is_alive = yes
							OR = {
								AND = {
									has_character_flag = foreign_adventure #landless
									is_within_diplo_range = ROOT
									NOT = { religion_group = ROOT }
								}
								AND = {
									ai = no
									has_character_flag = on_a_foreign_tour #landed
									NOT = { has_character_flag = touring_royal_progress }
									OR = {
										AND = {
											has_character_flag = touring_westeros
											ROOT = { capital_scope = { region = world_westeros } }
										}
										AND = {
											has_character_flag = touring_free_cities
											ROOT = {
												capital_scope = { region = world_free_cities }
												NOT = { capital_scope = { region = world_north_valyria } }
											}
										}
										AND = {
											has_character_flag = touring_ghiscar
											ROOT = {
												OR = {
													capital_scope = { region = world_ghiscar }
													capital_scope = { region = world_north_valyria }
												}
											}
										}
										AND = {
											has_character_flag = touring_jade_sea
											ROOT = { capital_scope = { region = world_far_east } }
										}
										AND = {
											has_character_flag = touring_summer_sea
											ROOT = { capital_scope = { region = world_summer_sea } }
										}
									}
								}
							}
							prisoner = no
							NOT = { same_realm = ROOT }
						}
						character_event = { id = wikid.283 }
					}
				}
			}
			random = {
				chance = 50
				character_event = { id = 4110 days = 2 } #Invite Friend?
			}
			random = {
				chance = 15
				character_event = { id = HL.10530 days = 5 } #Invite mercenary captain?
			}
		}
	}
}

#Vassal is invited to the feast
letter_event = {
	id = 72011
	desc = EVTDESC72011
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = { NOT = { is_inaccessible_trigger = yes } }

	option = {
		name = EVTOPTA72011 #Travel to the feast
		ai_chance = {
			factor = 2
			modifier  = {
				factor = 2
				opinion = { who = FROM value = -10 }
			}
			modifier  = {
				factor = 5
				opinion = { who = FROM value = 10 }
			}
			modifier  = {
				factor = 5
				opinion = { who = FROM value = 20 }
			}
		}
		set_character_flag = coming_to_feast
	}
	option = {
		name = EVTOPTB72011 #Refuse
		ai_chance = {
			factor = 1
			modifier  = {
				factor = 0
				opinion = { who = FROM value = 25 }
				NOT = { is_inaccessible_trigger = yes }
			}
			modifier  = {
				factor = 0
				has_landed_title = d_prince_pentos
				is_patrician = no
				FROM = { is_patrician = yes }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		FROM = {
			letter_event = {
				id = 72012
				days = 1
				random = 2
				tooltip = EVTTOOLTIP72012
			}
			opinion = {
				modifier = opinion_dislike
				who = ROOT
				years = 10
			}
		}
	}
}

#Vassal refused to come to the feast
letter_event = {
	id = 72012
	desc = EVTDESC72012
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72012
	}
}

#The guests have arrived
character_event = {
	id = 72015
	desc = EVTDESC72015
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
	}

	option = {
		name = EVTOPTA72015
		set_character_flag = host_feast_started
		wikid = {
			limit = {
				is_alive = yes
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_wedding }
				OR = {
					has_character_flag = foreign_adventure #landless
					has_character_flag = on_a_foreign_tour #landed
				}
			}
			character_event = {
				id = 72016
				tooltip = EVTTOOLTIP72016
			}
			hidden_tooltip = {
				character_event = { id = feast.3 } #random_events
			}
		}
		any_friend = {
			limit = {
				has_character_flag = friend_coming_to_feast
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_wedding }
			}
			character_event = {
				id = 72016
				tooltip = EVTTOOLTIP72016
			}
			hidden_tooltip = {
				character_event = { id = feast.3 } #random_events
			}
		}
		any_vassal = {
			limit = {
				has_character_flag = coming_to_feast
			}
			character_event = {
				id = 72016
				tooltip = EVTTOOLTIP72016
			}
			hidden_tooltip = {
				character_event = { id = feast.3 } #random_events
			}
		}

		hidden_tooltip = {
			character_event = { id = 72110 days = 25 random = 5 } #feast ends
			character_event = { id = 72112 days = 10 } #cancel feast

			character_event = { id = feast.2 }  ##random events##
		}
	}
}

#Welcome to the feast!
character_event = {
	id = 72016
	desc = EVTDESC72016
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72016
		set_character_flag = guest_feast_started
	}
}

#The feast has ended
character_event = {
	id = 72110
	desc = EVTDESC72110
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
	}

	### If you paid for the Rains of Castamere, you are getting the damn Rains of Castamere
	immediate = {
		if = {
			limit = { has_character_flag = feast_rains_of_castamere }
			character_event = { id = 72130 }
		}
	}

	option = {
		name = EVTOPTA72110
		hedonist_trait_chance_effect = yes
		add_character_modifier = {
			name = fabulous_feast
			duration = 365
		}
		remove_character_modifier = holding_large_feast
		clr_character_flag = do_not_disturb
		clr_character_flag = host_feast_started
		clr_character_flag = feast_jongleur
		clr_character_flag = feast_musicians
		clr_character_flag = feast_minstrel
		clr_character_flag = feast_fireeaters
		clr_character_flag = feast_dancers
		clr_character_flag = feast_acrobats
		clr_character_flag = feast_conjurer
		clr_character_flag = lavishly_food
		clr_character_flag = medium_food
		clr_character_flag = low_food
		clr_character_flag = feast_duel
		clr_character_flag = coming_to_feast
		clr_character_flag = guest_feast_started
		clr_character_flag = prince_deflower_maids
		clr_character_flag = feast_exoctic_dancers
		clr_character_flag = made_friend_at_feast
		clr_character_flag = feast_rains_of_castamere
		wikid = {
			limit = {
				is_alive = yes
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_wedding }
				OR = {
					has_character_flag = foreign_adventure #landless
					has_character_flag = on_a_foreign_tour #landed
				}
			}
			hidden_tooltip = {
				character_event = {
					id = 72111
					tooltip = EVTTOOLTIP72111
				}
				remove_opinion = {
					modifier = opinion_enjoyed_feast
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_attending_wedding
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_enjoyed_feast
				who = ROOT
				years = 2
			}
			clr_character_flag = coming_to_feast
			clr_character_flag = guest_feast_started
			clr_character_flag = made_friend_at_feast
		}
		any_friend = {
			limit = {
				has_character_flag = friend_coming_to_feast
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_wedding }
			}
			hidden_tooltip = {
				character_event = {
					id = 72111
					tooltip = EVTTOOLTIP72111
				}
				remove_opinion = {
					modifier = opinion_enjoyed_feast
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_attending_wedding
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_enjoyed_feast
				who = ROOT
				years = 2
			}
			clr_character_flag = friend_coming_to_feast
			clr_character_flag = guest_feast_started
			clr_character_flag = made_friend_at_feast
		}
		any_vassal = {
			limit = {
				has_character_flag = guest_feast_started
			}
			hidden_tooltip = {
				character_event = {
					id = 72111
					tooltip = EVTTOOLTIP72111
				}
				remove_opinion = {
					modifier = opinion_enjoyed_feast
					who = ROOT
				}
			}
			opinion = {
				modifier = opinion_enjoyed_feast
				who = ROOT
				years = 2
			}
			clr_character_flag = coming_to_feast
			clr_character_flag = guest_feast_started
			clr_character_flag = made_friend_at_feast
		}
	}
}

#Vassal: Feast ended
character_event = {
	id = 72111
	desc = EVTDESC72111
	picture = GFX_evt_feast

	is_triggered_only = yes
	ai = no

	option = {
		name = EVTOPTA72111
	}
}

#The feast is cancelled
character_event = {
	id = 72112
	desc = EVTDESC72112
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		OR = {
			is_ruler = no
			prisoner = yes
			is_incapable = yes
			NOR = { #Don't stop for minor wars
				war = no
				AND = {
					is_primary_war_attacker = no
					is_primary_war_defender = no
				}
				AND = {
					NOT = { any_current_enemy = { demesne_size = 1 } }
					NOT = { primary_title = { is_contested = yes } }
				}
			}
		}
		has_character_modifier = holding_large_feast
		NOT = { has_character_flag = kingsmoot }
		NOT = { has_character_flag = called_grand_council }
		NOT = { has_character_flag = called_great_council }
		NOT = { has_character_modifier = hosting_a_funeral }
		NOT = { has_character_flag = wants_coronation }
		NOT = { has_character_modifier = holding_epic_tournament }
	}

	option = {
		name = EVTOPTA72112
		clr_character_flag = feastcooldown
		remove_character_modifier = holding_large_feast
		clr_character_flag = do_not_disturb
		clr_character_flag = host_feast_started
		clr_character_flag = feast_jongleur
		clr_character_flag = feast_musicians
		clr_character_flag = feast_minstrel
		clr_character_flag = feast_fireeaters
		clr_character_flag = feast_dancers
		clr_character_flag = feast_acrobats
		clr_character_flag = feast_conjurer
		clr_character_flag = lavishly_food
		clr_character_flag = medium_food
		clr_character_flag = low_food
		clr_character_flag = feast_duel
		clr_character_flag = coming_to_feast
		clr_character_flag = guest_feast_started
		clr_character_flag = prince_deflower_maids
		clr_character_flag = feast_exoctic_dancers
		clr_character_flag = made_friend_at_feast
		clr_character_flag = feast_rains_of_castamere
		wikid = {
			limit = {
				is_alive = yes
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_wedding }
				OR = {
					has_character_flag = foreign_adventure #landless
					has_character_flag = on_a_foreign_tour #landed
				}
			}
			letter_event = {
				id = 72113
				tooltip = EVTTOOLTIP72113
			}
			clr_character_flag = coming_to_feast
			clr_character_flag = guest_feast_started
			clr_character_flag = made_friend_at_feast
		}
		any_vassal = {
			limit = {
				has_character_flag = guest_feast_started
			}
			letter_event = {
				id = 72113
				tooltip = EVTTOOLTIP72113
			}
			clr_character_flag = coming_to_feast
			clr_character_flag = guest_feast_started
			clr_character_flag = made_friend_at_feast
		}
	}
}

#Feast cancelled: notify invited vassals
letter_event = {
	id = 72113
	desc = EVTDESC72113
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72113
	}
}

###################################
#Events before the Feast
###################################

### A troop of wandering jongleurs seek your patronage ###
character_event = {
	id = 72000
	desc = EVTDESC72000
	picture = GFX_evt_jugglers

	is_triggered_only = yes
	prisoner = no
	only_rulers = yes
	only_capable = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_jongleur }
	}

	option = {
		name = EVTOPTA72000
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		set_character_flag = feast_jongleur
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 72063 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB72000
		ai_chance = {
			factor = 5
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

### A travelling minstrel seeks your patronage ###
character_event = {
	id = 72001
	desc = EVTDESC72001
	picture = GFX_evt_feast

	is_triggered_only = yes
	prisoner = no
	only_rulers = yes
	only_capable = yes

	trigger = {
		war = no
		has_character_modifier = holding_large_feast
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = feast_minstrel }
		NOT = { has_character_flag = feast_rains_of_castamere }
	}

	option = {
		name = EVTOPTA72001
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_minstrel
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 72065 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTC72001
		trigger = {
			dynasty = 190
			has_global_flag = reynes_of_castamere #reynes of castamere must of actually happened
		}
		ai_chance = {
			factor = 5

			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
			modifier = {
				factor = 1.5
				any_vassal = { ROOT = { any_demesne_title = { claimed_by = PREVPREV } } }
			}
			modifier = {
				factor = 1.2
				any_vassal = { NOT = { opinion = { who = ROOT value = 0 } } }
			}
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = authoritative
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = gregarious
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 0
				trait = honorable
			}
		}
		set_character_flag = feast_rains_of_castamere
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
	}
	option = {
		name = EVTOPTB72001
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

### Musicians seek your patronage ###
character_event = {
	id = 72002
	desc = EVTDESC72002
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_rulers = yes
	only_capable = yes
	prisoner = no

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_musicians }
		NOT = { has_character_flag = feast_rains_of_castamere }
	}

	option = {
		name = EVTOPTA72002
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_musicians
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 72067 days = 40 }
			}
		}
	}

	option = {
		name = EVTOPTC72002
		trigger = {
			dynasty = 190
			has_global_flag = reynes_of_castamere #reynes of castamere must of actually happened
		}
		ai_chance = {
			factor = 5

			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
			modifier = {
				factor = 1.5
				any_vassal = { ROOT = { any_demesne_title = { claimed_by = PREVPREV } } }
			}
			modifier = {
				factor = 1.2
				any_vassal = { NOT = { opinion = { who = ROOT value = 0 } } }
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = authoritative
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = gregarious
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
		}
		set_character_flag = feast_rains_of_castamere
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
	}

	option = {
		name = EVTOPTB72002
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

#Castle problems
character_event = {
	id = 72004
	desc = EVTDESC72004
	picture = GFX_evt_castle_construction

	only_rulers = yes
	is_triggered_only = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
	}

	option = {
		name = EVTOPTA72004
		scaled_wealth = { value = -0.2 min = -20 max = -150 }
	}
	option = {
		name = EVTOPTB72004
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

#Send Marshal to deal with Highway Robber Band
character_event = {
	id = 72005
	desc = EVTDESC72005
	picture = GFX_evt_bandits

	only_rulers = yes
	is_triggered_only = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_ball_started }
		job_marshal = { ai = yes }
	}

	option = {
		name = EVTOPTA72005
		job_marshal = {
			random_list = {
				5 = {
					red_god_resurrect_effect = yes #check for rhllor resurrection
					death = {
						death_reason = death_bandits
					}
				}
				50 = {
					ROOT = {
						capital_scope = {
							if = {
								limit = { has_province_modifier = highway_robber_band }
								remove_province_modifier = highway_robber_band
							}
						}
					}
				}
				45 = {
					ROOT = {
						capital_scope = {
							if = {
								limit = { NOT = { has_province_modifier = highway_robber_band } }
								add_province_modifier = {
									name = highway_robber_band
									duration = -1
								}
							}
						}
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB72005
		capital_scope = {
			if = {
				limit = { NOT = { has_province_modifier = highway_robber_band } }
				add_province_modifier = {
					name = highway_robber_band
					duration = -1
				}
			}
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

#Fire-eaters seek your patronage
character_event = {
	id = 72006
	desc = EVTDESC72006
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_rulers = yes
	only_capable = yes
	prisoner = no

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_fireeaters }
	}

	option = {
		name = EVTOPTA72006
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_fireeaters
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 72069 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB72006
		ai_chance = {
			factor = 5
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

#A Conjurer seeks your patronage
character_event = {
	id = 72007
	desc = EVTDESC72007
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_rulers = yes
	only_capable = yes
	prisoner = no

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_conjurer }
	}

	option = {
		name = EVTOPTA72007
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_conjurer
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 72071 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB72007
		ai_chance = {
			factor = 5
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

#Hunt for boars for winter feast
character_event = {
	id = 72008
	desc = EVTDESC72008
	picture = GFX_evt_hunt

	is_triggered_only = yes
	only_rulers = yes

	trigger = {
		war = no
		has_character_modifier = holding_large_feast
		NOT = {
			has_character_flag = host_feast_started
		}
		job_marshal = { ai = yes }
	}

	option = {
		name = EVTOPTA72008
		job_marshal = {
			if = {
				limit = { ROOT = { higher_tier_than = DUKE } }
				prestige = 40
			}
			if = {
				limit = { ROOT = { tier = DUKE } }
				prestige = 20
			}
			if = {
				limit = { ROOT = { tier = COUNT } }
				prestige = 10
			}
			opinion = {
				modifier = opinion_flattered
				who = ROOT
				years = 10
			}
			random_list = {
				80 = { }
				10 = { change_martial = 1 }
				7 = {
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				2 = {
					add_maimed_trait_effect = yes
				}
				1 = {
					red_god_resurrect_effect = yes #check for rhllor resurrection
					death = { death_reason = death_accident_boar }
				}
			}
			hunter_trait_chance_effect = yes
		}
	}
	option = {
		name = EVTOPTB72008
		trigger = {
			any_child = {
				age = 14
				is_alive = yes
				is_female = no
				is_abroad = no
				prisoner = no
				is_ill = no
				has_severe_disability_trigger = no
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
				is_ruler = no
			}
		}
		random_child = {
			limit = {
				age = 14
				is_alive = yes
				is_female = no
				is_abroad = no
				prisoner = no
				is_ill = no
				has_severe_disability_trigger = no
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
				is_ruler = no
			}
			if = {
				limit = { ROOT = { higher_tier_than = DUKE } }
				prestige = 40
			}
			if = {
				limit = { ROOT = { tier = DUKE } }
				prestige = 20
			}
			if = {
				limit = { ROOT = { tier = COUNT } }
				prestige = 10
			}
			opinion = {
				modifier = opinion_flattered
				who = ROOT
				years = 10
			}
			random_list = {
				80 = { }
				10 = { change_martial = 1 }
				7 = {
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				2 = {
					add_maimed_trait_effect = yes
				}
				1 = {
					red_god_resurrect_effect = yes #check for rhllor resurrection
					death = { death_reason = death_accident_boar }
				}
			}
			hunter_trait_chance_effect = yes
		}
	}
	option = {
		name = EVTOPTC72008
		trigger = {
			is_female = no
			is_ill = no
			has_severe_disability_trigger = no
			NOT = { trait = craven }
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = 40
		}
		if = {
			limit = { tier = DUKE }
			prestige = 20
		}
		if = {
			limit = { tier = COUNT }
			prestige = 10
		}
		random_list = {
			80 = { }
			10 = { change_martial = 1 }
			7 = {
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = 38280 } }
			}
			2 = {
				add_maimed_trait_effect = yes
			}
			1 = {
				red_god_resurrect_effect = yes #check for rhllor resurrection
				death = { death_reason = death_accident_boar }
			}
		}
		hunter_trait_chance_effect = yes
	}
	option = {
		name = EVTOPTD72008
	}
}

#Acrobats seek your patronage
character_event = {
	id = 72009
	desc = EVTDESC72009
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_rulers = yes
	only_capable = yes
	prisoner = no

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_acrobats }
	}

	option = {
		name = EVTOPTA72009
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_acrobats
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 4160 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB72009
		ai_chance = {
			factor = 5
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

###################################
#Events during feast
###################################

#Lavish Food
character_event = {
	id = 72020
	desc = EVTDESC72020
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		FROM = {
			is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
			has_character_flag = lavishly_food
		}
	}

	option = {
		name = EVTOPTA72020 #Approve publicly
		trigger = {
			NOT = { trait = temperate }
		}
		ai_chance = {
			factor = 40

			modifier = {
				factor = 5
				trait = gluttonous
			}
		}
		gain_weight_small_effect = yes
		weight_trait_check_effect = yes
		FROM = {
			character_event = {
				id = 72023
				tooltip = EVTTOOLTIP72023 #Liege is glad you liked it
			}
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTB72020 #Disapprove
		trigger = {
			NOT = { trait = gluttonous }
		}
		ai_chance = {
			factor = 20

			modifier = {
				factor = 5
				trait = temperate
			}
		}
		FROM = {
			character_event = {
				id = 72024
				tooltip = EVTTOOLTIP72024 #Liege dislike you complaining about the food
			}
			opinion = {
				modifier = opinion_irritated
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTC72020
		prestige = -10
	}
}

#Medium Food
character_event = {
	id = 72021
	desc = EVTDESC72021
	picture = GFX_evt_feast

	only_rulers = yes
	is_triggered_only = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		FROM = {
			is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
			has_character_flag = medium_food
		}
	}

	option = {
		name = EVTOPTA72021 #Approve publicly
		FROM = {
			character_event = {
				id = 72023
				tooltip = EVTTOOLTIP72023 #Liege is glad you liked it
			}
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTB72021 #Disapprove
		FROM = {
			character_event = {
				id = 72024
				tooltip = EVTTOOLTIP72024 #Liege dislike you complaining about the food
			}
			opinion = {
				modifier = opinion_irritated
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTC72021
		prestige = -10
	}
}

#Low Food
character_event = {
	id = 72022
	desc = EVTDESC72022
	picture = GFX_evt_feast

	only_rulers = yes
	is_triggered_only = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		FROM = {
			is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
			has_character_flag = low_food
		}
	}

	option = {
		name = EVTOPTA72022 #Approve publicly
		trigger = {
			NOT = { trait = gluttonous }
		}
		ai_chance = {
			factor = 20

			modifier = {
				factor = 5
				trait = temperate
			}
		}
		FROM = {
			character_event = {
				id = 72023
				tooltip = EVTTOOLTIP72023 #Liege is glad you liked it
			}
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTB72022 #Disapprove
		trigger = {
			NOT = { trait = temperate }
		}
		ai_chance = {
			factor = 40

			modifier = {
				factor = 5
				trait = gluttonous
			}
		}
		FROM = {
			character_event = {
				id = 72024
				tooltip = EVTTOOLTIP72024 #Liege dislike you complaining about the food
			}
			opinion = {
				modifier = opinion_irritated
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTC72022
		prestige = -10
	}
}

#Liege is glad you liked the food at the feast
character_event = {
	id = 72023
	desc = EVTDESC72023
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72023
		reverse_opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Liege dislikes you complaining about the food at the feast
character_event = {
	id = 72024
	desc = EVTDESC72024
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72024
		reverse_opinion = {
			modifier = opinion_disapprove
			who = FROM
			years = 10
		}
	}
}

#Late night talk: First person
character_event = {
	id = 72025
	desc = EVTDESC72025
	picture = GFX_evt_feast

	is_triggered_only = yes

	only_capable = yes
	prisoner = no
	war = no
	has_character_flag = guest_feast_started

	trigger = {
		FROMFROM = {
			NOT = {
				had_character_flag = {
					flag = host_feast_started
					days = 20
				}
			}
			has_character_flag = host_feast_started
			has_character_modifier = holding_large_feast
			any_courtier_or_vassal = {
				age = 16
				OR = {
					has_character_flag = guest_feast_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				NOT = { character = ROOT }
				NOT = { is_rival = ROOT }
				NOT = { is_friend = ROOT }
				opinion = { who = ROOT value = 0 }
				reverse_opinion = { who = ROOT value = 0 }
				OR = {
					opinion = { who = ROOT value = 20 }
					NOT = { age_diff = { who = ROOT years = 15 } }
				}
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { has_character_flag = made_friend_at_feast }
			}
		}
	}

	immediate = {
		FROMFROM = {
			random_courtier_or_vassal = {
				limit = {
					age = 16
					OR = {
						has_character_flag = guest_feast_started
						AND = {
							is_ruler = no
							is_abroad = no
							location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
							NOT = { trait = slave }
							NOT = { trait = dragon }
							NOT = { is_inaccessible_trigger = yes }
						}
					}
					NOT = { character = ROOT }
					NOT = { is_rival = ROOT }
					NOT = { is_friend = ROOT }
					opinion = { who = ROOT value = 0 }
					reverse_opinion = { who = ROOT value = 0 }
					OR = {
						opinion = { who = ROOT value = 20 }
						NOT = { age_diff = { who = ROOT years = 15 } }
					}
					NOT = { trait = dragon }
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_character_flag = made_friend_at_feast }
				}
				save_event_target_as = feast_friend
			}
		}
	}

	option = {
		name = EVTOPTA72025
		set_character_flag = made_friend_at_feast
		event_target:feast_friend = {
			set_character_flag = made_friend_at_feast
			add_friend = ROOT
			hidden_tooltip = { character_event = { id = 72026 } }
		}
	}
}

#Late night talk: Second person
character_event = {
	id = 72026
	desc = EVTDESC72026
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72026
		add_friend  = FROM
	}
}

#Late night talk: First person (mutual dislike of liege)
character_event = {
	id = 72027
	desc = EVTDESC72027
	picture = GFX_evt_feast

	is_triggered_only = yes

	only_capable = yes
	prisoner = no
	war = no
	has_character_flag = guest_feast_started

	trigger = {
		FROMFROM = {
			NOT = {
				had_character_flag = {
					flag = host_feast_started
					days = 20
				}
			}
			has_character_flag = host_feast_started
			has_character_modifier = holding_large_feast
			NOT = { reverse_opinion = { who = ROOT value = -15 } }
			any_courtier_or_vassal = {
				age = 16
				OR = {
					has_character_flag = guest_feast_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				NOT = { character = ROOT }
				NOT = { is_rival = ROOT }
				NOT = { is_friend = ROOT }
				NOT = { opinion = { who = PREV value = -15 } }
				opinion = { who = ROOT value = 0 }
				reverse_opinion = { who = ROOT value = 0 }
				OR = {
					opinion = { who = ROOT value = 20 }
					NOT = { age_diff = { who = ROOT years = 15 } }
				}
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
				NOT = { has_character_flag = made_friend_at_feast }
			}
		}
	}

	immediate = {
		FROMFROM = {
			random_courtier_or_vassal = {
				limit = {
					age = 16
					OR = {
						has_character_flag = guest_feast_started
						AND = {
							is_ruler = no
							is_abroad = no
							location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
							NOT = { trait = slave }
							NOT = { trait = dragon }
							NOT = { is_inaccessible_trigger = yes }
						}
					}
					NOT = { character = ROOT }
					NOT = { is_rival = ROOT }
					NOT = { is_friend = ROOT }
					NOT = { opinion = { who = PREV value = -15 } }
					opinion = { who = ROOT value = 0 }
					reverse_opinion = { who = ROOT value = 0 }
					OR = {
						opinion = { who = ROOT value = 20 }
						NOT = { age_diff = { who = ROOT years = 15 } }
					}
					NOT = { trait = dragon }
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_character_flag = made_friend_at_feast }
				}
				save_event_target_as = feast_friend
			}
		}
	}

	option = {
		name = EVTOPTA72027
		set_character_flag = made_friend_at_feast
		event_target:feast_friend = {
			set_character_flag = made_friend_at_feast
			add_friend = ROOT
			hidden_tooltip = { character_event = { id = 72028 } }
		}
	}
}

#Late night talk: Second person
character_event = {
	id = 72028
	desc = EVTDESC72028
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72028
		add_friend  = FROM
		FROMFROMFROM = { tooltip = { show_portrait = yes } }
	}
}

#Duel: Start
character_event = {
	id = 72030
	desc = EVTDESC72030
	picture = GFX_evt_melee

	is_triggered_only = yes
	only_capable = yes
	prisoner = no
	in_command = no
	war = no
	has_character_flag = guest_feast_started

	trigger = {
		OR = {
			is_female = no
			female_get_masculine_event_trigger = yes
		}
		NOT = { trait = wounded }
		NOT = { has_severe_disability_trigger = yes }
		martial = 9
		OR = {
			trait = duelist
			trait = brave
			trait = wroth
			trait = cruel
		}
		NOT = {
			trait = craven
		}
		FROMFROM = {
			NOT = {
				had_character_flag = {
					flag = host_feast_started
					days = 20
				}
			}
			has_character_modifier = holding_large_feast
			has_character_flag = host_feast_started
			NOT = {
				has_character_flag = feast_duel
			}
			any_courtier_or_vassal = {
				war = no
				in_command = no
				age = 16
				OR = {
					is_female = no
					female_get_masculine_event_trigger = yes
				}
				prisoner = no
				OR = {
					has_character_flag = guest_feast_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				NOT = {
					character = ROOT
				}
				OR = {
					AND = {
						NOT = {
							reverse_opinion = { who = ROOT value = -10 }
						}
						NOT = {
							opinion = { who = ROOT value = -10 }
						}
					}
					is_rival = ROOT
				}
				NOT = { trait = wounded }
				NOT = { has_severe_disability_trigger = yes }
			}
		}
	}

	option = {
		name = EVTOPTA72030
		FROMFROM = {
			set_character_flag = feast_duel
			random_courtier_or_vassal = {
				limit = {
					war = no
					in_command = no
					age = 16
					is_female = no
					prisoner = no
					OR = {
						has_character_flag = guest_feast_started
						AND = {
							is_ruler = no
							is_abroad = no
							location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
							NOT = { trait = slave }
							NOT = { trait = dragon }
							NOT = { is_inaccessible_trigger = yes }
						}
					}
					NOT = {
						character = ROOT
					}
					OR = {
						AND = {
							NOT = {
								reverse_opinion = { who = ROOT value = 10 }
							}
							NOT = {
								opinion = { who = ROOT value = 10 }
							}
						}
						any_rival = {
							character = ROOT
						}
					}
					NOT = { trait = wounded }
					NOT = { has_severe_disability_trigger = yes }
				}
				character_event = {
					id = 72031
					tooltip = EVTTOOLTIP72031
				}
			}
		}
	}
	option = {
		name = EVTOPTB72030 #Decline
		prestige = -10
	}
}

#Duel: Accept or Decline
character_event = {
	id = 72031
	desc = EVTDESC72031
	picture = GFX_evt_melee

	is_triggered_only = yes

	option = {
		name = EVTOPTA72031 #Accept
		# Call duel engine
		FROM = {
			set_character_flag = flag_duel_feast
			set_character_flag = flag_duel_friendly
		}
		set_character_flag = flag_duel_feast
		set_character_flag = flag_duel_friendly
		hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.0 } } } }
	}
	option = {
		name = EVTOPTB72031 #Decline
		prestige = -10
	}
}

# #Duel: Victorious, spared opponent
# character_event = {
	# id = 72032
	# desc = EVTDESC72032
	# picture = GFX_evt_melee
	# is_triggered_only = yes

	# option = {
		# name = EVTOPTA72033
		# opinion = {
			# modifier = opinion_dislike
			# who = FROMFROM
			# years = 10
		# }
		# prestige = 10
	# }
	# option = {
		# name = EVTOPTB72033
		# opinion = {
			# modifier = opinion_satisfied
			# who = FROMFROM
			# years = 10
		# }
		# prestige = 10
	# }
# }

# #Duel: Victorious, finished off
# character_event = {
	# id = 72033
	# desc = EVTDESC72033
	# picture = GFX_evt_melee
	# is_triggered_only = yes

	# option = {
		# name = EVTOPTA72033
		# prestige = 20
	# }
# }

# #Duel: Defeated, spared
# character_event = {
	# id = 72034
	# desc = EVTDESC72034
	# picture = GFX_evt_melee
	# is_triggered_only = yes

	# option = {
		# name = EVTOPTA72034
		# opinion = {
			# modifier = opinion_dislike
			# who = FROM
			# years = 10
		# }
		# prestige = -10
	# }
# }

# #Duel: Liege, defeated spared
# character_event = {
	# id = 72035
	# desc = EVTDESC72035
	# picture = GFX_evt_melee
	# is_triggered_only = yes

	# option = {
		# name = EVTOPTA72035
	# }
# }

# #Duel: Liege, defeated killed
# character_event = {
	# id = 72036
	# desc = EVTDESC72036
	# picture = GFX_evt_melee
	# is_triggered_only = yes

	# option = {
		# name = EVTOPTA72036
		# opinion = { who = FROM modifier = opinion_murderer }
	# }
# }

#Friendly with another guest's spouse
character_event = {
	id = 72040
	desc = EVTDESC72040
	picture = GFX_evt_feast

	is_triggered_only = yes

	prisoner = no
	only_rulers = yes
	is_married = yes
	war = no
	has_character_flag = guest_feast_started

	trigger = {
		OR = {
			trait = lustful
			trait = hedonist
		}
		fertility = 0.4
		is_pregnant = no
		NOT = { trait = eunuch }
		is_ill = no
		has_epidemic = no
		FROMFROM = {
			NOT = {
				had_character_flag = {
					flag = host_feast_started
					days = 20
				}
			}
			has_character_flag = host_feast_started
			has_character_modifier = holding_large_feast
			any_courtier_or_vassal = {
				NOT = { character = ROOT }
				OR = {
					has_character_flag = guest_feast_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				spouse = {
					prisoner = no
					age = 16
					NOT = { age = 60 }
					is_pregnant = no
					NOT = { trait = eunuch }
					is_ill = no
					has_epidemic = no
					is_alive = yes
					is_abroad = no
					NOT = { trait = celibate }
					OR = {
						is_female = no
						NOT = { age = 40 }
					}
					opinion = { who = ROOT value = 15 }
					NOT = { is_close_relative = ROOT }
					NOT = { is_lover = ROOT }
					OR = {
						AND = {
							NOT = { same_sex = ROOT }
							NOT = { trait = homosexual }
							ROOT = { NOT = { trait = homosexual } }
						}
						AND = {
							same_sex = ROOT
							trait = homosexual
							ROOT = { trait = homosexual }
						}
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA72040
		prestige = -5
	}

	option = {
		name = EVTOPTB72040
		FROMFROM = {
			random_courtier_or_vassal = {
				limit = {
					NOT = { character = ROOT }
					OR = {
						has_character_flag = guest_feast_started
						AND = {
							is_ruler = no
							is_abroad = no
							location = { ROOT_FROMFROM = { capital_scope = { province_id = PREVPREV } } }
							NOT = { trait = slave }
							NOT = { trait = dragon }
							NOT = { is_inaccessible_trigger = yes }
						}
					}
					spouse = {
						prisoner = no
						age = 16
						NOT = { age = 60 }
						is_pregnant = no
						NOT = { trait = eunuch }
						is_ill = no
						has_epidemic = no
						is_alive = yes
						is_abroad = no
						NOT = { trait = celibate }
						OR = {
							is_female = no
							NOT = { age = 40 }
						}
						opinion = { who = ROOT value = 15 }
						NOT = { is_close_relative = ROOT }
						NOT = { is_lover = ROOT }
						OR = {
							AND = {
								NOT = { same_sex = ROOT }
								NOT = { trait = homosexual }
								ROOT = { NOT = { trait = homosexual } }
							}
							AND = {
								same_sex = ROOT
								trait = homosexual
								ROOT = { trait = homosexual }
							}
						}
					}
				}
				spouse = {
					character_event = {
						id = 72041
						tooltip = EVTTOOLTIP72041
					}
				}
			}
		}
	}
}

#Spouse answers the 'invitation'
character_event = {
	id = 72041
	desc = EVTDESC72041
	picture = "GFX_gentle_kiss"

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTA72041
			trigger = { is_female = yes }
		}
		name = {
			text = EVTOPTB72041
			trigger = { is_female = no }
		}
		ai_chance = {
			factor = 100

			modifier = {
				factor = 2.5
				trait = lustful
			}
			modifier = {
				factor = 2
				culture = summer_islander #promiscious
			}
			modifier = {
				factor = 0.1
				trait = chaste
			}
			modifier = {
				factor = 0.2
				trait = honorable
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 2.5
				is_ruler = no
				any_liege = { character = FROM }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 99 }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 74 }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 49 }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 24 }
			}
			modifier = {
				factor = 0.65
				FROM = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 1.45
				FROM = { has_fair_trait_trigger = yes }
			}
		}
		if = {
			limit = {
				fertility = 0.05
				is_female = yes
				is_pregnant = no
				FROM = { is_female = no }
			}
			random = {
				chance = 25
				impregnate_cuckoo = FROM
			}
		}
		if = {
			limit = {
				fertility = 0.05
				is_female = no
				FROM = {
					is_female = yes
					is_pregnant = no
				}
			}
			random = {
				chance = 25
				FROM = { impregnate_cuckoo = ROOT }
			}
		}
		FROM = {
			if = {
				limit = {
					has_ambition = obj_make_the_eight
					is_female = no
				}
				hidden_tooltip = { character_event = { id = ambition.1 } }
			}
			character_event = {
				id = 72042
				tooltip = EVTTOOLTIP72042
			}
		}
	}
	option = {
		name = EVTOPTC72041
		ai_chance = {
			factor = 50

			#too young
			modifier = {
				factor = 2
				age_diff = {
					who = FROM
					years = 20
				}
			}
			#too old
			modifier = {
				factor = 5
				FROM = {
					age_diff = {
						who = ROOT
						years = 30
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					age_diff = {
						who = ROOT
						years = 20
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					age_diff = {
						who = ROOT
						years = 10
					}
				}
			}

			modifier = {
				factor = 1.35
				NOT = { personal_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.75
				NOT = { personal_opinion = { who = FROM value = -50 } }
			}
		}
		piety = 5
		FROM = {
			character_event = {
				id = feast.720
				tooltip = EVTTOOLTIPfeast.720
			}
		}
	}
}

#Accepted
character_event = {
	id = 72042
	desc = EVTDESC72042
	picture = GFX_evt_pregnancy

	is_triggered_only = yes

	option = {
		name = EVTOPTA72042
		tooltip = {
			if = {
				limit = {
					is_female = yes
					FROM = {
						is_female = no
						fertility = 0.05
					}
				}
				random = {
					chance = 25
					impregnate_cuckoo = FROM
				}
			}
			if = {
				limit = {
					is_female = no
					FROM = {
						is_female = yes
						fertility = 0.05
					}
				}
				random = {
					chance = 25
					FROM = { impregnate_cuckoo = ROOT }
				}
			}
		}
	}
}
#Rejected
character_event = {
	id = feast.720
	desc = EVTDESCfeast.720
	picture = GFX_evt_quarrel

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.720
	}
}

#Drink too much wine: become drunkard or insult host
character_event = {
	id = 72045
	desc = EVTDESC72045
	picture = GFX_evt_feast

	is_triggered_only = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = guest_ball_started
			has_character_flag = progress_trigger
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		NOT = { trait = drunkard }
		NOT = { trait = temperate }
		FROM = {
			#war = no
			#is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
		}
	}

	option = {
		name = EVTOPTA72045
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = gluttonous
			}
			modifier = {
				factor = 4
				trait = hedonist
			}
			modifier = {
				factor = 0.5
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
		}
		add_trait = drunkard
	}
	option = {
		name = EVTOPTB72045
		ai_chance = {
			factor = 75
		}
		FROM = {
			character_event = {
				id = 72052
				tooltip = EVTTOOLTIP72052
			}
			opinion = {
				modifier = opinion_insulted
				who = ROOT
				years = 10
			}
		}
		if = {
			limit = { has_character_flag = progress_trigger }
			event_target:progress_feast_target = {
				character_event = {
					id = 72052
					tooltip = EVTTOOLTIP72052
				}
				opinion = {
					modifier = opinion_insulted
					who = ROOT
					years = 10
				}
			}
		}
	}
	after = { clr_character_flag = progress_trigger }
}

#Liege is insulted when guest refuses more wine
character_event = {
	id = 72052
	desc = EVTDESC72052
	picture = GFX_evt_drunk

	is_triggered_only = yes

	option = {
		name = EVTOPTA72052
	}
}

#Drink too much wine: Embarass yourself
character_event = {
	id = 72046
	desc = EVTDESC72046
	picture = GFX_evt_feast

	is_triggered_only = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = guest_ball_started
			has_character_flag = progress_trigger
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		trait = drunkard
		FROM = {
			#war = no
			#is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
			job_treasurer = {
				NOT = { trait = drunkard }
				OR = {
					is_ruler = no
					has_character_flag = guest_feast_started
				}
			}
		}
	}

	option = {
		name = EVTOPTA72046
		FROM = {
			character_event = {
				id = 72047
				tooltip = EVTTOOLTIP72047
			}
			opinion = {
				modifier = opinion_disgusted
				who = ROOT
				years = 10
			}
			job_treasurer = {
				opinion = {
					modifier = opinion_dislike
					who = ROOT
					years = 10
				}
			}
		}
		if = {
			limit = { has_character_flag = progress_trigger }
			event_target:progress_feast_target = {
				character_event = {
					id = 72047
					tooltip = EVTTOOLTIP72047
				}
				opinion = {
					modifier = opinion_disgusted
					who = ROOT
					years = 10
				}
			}
		}
	}

	after = { clr_character_flag = progress_trigger }
}

#Host is not happy about drunkard falling asleep
character_event = {
	id = 72047
	desc = EVTDESC72047
	picture = GFX_evt_drunk

	is_triggered_only = yes

	option = {
		name = EVTOPTA72047
	}
}

#Drink too much wine: Fall asleep
character_event = {
	id = 72048
	desc = EVTDESC72048
	picture = GFX_evt_feast

	is_triggered_only = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = guest_ball_started
			has_character_flag = progress_trigger
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		trait = drunkard
		FROM = {
			#war = no
			#is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
		}
	}

	option = {
		name = EVTOPTA72048
		prestige = -10
		FROM = {
			character_event = {
				id = 72049
				tooltip = EVTTOOLTIP72049
			}
			opinion = {
				modifier = opinion_disgusted
				who = ROOT
				years = 10
			}
		}
		if = {
			limit = { has_character_flag = progress_trigger }
			event_target:progress_feast_target = {
				character_event = {
					id = 72049
					tooltip = EVTTOOLTIP72049
				}
				opinion = {
					modifier = opinion_disgusted
					who = ROOT
					years = 10
				}
			}
		}
	}

	after = { clr_character_flag = progress_trigger }
}

#Host is not happy about drunkard falling asleep
character_event = {
	id = 72049
	desc = EVTDESC72049
	picture = GFX_evt_drunk

	is_triggered_only = yes

	option = {
		name = EVTOPTA72049
	}
}

#Highway Robber Band: Guest Complains
character_event = {
	id = 72050
	desc = EVTDESC72050
	picture = GFX_evt_bandits

	is_triggered_only = yes
	prisoner = no
	only_capable = yes
	only_rulers = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = guest_ball_started
			has_character_flag = progress_trigger
		}
		FROM = {
			#war = no
			#is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
		}
	}

	immediate = { clr_character_flag = progress_trigger }

	option = {
		name = EVTOPTA72050
		wealth = -20
		FROM = {
			character_event = {
				id = 72051
				tooltip = EVTTOOLTIP72051
			}
		}
	}
}

#Highway Robber Band: The End
character_event = {
	id = 72051
	desc = EVTDESC72051
	picture = GFX_evt_bandits

	is_triggered_only = yes

	option = {
		name = EVTOPTA72051
		FROM = {
			tooltip = { wealth = -20 }
			opinion = {
				modifier = opinion_dislike
				who = ROOT
				years = 10
			}
		}
	}
}

#Guest kills Host's servant
character_event = {
	id = 72055
	desc = EVTDESC72055
	picture = GFX_evt_feast

	is_triggered_only = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = progress_trigger
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		FROM = {
			#war = no
			#is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
		}
	}

	option = {
		name = EVTOPTA72055
		FROM = {
			character_event = {
				id = 72056
				tooltip = EVTTOOLTIP72056
			}
		}
		if = {
			limit = { has_character_flag = progress_trigger }
			event_target:progress_feast_target = {
				character_event = {
					id = 72056
					tooltip = EVTTOOLTIP72056
					days = 1
				}
			}
		}
	}

	after = { clr_character_flag = progress_trigger }
}

#Guest kills Host's servant: Imprison?
character_event = {
	id = 72056
	desc = EVTDESC72056
	picture = GFX_evt_scandal

	is_triggered_only = yes

	option = {
		name = EVTOPTA72056
		trigger = { is_vassal_or_below = FROM }
		FROM = {
			tooltip = { imprison = ROOT }
			opinion = {
				modifier = opinion_angry
				who = ROOT
				years = 20
			}
			hidden_tooltip = {
				character_event = {
					id = 72057
				}
			}
		}
		any_vassal = {
			limit = {
				NOT = { character = FROM }
				NOT = { trait = honorable }
				NOT = { trait = just }
				OR = {
					trait = proud
					trait = cruel
					trait = arbitrary
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_imprisoned_fellow_vassal
				years = 5
			}
		}
		if = {
			limit = {
				NOT = { trait = just }
				NOT = { trait = arbitrary }
				NOT = { personality_traits  = 6 }
				age = 14
			}
			random = {
				chance = 50
				add_trait = just
				hidden_tooltip = {
					character_event = {
						id = 38267 #Notify Just
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTC72056
		scaled_wealth = { value = -0.1 min = -10 max = -50 }
		if = {
			limit = {
				NOT = { trait = cruel }
				NOT = { trait = kind }
				NOT = { personality_traits = 6 }
				age = 14
			}
			random = {
				chance = 50
				add_trait = cruel
				hidden_tooltip = {
					character_event = {
						id = 38259 #Notify Cruel
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTB72056
		capital_scope = {
			add_province_modifier = {
				name = peasants_upset
				duration = 90
			}
		}
		if = {
			limit = {
				NOT = { trait = just }
				NOT = { trait = arbitrary }
				NOT = { personality_traits  = 6 }
				age = 14
			}
			random = {
				chance = 50
				add_trait = arbitrary
				hidden_tooltip = {
					character_event = {
						id = 38266 #Notify Arbitrary
					}
				}
			}
		}
	}
}

#Guest kills Host's servant: The end
character_event = {
	id = 72057
	desc = EVTDESC72057
	picture = GFX_evt_into_the_dungeon

	is_triggered_only = yes

	option = {
		name = EVTOPTA72057
		imprison = FROM
		if = {
			limit = { NOT = { has_character_modifier = known_murderer } }
			add_character_modifier = {
				name = known_murderer
				years = 2
			}
		}
		clr_character_flag = coming_to_feast
		clr_character_flag = guest_feast_started
		clr_character_flag = made_friend_at_feast
	}
}

#Jester jokes about your rule
character_event = {
	id = 72060
	desc = EVTDESC72060
	picture = GFX_evt_jugglers

	is_triggered_only = yes
	only_rulers = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
	}

	option = {
		name = EVTOPTA72060
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				trait = just
			}
			modifier = {
				factor = 4
				trait = wroth
			}
			modifier = {
				factor = 4
				trait = proud
			}
			modifier = {
				factor = 4
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 0.5
				trait = honorable
			}
			modifier = {
				factor = 0.25
				trait = kind
			}
			modifier = {
				factor = 0.25
				trait = humble
			}
			modifier = {
				factor = 0.25
				trait = patient
			}
		}
		if = {
			limit = {
				NOT = { personality_traits = 6 }
				NOT = { trait = arbitrary }
				NOT = { trait = just }
				age = 14
			}
			random = {
				chance = 20
				add_trait = arbitrary
				hidden_tooltip = {
					character_event = {
						id = 38266 #Notify
					}
				}
			}
		}
		if = {
			limit = { trait = just }
			remove_trait = just
		}
		random_courtier = {
			limit = { has_minor_title = title_court_jester }
			opinion = {
				who = ROOT
				modifier = opinion_arrest_attempt
				months = 240
			}
			imprison = ROOT
		}
		any_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
				NOT = { trait = proud }
				NOT = { trait = wroth }
				OR = {
					trait = honorable
					trait = just
					trait = humble
					trait = patient
				}
			}
			hidden_tooltip = {
				if = {
					limit = { ai = no }
					character_event = {
						id = 72061
						tooltip = EVTTOOLTIP72061
					}
				}
			}
			opinion = {
				modifier = opinion_disappointed
				who = ROOT
				years = 2
			}
		}
	}
	option = {
		name = EVTOPTB72060
		ai_chance = {
			factor = 50
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
		any_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
				NOT = { trait = proud }
				NOT = { trait = wroth }
				OR = {
					trait = honorable
					trait = just
					trait = humble
					trait = patient
				}
			}
			hidden_tooltip = {
				if = {
					limit = { ai = no }
					character_event = {
						id = 72062
						tooltip = EVTTOOLTIP72062
					}
				}
			}
			opinion = {
				modifier = opinion_approves
				who = ROOT
				years = 2
				multiplier = 0.5
			}
		}
	}
}

#Jester is thrown into dungeon: Guests react
character_event = {
	id = 72061
	desc = EVTDESC72061
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA72061
	}
}

#Jester is ignored: Guests react
character_event = {
	id = 72062
	desc = EVTDESC72062
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA72062
	}
}

#Jongleurs entertain the guests
character_event = {
	id = 72063
	desc = EVTDESC72063
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	only_rulers = yes
	prisoner = no
	only_capable = yes
	war = no
	has_character_flag = host_feast_started

	trigger = {
		has_character_modifier = holding_large_feast
		has_character_flag = feast_jongleur
		any_vassal = {
			war = no
			has_character_flag = guest_feast_started
		}
	}

	option = {
		name = EVTOPTA72063
		add_character_modifier = {
			name = entertaining_entertainment
			duration = 180
		}
		if = {
			limit = {
				NOT = {
					trait = gregarious
				}
				NOT = { trait = shy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify
					}
				}

			}
		}
		if = {
			limit = {
				NOT = {
					trait = charitable
				}
				NOT = { trait = greedy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = charitable
				hidden_tooltip = {
					character_event = {
						id = 38273 #Notify
					}
				}
			}
		}
		random_vassal = {
			limit = {
				has_character_flag = guest_feast_started
			}
			character_event = {
				id = 72064
				tooltip = EVTTOOLTIP72064
			}
		}
	}
}

#Visitor likes jongleurs
character_event = {
	id = 72064
	desc = EVTDESC72064
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA72064
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Minstrel entertain the guests
character_event = {
	id = 72065
	desc = EVTDESC72065
	picture = GFX_evt_feast

	is_triggered_only = yes

	only_rulers = yes
	prisoner = no
	only_capable = yes
	war = no
	has_character_flag = host_feast_started

	trigger = {
		has_character_modifier = holding_large_feast
		has_character_flag = feast_minstrel
		any_vassal = {
			war = no
			has_character_flag = guest_feast_started
		}
	}

	option = {
		name = EVTOPTA72065
		if = {
			limit = {
				NOT = {
					trait = gregarious
				}
				NOT = { trait = shy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25

				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					trait = charitable
				}
				NOT = { trait = greedy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = charitable
				hidden_tooltip = {
					character_event = {
						id = 38273 #Notify
					}
				}
			}
		}
		add_character_modifier = {
			name = entertaining_entertainment
			duration = 180
		}
		random_vassal = {
			limit = {
				has_character_flag = guest_feast_started
			}
			character_event = {
				id = 72066
				tooltip = EVTTOOLTIP72066
			}
		}
	}
}

#Visitor likes minstrel
character_event = {
	id = 72066
	desc = EVTDESC72066
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA72066
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Musicians entertain the guests
character_event = {
	id = 72067
	desc = EVTDESC72067
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_rulers = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			AND = {
				has_character_modifier = holding_large_feast
				has_character_flag = host_feast_started
				has_character_flag = feast_musicians
			}
			has_character_modifier = holding_ball
		}
		any_vassal = {
			war = no
			OR = {
				has_character_flag = guest_feast_started
				has_character_flag = guest_ball_started
			}
		}
	}

	option = {
		name = EVTOPTA72067
		if = {
			limit = {
				NOT = {
					trait = gregarious
				}
				NOT = { trait = shy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25

				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					trait = charitable
				}
				NOT = { trait = greedy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = charitable
				hidden_tooltip = {
					character_event = {
						id = 38273 #Notify
					}
				}
			}
		}
		add_character_modifier = {
			name = entertaining_entertainment
			duration = 180
		}
		random_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
			}
			character_event = {
				id = 72068
				tooltip = EVTTOOLTIP72068
			}
		}
	}
}

#Visitor likes musicians
character_event = {
	id = 72068
	desc = EVTDESC72068
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72068
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Fire-eaters entertain the guests
character_event = {
	id = 72069
	desc = EVTDESC72069
	picture = GFX_evt_feast

	is_triggered_only = yes

	only_rulers = yes
	prisoner = no
	only_capable = yes
	war = no
	has_character_flag = host_feast_started

	trigger = {
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		has_character_flag = feast_fireeaters
		any_vassal = {
			war = no
			OR = {
				has_character_flag = guest_feast_started
				has_character_flag = guest_ball_started
			}
		}
	}

	option = {
		name = EVTOPTA72069
		if = {
			limit = {
				NOT = {
					trait = gregarious
				}
				NOT = { trait = shy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25

				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					trait = charitable
				}
				NOT = { trait = greedy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = charitable
				hidden_tooltip = {
					character_event = {
						id = 38273 #Notify
					}
				}
			}
		}
		add_character_modifier = {
			name = entertaining_entertainment
			duration = 180
		}
		random_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
			}
			character_event = {
				id = 72070
				tooltip = EVTTOOLTIP72070
			}
		}
	}
}

#Visitor likes fire-eaters
character_event = {
	id = 72070
	desc = EVTDESC72070
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72070
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Conjurer entertain the guests
character_event = {
	id = 72071
	desc = EVTDESC72071
	picture = GFX_evt_feast

	is_triggered_only = yes

	only_rulers = yes
	prisoner = no
	only_capable = yes
	war = no
	has_character_flag = host_feast_started

	trigger = {
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		has_character_flag = feast_conjurer
		any_vassal = {
			war = no
			OR = {
				has_character_flag = guest_feast_started
				has_character_flag = guest_ball_started
			}
		}
	}

	option = {
		name = EVTOPTA72071
		if = {
			limit = {
				NOT = {
					trait = gregarious
				}
				NOT = { trait = shy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25

				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					trait = charitable
				}
				NOT = { trait = greedy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = charitable
				hidden_tooltip = {
					character_event = {
						id = 38273 #Notify
					}
				}
			}
		}
		add_character_modifier = {
			name = entertaining_entertainment
			duration = 180
		}
		random_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
			}
			character_event = {
				id = 72072
				tooltip = EVTTOOLTIP72072
			}
		}
	}
}

#Visitor likes Conjurer
character_event = {
	id = 72072
	desc = EVTDESC72072
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72072
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Friendly with another guest's spouse
character_event = {
	id = 72075
	picture = GFX_evt_feast

	desc = {
		text = EVTDESC72075
		trigger = {
			event_target:72075_target = { is_female = yes }
		}
	}
	desc = {
		text = EVTDESC72075B
		trigger = {
			event_target:72075_target = { is_female = no }
		}
	}

	is_triggered_only = yes

	prisoner = no
	only_rulers = yes
	only_capable = yes
	war = no
	has_character_flag = host_feast_started

	trigger = {
		has_character_modifier = holding_large_feast
		fertility = 0.4
		is_pregnant = no
		NOT = { trait = eunuch }
		NOT = { trait = celibate }
		NOT = { trait = chaste }
		is_ill = no
		has_epidemic = no
		any_courtier_or_vassal = {
			war = no
			OR = {
				has_character_flag = guest_feast_started
				AND = {
					is_ruler = no
					is_abroad = no
					location = { FROM = { capital_scope = { province_id = PREVPREV } } }
					NOT = { trait = slave }
					NOT = { trait = dragon }
					NOT = { is_inaccessible_trigger = yes }
				}
			}
			is_married = yes
			spouse = {
				age = 16
				NOT = { is_close_relative = ROOT }
				OR = {
					AND = {
						NOT = { same_sex = ROOT }
						NOT = { trait = homosexual }
						ROOT = { NOT = { trait = homosexual } }
					}
					AND = {
						same_sex = ROOT
						trait = homosexual
						ROOT = { trait = homosexual }
					}
				}
				is_pregnant = no
				NOT = { trait = eunuch }
				is_ill = no
				has_epidemic = no
				is_alive = yes
				is_abroad = no
				prisoner = no
				OR = {
					is_female = no
					NOT = { age = 40 }
				}
				NOT = {
					trait = celibate
				}
				NOT = {
					trait = chaste
				}
				opinion = { who = ROOT value = 15 }
			}
		}
	}

	immediate = {
		random_courtier_or_vassal = {
			limit = {
				war = no
				OR = {
					has_character_flag = guest_feast_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { FROM = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				is_married = yes
				spouse = {
					age = 16
					NOT = { is_close_relative = ROOT }
					OR = {
						AND = {
							NOT = { same_sex = ROOT }
							NOT = { trait = homosexual }
							ROOT = { NOT = { trait = homosexual } }
						}
						AND = {
							same_sex = ROOT
							trait = homosexual
							ROOT = { trait = homosexual }
						}
					}
					is_pregnant = no
					NOT = { trait = eunuch }
					is_ill = no
					has_epidemic = no
					is_alive = yes
					is_abroad = no
					prisoner = no
					OR = {
						is_female = no
						NOT = { age = 40 }
					}
					NOT = {
						trait = celibate
					}
					NOT = {
						trait = chaste
					}
					opinion = { who = ROOT value = 15 }
				}
			}
			spouse = {
				save_event_target_as = 72075_target
			}
		}
	}

	option = {
		name = EVTOPTA72075
		prestige = -5
	}

	option = {
		name = EVTOPTB72075
		event_target:72075_target = {
			show_portrait = yes
			spouse = { show_portrait = yes }
			character_event = {
				id = 72076
				tooltip = EVTTOOLTIP72076
			}
		}
	}
}

#Spouse answers the 'invitation'
character_event = {
	id = 72076
	desc = EVTDESC72076
	picture = "GFX_gentle_kiss"

	is_triggered_only = yes

	option = {
		name = EVTOPTA72076
		ai_chance = {
			factor = 100

			modifier = {
				factor = 2.5
				trait = lustful
			}
			modifier = {
				factor = 2
				culture = summer_islander #promiscious
			}
			modifier = {
				factor = 0.1
				trait = chaste
			}
			modifier = {
				factor = 0.2
				trait = honorable
			}
			modifier = {
				factor = 0
				trait = celibate
			}
			modifier = {
				factor = 2.5
				is_ruler = no
				any_liege = { character = FROM }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 99 }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 74 }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 49 }
			}
			modifier = {
				factor = 1.4
				personal_opinion = { who = FROM value = 24 }
			}
			modifier = {
				factor = 0.65
				FROM = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 1.45
				FROM = { has_fair_trait_trigger = yes }
			}
		}
		if = {
			limit = {
				fertility = 0.05
				is_female = yes
				is_pregnant = no
				FROM = { is_female = no }
			}
			random = {
				chance = 25
				impregnate_cuckoo = FROM
			}
		}
		if = {
			limit = {
				fertility = 0.05
				is_female = no
				FROM = {
					is_female = yes
					is_pregnant = no
				}
			}
			random = {
				chance = 25
				FROM = { impregnate_cuckoo = ROOT }
			}
		}
		FROM = {
			if = {
				limit = {
					has_ambition = obj_make_the_eight
					is_female = no
				}
				hidden_tooltip = { character_event = { id = ambition.1 } }
			}
			character_event = {
				id = 72077
				tooltip = EVTTOOLTIP72077
			}
		}
	}
	option = {
		name = EVTOPTB72076
		ai_chance = {
			factor = 50

			#too young
			modifier = {
				factor = 2
				age_diff = {
					who = FROM
					years = 20
				}
			}
			#too old
			modifier = {
				factor = 5
				FROM = {
					age_diff = {
						who = ROOT
						years = 30
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					age_diff = {
						who = ROOT
						years = 20
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					age_diff = {
						who = ROOT
						years = 10
					}
				}
			}

			modifier = {
				factor = 1.35
				NOT = { personal_opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 1.75
				NOT = { personal_opinion = { who = FROM value = -50 } }
			}
		}
		piety = 5
		FROM = {
			character_event = {
				id = feast.721
				tooltip = EVTTOOLTIPfeast.721
			}
		}
	}
}

#Accept
character_event = {
	id = 72077
	desc = EVTDESC72077
	picture = GFX_evt_pregnancy

	is_triggered_only = yes

	option = {
		name = EVTOPTA72077
		tooltip = {
			if = {
				limit = {
					is_female = yes
					FROM = {
						is_female = no
						fertility = 0.05
					}
				}
				random = {
					chance = 25
					impregnate_cuckoo = FROM
				}
			}
			if = {
				limit = {
					is_female = no
					FROM = {
						is_female = yes
						fertility = 0.05
					}
				}
				random = {
					chance = 25
					FROM = { impregnate_cuckoo = ROOT }
				}
			}
		}
	}
}
#Reject
character_event = {
	id = feast.721
	desc = EVTDESCfeast.721
	picture = GFX_evt_quarrel

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.721
	}
}

#Late night talk: First person
character_event = {
	id = 72080
	desc = EVTDESC72080
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_capable = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		OR = {
			any_courtier_or_vassal = {
				war = no
				in_command = no
				prisoner = no
				age = 16
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				NOT = { is_friend = ROOT }
				NOT = { is_rival = ROOT }
				opinion = { who = ROOT value = 0 }
				reverse_opinion = { who = ROOT value = 0 }
				OR = {
					opinion = { who = ROOT value = 20 }
					NOT = { age_diff = { who = ROOT years = 15 } }
				}
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
			event_target:progress_feast_target = {
				is_alive = yes
				prisoner = no
				NOT = { is_friend = ROOT }
				NOT = { is_rival = ROOT }
				opinion = { who = ROOT value = 0 }
				reverse_opinion = { who = ROOT value = 0 }
				OR = {
					opinion = { who = ROOT value = 20 }
					NOT = { age_diff = { who = ROOT years = 15 } }
				}
			}
		}
	}

	immediate = {
		#if foreign adventurer is attending, chance of targeting him
		wikid = {
			limit = {
				is_alive = yes
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_wedding }
				OR = {
					has_character_flag = foreign_adventure #landless
					has_character_flag = on_a_foreign_tour #landed
				}

				prisoner = no
				NOT = { is_friend = ROOT }
				NOT = { is_rival = ROOT }
				opinion = { who = ROOT value = -25 }
				reverse_opinion = { who = ROOT value = -25 }
				OR = {
					opinion = { who = ROOT value = 20 }
					NOT = { age_diff = { who = ROOT years = 15 } }
				}
			}
			random = {
				chance = 25
				save_event_target_as = feast_late_night_talk
				break = yes
			}
		}
		#Then target progress visitor
		event_target:progress_feast_target = {
			if = {
				limit = {
					is_alive = yes
					prisoner = no
					NOT = { is_friend = ROOT }
					NOT = { is_rival = ROOT }
					opinion = { who = ROOT value = 0 }
					reverse_opinion = { who = ROOT value = 0 }
					OR = {
						opinion = { who = ROOT value = 20 }
						NOT = { age_diff = { who = ROOT years = 15 } }
					}
				}
				save_event_target_as = feast_late_night_talk
				break = yes
			}
		}
		if = {
			limit = { has_character_modifier = holding_ball } #wedding targets possible
			random_opinion_modifier_target = {
				limit = {
					has_opinion_modifier = { modifier = opinion_attending_wedding who = ROOT }

					age = 16
					war = no
					in_command = no
					prisoner = no
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = guest_ball_started
					}
					NOT = { is_friend = ROOT }
					NOT = { is_rival = ROOT }
					opinion = { who = ROOT value = -25 }
					reverse_opinion = { who = ROOT value = -25 }
					OR = {
						opinion = { who = ROOT value = 20 }
						NOT = { age_diff = { who = ROOT years = 15 } }
					}
					NOT = { trait = dragon }
					NOT = { is_inaccessible_trigger = yes }
				}
				save_event_target_as = feast_late_night_talk
				break = yes
			}
		}
		random_courtier_or_vassal = {
			limit = {
				war = no
				in_command = no
				prisoner = no
				age = 16
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
					AND = {
						is_ruler = no
						is_abroad = no
						location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
						NOT = { trait = slave }
						NOT = { trait = dragon }
						NOT = { is_inaccessible_trigger = yes }
					}
				}
				NOT = { is_friend = ROOT }
				NOT = { is_rival = ROOT }
				opinion = { who = ROOT value = -25 }
				reverse_opinion = { who = ROOT value = -25 }
				OR = {
					opinion = { who = ROOT value = 20 }
					NOT = { age_diff = { who = ROOT years = 15 } }
				}
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
			save_event_target_as = feast_late_night_talk
		}
	}

	option = {
		name = EVTOPTA72080
		event_target:feast_late_night_talk = {
			add_friend  = ROOT
			character_event = {
				id = 72081
				tooltip = EVTTOOLTIP72081
			}
		}
	}
}

#Late night talk: Second person
character_event = {
	id = 72081
	desc = EVTDESC72081
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72081
		add_friend  = FROM
	}
}

#Claim on visitor's title
character_event = {
	id = 72085
	desc = EVTDESC72085
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_capable = yes
	prisoner = no
	only_rulers = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		any_claim = {
			OR = {
				NOT = { tier = COUNT }
				location = { is_capital = no }
			}
			holder_scope = {
				war = no
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
				vassal_of = ROOT
			}
		}
	}

	immediate = {
		random_claim = {
			limit = {
				OR = {
					NOT = { tier = COUNT }
					location = { is_capital = no }
				}
				holder_scope = {
					war = no
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = guest_ball_started
					}
					vassal_of = ROOT
				}
			}
			save_event_target_as = feast_claim_holder_title
			holder_scope = { save_event_target_as = feast_claim_holder }
		}
	}

	option = {
		name = EVTOPTA72085
		trigger = { NOT = { trait = honorable } }
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				event_target:feast_claim_holder = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { tier = KING }
			}
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { relative_power_to_liege = 0.2 }
			}
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = {
				factor = 4
				trait = lunatic
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { NOT = { reverse_opinion = { who = ROOT value = -33 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { NOT = { reverse_opinion = { who = ROOT value = -66 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = greedy
			}
		}
		event_target:feast_claim_holder = {
			opinion = {
				who = ROOT
				modifier = opinion_arrest_attempt
				months = 240
			}
			imprison = ROOT
			hidden_tooltip = {
				character_event = {
					id = 72089 days = 2
				}
			}
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -300
		}
		if = {
			limit = { tier = DUKE }
			prestige = -150
		}
		if = {
			limit = { tier = COUNT }
			prestige = -75
		}
		change_variable = { which = "dishonorable" value = 10 }
		hidden_tooltip = { character_event = { id = maintenance.3 } } #dishonour trait
		tooltip = { add_trait = dishonorable1 }
		any_vassal = {
			limit = {
				prisoner = no
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
				NOT = { event_target:feast_claim_holder = { character = PREV } }
			}
			opinion = {
				modifier = opinion_angry
				who = ROOT
				years = 10
			}
		}
		any_opinion_modifier_target = {
			limit = {
				has_opinion_modifier = { modifier = opinion_attending_wedding who = ROOT }
				prisoner = no
				NOT = { vassal_of = ROOT }
				is_ruler = yes
				NOT = { event_target:feast_claim_holder = { character = PREV } }
			}
			opinion = {
				modifier = opinion_angry
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTB72085
		trigger = {
			event_target:feast_claim_holder_title = { can_be_given_away = yes }
		}
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				event_target:feast_claim_holder = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { tier = KING }
			}
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { relative_power_to_liege = 0.2 }
			}
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = {
				factor = 4
				trait = lunatic
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { NOT = { reverse_opinion = { who = ROOT value = -33 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { NOT = { reverse_opinion = { who = ROOT value = -66 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = greedy
			}
		}
		event_target:feast_claim_holder = {
			character_event = {
				id = 72086
				tooltip = EVTTOOLTIP72086
			}
		}
	}
	option = {
		name = EVTOPTC72085
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0.5
				event_target:feast_claim_holder = { is_rival = ROOT }
			}
			modifier = {
				factor = 4
				trait = honorable
			}
			modifier = {
				factor = 2
				event_target:feast_claim_holder = { reverse_opinion = { who = ROOT value = 0 } }
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = charitable
			}
		}
		prestige = 10
		event_target:feast_claim_holder_title = {
			remove_claim = ROOT
			holder_scope = {
				opinion = {
					modifier = opinion_happy
					who = ROOT
					years = 10
				}
			}
		}
	}
}

#Vassal decides if any_liege gets title
character_event = {
	id = 72086
	desc = EVTDESC72086
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72086 #Grant any_liege title
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 33 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 66 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 99 }
			}
			modifier = {
				factor = 2
				is_close_relative = FROM
			}
			modifier = {
				factor = 0.5
				tier = KING
			}
			modifier = {
				factor = 0.5
				relative_power_to_liege = 0.2
			}
			modifier = {
				factor = 4
				trait = honorable
			}
			modifier = {
				factor = 4
				trait = content
			}
			modifier = {
				factor = 4
				trait = charitable
			}
			modifier = {
				factor = 4
				trait = humble
			}
			modifier = {
				factor = 4
				trait = patient
			}
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 0.25
				trait = ruthless
			}
			modifier = {
				factor = 0.25
				trait = lunatic
			}
			modifier = {
				factor = 0.25
				trait = just
			}
			modifier = {
				factor = 0.25
				trait = ambitious
			}
			modifier = {
				factor = 0.25
				trait = greedy
			}
			modifier = {
				factor = 0.25
				trait = proud
			}
			modifier = {
				factor = 0.25
				trait = wroth
			}
			modifier = {
				factor = 0.25
				trait = brave
			}
		}
		character_event = {
			id = 72087
			tooltip = EVTTOOLTIP72087
		}
	}
	option = {
		name = EVTOPTB72086 #Refuse
		ai_chance = {
			factor = 20
		}
		character_event = {
			id = 72088
			tooltip = EVTTOOLTIP72088
		}
		reverse_opinion = {
			modifier = opinion_disappointed
			who = FROM
			years = 20
		}
	}
}

#Liege gets title
character_event = {
	id = 72087
	desc = EVTDESC72087
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72087
		event_target:feast_claim_holder_title = {
			grant_title = ROOT
		}
	}
}

#Liege does not get title
character_event = {
	id = 72088
	desc = EVTDESC72088
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72088
	}
}

#Imprisoned by liege who wants title
character_event = {
	id = 72089
	desc = EVTDESC72089
	picture = GFX_evt_into_the_dungeon

	is_triggered_only = yes

	immediate = {
		FROM = {
			hidden_tooltip = {
				any_realm_lord = {
					limit = {
						ai = no
						NOT = { character = ROOT }
					}
					character_event = { id = feast.723 }
				}
			}
		}
	}

	option = {
		name = EVTOPTA72089
		ai_chance = {
			factor = 20
		}
		tooltip = {
			imprison = FROM
		}
	}

	option = {
		name = EVTOPTB72089
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.33
				event_target:feast_claim_holder_title = { is_primary_holder_title = yes }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = 0 } }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 33 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 66 }
			}
			modifier = {
				factor = 2
				opinion = { who = FROM value = 99 }
			}
			modifier = {
				factor = 2
				is_close_relative = FROM
			}
			modifier = {
				factor = 0.5
				tier = KING
			}
			modifier = {
				factor = 0.5
				relative_power_to_liege = 0.2
			}
			modifier = {
				factor = 4
				trait = honorable
			}
			modifier = {
				factor = 4
				trait = content
			}
			modifier = {
				factor = 4
				trait = charitable
			}
			modifier = {
				factor = 4
				trait = humble
			}
			modifier = {
				factor = 4
				trait = patient
			}
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 0.25
				trait = ruthless
			}
			modifier = {
				factor = 0.25
				trait = lunatic
			}
			modifier = {
				factor = 0.25
				trait = just
			}
			modifier = {
				factor = 0.25
				trait = ambitious
			}
			modifier = {
				factor = 0.25
				trait = greedy
			}
			modifier = {
				factor = 0.25
				trait = proud
			}
			modifier = {
				factor = 0.25
				trait = wroth
			}
			modifier = {
				factor = 0.25
				trait = brave
			}
		}
		event_target:feast_claim_holder_title = { grant_title = FROM }
		prisoner = no
	}
}
#inform realm
character_event = {
	id = feast.723
	desc = EVTDESCfeast.723
	picture = GFX_evt_into_the_dungeon

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.723
	}
}

#Host or Host's son falls in love with unmarried daughter of vassal
character_event = {
	id = 72090
	desc = EVTDESC72090
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_capable = yes
	prisoner = no
	max_age = 26
	only_men = yes

	trigger = {
		is_married = no
		has_lover = no
		NOT = { trait = shy }
		fertility = 0.4

		NOT = { trait = eunuch }
		NOT = { trait = celibate }
		NOT = { trait = homosexual }
		is_ill = no
		has_epidemic = no
		OR = {
			AND = {
				war = no
				OR = {
					has_character_modifier = holding_large_feast
					has_character_modifier = holding_ball
				}
			}
			AND = {
				age = 14
				NOT = { age = 26 }
				is_ruler = no
				father = {
					war = no
					is_liege_of = ROOT
					OR = {
						has_character_modifier = holding_large_feast
						has_character_modifier = holding_ball
					}
				}
			}
		}
		FROM = {
			any_vassal = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
				NOT = { character = ROOT }
				any_child = {
					is_female = yes
					is_alive = yes
					is_ruler = no
					is_married = no
					has_lover = no
					NOT = { is_close_relative = ROOT }
					is_pregnant = no
					age = 14
					NOT = { age = 26 }
					NOT = { age_diff = { who = ROOT years = 8 } }
					is_abroad = no
					opinion = { who = ROOT value = 0 }
					reverse_opinion = { who = ROOT value = 0 }
					NOT = { trait = homosexual }
					NOT = { trait = celibate }
					is_ill = no
					has_epidemic = no
					prisoner = no
				}
			}
		}
	}

	immediate = {
		FROM = {
			random_vassal = {
				limit = {
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = guest_ball_started
					}
					NOT = { character = ROOT }
					any_child = {
						is_female = yes
						is_alive = yes
						is_ruler = no
						is_married = no
						has_lover = no
						NOT = { is_close_relative = ROOT }
						is_pregnant = no
						age = 14
						NOT = { age = 26 }
						NOT = { age_diff = { who = ROOT years = 8 } }
						is_abroad = no
						opinion = { who = ROOT value = 0 }
						reverse_opinion = { who = ROOT value = 0 }
						NOT = { trait = homosexual }
						NOT = { trait = celibate }
						is_ill = no
						has_epidemic = no
						prisoner = no
					}
				}
				save_event_target_as = feast_love_vassal
				random_child = {
					limit = {
						is_female = yes
						is_alive = yes
						is_ruler = no
						is_married = no
						has_lover = no
						NOT = { is_close_relative = ROOT }
						is_pregnant = no
						age = 14
						NOT = { age = 26 }
						NOT = { age_diff = { who = ROOT years = 8 } }
						is_abroad = no
						opinion = { who = ROOT value = 0 }
						reverse_opinion = { who = ROOT value = 0 }
						NOT = { trait = homosexual }
						NOT = { trait = celibate }
						is_ill = no
						has_epidemic = no
						prisoner = no
					}
					save_event_target_as = feast_love_daughter
				}
			}
		}
	}

	option = {
		name = EVTOPTA72090 #Flirt
		event_target:feast_love_daughter = {
			opinion = {
				modifier = opinion_flattered
				who = ROOT
				years = 10
			}
		}
		event_target:feast_love_vassal = {
			character_event = {
				id = 72091
				tooltip = EVTTOOLTIP72091
			}
		}
	}

	option = {
		name = EVTOPTB72090 #Tumble
		event_target:feast_love_daughter = {
			if = {
				limit = { fertility = 0.05 }
				random = {
					chance = 25
					impregnate = ROOT
				}
			}
			add_lover = ROOT
		}
		event_target:feast_love_vassal = {
			if = {
				limit = { NOT = { culture = summer_islander } }
				character_event = {
					id = 72092
					tooltip = EVTTOOLTIP72092
				}
				hidden_tooltip = {
					character_event = { id = 72097 days = 60 } #two months later
				}
			}
		}
		prestige = 15
	}
}

#Liege or liege's son flirted with my daughter! I'm so proud!
character_event = {
	id = 72091
	desc = EVTDESC72091
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72091
		if = {
			limit = { FROMFROM = { higher_tier_than = DUKE } }
			prestige = 40
		}
		if = {
			limit = { FROMFROM = { tier = DUKE } }
			prestige = 20
		}
		if = {
			limit = { FROMFROM = { tier = COUNT } }
			prestige = 10
		}
	}
}

#Liege or liege's son seduced my daughter!
character_event = {
	id = 72092
	desc = EVTDESC72092
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72092 #I'm angry
		trigger = {
			FROM = {
				OR = {
					NOT = { has_character_modifier = holding_large_feast }
					NOT = { is_liege_of = ROOT }
				}
			}
		}
		if = {
			limit = { FROMFROM = { higher_tier_than = DUKE } }
			prestige = -40
		}
		if = {
			limit = { FROMFROM = { tier = DUKE } }
			prestige = -20
		}
		if = {
			limit = { FROMFROM = { tier = COUNT } }
			prestige = -10
		}
		FROMFROM = {
			character_event = {
				id = 72093
				tooltip = EVTTOOLTIP72093
			}
			opinion = {
				modifier = opinion_angry
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTB72092 #I'm angry
		trigger = {
			FROM = {
				has_character_modifier = holding_large_feast
				is_liege_of = ROOT
			}
		}
		if = {
			limit = { FROM = { higher_tier_than = DUKE } }
			prestige = -40
		}
		if = {
			limit = { FROM = { tier = DUKE } }
			prestige = -20
		}
		if = {
			limit = { FROM = { tier = COUNT } }
			prestige = -10
		}
		FROM = {
			character_event = {
				id = 72094
				tooltip = EVTTOOLTIP72094
			}
			opinion = {
				modifier = opinion_angry
				who = ROOT
				years = 10
			}
		}
	}
	option = {
		name = EVTOPTC72092 #Grovel
		trigger = {
			FROM = {
				OR = {
					NOT = { has_character_modifier = holding_large_feast }
					NOT = { is_liege_of = ROOT }
				}
			}
		}
		if = {
			limit = { FROMFROM = { higher_tier_than = DUKE } }
			prestige = -40
		}
		if = {
			limit = { FROMFROM = { tier = DUKE } }
			prestige = -20
		}
		if = {
			limit = { FROMFROM = { tier = COUNT } }
			prestige = -10
		}
		FROMFROM = {
			character_event = {
				id = 72095
				tooltip = EVTTOOLTIP72095
			}
		}
	}
	option = {
		name = EVTOPTD72092 #Grovel
		trigger = {
			FROM = {
				has_character_modifier = holding_large_feast
				is_liege_of = ROOT
			}
		}
		if = {
			limit = { FROM = { higher_tier_than = DUKE } }
			prestige = -40
		}
		if = {
			limit = { FROM = { tier = DUKE } }
			prestige = -20
		}
		if = {
			limit = { FROM = { tier = COUNT } }
			prestige = -10
		}
		FROM = {
			character_event = {
				id = 72096
				tooltip = EVTTOOLTIP72096
			}
		}
	}
}

#My son seduced a vassal's daughter and now he's angry
character_event = {
	id = 72093
	desc = EVTDESC72093
	picture = GFX_evt_pregnancy

	is_triggered_only = yes

	option = {
		name = EVTOPTA72093
		reverse_opinion = {
			modifier = opinion_angry
			who = FROM
			years = 10
		}
	}
}

#I seduced a vassal's daughter and now he's angry
character_event = {
	id = 72094
	desc = EVTDESC72094
	picture = GFX_evt_pregnancy

	is_triggered_only = yes

	option = {
		name = EVTOPTA72094
		reverse_opinion = {
			modifier = opinion_angry
			who = FROM
			years = 10
		}
	}
}

#My son seduced a vassal's daughter and he is upset
character_event = {
	id = 72095
	desc = EVTDESC72095
	picture = GFX_evt_pregnancy

	is_triggered_only = yes

	option = {
		name = EVTOPTA72095
		reverse_opinion = {
			modifier = opinion_upset
			who = FROM
			years = 10
		}
	}
}

#I seduced a vassal's daughter and he is upset
character_event = {
	id = 72096
	desc = EVTDESC72096
	picture = GFX_evt_pregnancy

	is_triggered_only = yes

	option = {
		name = EVTOPTA72096
		reverse_opinion = {
			modifier = opinion_upset
			who = FROM
			years = 10
		}
	}
}

#Two months later...
character_event = {
	id = 72097
	desc = EVTDESC72097
	picture = GFX_evt_pregnancy

	is_triggered_only = yes
	only_rulers = yes
	prisoner = no
	only_capable = yes

	trigger = {
		event_target:feast_love_daughter = {
			is_child_of = ROOT
			is_female = yes
			is_pregnant = yes
			can_marry_trigger = yes
			father_of_unborn = {
				can_marry_trigger = yes
				character = FROM
				OR = {
					is_ruler = yes
					father = {
						is_ruler = yes
						is_liege_of = ROOT
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTA72097
		trigger = {
			FROM = { is_ruler = yes }
		}
		ai_chance = {
			factor = 50
		}
		FROM = {
			character_event = {
				id = 72098
				tooltip = EVTTOOLTIP72098
			}
		}
		event_target:feast_love_daughter = { betrothed = { custom_tooltip = { text = TOOLTIP72097BETROTHED } } }
	}
	option = {
		name = EVTOPTB72097
		trigger = {
			FROM = {
				is_ruler = no
				father = {
					is_ruler = yes
					is_liege_of = ROOT
				}
			}
		}
		ai_chance = {
			factor = 50
		}
		FROM = {
			father = {
				character_event = {
					id = 72099
					tooltip = EVTTOOLTIP72099
				}
			}
		}
		event_target:feast_love_daughter = { betrothed = { custom_tooltip = { text = TOOLTIP72097BETROTHED } } }
	}

	option = {
		name = EVTOPTC72097 #Hold my anger
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.2
				trait = honorable
			}
			modifier = {
				factor = 0.33
				trait = just
			}
			modifier = {
				factor = 0.33
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = content
			}
		}
		prestige = 10
	}
}

#FROM demands ROOT to marry pregnant daughter
character_event = {
	id = 72098
	desc = EVTDESC72098
	picture = GFX_evt_marriage

	is_triggered_only = yes

	trigger = {
		event_target:feast_love_daughter = {
			is_child_of = FROM
			is_female = yes
			is_pregnant = yes
			can_marry_trigger = yes
			father_of_unborn = {
				can_marry_trigger = yes
				character = ROOT
			}
		}
	}

	option = {
		name = EVTOPTA72098 #Accept
		ai_chance = {
			factor = 50
			modifier = {
				factor = 5
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.33
				trait = arbitrary
			}
			modifier = {
				factor = 0.33
				trait = cruel
			}

			modifier = {
				factor = 0.33
				is_betrothed = yes
			}
			modifier = {
				factor = 0.2
				is_betrothed = yes
				trait = honorable
			}
			modifier = {
				factor = 0.33
				is_betrothed = yes
				trait = just
			}
			modifier = {
				factor = 3
				FROM = { tier = KING }
			}
			modifier = {
				factor = 2
				tier = KING
				FROM = { tier = DUKE }
			}
			modifier = {
				factor = 2
				tier = DUKE
				FROM = { tier = COUNT }
			}
			modifier = {
				factor = 0.5
				FROM = { tier = BARON }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -24 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -74 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -99 } }
			}
		}
		betrothed = {
			opinion = { who = ROOT modifier = opinion_betrothal_broken }
			liege = {
				if = {
					limit = {
						is_close_relative = PREV
						NOT = { character = FROM }
					}
					opinion = { who = ROOT modifier = opinion_betrothal_broken }
				}
			}
		}
		tooltip = {
			event_target:feast_love_daughter = {
				add_spouse = ROOT
			}
		}
		FROM = { character_event = { id = feast.724 tooltip = TOOLTIPfeast.724 } }
		hidden_tooltip = {
			any_realm_lord = {
				limit = { ai = no }
				character_event = { id = feast.726 } #inform realm
			}
		}
	}
	option = {
		name = EVTOPTB72098 #Refuse
		ai_chance = {
			factor = 50
		}
		reverse_opinion = {
			modifier = grievously_offended
			who = FROM
			years = 20
		}
		hidden_tooltip = { FROM = { character_event = { id = feast.725 } } }
	}
}

#FROM demands ROOT to marry pregnant daughter with his son
character_event = {
	id = 72099
	desc = EVTDESC72099
	picture = GFX_evt_marriage

	is_triggered_only = yes

	trigger = {
		event_target:feast_love_daughter = {
			is_child_of = FROM
			is_female = yes
			is_pregnant = yes
			can_marry_trigger = yes
			father_of_unborn = {
				can_marry_trigger = yes
				father = { character = ROOT }
			}
		}
	}

	option = {
		name = EVTOPTA72099 #Accept
		ai_chance = {
			factor = 50
			modifier = {
				factor = 5
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.33
				trait = arbitrary
			}
			modifier = {
				factor = 0.33
				trait = cruel
			}

			modifier = {
				factor = 0.33
				FROMFROM = { is_betrothed = yes }
			}
			modifier = {
				factor = 0.2
				FROMFROM = { is_betrothed = yes }
				trait = honorable
			}
			modifier = {
				factor = 0.33
				FROMFROM = { is_betrothed = yes }
				trait = just
			}
			modifier = {
				factor = 3
				FROM = { tier = KING }
			}
			modifier = {
				factor = 2
				tier = KING
				FROM = { tier = DUKE }
			}
			modifier = {
				factor = 2
				tier = DUKE
				FROM = { tier = COUNT }
			}
			modifier = {
				factor = 0.5
				FROM = { tier = BARON }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -24 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -74 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -99 } }
			}
		}
		event_target:feast_love_daughter = {
			betrothed = {
				opinion = { who = ROOT modifier = opinion_betrothal_broken }
				liege = {
					if = {
						limit = {
							is_close_relative = PREV
							NOT = { character = FROM }
						}
						opinion = { who = ROOT modifier = opinion_betrothal_broken }
					}
				}
			}
			tooltip = { add_spouse = FROMFROM }
		}
		FROM = { character_event = { id = feast.724 tooltip = TOOLTIPfeast.724 } }
		hidden_tooltip = {
			any_realm_lord = {
				limit = { ai = no }
				character_event = { id = feast.726 } #inform realm
			}
		}
	}
	option = {
		name = EVTOPTB72099 #Refuse
		ai_chance = {
			factor = 50
		}
		reverse_opinion = {
			modifier = grievously_offended
			who = FROM
			years = 20
		}
		hidden_tooltip = { FROM = { character_event = { id = feast.725 } } }
	}
}

# #Liege's son marries vassal's pregnant daughter
# character_event = {
	# id = 72100
	# desc = EVTDESC72100
	# picture = GFX_evt_marriage

	# is_triggered_only = yes

	# option = {
		# name = EVTOPTA72100 #Accept
		# FROM = {
			# any_vassal = {
				# random_child = {
					# limit = {
						# has_character_flag = impregnated_by_ROOT
					# }
					# add_spouse = ROOT
				# }
			# }
		# }
	# }
# }
character_event = { #Inform accept
	id = feast.724
	desc = EVTDESCfeast.724
	picture = GFX_evt_marriage

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.724
		event_target:feast_love_daughter = {
			betrothed = {
				opinion = { who = ROOT modifier = opinion_betrothal_broken }
				liege = {
					if = {
						limit = {
							is_close_relative = PREV
							NOT = { character = FROM }
						}
						opinion = { who = ROOT modifier = opinion_betrothal_broken }
					}
				}
			}
			add_spouse = FROMFROMFROM
		}
	}
}
character_event = { #Inform reject
	id = feast.725
	desc = EVTDESCfeast.725
	picture = GFX_evt_marriage

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.725
	}
}
character_event = { #Inform realm accept
	id = feast.726
	desc = EVTDESCfeast.726
	picture = GFX_evt_marriage

	is_triggered_only = yes
	show_from_from_from = yes

	option = {
		name = EVTOPTAfeast.726
		event_target:feast_love_daughter = { tooltip = { show_portrait = yes } }
		FROM = { tooltip = { show_portrait = yes } }
		FROMFROM = { tooltip = { show_portrait = yes } }
	}
}

#Travelling Acrobats
character_event = {
	id = 4160
	desc = EVTDESC4160
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	only_rulers = yes
	only_capable = yes
	prisoner = no
	in_command = no
	war = no
	has_character_flag = host_feast_started

	trigger = {
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		has_character_flag = feast_acrobats
		OR = {
			intrigue = 8
			diplomacy = 8
			trait = gregarious
		}
	}

	immediate = {
		hidden_tooltip = {
			random_vassal = {
				limit = {
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = guest_ball_started
					}
				}
				character_event = {
					id = 72115
				}
			}
		}
	}

	option = {
		name = EVTOPTB4160
		change_learning = 1
	}

	option = {
		name = EVTOPTC4160
		trigger = {
			OR = {
				trait = wroth
				trait = cynical
				trait = paranoid
			}
			NOT = {
				trait = kind
			}
		}
		add_character_modifier = {
			name = the_paranoid
			duration = 90
		}
	}

	option = {
		name = EVTOPTD4160
		add_character_modifier = {
			name = the_perturbed
			duration = 90
		}
	}

	option = {
		name = EVTOPTE4160
		trigger = {
			NOT = {
				trait = cruel
			}
		}
		prestige = 15
		if = {
			limit = {
				NOT = { trait = kind }
				NOT = { personality_traits = 6 }
				age = 14
			}
			add_trait = kind
		}
	}
}

#Visitor likes acrobats
character_event = {
	id = 72115
	desc = EVTDESC72115
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA72115
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
		hidden_tooltip = {
			FROM = {
				character_event = {
					id = 72116
				}
			}
		}
	}
}

#Liege likes that visitor likes acrobats
character_event = {
	id = 72116
	desc = EVTDESC72116
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	option = {
		name = EVTOPTA72116
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}

#Travelling Dancers seek your patronage
character_event = {
	id = 72120
	desc = EVTDESC72120
	picture = GFX_evt_jugglers

	is_triggered_only = yes
	only_rulers = yes
	only_capable = yes
	prisoner = no

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_dancers }
	}

	option = {
		name = EVTOPTA72120
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_dancers
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = 4165 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTB72120
		ai_chance = {
			factor = 5
		}
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}

#Travelling Dancers
character_event = {
	id = 4165
	desc = EVTDESC4165
	picture = GFX_evt_jugglers

	is_triggered_only = yes

	only_playable = yes
	only_capable = yes
	prisoner = no
	in_command = no
	war = no
	has_character_flag = host_feast_started

	trigger = {
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		has_character_flag = feast_dancers
		NOT = {
			has_character_modifier = the_prude
		}
		NOT = {
			has_character_modifier = the_amiable
		}
		NOT = {
			has_character_modifier = the_sullen
		}
	}

	option = {
		name = EVTOPTA4165
		trigger = { NOT = { trait = shy } }
		prestige = 15
		if = {
			limit = {
				NOT = { trait = gregarious }
				NOT = { personality_traits = 6 }
				age = 14
			}
			add_trait = gregarious
		}
	}

	option = {
		name = EVTOPTB4165
		add_character_modifier = {
			name = the_prude
			duration = 90
		}
	}

	option = {
		name = EVTOPTC4165
		trigger = {
			trait = wroth
		}
		add_character_modifier = {
			name = the_sullen
			duration = 90
		}
	}

	option = {
		name = EVTOPTD4165
		trigger = {
			is_married = yes
			trait = shy
		}
		spouse = {
			opinion = {
				modifier = opinion_disappointed
				who = ROOT
				years = 5
			}
		}
	}

	option = {
		name = EVTOPTE4165
		trigger = {
			is_married = yes
			trait = gregarious
		}
		spouse = {
			opinion = {
				modifier = opinion_delighted
				who = ROOT
				years = 5
			}
		}
	}
}

#Musicians play The Rains of Castamere
character_event = {
	id = 72130
	desc = EVTDESC72130
	picture = GFX_evt_feast

	only_rulers = yes
	prisoner = no
	only_capable = yes
	is_triggered_only = yes
	has_global_flag = reynes_of_castamere #reynes of castamere must of actually happened

	trigger = {  }

	option = {
		name = EVTOPTA72130
		prestige = 20
		piety = -40
		clr_character_flag = feast_rains_of_castamere
		if = {
			limit = { trait = honorable }
			random = {
				chance = 25
				remove_trait = honorable
				hidden_tooltip = { character_event = { id = trait_notification.17 } }
			}
		}
		any_vassal = {
			limit = {
				has_opinion_modifier = { who = ROOT modifier = opinion_enjoyed_feast }
				NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_intimidated } }
			}
			if = {
				limit = {
					NOT = { trait = brave }
					OR = {
						trait = craven
						NOT = { trait = proud }
					}
					NOT = { tier = BARON }
					NOT = { dynasty = ROOT }
					NOT = { is_married = ROOT }
				}
				opinion = {
					modifier = opinion_intimidated
					who = ROOT
				}
			}
			hidden_tooltip = {
				if = {
					limit = { ai = no }
					character_event = { id = 72131 }
				}
			}
		}
	}
}

#Visitor hears The Rains of Castamere
character_event = {
	id = 72131
	desc = EVTDESC72131
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72131
	}
}
#Prince of pentos presides over feast
character_event = {
	id = 72132
	desc = EVTDESC72132
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		FROM = {
			is_patrician = yes
			OR = {
				has_landed_title = k_pentos
				liege = { has_landed_title = k_pentos }
			}
		}
	}

	option = {
		name = EVTOPTA72132
		trigger = {
			FROM = { NOT = { has_character_flag = prince_deflower_maids } }
		}
		FROM = {
			character_event = {
				id = 72133
			}
		}
	}
	option = {
		name = EVTOPTB72132
		trigger = {
			FROM = { has_character_flag = prince_deflower_maids }
		}
		character_event = {
			id = 72135
		}
	}
}
character_event = {
	id = 72133
	desc = EVTDESC72133
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72133
		prestige = 20
		hidden_tooltip = {
			any_vassal = {
				limit = {
					has_character_flag = coming_to_feast
					ai = no
				}
				character_event = {
					id = 72134
				}
			}
		}
	}
}
character_event = {
	id = 72134
	desc = EVTDESC72134
	picture = GFX_evt_feast

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTA72134
	}
}
# Prince of Pentos deflowers maids
character_event = {
	id = 72135
	desc = EVTDESC72135
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72135
		# Maid of the Fields
		any_courtier = {
			limit = { has_minor_title = title_maid_fields }
			custom_tooltip = {
				text = TOOLTIPdeflower_maiden_fields
				hidden_tooltip = {
					if = {
						limit = {
							fertility = 0.3
							ROOT = { fertility = 0.3 }
							is_pregnant = no
						}
						random = {
							chance = 35
							impregnate = ROOT
						}
					}
					remove_title = title_maid_fields
					remove_trait = disinherited
					remove_trait = forbid_marriage
					character_event = { id = 72138 }
				}
			}
		}
		hidden_tooltip = {
			character_event = { # New maiden appointed
				id = free_cities.1027
			}
		}
		# Maid of the Seas
		any_courtier = {
			limit = { has_minor_title = title_maid_seas }
			custom_tooltip = {
				text = TOOLTIPdeflower_maiden_seas
				hidden_tooltip = {
					if = {
						limit = {
							fertility = 0.3
							ROOT = { fertility = 0.3 }
							is_pregnant = no
						}
						random = {
							chance = 35
							impregnate = ROOT
						}
					}
					remove_title = title_maid_seas
					remove_trait = disinherited
					remove_trait = forbid_marriage
					character_event = { id = 72138 }
				}
			}
		}
		hidden_tooltip = {
			character_event = { # New maiden appointed
				id = free_cities.1028
			}
		}
		FROM = {
			FROM = {
				character_event = {
					id = 72136 # Continue the feasting
				}
			}
		}
	}
}
character_event = {
	id = 72136
	desc = EVTDESC72136
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72136
		prestige = 20
		hidden_tooltip = {
			any_vassal = {
				limit = {
					has_character_flag = coming_to_feast
				}
				character_event = {
					id = 72137
				}
			}
		}
	}
}
character_event = {
	id = 72137
	desc = EVTDESC72137
	picture = GFX_evt_feast

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTA72137
	}
}
# Continue a relationship with one of the maidens or cull them
character_event = {
	id = 72138
	desc = EVTDESC72138
	picture = GFX_evt_feast

	is_triggered_only = yes

	immediate = {
		remove_trait = disinherited
		remove_trait = forbid_marriage
		remove_title = title_maid_fields
		remove_title = title_maid_seas
	}

	option = {
		name = EVTOPTA72138
		random_list = {
			15 = {
				FROM = { character_event = { id = 72139 } }
			}
			85 = {
				random_independent_ruler = {
					limit = {
						NOT = { trait = nightswatch }
						NOT = { culture_group = unoccupied_group }
						NOT = { trait = wildling }
						NOT = { character = FROM }
						NOT = { any_liege = { character = FROM } }
						NOT = { same_realm = ROOT }
						religion = rhllor
					}
					ROOT = { move_character = PREV }
				}
			}
		}
	}
}
character_event = {
	id = 72139
	desc = EVTDESC72139
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA72139 # Yes - Lover
		FROM = { add_lover = ROOT }
		prestige = 20
		piety = -10
	}
	option = {
		name = EVTOPTB72139 # Yes - Marry
		trigger = {
			is_married = no
		}
		FROM = { add_spouse = ROOT }
		prestige = 20
		piety = 10
	}
	option = { # No
		name = EVTOPTC72139
		prestige = -10
		piety = 10
		opinion = {
			modifier = opinion_upset
			who = ROOT
			years = 5
		}
		random_independent_ruler = {
			limit = {
				NOT = { trait = nightswatch }
				NOT = { culture_group = unoccupied_group }
				NOT = { trait = wildling }
				NOT = { character = FROM }
				NOT = { any_liege = { character = FROM } }
				NOT = { same_realm = ROOT }
				religion = rhllor
			}
			FROM = { move_character = PREV }
		}
	}
}

#Guest chokes to death
character_event = {
	id = feast.25
	desc = EVTDESCfeast.25
	picture = GFX_evt_feast

	is_triggered_only = yes
	prisoner = no
	only_capable = yes

	trigger = {
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = guest_ball_started
			AND = {
				is_ruler = no
				is_abroad = no
				location = { FROM = { capital_scope = { province_id = PREVPREV } } }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { is_inaccessible_trigger = yes }
			}
		}
		FROM = {
			#war = no
			is_vassal_or_below = ROOT
			OR = {
				has_character_modifier = holding_large_feast
				has_character_modifier = holding_ball
			}
		}
	}

	option = {
		name = EVTOPTAfeast.25
		hidden_tooltip = {
			FROM = {
				character_event = { id = feast.26 }
				any_vassal = {
					limit = {
						ai = no
						OR = {
							has_character_flag = guest_feast_started
							has_character_flag = guest_ball_started
						}
					}
					character_event = { id = feast.27 }
				}
				any_opinion_modifier_target = {
					limit = {
						ai = no
						has_opinion_modifier = { modifier = opinion_attending_wedding who = ROOT }
						NOT = { vassal_of = ROOT }
					}
					character_event = { id = feast.27 }
				}
			}
			any_dynasty_member = {
				limit = {
					ai = no
					OR = {
						AND = {
							NOT = { same_liege = ROOT }
							NOT = { is_liege_of = ROOT }
						}
						NOR = {
							has_character_flag = guest_feast_started
							has_character_flag = guest_ball_started
							has_opinion_modifier = { modifier = opinion_attending_wedding who = ROOT }
						}
					}
				}
				character_event = { id = feast.27 }
			}
		}
		red_god_resurrect_effect = yes #check for rhllor resurrection
		death = {
			death_reason = death_accident
		}
	}
}
character_event = { #inform host
	id = feast.26
	desc = EVTDESCfeast.26
	picture = GFX_evt_scandal

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.26
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}
character_event = { #inform guest
	id = feast.27
	desc = EVTDESCfeast.27
	picture = GFX_evt_scandal

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.27
	}
}

# Summer Islands exotic dancers
character_event = {
	id = feast.30
	desc = EVTDESCfeast.30
	picture = GFX_evt_summer_island_lovers

	is_triggered_only = yes

	trigger = {
		war = no
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
		NOT = { has_character_flag = host_feast_started }
		NOT = { has_character_flag = host_ball_started }
		NOT = { has_character_flag = feast_exoctic_dancers }
	}

	option = {
		name = EVTOPTAfeast.30 # Hire them
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0.05
				OR = {
					AND = {
						NOT = { yearly_income = 67 }
						NOT = { treasury = 30 }
					}
					AND = {
						yearly_income = 67
						NOT = { yearly_income = 233 }
						NOT = { scaled_wealth = 0.5 }
					}
					AND = {
						yearly_income = 233
						NOT = { treasury = 60 }
					}
				}
				AND = { #some characters throw their cash away on feasts
					stewardship < 9
					NOT = { trait = temperate }
					OR = {
						trait = gluttonous
						trait = hedonist
						trait = slothful
					}
				}
			}
			modifier = {
				factor = 30
				NOT = { yearly_income = 67 }
				treasury = 100
			}
			modifier = {
				factor = 30
				yearly_income = 67
				scaled_wealth = 1.5
			}
		}
		set_character_flag = feast_exoctic_dancers
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			random = {
				chance = 20
				character_event = { id = feast.31 days = 40 }
			}
		}
	}
	option = {
		name = EVTOPTBfeast.30
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}
#Exotic dancers entertain the guests
character_event = {
	id = feast.31
	desc = EVTDESCfeast.31
	picture = GFX_evt_summer_island_lovers

	is_triggered_only = yes
	only_rulers = yes
	prisoner = no
	only_capable = yes

	trigger = {
		war = no
		OR = {
			AND = {
				has_character_modifier = holding_large_feast
				has_character_flag = host_feast_started
				has_character_flag = feast_exoctic_dancers
			}
			has_character_modifier = holding_ball
		}
		any_vassal = {
			war = no
			OR = {
				has_character_flag = guest_feast_started
				has_character_flag = guest_ball_started
			}
		}
	}

	option = {
		name = EVTOPTAfeast.31
		if = {
			limit = {
				NOT = {
					trait = gregarious
				}
				NOT = { trait = shy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25

				add_trait = gregarious
				hidden_tooltip = {
					character_event = {
						id = 38265 #Notify
					}
				}
			}
		}
		if = {
			limit = {
				NOT = {
					trait = charitable
				}
				NOT = { trait = greedy }
				NOT = {
					personality_traits = 5
				}
				age = 14
			}
			random = {
				chance = 25
				add_trait = charitable
				hidden_tooltip = {
					character_event = {
						id = 38273 #Notify
					}
				}
			}
		}
		add_character_modifier = {
			name = entertaining_entertainment
			duration = 180
		}
		random_vassal = {
			limit = {
				OR = {
					has_character_flag = guest_feast_started
					has_character_flag = guest_ball_started
				}
			}
			character_event = {
				id = feast.32
				tooltip = EVTTOOLTIPfeast.32
			}
		}
	}
}

#Visitor likes exotic dancers
character_event = {
	id = feast.32
	desc = EVTDESCfeast.32
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.32
		opinion = {
			modifier = opinion_approves
			who = FROM
			years = 10
		}
	}
}


#Black Goat/Qohorik offer blood sacrifice
character_event = {
	id = feast.33
	desc = EVTDESCfeast.33
	picture = GFX_evt_feast

	is_triggered_only = yes
	only_rulers = yes

	trigger = {
		has_black_goat_sacrifice_religion_trigger = yes
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
	}

	option = {
		name = EVTOPTAfeast.33  #Condemned criminals
		scaled_wealth = { value = -0.05 min = -5 max = -60 }
		piety = 10
		if = {
			limit = { has_blood_magic_religion_trigger = yes }
			change_variable = { which = "warlock_magic" value = 0.5 }
		}
		hidden_tooltip = {
			any_vassal = {
				limit = {
					has_character_flag = coming_to_feast
					ai = no
				}
				character_event = {
					id = feast.34
				}
			}
		}
	}
	option = {
		name = EVTOPTBfeast.33  #Animals
		scaled_wealth = { value = -0.1 min = -10 max = -125 }
		piety = 20
		if = {
			limit = { has_blood_magic_religion_trigger = yes }
			change_variable = { which = "warlock_magic" value = 1 }
		}
		hidden_tooltip = {
			any_vassal = {
				limit = {
					has_character_flag = coming_to_feast
					ai = no
				}
				character_event = {
					id = feast.35
				}
			}
		}
	}
	option = {
		name = EVTOPTCfeast.33 #No
		piety = -25
	}
}
character_event = {
	id = feast.34
	desc = EVTDESCfeast.34
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTAfeast.34
			trigger = {
				has_black_goat_sacrifice_religion_trigger = yes
			}
		}
		name = {
			text = EVTOPTAfeast.34B
			trigger = {
				has_black_goat_sacrifice_religion_trigger = no
			}
		}
	}
}
character_event = {
	id = feast.35
	desc = EVTDESCfeast.35
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = {
			text = EVTOPTAfeast.34
			trigger = {
				has_black_goat_sacrifice_religion_trigger = yes
			}
		}
		name = {
			text = EVTOPTAfeast.34B
			trigger = {
				has_black_goat_sacrifice_religion_trigger = no
			}
		}
	}
}

#Hold Chariot Race on black walls of Volantis?
character_event = {
	id = feast.36
	desc = EVTDESCfeast.36
	picture = "GFX_evt_hippodrome_byzantine"

	is_triggered_only = yes

	trigger = {
		is_ruler = yes
		OR = {
			has_character_modifier = holding_large_feast
			has_character_modifier = holding_ball
		}
	}

	option = {
		name = EVTOPTAfeast.36  #Yes
		if = {
			limit = { yearly_income = 233 }
			wealth = -35
		}
		if = {
			limit = {
				yearly_income = 67
				NOT = { yearly_income = 233 }
			}
			scaled_wealth = -0.15
		}
		if = {
			limit = { NOT = { yearly_income = 67 } }
			wealth = -10
		}
		hidden_tooltip = {
			character_event = { id = feast.37 days = 50 }
		}
	}
	option = {
		name = EVTOPTBfeast.36 #No
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -40
		}
		if = {
			limit = { tier = DUKE }
			prestige = -20
		}
		if = {
			limit = { tier = COUNT }
			prestige = -10
		}
	}
}
character_event = {
	id = feast.37
	desc = EVTDESCfeast.37
	picture = "GFX_evt_hippodrome_byzantine"

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.37
		prestige = 30
		hidden_tooltip = {
			any_vassal = {
				limit = {
					has_character_flag = coming_to_feast
					ai = no
				}
				character_event = {
					id = feast.38
				}
			}
		}
	}
}
character_event = {
	id = feast.38
	desc = EVTDESCfeast.38
	picture = "GFX_evt_hippodrome_byzantine"

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.38
	}
}

#Norvos feast bears event
character_event = {
	id = feast.39
	desc = "EVTDESCfeast.39"
	picture = "GFX_evt_bearded_priests"

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.39
		prestige = 30
		hidden_tooltip = {
			any_vassal = {
				limit = {
					has_character_flag = coming_to_feast
					ai = no
				}
				character_event = {
					id = feast.40
				}
			}
		}
	}
}
character_event = {
	id = feast.40
	desc = "EVTDESCfeast.40"
	picture = "GFX_evt_bearded_priests"

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.40
	}
}
#Banquette: Start
character_event = {
	id = 4110
	desc = EVTDESC4110
	picture = GFX_evt_feast

	is_triggered_only = yes

	only_playable = yes
	only_capable = yes
	prisoner = no
	friends = yes

	trigger = {
		has_character_modifier = holding_large_feast
		any_friend = {
			is_adult = yes
			prisoner = no
			is_incapable = no
			OR = {
				is_ruler = no
				NOT = { liege = { character = ROOT } }
			}
			NOT = { is_inaccessible_trigger = yes }
			NOT = { trait = slave }
			NOT = { trait = dragon }
			NOT = { has_character_flag = do_not_disturb }
		}
	}

	immediate = {
		random_friend = {
			limit = {
				is_adult = yes
				prisoner = no
				is_incapable = no
				OR = {
					is_ruler = no
					NOT = { liege = { character = ROOT } }
				}
				NOT = { is_inaccessible_trigger = yes }
				NOT = { trait = slave }
				NOT = { trait = dragon }
				NOT = { has_character_flag = do_not_disturb }
			}
			save_event_target_as = invitation_pending
		}
	}

	option = {
		name = EVTOPTA4110
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				trait = gregarious
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
		}
		event_target:invitation_pending = {
			character_event = {
				id = 4111
				tooltip = EVTTOOLTIP4111
			}
		}
	}

	option = {
		name = EVTOPTB4110
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = proud
				event_target:invitation_pending = { is_lowborn = yes }
			}
			modifier = {
				factor = 3
				trait = shy
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		event_target:invitation_pending = {
			random = {
				chance = 70
				character_event = {
					id = 4112
					tooltip = EVTTOOLTIP4112
				}
			}
		}
	}
}

#Banquette: Invited
character_event = {
	id = 4111
	desc = EVTDESC4111
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA4111
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = proud
				higher_tier_than = FROM
			}
			modifier = {
				factor = 3
				trait = shy
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = temperate
			}
		}
		FROM = {
			opinion = {
				modifier = opinion_disappointed
				who = ROOT
				years = 1
			}
			hidden_tooltip = {
				set_character_flag = guest_declined
				character_event = {
					id = 4114
					days = 39
				}
			}
		}
	}
	option = {
		name = EVTOPTB4111
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = shy
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = gluttonous
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		set_character_flag = friend_coming_to_feast
		FROM = {
			opinion = {
				modifier = opinion_satisfied
				who = ROOT
				years = 1
			}
			hidden_tooltip = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_attending_wedding
					months = 2
				}
				set_character_flag = guest_accepted
				character_event = {
					id = 4114
					days = 39
				}
			}
		}
	}
	option = {
		name = EVTOPTC4111
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				trait = gregarious
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = gluttonous
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		set_character_flag = friend_coming_to_feast
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 1
			}
			hidden_tooltip = {
				reverse_opinion = {
					who = ROOT
					modifier = opinion_attending_wedding
					months = 2
				}
				set_character_flag = guest_happy
				character_event = {
					id = 4114
					days = 39
				}
			}
		}
	}
}

#Banquette: Not Invited
character_event = {
	id = 4112
	desc = EVTDESC4112
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA4112
		piety = 10
	}

	option = {
		name = EVTOPTB4112
		FROM = {
			reverse_opinion = {
				modifier = opinion_disappointed
				who = ROOT
				years = 10
			}
		}
	}

	option = {
		name = EVTOPTC4112
		FROM = {
			character_event = {
				id = 4113
				days = 2
				random = 2
				tooltip = EVTTOOLTIP4113
			}
		}
	}
}

#Banquette: The Bad End
character_event = {
	id = 4113
	desc = EVTDESC4113
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTA4113 #So?
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 3
				trait = shy
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		remove_friend = FROM
	}
	option = {
		name = EVTOPTB4113 #I'm sorry
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 4
				trait = gregarious
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
		}
		FROM = {
			opinion = {
				modifier = opinion_glad
				who = ROOT
				years = 1
			}
		}
	}
}

#Banquette: The Good End?
character_event = {
	id = 4114
	desc = EVTDESC4114
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
		FROM = {
			is_alive = yes
			prisoner = no
			is_incapable = no
			NOT = { is_inaccessible_trigger = yes }
			NOT = { trait = slave }
		}
	}

	option = {
		name = EVTOPTA4114
		trigger = {
			has_character_flag = guest_declined
		}
		clr_character_flag = guest_declined
		opinion = {
			modifier = opinion_sad
			who = FROM
			years = 10
		}
	}
	option = {
		name = EVTOPTB4114
		trigger = {
			has_character_flag = guest_accepted
		}
		clr_character_flag = guest_accepted
		FROM = {
			opinion = {
				modifier = opinion_glad
				who = ROOT
				years = 10
			}
		}
		opinion = {
			modifier = opinion_glad
			who = FROM
			years = 10
		}
	}
	option = {
		name = EVTOPCF4114
		trigger = {
			has_character_flag = guest_happy
		}
		clr_character_flag = guest_happy
		FROM = {
			opinion = {
				modifier = opinion_happy
				who = ROOT
				years = 10
			}
		}
		opinion = {
			modifier = opinion_happy
			who = FROM
			years = 10
		}
	}
}
##More AGOT feast events##
#Fancy centre-piece
long_character_event = {
	id = feast.100
	desc = EVTDESCfeast.100
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
		is_ruler = yes
	}

	option = {
		name = EVTOPTAfeast.100
		prestige = 30
		hidden_tooltip = {
			any_vassal = {
				limit = {
					ai = no
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = coming_to_feast
					}
					prisoner = no
					is_incapable = no
				}
				long_character_event = { id = feast.101 }
			}
		}
	}
}
long_character_event = {
	id = feast.101
	desc = EVTDESCfeast.101
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.101
	}
}
#Fancy pie
long_character_event = {
	id = feast.102
	desc = EVTDESCfeast.102
	picture = GFX_evt_feast

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
		is_ruler = yes
	}

	option = {
		name = EVTOPTAfeast.102
		prestige = 30
		hidden_tooltip = {
			any_vassal = {
				limit = {
					ai = no
					OR = {
						has_character_flag = guest_feast_started
						has_character_flag = coming_to_feast
					}
					prisoner = no
					is_incapable = no
				}
				long_character_event = { id = feast.103 }
			}
		}
	}
}
long_character_event = {
	id = feast.103
	desc = EVTDESCfeast.103
	picture = GFX_evt_feast

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.103
	}
}
#Harvest Feast
character_event = {
	id = feast.104
	desc = EVTDESCfeast.104
	picture = "GFX_summer_3"

	is_triggered_only = yes

	trigger = {
		has_character_modifier = holding_large_feast
		is_ruler = yes
	}

	option = {
		name = EVTOPTAfeast.104 #Set Aside Large Reserve for Winter
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 0.2
				war = yes
			}
			modifier = {
				factor = 0
				OR = {
					AND = {
						yearly_income = 250
						wealth < 200
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.8 }
					}
				}
			}
			modifier = {
				factor = 2
				capital_scope = {
					OR = {
						region = world_westeros_north
						region = world_ibben
					}
				}
			}
			modifier = {
				factor = 0.2
				capital_scope = {
					OR = {
						region = world_dorne
						region = world_stepstones
						region = world_tyrosh
						region = world_lys
						region = world_volantis
						region = world_north_valyria
						region = world_ghiscar
						region = world_qarth
						region = world_asshai
						region = world_leng
					}
				}
			}
		}
		custom_tooltip = {
			text = TOOLTIPfeast.104LARGE
		}
		scaled_wealth = { value = -0.5 min = -20 max = -125 }
		capital_scope = {
			add_province_modifier = {
				name = large_winter_reserve
				duration = -1
			}
		}
	}
	option = {
		name = EVTOPTBfeast.104 #Normal Reserve
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
		}
		custom_tooltip = {
			text = TOOLTIPfeast.104MEDIUM
		}
		scaled_wealth = { value = -0.25 min = -10 max = -60 }
	}
	option = {
		name = EVTOPTCfeast.104 #Small Reserve
		ai_chance = {
			factor = 20
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				war = yes
			}
			modifier = {
				factor = 0.66
				capital_scope = {
					OR = {
						region = world_westeros_north
						region = world_ibben
					}
				}
			}
			modifier = {
				factor = 1.5
				capital_scope = {
					OR = {
						region = world_dorne
						region = world_stepstones
						region = world_tyrosh
						region = world_lys
						region = world_volantis
						region = world_north_valyria
						region = world_ghiscar
						region = world_qarth
						region = world_asshai
						region = world_leng
					}
				}
			}
		}
		custom_tooltip = {
			text = TOOLTIPfeast.104SMALL
		}
		scaled_wealth = { value = -0.125 min = -5 max = -30 }
		capital_scope = {
			add_province_modifier = {
				name = small_winter_reserve
				duration = -1
			}
		}
	}
}
##Petitions##
#Courtier in debt to local merchant
character_event = {
	id = feast.105
	desc = EVTDESCfeast.105

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = { has_character_modifier = holding_large_feast }
		is_ruler = yes
	}

	immediate = {
		event_target:feast_host = {
			random_courtier = {
				limit = {
					is_adult = yes
					prisoner = no
					is_incapable = no
					NOT = { trait = slave }
					NOT_mythical_creature_trigger = yes
					NOT = { is_inaccessible_trigger = yes }
					ai = yes
					NOT = { character = ROOT }
					is_female = no
					NOR = {
						trait = just
						trait = honorable
						trait = honest
					}
					OR = {
						trait = arbitrary
						trait = deceitful
						trait = greedy
						trait = gluttonous
						stewardship < 4
					}
				}
				save_event_target_as = merchant_debtor
			}
		}
	}

	option = {
		name = EVTOPTAfeast.105 #Make the courtier pay
		ai_chance = {
			factor = 20
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 2
				event_target:merchant_debtor = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 2
				event_target:merchant_debtor = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
		}
		event_target:merchant_debtor = {
			opinion = { who = ROOT modifier = opinion_unhappy months = 60 }
			if = {
				limit = {
					wealth < 50
				}
				wealth = -25
				break = yes
			}
			if = {
				limit = {
					wealth = 50
					wealth < 100
				}
				wealth = -50
				break = yes
			}
			if = {
				limit = {
					wealth = 100
					wealth < 150
				}
				wealth = -100
				break = yes
			}
			if = {
				limit = {
					wealth = 150
					wealth < 200
				}
				wealth = -150
				break = yes
			}
			if = {
				limit = { wealth = 200 }
				wealth = -200
				break = yes
			}
		}
	}
	option = {
		name = EVTOPTBfeast.105 #Cancel the debt
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 2
				event_target:merchant_debtor = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 2
				event_target:merchant_debtor = { reverse_opinion = { who = ROOT value = 50 } }
			}
		}
		prestige = -50
		event_target:feast_host = {
			capital_scope = {
				add_province_modifier = {
					name = merchants_unhappy
					duration = 730
				}
			}
		}
	}
}
#Property Dispute
character_event = {
	id = feast.106
	desc = EVTDESCfeast.106

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = { has_character_modifier = holding_large_feast }
		is_ruler = yes
	}

	immediate = {
		event_target:feast_host = {
			random_courtier = {
				limit = {
					is_adult = yes
					prisoner = no
					is_incapable = no
					can_inherit_titles_trigger = yes
					ai = yes
					NOT = { character = ROOT }
				}
				save_event_target_as = property_dispute_1
				event_target:feast_host = {
					random_courtier = {
						limit = {
							is_adult = yes
							prisoner = no
							is_incapable = no
							can_inherit_titles_trigger = yes
							ai = yes
							NOT = { character = ROOT }
							NOT = { character = PREVPREV }
						}
						save_event_target_as = property_dispute_2
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.106 #Courtier 1
		ai_chance = {
			factor = 20
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { is_ruler = yes }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { higher_tier_than = COUNT }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = {
					OR = {
						is_voter = yes
						is_councillor = yes
					}
				}
			}
			modifier = {
				factor = 2
				event_target:property_dispute_1 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.1
				event_target:property_dispute_1 = { is_rival = ROOT }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { reverse_opinion = { who = ROOT value = 100 } }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { reverse_opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { reverse_opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_1 = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_1 = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_1 = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_1 = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_1 = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}
		}
		event_target:property_dispute_1 = {
			if = {
				limit = { ROOT = { higher_tier_than = DUKE } }
				wealth = 50
			}
			if = {
				limit = { ROOT = { tier = DUKE } }
				wealth = 30
			}
			if = {
				limit = { ROOT = { lower_tier_than = DUKE } }
				wealth = 15
			}
			opinion = { who = ROOT modifier = opinion_happy months = 36 }
			event_target:property_dispute_2 = {
				opinion = { who = ROOT modifier = opinion_unhappy months = 36 }
				hidden_tooltip = {
					opinion = { who = PREV modifier = opinion_dislike multiplier = 2 months = 72 }
					reverse_opinion = { who = PREV modifier = opinion_dislike multiplier = 2 months = 72 }
				}
			}
		}
	}
	option = {
		name = EVTOPTBfeast.106 #Courtier 2
		ai_chance = {
			factor = 20
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { is_ruler = yes }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { higher_tier_than = COUNT }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = {
					OR = {
						is_voter = yes
						is_councillor = yes
					}
				}
			}
			modifier = {
				factor = 2
				event_target:property_dispute_2 = { is_friend = ROOT }
			}
			modifier = {
				factor = 0.1
				event_target:property_dispute_2 = { is_rival = ROOT }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { reverse_opinion = { who = ROOT value = 100 } }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { reverse_opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { reverse_opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.5
				event_target:property_dispute_2 = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_2 = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_2 = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_2 = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 0.66
				event_target:property_dispute_2 = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}
		}
		event_target:property_dispute_2 = {
			if = {
				limit = { ROOT = { higher_tier_than = DUKE } }
				wealth = 50
			}
			if = {
				limit = { ROOT = { tier = DUKE } }
				wealth = 30
			}
			if = {
				limit = { ROOT = { lower_tier_than = DUKE } }
				wealth = 15
			}
			opinion = { who = ROOT modifier = opinion_happy months = 36 }
			event_target:property_dispute_1 = {
				opinion = { who = ROOT modifier = opinion_unhappy months = 36 }
				hidden_tooltip = {
					opinion = { who = PREV modifier = opinion_dislike multiplier = 2 months = 72 }
					reverse_opinion = { who = PREV modifier = opinion_dislike multiplier = 2 months = 72 }
				}
			}
		}
	}
	option = {
		name = EVTOPTCfeast.106 #Claim for self
		trigger = {
			NOR = {
				trait = just
				trait = honorable
			}
		}
		ai_chance = {
			factor = 2
			modifier = {
				factor = 2.5
				trait = greedy
			}
			modifier = {
				factor = 2.5
				trait = arbitrary
			}
			modifier = {
				factor = 2.5
				trait = ruthless
			}
			modifier = {
				factor = 2.5
				trait = deceitful
			}
			modifier = {
				factor = 0.4
				trait = charitable
			}
			modifier = {
				factor = 0
				trait = honest
			}
		}
		if = {
			limit = { higher_tier_than = DUKE }
			wealth = 50
		}
		if = {
			limit = { tier = DUKE }
			wealth = 30
		}
		if = {
			limit = { lower_tier_than = DUKE }
			wealth = 15
		}
		event_target:property_dispute_2 = {
			opinion = { who = ROOT modifier = opinion_unhappy months = 36 }
		}
		event_target:property_dispute_1 = {
			opinion = { who = ROOT modifier = opinion_unhappy months = 36 }
		}
		if = {
			limit = {
				NOT = { trait = just }
				NOT = { trait = arbitrary }
				NOT = { personality_traits = 6 }
				age = 14
			}
			random = {
				chance = 50
				add_trait = arbitrary
				hidden_tooltip = { character_event = { id = 38266 } }
			}
		}
	}
}
#Group of nobles request crime dealt with in capital
character_event = {
	id = feast.107
	desc = EVTDESCfeast.107

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = {
			has_character_modifier = holding_large_feast
			is_ruler = yes
			capital_scope = {
				OR = {
					has_province_modifier = thieves_guild
					has_province_modifier = smugglers_ring
					has_province_modifier = highway_robber_band
				}
			}
		}
		job_marshal = {
			in_command = no
			ai = yes
		}
	}

	option = {
		name = EVTOPTAfeast.107 #Send Marshal
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
		}
		scaled_wealth = { value = -0.25 min = -10 max = -60 }
		random_list = {
			60 = {
				modifier = {
					factor = 1.5
					job_marshal = { martial = 12 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { martial = 15 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { martial = 18 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue = 12 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue = 15 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue = 18 }
				}
				character_event = { id = feast.108 days = 1 tooltip = TOOLTIPfeast.108 } #Suceeds
			}
			40 = {
				modifier = {
					factor = 1.5
					job_marshal = { martial < 8 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { martial < 5 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue < 8 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue < 5 }
				}
				character_event = { id = feast.109 days = 1 tooltip = TOOLTIPfeast.109 } #Fails
			}
		}
	}
	option = {
		name = EVTOPTBfeast.107 #No
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
		}
		prestige = -50
		event_target:feast_host = {
			capital_scope = {
				add_province_modifier = {
					name = province_neglect
					duration = 730
				}
			}
		}
	}
}
character_event = { #Success
	id = feast.108
	desc = EVTDESCfeast.108
	picture = GFX_evt_battle

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = {
			has_character_modifier = holding_large_feast
			is_ruler = yes
			capital_scope = {
				OR = {
					has_province_modifier = thieves_guild
					has_province_modifier = smugglers_ring
					has_province_modifier = highway_robber_band
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.108
		prestige = 25
		event_target:feast_host = {
			capital_scope = {
				if = {
					limit = { has_province_modifier = thieves_guild }
					remove_province_modifier = thieves_guild
				}
				if = {
					limit = { has_province_modifier = smugglers_ring }
					remove_province_modifier = smugglers_ring
				}
				if = {
					limit = { has_province_modifier = highway_robber_band }
					remove_province_modifier = highway_robber_band
				}
			}
		}
		job_marshal = { prestige = 50 }
	}
}
character_event = { #Fail
	id = feast.109
	desc = EVTDESCfeast.109
	picture = GFX_evt_death

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = {
			has_character_modifier = holding_large_feast
			is_ruler = yes
			capital_scope = {
				OR = {
					has_province_modifier = thieves_guild
					has_province_modifier = smugglers_ring
					has_province_modifier = highway_robber_band
				}
			}
			job_marshal = { ai = yes }
		}
	}

	option = {
		name = EVTOPTAfeast.109
		prestige = -30
		job_marshal = {
			random_list = {
				60 = { }
				30 = {
					modifier = {
						factor = 0
						OR = {
							trait = wounded
							is_maimed_trigger = yes
						}
					}
					add_trait_silently_wounded_effect = yes
					hidden_tooltip = { character_event = { id = 38280 } }
				}
				8 = {
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					add_maimed_trait_effect = yes
				}
				2 = {
					hidden_tooltip = { red_god_resurrect_effect = yes }#check for rhllor resurrection
					death = { death_reason = death_bandits }
				}
			}
		}
	}
}
##Guest peitions for justice
character_event = {
	id = feast.120
	desc = EVTDESCfeast.120

	is_triggered_only = yes
	only_capable = yes
	prisoner = no

	trigger = {
		war = no
		OR = {
			has_character_flag = progress_trigger
			FROMFROM = {
				NOT = {
					had_character_flag = {
						flag = host_feast_started
						days = 20
					}
				}
				has_character_flag = host_feast_started
				has_character_modifier = holding_large_feast
			}
		}
		any_opinion_modifier_target = {
			OR = {
				reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder }
				reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder_of_close_kin }
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_cuckolded }
					ROOT = { NOT = { is_married = FROMFROM } }
				}
				reverse_has_opinion_modifier = { who = PREV modifier = kidnapped_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_looted }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_oubilette_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_enslaved_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_me }
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_consort }
				AND = {
					is_adult = yes
					OR = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_vengeance }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_blackmailed }
					}
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_son }
					PREV = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_castrated_me } } }
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_child }
					PREV = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_blinded_me } } }
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_kin }
					OR = {
						PREV = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_tortured_me } } }
						any_kill_list_character = {
							is_close_relative = PREVPREV
							death_execution_torture_trigger = yes
						}
					}
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_close_kin }
					PREV = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_mutilated_me } } }
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_relative_consort }
					PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_consort } } }
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_kin }
					PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_upon_me } } }
				}
				AND = {
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_marriage_child }
					PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_marriage } } }
				}
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_slandered }
			}
			is_liege_or_above = FROMFROM
			NOT = { is_liege_or_above = ROOT }
			NOT = { is_consort = PREV }
			NOT = { #no lower liege who has power over both
				any_liege = {
					lower_tier_than = FROMFROM
					is_vassal_or_below = ROOT
				}
			}
			NOT = { character = event_target:progress_feast_target }
			prisoner = no
			NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_sought_liege_redress } }
		}
		NOT = { trait = slave }
	}

	immediate = {
		random_opinion_modifier_target = {
			limit = {
				OR = {
					reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder }
					reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder_of_close_kin }
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_cuckolded }
						ROOT = { NOT = { is_married = FROMFROM } }
					}
					reverse_has_opinion_modifier = { who = PREV modifier = kidnapped_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_looted }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_oubilette_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_enslaved_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_me }
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_consort }
					AND = {
						is_adult = yes
						OR = {
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_vengeance }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_blackmailed }
						}
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_son }
						PREV = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_castrated_me } } }
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_child }
						PREV = { any_child = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_blinded_me } } }
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_tortured_kin }
						OR = {
							PREV = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_tortured_me } } }
							any_kill_list_character = {
								is_close_relative = PREVPREV
								death_execution_torture_trigger = yes
							}
						}
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_mutilated_close_kin }
						PREV = { any_close_relative = { is_adult = no has_opinion_modifier = { who = PREVPREV modifier = opinion_mutilated_me } } }
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_relative_consort }
						PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_consort } } }
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_upon_kin }
						PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_upon_me } } }
					}
					AND = {
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_forced_marriage_child }
						PREV = { any_close_relative = { has_opinion_modifier = { who = PREVPREV modifier = opinion_forced_marriage } } }
					}
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_slandered }
				}
				is_liege_or_above = FROMFROM
				NOT = { is_liege_or_above = ROOT }
				NOT = { is_consort = PREV }
				NOT = { #no lower liege who has power over both
					any_liege = {
						lower_tier_than = FROMFROM
						is_vassal_or_below = ROOT
					}
				}
				NOT = { character = event_target:progress_feast_target }
				prisoner = no
				NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_sought_liege_redress } }
			}
			save_event_target_as = grievance_petition_target
		}
	}

	option = {
		name = EVTOPTAfeast.120 #seek redress
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 3
				event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = PREV modifier = opinion_vengeance } }
			}
			modifier = {
				factor = 3
				event_target:grievance_petition_target = { is_rival = ROOT }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}
		}
		event_target:grievance_petition_target = { tooltip = { show_portrait = yes } }
		FROMFROM = {
			if = {
				limit = { ROOT = { has_character_flag = progress_trigger } }
				event_target:progress_feast_target = { character_event = { id = feast.121 tooltip = TOOLTIPfeast.121 } }
			}
			else = {
				character_event = { id = feast.121 tooltip = TOOLTIPfeast.121 }
			}
		}
	}
	option = {
		name = EVTOPTBfeast.120 #No
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = patient
			}
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = craven
			}

			modifier = {
				factor = 3
				event_target:grievance_petition_target = { is_friend = ROOT }
			}
			modifier = {
				factor = 2
				event_target:grievance_petition_target = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { opinion = { who = ROOT value = 100 } }
			}
		}
	}

	after = { clr_character_flag = progress_trigger }
}
character_event = { #Liege receives peititon
	id = feast.121
	desc = EVTDESCfeast.121 #GetFeastPetitionSubject must be updated for new crimes

	is_triggered_only = yes

	trigger = {
		is_ruler = yes
		is_vassal_or_below = FROM
		is_vassal_or_below = event_target:grievance_petition_target
	}

	immediate = {
		#try and find kin for loc
		if = {
			limit = { ai = no }
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance } }
				}
				FROM = {
					random_child_even_if_dead = {
						limit = {
							is_alive = no
							death_murder_known_trigger = yes
							killer = { character = event_target:grievance_petition_target }
						}
						save_event_target_as = grievance_petition_murdered_kin
						break = yes
					}
					father_even_if_dead = {
						if = {
							limit = {
								is_alive = no
								death_murder_known_trigger = yes
								killer = { character = event_target:grievance_petition_target }
							}
							save_event_target_as = grievance_petition_murdered_kin
							break = yes
						}
					}
					mother_even_if_dead = {
						if = {
							limit = {
								is_alive = no
								death_murder_known_trigger = yes
								killer = { character = event_target:grievance_petition_target }
							}
							save_event_target_as = grievance_petition_murdered_kin
							break = yes
						}
					}
					random_dynasty_member_even_if_dead = {
						limit = {
							is_alive = no
							is_close_relative = PREV
							death_murder_known_trigger = yes
							killer = { character = event_target:grievance_petition_target }
						}
						save_event_target_as = grievance_petition_murdered_kin
						break = yes
					}
					random_dynasty_member_even_if_dead = {
						limit = {
							is_alive = no
							death_murder_known_trigger = yes
							killer = { character = event_target:grievance_petition_target }
						}
						save_event_target_as = grievance_petition_murdered_kin
						break = yes
					}
					random_child_even_if_dead = {
						limit = {
							is_alive = no
							OR = {
								death_execution_trigger = yes
								death_sacrificed_trigger = yes
								death_reason = death_dungeon
							}
							killer = { character = event_target:grievance_petition_target }
						}
						save_event_target_as = grievance_petition_murdered_kin
						break = yes
					}
					father_even_if_dead = {
						if = {
							limit = {
								is_alive = no
								OR = {
									death_execution_trigger = yes
									death_sacrificed_trigger = yes
									death_reason = death_dungeon
								}
								killer = { character = event_target:grievance_petition_target }
							}
							save_event_target_as = grievance_petition_murdered_kin
							break = yes
						}
					}
					mother_even_if_dead = {
						if = {
							limit = {
								is_alive = no
								OR = {
									death_execution_trigger = yes
									death_sacrificed_trigger = yes
									death_reason = death_dungeon
								}
								killer = { character = event_target:grievance_petition_target }
							}
							save_event_target_as = grievance_petition_murdered_kin
							break = yes
						}
					}
					random_dynasty_member_even_if_dead = {
						limit = {
							is_alive = no
							is_close_relative = PREV
							OR = {
								death_execution_trigger = yes
								death_sacrificed_trigger = yes
								death_reason = death_dungeon
							}
							killer = { character = event_target:grievance_petition_target }
						}
						save_event_target_as = grievance_petition_murdered_kin
						break = yes
					}
					random_dynasty_member_even_if_dead = {
						limit = {
							is_alive = no
							OR = {
								death_execution_trigger = yes
								death_sacrificed_trigger = yes
								death_reason = death_dungeon
							}
							killer = { character = event_target:grievance_petition_target }
						}
						save_event_target_as = grievance_petition_murdered_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_son } }
				}
				FROM = {
					random_child = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_castrated_me }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_son } }
				}
				FROM = {
					random_child = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_blinded_me }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_tortured_kin } }
				}
				FROM = {
					random_close_relative = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_tortured_me }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
				event_target:grievance_petition_target = {
					random_kill_list_character = {
						limit = {
							is_close_relative = PREVPREV
							death_execution_torture_trigger = yes
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_mutilated_close_kin } }
				}
				FROM = {
					random_close_relative = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_mutilated_me }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_forced_relative_consort } }
				}
				FROM = {
					random_close_relative = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_forced_consort }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_forced_upon_kin } }
				}
				FROM = {
					random_close_relative = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_forced_upon_me }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
			if = {
				limit = {
					event_target:grievance_petition_target = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_forced_marriage_child } }
				}
				FROM = {
					random_child = {
						limit = {
							has_opinion_modifier = { who = event_target:grievance_petition_target modifier = opinion_forced_marriage }
						}
						save_event_target_as = grievance_petition_target_kin
						break = yes
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.121 #Arrest target
		ai_chance = {
			factor = 33
			modifier = {
				factor = 2
				event_target:grievance_petition_target = { just_execution_reason_PREV_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:grievance_petition_target = { is_foe = ROOT }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}

			modifier = {
				factor = 1.75
				FROM = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					is_ruler = yes
				}
			}
			modifier = {
				factor = 2
				is_close_relative = FROM
			}
			modifier = {
				factor = 2
				is_friend = FROM
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 100 }
			}

			modifier = {
				factor = 1.5
				realm_intrigue = 25
			}
			modifier = {
				factor = 1.5
				realm_intrigue = 37
			}
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = honorable
			}
		}
		random_list = {
			50 = {
				modifier = {
					factor = 1.33
					realm_intrigue = 25
					NOT = { realm_intrigue = 37 }
				}
				modifier = {
					factor = 1.2
					realm_intrigue = 37
				}
				event_target:grievance_petition_target = {  #successfully imprisoned
					imprison = ROOT
					tooltip = {
						opinion = {
							who = ROOT
							modifier = opinion_imprisoned
							months = 60
						}
					}
					hidden_tooltip = { character_event = { id = 151 } }
				}
			}
			50 = {
				modifier = {
					factor = 0.5
					realm_intrigue = 25
					NOT = { realm_intrigue = 37 }
				}
				modifier = {
					factor = 0.4
					realm_intrigue = 37
				}
				hidden_tooltip = {
					event_target:grievance_petition_target = { #avoided prison
						if = { #Flee
							limit = { is_ruler = no }
							banish = yes
							character_event = { id = 152 }
						}
						if = { #Rebel?
							limit = { is_ruler = yes }
							character_event = { id = 150 }
						}
					}
				}
			}
		}
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_granted_redress
				multiplier = 2
				months = 36
			}
			hidden_tooltip = { character_event = { id = feast.122 days = 1 } }
		}
		event_target:grievance_petition_murdered_kin = { tooltip = { show_portrait = yes } }
	}
	option = {
		name = EVTOPTBfeast.121 #Compensation
		trigger = {
			event_target:grievance_petition_target = { #Not possible for murder
				NOR = {
					reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder }
					reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder_of_close_kin }
					AND = {
						reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance }
						event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
					}
				}
			}
		}
		ai_chance = {
			factor = 33

			modifier = { #less likely for serious crimes
				factor = 0.33
				event_target:grievance_petition_target = {
					OR = {
						reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_me }
						reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_me }
					}
				}
			}
			modifier = {
				factor = 1.5
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 1.5
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 1.5
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 1.5
				event_target:grievance_petition_target = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}

			modifier = {
				factor = 1.5
				FROM = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					is_ruler = yes
				}
			}
			modifier = {
				factor = 1.75
				is_close_relative = FROM
			}
			modifier = {
				factor = 1.75
				is_friend = FROM
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 100 }
			}

			modifier = {
				factor = 1.25
				trait = just
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 1.25
				trait = honorable
			}
		}
		event_target:grievance_petition_target = {
			tooltip = {
				if = {
					limit = { #serious crimes
						OR = {
							reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder }
							reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder_of_close_kin }
							AND = {
								reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance }
								event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
							}
							reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_me }
							reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_me }
						}
					}
					if = {
						limit = { is_ruler = yes }
						transfer_scaled_wealth = {
							to = FROM
							min = 40
							value = 1
						}
					}
					if = {
						limit = { is_ruler = no }
						if = {
							limit = { wealth < 50 }
							wealth = -30
							FROM = { wealth = 30 }
						}
						if = {
							limit = {
								wealth = 50
								wealth < 100
							}
							wealth = -60
							FROM = { wealth = 60 }
						}
						if = {
							limit = {
								wealth = 100
								wealth < 150
							}
							wealth = -100
							FROM = { wealth = 100 }
						}
						if = {
							limit = { wealth = 200 }
							wealth = -150
							FROM = { wealth = 150 }
						}
					}
				}
				if = {
					limit = { #less serious crimes
						NOR = {
							reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder }
							reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder_of_close_kin }
							AND = {
								reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance }
								event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
							}
							reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_me }
							reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_me }
						}
					}
					if = {
						limit = { is_ruler = yes }
						transfer_scaled_wealth = {
							to = FROM
							min = 20
							value = 0.5
						}
					}
					if = {
						limit = { is_ruler = no }
						if = {
							limit = { wealth < 50 }
							wealth = -20
							FROM = { wealth = 20 }
						}
						if = {
							limit = {
								wealth = 50
								wealth < 100
							}
							wealth = -40
							FROM = { wealth = 40 }
						}
						if = {
							limit = {
								wealth = 100
								wealth < 150
							}
							wealth = -75
							FROM = { wealth = 75 }
						}
						if = {
							limit = { wealth = 200 }
							wealth = -100
							FROM = { wealth = 100 }
						}
					}
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_forced_compensation
				months = 60
			}
		}
		FROM = {
			if = { #only satisfied if non-serious crime
				limit = {
					event_target:grievance_petition_target = {
						NOR = {
							reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder }
							reverse_has_opinion_modifier = { who = PREV modifier = attempted_murder_of_close_kin }
							AND = {
								reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance }
								event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
							}
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_castrated_me }
							reverse_has_opinion_modifier = { who = PREV modifier = opinion_blinded_me }
						}
					}
				}
				opinion = {
					who = ROOT
					modifier = opinion_granted_redress
					months = 36
				}
			}
			hidden_tooltip = { character_event = { id = feast.124 } }
		}
	}
	option = {
		name = EVTOPTCfeast.121 #No
		ai_chance = {
			factor = 33

			modifier = {
				factor = 0
				trait = just
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:grievance_petition_target = {
					is_ruler = yes
				}
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { reverse_opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { reverse_opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 1.75
				event_target:grievance_petition_target = { reverse_opinion = { who = ROOT value = 100 } }
			}
			modifier = {
				factor = 2
				event_target:grievance_petition_target = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 2
				event_target:grievance_petition_target = { is_friend = ROOT }
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 1.5
				trait = ruthless
			}
		}
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_denied_redress
				months = 60
			}
			hidden_tooltip = { character_event = { id = feast.126 } }
		}
		event_target:grievance_petition_target = {
			opinion = {
				who = ROOT
				modifier = opinion_did_not_prosecute
				months = 36
			}
		}
		if = {
			limit = { #If serious/obvious crime, seen as bad act
				event_target:grievance_petition_target = {
					OR = {
						reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder }
						reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder_of_close_kin }
						AND = {
							reverse_has_opinion_modifier = { who = FROM modifier = opinion_vengeance }
							event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
						}
						reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_me }
						reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_me }
					}
				}
			}
			tiered_prestige_negative_effect = yes
			if = {
				limit = {
					NOT = { trait = just }
					NOT = { trait = arbitrary }
					NOT = { personality_traits  = 6 }
					age = 14
				}
				random = {
					chance = 25
					add_trait = arbitrary
					hidden_tooltip = {
						character_event = {
							id = 38266 #Notify Arbitrary
						}
					}
				}
			}
			if = {
				limit = { trait = just }
				random = {
					chance = 25
					remove_trait = just
					# hidden_tooltip = {
						# character_event = {
							# id = 38266 #Notify Arbitrary
						# }
					# }
				}
			}
		}
	}
}
character_event = { #Inform ROOT target arrested
	id = feast.122

	is_triggered_only = yes

	desc = {
		text = EVTDESCfeast.122
		trigger = { event_target:grievance_petition_target = { prisoner = yes } }
	}
	desc = {
		text = EVTDESCfeast.122B
		trigger = { event_target:grievance_petition_target = { prisoner = no } }
	}

	immediate = { event_target:grievance_petition_target = { character_event = { id = feast.123 } } }

	option = {
		name = EVTOPTAfeast.122
		event_target:grievance_petition_target = {
			opinion = {
				who = ROOT
				modifier = opinion_sought_liege_redress
				months = 60
			}
		}
	}
}
character_event = { #Inform target arrested
	id = feast.123

	is_triggered_only = yes

	desc = {
		text = EVTDESCfeast.123
		trigger = { prisoner = yes }
	}
	desc = {
		text = EVTDESCfeast.123B
		trigger = { prisoner = no }
	}

	option = {
		name = EVTOPTAfeast.123
		FROMFROM = { tooltip = { show_portrait = yes } }
	}
}
character_event = { #Inform ROOT compensated
	id = feast.124

	is_triggered_only = yes

	desc = EVTDESCfeast.124

	option = {
		name = {
			text = EVTOPTAfeast.124
			trigger = {
				event_target:grievance_petition_target = {
					NOR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder }
						reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder_of_close_kin }
						AND = {
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_vengeance }
							event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
						}
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_castrated_me }
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_blinded_me }
					}
				}
			}
		}
		name = {
			text = EVTOPTAfeast.124B
			trigger = {
				event_target:grievance_petition_target = {
					OR = {
						reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder }
						reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder_of_close_kin }
						AND = {
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_vengeance }
							event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
						}
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_castrated_me }
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_blinded_me }
					}
				}
			}
		}
		event_target:grievance_petition_target = {
			tooltip = {
				if = {
					limit = { #serious crimes
						OR = {
							reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder }
							reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder_of_close_kin }
							AND = {
								reverse_has_opinion_modifier = { who = ROOT modifier = opinion_vengeance }
								event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
							}
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_castrated_me }
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_blinded_me }
						}
					}
					if = {
						limit = { is_ruler = yes }
						transfer_scaled_wealth = {
							to = ROOT
							min = 40
							value = 1
						}
					}
					if = {
						limit = { is_ruler = no }
						if = {
							limit = { wealth < 50 }
							wealth = -30
							ROOT = { wealth = 30 }
						}
						if = {
							limit = {
								wealth = 50
								wealth < 100
							}
							wealth = -60
							ROOT = { wealth = 60 }
						}
						if = {
							limit = {
								wealth = 100
								wealth < 150
							}
							wealth = -100
							ROOT = { wealth = 100 }
						}
						if = {
							limit = { wealth = 200 }
							wealth = -150
							ROOT = { wealth = 150 }
						}
					}
				}
				if = {
					limit = { #less serious crimes
						NOR = {
							reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder }
							reverse_has_opinion_modifier = { who = ROOT modifier = attempted_murder_of_close_kin }
							AND = {
								reverse_has_opinion_modifier = { who = ROOT modifier = opinion_vengeance }
								event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
							}
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_castrated_me }
							reverse_has_opinion_modifier = { who = ROOT modifier = opinion_blinded_me }
						}
					}
					if = {
						limit = { is_ruler = yes }
						transfer_scaled_wealth = {
							to = ROOT
							min = 20
							value = 0.5
						}
					}
					if = {
						limit = { is_ruler = no }
						if = {
							limit = { wealth < 50 }
							wealth = -20
							ROOT = { wealth = 20 }
						}
						if = {
							limit = {
								wealth = 50
								wealth < 100
							}
							wealth = -40
							ROOT = { wealth = 40 }
						}
						if = {
							limit = {
								wealth = 100
								wealth < 150
							}
							wealth = -75
							ROOT = { wealth = 75 }
						}
						if = {
							limit = { wealth = 200 }
							wealth = -100
							ROOT = { wealth = 100 }
						}
					}
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_sought_liege_redress
				months = 60
			}
			if = {
				limit = {
					NOT = { opinion = { who = ROOT value = -40 } }
					NOT = { reverse_opinion = { who = ROOT value = -40 } }
					NOT = { is_rival = ROOT }
				}
				add_rival = ROOT
			}
			hidden_tooltip = { character_event = { id = feast.125 } }
		}
	}
}
character_event = { #Inform target compensated
	id = feast.125

	is_triggered_only = yes

	desc = EVTDESCfeast.125

	option = {
		name = EVTOPTAfeast.125
		FROMFROM = { tooltip = { show_portrait = yes } }
		if = {
			limit = { #serious crimes
				OR = {
					reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder }
					reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder_of_close_kin }
					AND = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_vengeance }
						event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
					}
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_me }
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_me }
				}
			}
			if = {
				limit = { is_ruler = yes }
				transfer_scaled_wealth = {
					to = FROM
					min = 40
					value = 1
				}
			}
			if = {
				limit = { is_ruler = no }
				if = {
					limit = { wealth < 50 }
					wealth = -30
					FROM = { wealth = 30 }
				}
				if = {
					limit = {
						wealth = 50
						wealth < 100
					}
					wealth = -60
					FROM = { wealth = 60 }
				}
				if = {
					limit = {
						wealth = 100
						wealth < 150
					}
					wealth = -100
					FROM = { wealth = 100 }
				}
				if = {
					limit = { wealth = 200 }
					wealth = -150
					FROM = { wealth = 150 }
				}
			}
		}
		if = {
			limit = { #less serious crimes
				NOR = {
					reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder }
					reverse_has_opinion_modifier = { who = FROM modifier = attempted_murder_of_close_kin }
					AND = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_vengeance }
						event_target:grievance_petition_murdered_kin = { death_murder_known_trigger = yes }
					}
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_castrated_me }
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_blinded_me }
				}
			}
			if = {
				limit = { is_ruler = yes }
				transfer_scaled_wealth = {
					to = FROM
					min = 20
					value = 0.5
				}
			}
			if = {
				limit = { is_ruler = no }
				if = {
					limit = { wealth < 50 }
					wealth = -20
					FROM = { wealth = 20 }
				}
				if = {
					limit = {
						wealth = 50
						wealth < 100
					}
					wealth = -40
					FROM = { wealth = 40 }
				}
				if = {
					limit = {
						wealth = 100
						wealth < 150
					}
					wealth = -75
					FROM = { wealth = 75 }
				}
				if = {
					limit = { wealth = 200 }
					wealth = -100
					FROM = { wealth = 100 }
				}
			}
		}
	}
}
character_event = { #Inform ROOT refused
	id = feast.126

	is_triggered_only = yes

	desc = EVTDESCfeast.126

	option = {
		name = EVTOPTAfeast.126
		event_target:grievance_petition_target = {
			opinion = {
				who = ROOT
				modifier = opinion_sought_liege_redress
				months = 60
			}
			if = {
				limit = {
					NOT = { opinion = { who = ROOT value = -40 } }
					NOT = { reverse_opinion = { who = ROOT value = -40 } }
					NOT = { is_rival = ROOT }
				}
				add_rival = ROOT
			}
			hidden_tooltip = { character_event = { id = feast.127 } }
		}
	}
}
character_event = { #Inform target refused
	id = feast.127

	is_triggered_only = yes

	desc = EVTDESCfeast.127

	option = {
		name = EVTOPTAfeast.127
		FROMFROM = { tooltip = { show_portrait = yes } }
	}
}
##Vassal requests help with crime
character_event = {
	id = feast.140
	desc = EVTDESCfeast.140

	is_triggered_only = yes

	trigger = {
		war = no
		FROMFROM = {
			is_liege_of = ROOT
			NOT = {
				had_character_flag = {
					flag = host_feast_started
					days = 20
				}
			}
			has_character_flag = host_feast_started
			has_character_modifier = holding_large_feast
			job_marshal = {
				in_command = no
				ai = yes
			}
		}
		capital_scope = {
			OR = {
				has_province_modifier = thieves_guild
				has_province_modifier = smugglers_ring
				has_province_modifier = highway_robber_band
			}
			NOT = { owner = { character = FROMFROM } }
		}
		OR = {
			has_character_flag = guest_feast_started
			has_character_flag = guest_ball_started
		}
	}

	option = {
		name = EVTOPTAfeast.140 #Ask for help
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				NOT = { wealth = -50 }
			}
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
		}
		FROMFROM = { character_event = { id = feast.141 days = 1 tooltip = TOOLTIPfeast.141 } }
		if = {
			limit = { tier = KING }
			prestige = -50
		}
		if = {
			limit = { tier = DUKE }
			prestige = -25
		}
		if = {
			limit = { lower_tier_than = DUKE }
			prestige = -10
		}
	}
	option = {
		name = EVTOPTBfeast.140 #No
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				tier = KING
			}
			modifier = {
				factor = 2
				wealth = 100
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = stubborn
			}
			modifier = {
				factor = 3
				trait = slothful
			}
		}
	}
}
character_event = { #liege receives request
	id = feast.141
	desc = EVTDESCfeast.141

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.141 #Send Marshal
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 75 }
			}
			modifier = {
				factor = 1.75
				opinion = { who = FROM value = 100 }
			}
		}
		scaled_wealth = { value = -0.25 min = -10 max = -60 }
		random_list = {
			60 = {
				modifier = {
					factor = 1.5
					job_marshal = { martial = 12 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { martial = 15 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { martial = 18 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue = 12 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue = 15 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue = 18 }
				}
				character_event = { id = feast.142 days = 1 tooltip = TOOLTIPfeast.108 } #Suceeds
			}
			40 = {
				modifier = {
					factor = 1.5
					job_marshal = { martial < 8 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { martial < 5 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue < 8 }
				}
				modifier = {
					factor = 1.5
					job_marshal = { intrigue < 5 }
				}
				character_event = { id = feast.143 days = 1 tooltip = TOOLTIPfeast.109 } #Fails
			}
		}
	}
	option = {
		name = EVTOPTBfeast.141 #No
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 1.75
				NOT = { opinion = { who = FROM value = -24 } }
			}
			modifier = {
				factor = 1.75
				NOT = { opinion = { who = FROM value = -49 } }
			}
			modifier = {
				factor = 1.75
				NOT = { opinion = { who = FROM value = -74 } }
			}
			modifier = {
				factor = 1.75
				NOT = { opinion = { who = FROM value = -99 } }
			}
		}
		FROM = {
			opinion = {
				who = ROOT
				modifier = opinion_angry
				months = 12
			}
			hidden_tooltip = { character_event = { id = feast.146 } }
		}
	}
}
character_event = { #Success
	id = feast.142
	desc = EVTDESCfeast.142
	picture = GFX_evt_battle

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTAfeast.142
		prestige = 25
		FROMFROM = {
			tooltip = {
				capital_scope = {
					if = {
						limit = { has_province_modifier = thieves_guild }
						remove_province_modifier = thieves_guild
					}
					if = {
						limit = { has_province_modifier = smugglers_ring }
						remove_province_modifier = smugglers_ring
					}
					if = {
						limit = { has_province_modifier = highway_robber_band }
						remove_province_modifier = highway_robber_band
					}
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_happy
				months = 24
			}
			hidden_tooltip = { character_event = { id = feast.144 } }
		}
		tooltip = { job_marshal = { prestige = 50 } }
	}
}
character_event = { #Fail
	id = feast.143
	desc = EVTDESCfeast.143
	picture = GFX_evt_death

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = EVTOPTAfeast.143
		prestige = -30
		tooltip = {
			job_marshal = {
				random_list = {
					60 = { }
					30 = {
						modifier = {
							factor = 0
							OR = {
								trait = wounded
								is_maimed_trigger = yes
							}
						}
						add_trait_silently_wounded_effect = yes
						hidden_tooltip = { character_event = { id = 38280 } }
					}
					8 = {
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						add_maimed_trait_effect = yes
					}
					2 = {
						hidden_tooltip = { red_god_resurrect_effect = yes }#check for rhllor resurrection
						death = { death_reason = death_bandits }
					}
				}
			}
		}
		FROMFROM = {
			opinion = {
				who = ROOT
				modifier = opinion_disappointed
				months = 24
			}
			hidden_tooltip = { character_event = { id = feast.145 } }
		}
	}
}
character_event = { #Inform vassal success
	id = feast.144
	desc = EVTDESCfeast.144
	picture = GFX_evt_battle

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.144
		capital_scope = {
			if = {
				limit = { has_province_modifier = thieves_guild }
				remove_province_modifier = thieves_guild
			}
			if = {
				limit = { has_province_modifier = smugglers_ring }
				remove_province_modifier = smugglers_ring
			}
			if = {
				limit = { has_province_modifier = highway_robber_band }
				remove_province_modifier = highway_robber_band
			}
		}
		FROM = {
			job_marshal = { prestige = 50 }
		}
	}
}
character_event = { #Inform vassal fail
	id = feast.145
	desc = EVTDESCfeast.145
	picture = GFX_evt_death

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.145
		FROM = {
			job_marshal = {
				random_list = {
					60 = { }
					30 = {
						modifier = {
							factor = 0
							OR = {
								trait = wounded
								is_maimed_trigger = yes
							}
						}
						add_trait_silently_wounded_effect = yes
						hidden_tooltip = { character_event = { id = 38280 } }
					}
					8 = {
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						add_maimed_trait_effect = yes
					}
					2 = {
						hidden_tooltip = { red_god_resurrect_effect = yes }#check for rhllor resurrection
						death = { death_reason = death_bandits }
					}
				}
			}
		}
	}
}
character_event = { #Inform vassal refused
	id = feast.146
	desc = EVTDESCfeast.146

	is_triggered_only = yes

	option = {
		name = EVTOPTAfeast.146
	}
}
#Courtier accused of crime
character_event = {
	id = feast.150

	desc = {
		text = EVTDESCfeast.150
		trigger = { event_target:accused = { has_character_flag = charge_trespass } }
	}
	desc = {
		text = EVTDESCfeast.150B
		trigger = { event_target:accused = { has_character_flag = charge_theft } }
	}
	desc = {
		text = EVTDESCfeast.150C
		trigger = { event_target:accused = { has_character_flag = charge_assault } }
	}
	desc = {
		text = EVTDESCfeast.150D
		trigger = { event_target:accused = { has_character_flag = charge_arson } }
	}
	desc = {
		text = EVTDESCfeast.150E
		trigger = { event_target:accused = { has_character_flag = charge_blasphemy } }
	}
	desc = {
		text = EVTDESCfeast.150F
		trigger = { event_target:accused = { has_character_flag = charge_rape } }
	}

	is_triggered_only = yes
	portrait = event_target:accused

	trigger = {
		has_character_modifier = holding_large_feast
		is_ruler = yes
	}

	immediate = {
		random_courtier = { #Find accused
			limit = {
				is_adult = yes
				prisoner = no
				is_incapable = no
				NOT = { trait = slave }
				NOT_mythical_creature_trigger = yes
				NOT = { is_inaccessible_trigger = yes }
				ai = yes
				NOT = { character = ROOT }
				NOR = {
					trait = just
					trait = honorable
					trait = honest
				}
				OR = {
					trait = arbitrary
					trait = deceitful
					trait = greedy
					AND = {
						religion = ROOT
						trait = cynical
						is_unorganised_religion_trigger = no
					}
					trait = fire_obsessed
					trait = lunatic
					trait = wroth
					AND = {
						is_female = no
						trait = lustful
						trait = cruel
					}
				}
			}
			save_event_target_as = accused
		}
		event_target:accused = {
			random_list = {
				10 = {
					trigger = {
						OR = {
							trait = arbitrary
							trait = deceitful
							trait = greedy
						}
					}
					set_character_flag = charge_trespass
				}
				10 = {
					trigger = {
						OR = {
							trait = arbitrary
							trait = deceitful
							trait = greedy
						}
					}
					set_character_flag = charge_theft
				}
				10 = {
					trigger = {
						OR = {
							trait = arbitrary
							trait = wroth
						}
					}
					set_character_flag = charge_assault
				}
				10 = {
					trigger = {
						OR = {
							trait = fire_obsessed
							trait = lunatic
							trait = deceitful
							trait = wroth
						}
					}
					set_character_flag = charge_arson
				}
				10 = {
					trigger = {
						religion = ROOT
						trait = cynical
						is_unorganised_religion_trigger = no
					}
					set_character_flag = charge_blasphemy
				}
				10 = {
					trigger = {
						is_female = no
						trait = lustful
						trait = cruel
					}
					set_character_flag = charge_rape
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.150 #Arrest target
		ai_chance = {
			factor = 15
			modifier = {
				factor = 2
				event_target:accused = { just_execution_reason_PREV_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:accused = { is_foe = ROOT }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}

			modifier = {
				factor = 1.5
				realm_intrigue = 25
			}
			modifier = {
				factor = 1.5
				realm_intrigue = 37
			}
			modifier = {
				factor = 1.5
				trait = just
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.5
				trait = honorable
			}
		}
		event_target:accused = {
			if = {
				limit = { has_character_flag = charge_trespass }
				reverse_opinion = { who = ROOT modifier = opinion_accused_trespass months = 12 }
			}
			if = {
				limit = { has_character_flag = charge_theft }
				reverse_opinion = { who = ROOT modifier = opinion_thief months = 12 }
			}
			if = {
				limit = { has_character_flag = charge_assault }
				reverse_opinion = { who = ROOT modifier = opinion_accused_assault months = 12 }
			}
			if = {
				limit = { has_character_flag = charge_arson }
				reverse_opinion = { who = ROOT modifier = opinion_accused_arson months = 12 }
			}
			if = {
				limit = { has_character_flag = charge_blasphemy }
				reverse_opinion = { who = ROOT modifier = opinion_accused_apostate months = 24 }
			}
			if = {
				limit = { has_character_flag = charge_rape }
				reverse_opinion = { who = ROOT modifier = opinion_raper }
			}
		}
		random_list = {
			50 = {
				modifier = {
					factor = 1.33
					realm_intrigue = 25
					NOT = { realm_intrigue = 37 }
				}
				modifier = {
					factor = 1.2
					realm_intrigue = 37
				}
				event_target:accused = {  #successfully imprisoned
					imprison = ROOT
					tooltip = {
						opinion = {
							who = ROOT
							modifier = opinion_imprisoned
							months = 60
						}
					}
					hidden_tooltip = { character_event = { id = 151 } }
				}
			}
			50 = {
				modifier = {
					factor = 0.5
					realm_intrigue = 25
					NOT = { realm_intrigue = 37 }
				}
				modifier = {
					factor = 0.4
					realm_intrigue = 37
				}
				hidden_tooltip = {
					event_target:accused = { #avoided prison
						if = { #Flee
							limit = { is_ruler = no }
							banish = yes
							character_event = { id = 152 }
						}
						if = { #Rebel?
							limit = { is_ruler = yes }
							character_event = { id = 150 }
						}
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTBfeast.150 #Compensation
		ai_chance = {
			factor = 33

			modifier = {
				factor = 1.5
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -24 } } }
			}
			modifier = {
				factor = 1.5
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
			}
			modifier = {
				factor = 1.5
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -74 } } }
			}
			modifier = {
				factor = 1.5
				event_target:accused = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
			}
			modifier = {
				factor = 1.25
				trait = just
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 1.25
				trait = honorable
			}
		}
		event_target:accused = {
			if = {
				limit = { is_ruler = yes }
				scaled_wealth = {
					min = 20
					value = -0.5
				}
			}
			if = {
				limit = { is_ruler = no }
				if = {
					limit = { wealth < 50 }
					wealth = -20
				}
				else_if = {
					limit = {
						wealth = 50
						wealth < 100
					}
					wealth = -40
				}
				else_if = {
					limit = {
						wealth = 100
						wealth < 150
					}
					wealth = -75
				}
				else_if = {
					limit = { wealth = 200 }
					wealth = -100
				}
			}
			opinion = {
				who = ROOT
				modifier = opinion_forced_compensation
				months = 60
			}
		}
	}
	option = {
		name = EVTOPTCfeast.150 #No
		ai_chance = {
			factor = 33

			modifier = {
				factor = 0
				trait = just
			}
			modifier = {
				factor = 1.75
				event_target:accused = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.5 }
				}
			}
			modifier = {
				factor = 1.75
				event_target:accused = {
					is_ruler = yes
					relative_power = { who = ROOT power = 0.25 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:accused = {
					is_ruler = yes
				}
			}
			modifier = {
				factor = 1.75
				event_target:accused = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { reverse_opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { reverse_opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 1.75
				event_target:accused = { reverse_opinion = { who = ROOT value = 100 } }
			}
			modifier = {
				factor = 2
				event_target:accused = { is_close_relative = ROOT }
			}
			modifier = {
				factor = 2
				event_target:accused = { is_friend = ROOT }
			}
			modifier = {
				factor = 1.5
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = slothful
			}
			modifier = {
				factor = 1.5
				trait = ruthless
			}
		}
		event_target:accused = {
			opinion = {
				who = ROOT
				modifier = opinion_did_not_prosecute
				months = 36
			}
		}
		tiered_prestige_negative_effect = yes
		if = {
			limit = {
				NOT = { trait = just }
				NOT = { trait = arbitrary }
				NOT = { personality_traits  = 6 }
				age = 14
			}
			random = {
				chance = 25
				add_trait = arbitrary
				hidden_tooltip = {
					character_event = {
						id = 38266 #Notify Arbitrary
					}
				}
			}
		}
		if = {
			limit = { trait = just }
			random = {
				chance = 25
				remove_trait = just
				# hidden_tooltip = {
					# character_event = {
						# id = 38266 #Notify Arbitrary
					# }
				# }
			}
		}
	}
	after = {
		event_target:accused = {
			clr_character_flag = charge_trespass
			clr_character_flag = charge_theft
			clr_character_flag = charge_assault
			clr_character_flag = charge_arson
			clr_character_flag = charge_blasphemy
			clr_character_flag = charge_rape
		}
	}
}
#Storm hit town requests tax relief
character_event = {
	id = feast.151

	desc = {
		text = EVTDESCfeast.151
		trigger = {
			event_target:tax_relief_town = { location = { port = yes } }
		}
	}
	desc = {
		text = EVTDESCfeast.151B
		trigger = {
			event_target:tax_relief_town = { location = { port = no } }
		}
	}

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = {
			any_vassal = {
				tier = BARON
				capital_holding = { holding_type = city }
			}
		}
	}

	immediate = {
		hidden_tooltip = {
			event_target:feast_host = {
				random_vassal = {
					limit = {
						tier = BARON
						capital_holding = { holding_type = city }
					}
					preferred_limit = {
						capital_holding = {
							NOT = { base_value_4_trigger = yes }
						}
					}
					capital_holding = { save_event_target_as = tax_relief_town }
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.151 #Grant relief
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
		}
		scaled_wealth = { value = -0.15 min = -10 max = -60 }
		prestige = 50
		event_target:tax_relief_town = {
			add_holding_modifier = { name = storm_hit_a duration = 1825 }
		}
	}
	option = {
		name = EVTOPTBfeast.151 #No
		trigger = { diplomacy < 12 }
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		event_target:tax_relief_town = {
			add_holding_modifier = { name = storm_hit_b duration = 1825 }
			location = {
				add_province_modifier = { name = high_taxes duration = 1825 }
			}
		}
	}
	option = {
		name = EVTOPTCfeast.151 #Use diplomacy
		trigger = { diplomacy = 12 }
		tooltip_info = diplomacy
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		event_target:tax_relief_town = {
			add_holding_modifier = { name = storm_hit_b duration = 1825 }
		}
	}
}
#Minor noble violently ousted from lands
character_event = {
	id = feast.152

	desc = {
		text = EVTDESCfeast.152
	}
	desc = {
		text = EVTDESCfeast.152B
	}

	is_triggered_only = yes
	portrait = event_target:feast_152_target

	immediate = {
		event_target:feast_host = {
			capital_scope = {
				create_character = {
					random_traits = yes
					dynasty = actually_culture
					female = random
					culture = THIS
					religion = THIS
				}
				new_character = {
					if = {
						limit = {
							religion = the_seven
							is_female = no
						}
						add_trait = knight
						if = {
							limit = {
								is_ruler = no
								NOT = { has_minor_title = title_prince }
								NOT = { has_minor_title = title_prince_AGOT }
								NOT = { has_minor_title = title_queen_mother }
								NOT = { has_minor_title = title_ruler_consort }
							}
							if = {
								limit = { is_female = no }
								set_special_character_title = title_ser
							}
							if = {
								limit = { is_female = yes }
								set_special_character_title = title_lady
							}
						}
					}
					if = {
						limit = { is_female = no }
						random_list = {
							20 = { }
							40 = { add_trait = poor_warrior }
							40 = { add_trait = trained_warrior }
						}
					}
					save_event_target_as = feast_152_target
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.152 #Send men to seize control
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 1.5
				event_target:feast_152_target = { reverse_opinion = { who = ROOT value = 10 } }
			}
			modifier = {
				factor = 1.5
				event_target:feast_152_target = { reverse_opinion = { who = ROOT value = 25 } }
			}
		}
		scaled_wealth = { value = -0.15 min = -10 max = -60 }
		prestige = 50
		event_target:feast_152_target = {
			wealth = 40
			opinion = { who = ROOT modifier = opinion_very_grateful months = 60 }
		}
	}
	option = {
		name = EVTOPTBfeast.152 #Grant refuge
		ai_chance = {
			factor = 40

			modifier = {
				factor = 1.5
				event_target:feast_152_target = { reverse_opinion = { who = ROOT value = 10 } }
			}
			modifier = {
				factor = 1.5
				event_target:feast_152_target = { reverse_opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.66
				event_target:feast_152_target = { NOT = { reverse_opinion = { who = ROOT value = -10 } } }
			}
			modifier = {
				factor = 0
				event_target:feast_152_target = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
		}
		transfer_scaled_wealth = { from = ROOT to = event_target:feast_152_target value = 0.1 min = 5 max = 20 }
		event_target:feast_152_target = {
			opinion = { who = ROOT modifier = opinion_very_disappointed multiplier = 2 months = 60 }
			move_character = ROOT
		}
	}
	option = {
		name = EVTOPTCfeast.152 #No
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 2
				event_target:feast_152_target = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_152_target = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
		}
		tiered_prestige_negative_effect = yes
		hidden_tooltip = {
			event_target:feast_152_target = {
				death = { death_reason = death_missing }
			}
		}
	}
}
#Temple claims they were wrongly taxed
character_event = {
	id = feast.153
	desc = EVTDESCfeast.153

	is_triggered_only = yes
	portrait = event_target:tax_claim_priest

	trigger = {
		event_target:feast_host = {
			any_vassal = {
				tier = BARON
				is_theocracy = yes
				is_unorganised_religion_trigger = no
			}
		}
	}

	immediate = {
		hidden_tooltip = {
			event_target:feast_host = {
				random_vassal = {
					limit = {
						tier = BARON
						is_theocracy = yes
						is_unorganised_religion_trigger = no
					}
					save_event_target_as = tax_claim_priest
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.153 #Grant redress
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
		}
		transfer_scaled_wealth = { from = ROOT to = event_target:tax_claim_priest value = 0.15 min = 10 max = 60 }
		if = {
			limit = { religion = event_target:tax_claim_priest }
			piety = 50
		}
		event_target:tax_claim_priest = {
			opinion = { who = ROOT modifier = opinion_satisfied multiplier = 2 months = 36 }
		}
	}
	option = {
		name = EVTOPTBfeast.153 #No
		trigger = { diplomacy < 12 }
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		if = {
			limit = { religion = event_target:tax_claim_priest }
			piety = -50
		}
		event_target:tax_claim_priest = {
			opinion = { who = ROOT modifier = opinion_angry multiplier = 2 months = 36 }
		}
	}
	option = {
		name = EVTOPTCfeast.153 #Use diplomacy
		trigger = { diplomacy = 12 }
		tooltip_info = diplomacy
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		event_target:tax_claim_priest = {
			opinion = { who = ROOT modifier = opinion_satisfied months = 36 }
		}
	}
}
#Courtier requests comission to recruit mariners for flagship
character_event = {
	id = feast.154
	desc = EVTDESCfeast.154

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = {
			has_character_modifier = holding_large_feast
			is_ruler = yes
		}
		any_artifact = {
			is_artifact_active = yes
			has_artifact_flag = flagship
		}
	}

	portrait = event_target:flagship_petitioner

	immediate = {
		random_artifact = {
			limit = {
				is_artifact_active = yes
				has_artifact_flag = flagship
			}
			save_event_target_as = my_flagship
		}
		event_target:feast_host = {
			random_courtier_or_vassal = {
				limit = {
					is_adult = yes
					prisoner = no
					is_incapable = no
					NOT = { trait = slave }
					NOT_mythical_creature_trigger = yes
					NOT = { is_inaccessible_trigger = yes }
					ai = yes
					NOT = { character = ROOT }
					OR = {
						martial = 10
						stewardship = 10
						has_minor_title = title_high_admiral
						has_minor_title = title_high_admiral_B
					}
				}
				preferred_limit = {
					OR = {
						has_minor_title = title_high_admiral
						has_minor_title = title_high_admiral_B
					}
				}
				save_event_target_as = flagship_petitioner
			}
		}
	}

	option = {
		name = EVTOPTAfeast.154 #Agree
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 150
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.6 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 3
				trait = diligent
			}
		}
		event_target:feast_host = {
			capital_scope = {
				add_province_modifier = {
					name = mariners_recruited
					duration = 730
				}
			}
		}
		transfer_scaled_wealth = { from = ROOT to = event_target:flagship_petitioner value = 0.1 min = 10 max = 40 }
		scaled_wealth = { value = -0.33 min = -25 max = -125 }
		event_target:flagship_petitioner = {
			opinion = { who = ROOT modifier = opinion_very_grateful months = 36 }
		}
	}
	option = {
		name = EVTOPTBfeast.154 #No
		ai_chance = {
			factor = 50

			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = slothful
			}
		}
		event_target:flagship_petitioner = {
			opinion = { who = ROOT modifier = opinion_disappointed multiplier = 3 months = 36 }
		}
	}
}
#Town error causes loss to ROOT
character_event = {
	id = feast.155
	desc = EVTDESCfeast.155

	is_triggered_only = yes

	trigger = {
		event_target:feast_host = {
			any_vassal = {
				tier = BARON
				capital_holding = { holding_type = city }
			}
		}
	}

	immediate = {
		hidden_tooltip = {
			event_target:feast_host = {
				random_vassal = {
					limit = {
						tier = BARON
						capital_holding = { holding_type = city }
					}
					preferred_limit = {
						capital_holding = {
							NOT = { base_value_4_trigger = yes }
						}
					}
					capital_holding = { save_event_target_as = tax_loss_town }
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.155 #Bear the cost
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
		}
		scaled_wealth = { value = -0.15 min = -10 max = -60 }
		prestige = 50
	}
	option = {
		name = EVTOPTBfeast.155 #Levy extra tax
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		event_target:tax_loss_town = {
			add_holding_modifier = { name = extra_tax_levied duration = 1825 }
			location = {
				add_province_modifier = { name = high_taxes duration = 1825 }
			}
		}
	}
}
#Noble requests access to inherited lands
character_event = {
	id = feast.156
	desc = EVTDESCfeast.156

	is_triggered_only = yes
	portrait = event_target:feast_156_target

	immediate = {
		event_target:feast_host = {
			random_demesne_province = {
				limit = { is_capital = no }
				save_event_target_as = feast_156_province
				create_character = {
					random_traits = yes
					dynasty = actually_culture
					female = random
					culture = THIS
					religion = THIS
				}
				new_character = {
					if = {
						limit = {
							religion = the_seven
							is_female = no
						}
						add_trait = knight
						if = {
							limit = {
								is_ruler = no
								NOT = { has_minor_title = title_prince }
								NOT = { has_minor_title = title_prince_AGOT }
								NOT = { has_minor_title = title_queen_mother }
								NOT = { has_minor_title = title_ruler_consort }
							}
							if = {
								limit = { is_female = no }
								set_special_character_title = title_ser
							}
							if = {
								limit = { is_female = yes }
								set_special_character_title = title_lady
							}
						}
					}
					if = {
						limit = { is_female = no }
						random_list = {
							20 = { }
							40 = { add_trait = poor_warrior }
							40 = { add_trait = trained_warrior }
						}
					}
					save_event_target_as = feast_156_target
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.156 #Grant access
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 1.5
				event_target:feast_156_target = { reverse_opinion = { who = ROOT value = 10 } }
			}
			modifier = {
				factor = 1.5
				event_target:feast_156_target = { reverse_opinion = { who = ROOT value = 25 } }
			}
		}
		tiered_prestige_negative_effect = yes
		event_target:feast_156_target = {
			opinion = { who = ROOT modifier = opinion_very_grateful months = 60 }
		}
	}
	option = {
		name = EVTOPTBfeast.156 #No
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				trait = honorable
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 2
				event_target:feast_156_target = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_156_target = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
		}
		piety = -25
		hidden_tooltip = {
			event_target:feast_156_target = {
				death = { death_reason = death_missing }
			}
		}
	}
}
#Foreign Port Requests customs exemption
character_event = {
	id = feast.157
	desc = EVTDESCfeast.157

	is_triggered_only = yes
	portrait = event_target:feast_157_owner

	trigger = {
		event_target:feast_host = {
			capital_scope = {
				port = yes
				any_playable_ruler = {
					NOT = { same_realm = ROOT }
					is_nomadic = no
					NOT_mythical_creature_trigger = yes
					NOT = { trait = nightswatch }
					NOT = { trait = wildling }
					NOT = { trait = pirate }
					demesne_size = 1
					capital_scope = {
						port = yes
						NOT = { distance = { where = PREVPREV value = 500 } }
					}
				}
			}
		}
	}

	immediate = {
		event_target:feast_host = {
			capital_scope = {
				random_playable_ruler = {
					limit = {
						NOT = { same_realm = ROOT }
						is_nomadic = no
						NOT_mythical_creature_trigger = yes
						NOT = { trait = nightswatch }
						NOT = { trait = wildling }
						NOT = { trait = pirate }
						demesne_size = 1
						capital_scope = {
							port = yes
							NOT = { distance = { where = PREVPREV value = 500 } }
						}
					}
					capital_scope = { save_event_target_as = feast_157_province }
					top_liege = { save_event_target_as = feast_157_owner }
				}
			}
		}
	}

	option = {
		name = EVTOPTAfeast.157 #Grant relief
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
		}
		event_target:feast_host = {
			capital_scope = {
				add_province_modifier = { name = foreign_customs_relief duration = 1825 }
			}
		}
		event_target:feast_157_owner = {
			opinion = { who = ROOT modifier = opinion_satisfied multiplier = 2 months = 36 }
		}
	}
	option = {
		name = EVTOPTBfeast.157 #No
		trigger = { diplomacy < 12 }
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		prestige = -50
		event_target:feast_157_owner = {
			opinion = { who = ROOT modifier = opinion_angry multiplier = 3 months = 36 }
		}
	}
	option = {
		name = EVTOPTCfeast.157 #Use diplomacy
		trigger = { diplomacy = 12 }
		tooltip_info = diplomacy
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				OR = {
					trait = just
					trait = honorable
				}
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
		}
		event_target:feast_157_owner = {
			opinion = { who = ROOT modifier = opinion_satisfied months = 36 }
		}
	}
}
#Noble requests grants for war service
character_event = {
	id = feast.158
	desc = EVTDESCfeast.158

	is_triggered_only = yes
	portrait = event_target:feast_158_target

	trigger = {
		OR = {
			ai = yes #this is mainly for loc purposes anyway
			any_playable_ruler = {
				OR = {
					reverse_has_truce = ROOT
					ROOT = { reverse_has_truce = PREV }
				}
			}
		}
	}

	immediate = {
		hidden_tooltip = {
			if = {
				limit = { ai = no }
				random_playable_ruler = {
					limit = {
						OR = {
							reverse_has_truce = ROOT
							ROOT = { reverse_has_truce = PREV }
						}
					}
					save_event_target_as = war_target
				}
			}
		}
		capital_scope = {
			create_random_soldier = {
				random_traits = yes
				dynasty = actually_culture
				female = no
				culture = THIS
				religion = THIS
			}
			new_character = {
				if = {
					limit = { religion = the_seven }
					add_trait = knight
					if = {
						limit = {
							is_ruler = no
							NOT = { has_minor_title = title_prince }
							NOT = { has_minor_title = title_prince_AGOT }
							NOT = { has_minor_title = title_queen_mother }
							NOT = { has_minor_title = title_ruler_consort }
						}
						if = {
							limit = { is_female = no }
							set_special_character_title = title_ser
						}
						if = {
							limit = { is_female = yes }
							set_special_character_title = title_lady
						}
					}
				}
				if = {
					limit = { is_female = no }
					random_list = {
						20 = { add_trait = skilled_warrior }
						20 = { add_trait = poor_warrior }
						60 = { add_trait = trained_warrior }
					}
				}
				save_event_target_as = feast_158_target
			}
		}
	}

	option = {
		name = EVTOPTAfeast.158 #Grant redress
		ai_chance = {
			factor = 40
			modifier = {
				factor = 0.5
				OR = {
					AND = {
						yearly_income = 250
						wealth < 100
					}
					AND = {
						NOT = { yearly_income = 250 }
						NOT = { scaled_wealth = 0.4 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 1.5
				event_target:feast_158_target = { reverse_opinion = { who = ROOT value = 10 } }
			}
			modifier = {
				factor = 1.5
				event_target:feast_158_target = { reverse_opinion = { who = ROOT value = 25 } }
			}
		}
		transfer_scaled_wealth = { from = ROOT to = event_target:feast_158_target value = 0.15 min = 10 max = 60 }
		event_target:feast_158_target = {
			opinion = { who = ROOT modifier = opinion_very_grateful months = 60 }
		}
	}
	option = {
		name = EVTOPTBfeast.158 #No
		ai_chance = {
			factor = 60
			modifier = {
				factor = 0
				trait = honorable
				NOT = { trait = greedy }
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 2
				event_target:feast_158_target = { NOT = { reverse_opinion = { who = ROOT value = -25 } } }
			}
			modifier = {
				factor = 2
				event_target:feast_158_target = { NOT = { reverse_opinion = { who = ROOT value = -50 } } }
			}
		}
		piety = -25
		hidden_tooltip = {
			event_target:feast_158_target = {
				death = { death_reason = death_missing }
			}
		}
	}
}
###########################################
# Flag management                         #
###########################################

# Safety catch - clears character flags and modifiers
character_event = {
	id = 72999

	hide_window = yes

	is_triggered_only = yes

	trigger = { has_character_modifier = holding_large_feast }

	immediate = {
		remove_character_modifier = holding_large_feast
		clr_character_flag = do_not_disturb
		clr_character_flag = host_feast_started
		clr_character_flag = feast_jongleur
		clr_character_flag = feast_musicians
		clr_character_flag = feast_minstrel
		clr_character_flag = feast_fireeaters
		clr_character_flag = feast_dancers
		clr_character_flag = feast_acrobats
		clr_character_flag = feast_conjurer
		clr_character_flag = lavishly_food
		clr_character_flag = medium_food
		clr_character_flag = low_food
		clr_character_flag = feast_duel
		clr_character_flag = coming_to_feast
		clr_character_flag = guest_feast_started
		clr_character_flag = prince_deflower_maids
		clr_character_flag = feast_exoctic_dancers
		clr_character_flag = made_friend_at_feast
		clr_character_flag = feast_rains_of_castamere
		any_vassal = {
			limit = {
				has_character_flag = guest_feast_started
			}
			clr_character_flag = coming_to_feast
			clr_character_flag = guest_feast_started
			clr_character_flag = made_friend_at_feast
		}
	}

	option = {
		name = OK
	}
}