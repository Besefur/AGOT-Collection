################################################
#
# Events for Raids
#
namespace = raid_events
#
#################################################
#
# Written by knuckey
#
#MAIN EVENTS -Triggered from raid_decisions
# 1- Select Reaving Destination
# 2- Invitation to Reaving
# 3- Start of reaving
# 4- End of reaving
# 5- Inform reaver End of reaving
# 6- Inform reaving cancelled
# 8- Citadel reaving outcome event

#REAVING EVENTS
# 7-16- Village Raid
# 17-18- Capture Saltwife
# 20-23- Duel with Master at Arms
# 24-27- Wounded in Battle
# 28- Maimed in Battle
# 29-31- Died in Battle
# 32-40- Attack a Ship
# 41-42- Find a Valyrian Sword
# 43-44- Befriend fellow reaver
# 45-46- Fellow reaver becomes rival
#47-59- Finger Dance!
#60-64- Kraken Attack!
#65- On map Village Raid
#66- On map siege won- take salt wife
#67- On map siege won- take sword
#90-97 -Inform Liege raid outcomes
#98	-Pillaging lands of the King during a mega war earns his wroth

# Select Reaving Destination
character_event = {
	id = raid_events.1
	desc = "EVTDESCraid_events.1"
	picture = "GFX_evt_map"

	is_triggered_only = yes

	immediate = {
		clr_character_flag = finger_dance
		clr_character_flag = reaving_duel
		if = {
			limit = { trait = poor_warrior }
			change_variable = { which = "reaving_party_skill" value = 1 }
		}
		if = {
			limit = { trait = trained_warrior }
			change_variable = { which = "reaving_party_skill" value = 2 }
		}
		if = {
			limit = { trait = skilled_warrior }
			change_variable = { which = "reaving_party_skill" value = 3 }
		}
		if = {
			limit = { trait = master_warrior }
			change_variable = { which = "reaving_party_skill" value = 4 }
		}
	}

	option = {
		name = "EVTOPTAraid_events.1" #Disputed Lands/Stepstones
		set_character_flag = disputed_lands_raid
	}
	option = {
		name = "EVTOPTBraid_events.1" #Northern Essos
		set_character_flag = north_essos_raid
	}
	option = {
		name = "EVTOPTCraid_events.1" #Summer Sea
		set_character_flag = summer_sea_raid
	}
	option = {
		name = "EVTOPTDraid_events.1" #Slaver's Bay
		set_character_flag = slavers_bay_raid
	}
}

# Invitation
letter_event = {
	id = raid_events.2
	picture = "GFX_evt_reaving3"

	desc = {
		text = "EVTDESCraid_events.2"
		trigger = { FROM = { has_character_flag = disputed_lands_raid } }
	}
	desc = {
		text = "EVTDESCraid_events.2B"
		trigger = { FROM = { has_character_flag = north_essos_raid } }
	}
	desc = {
		text = "EVTDESCraid_events.2C"
		trigger = { FROM = { has_character_flag = summer_sea_raid } }
	}
	desc = {
		text = "EVTDESCraid_events.2D"
		trigger = { FROM = { has_character_flag = slavers_bay_raid } }
	}

	min_age = 14
	only_capable = yes
	prisoner = no
	religion_group = drowned_god_group
	culture_group = iron_isles_culture

	is_triggered_only = yes

	trigger = {
		NOT = { has_severe_disability_trigger = yes }
		NOT = { trait = imbecile }
		NOT = { trait = kingsguard }
		NOT = { trait = maester }
		NOT = { trait = archmaester }
		NOT = { trait = nightswatch }
		NOT = { trait = on_reaving }
		is_ill = no
		has_epidemic = no
		NOT = { has_character_flag = no_reavings_ever }
	}

	immediate = {
		clr_character_flag = finger_dance
		clr_character_flag = reaving_duel
	}

	option = {
		name = "EVTOPTAraid_events.2" #Yes
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0.2
				OR = {
					NOT = { has_character_flag = ironborn_reaving }
					had_character_flag = { flag = ironborn_reaving days = 1825 }
				}
			}
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 1.5
				trait = trained_warrior
			}
			modifier = {
				factor = 3
				trait = skilled_warrior
			}
			modifier = {
				factor = 5
				trait = master_warrior
			}
			modifier = {
				factor = 1.5
				trait = duelist
			}
			modifier = {
				factor = 1.5
				is_strong_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_agile_trigger = yes
			}
			modifier = {
				factor = 1.2
				trait = diligent
			}
			modifier = {
				factor = 1.2
				trait = wroth
			}
			modifier = {
				factor = 1.2
				trait = gregarious
			}
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  20 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  40 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  60 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  80 }
			}
		}
		if = {
			limit = { FROM = { has_character_flag = disputed_lands_raid } }
			custom_tooltip = { text = TOOLTIPREAVINGDISPUTEDLANDS }
			set_character_flag = disputed_lands_raid
		}
		if = {
			limit = { FROM = { has_character_flag = north_essos_raid } }
			custom_tooltip = { text = TOOLTIPREAVINGNORTHESSOS }
			set_character_flag = north_essos_raid
		}
		if = {
			limit = { FROM = { has_character_flag = summer_sea_raid } }
			custom_tooltip = { text = TOOLTIPREAVINGSUMMERSEA }
			set_character_flag = summer_sea_raid
		}
		if = {
			limit = { FROM = { has_character_flag = slavers_bay_raid } }
			custom_tooltip = { text = TOOLTIPREAVINGSLAVERSBAY }
			set_character_flag = slavers_bay_raid
		}
		prestige = 20
		piety = 20
		clr_character_flag = ironborn_reaving
		set_character_flag = ironborn_reaving
		hidden_tooltip = {
			add_trait = on_reaving
			set_character_flag = do_not_disturb
			opinion = {
				modifier = opinion_on_reaving
				who = FROM
				months = 14
			}
			reverse_opinion = {
				modifier = opinion_on_reaving
				who = FROM
				months = 14
			}
			character_event = { id = raid_events.999 days = 450 } #safety catch
			if = {
				limit = { trait = poor_warrior }
				FROM = { change_variable = { which = "reaving_party_skill" value = 1 } }
			}
			if = {
				limit = { trait = trained_warrior }
				FROM = { change_variable = { which = "reaving_party_skill" value = 2 } }
			}
			if = {
				limit = { trait = skilled_warrior }
				FROM = { change_variable = { which = "reaving_party_skill" value = 3 } }
			}
			if = {
				limit = { trait = master_warrior }
				FROM = { change_variable = { which = "reaving_party_skill" value = 4 } }
			}
		}
	}
	option = {
		name = "EVTOPTBraid_events.2" #no
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				age = 35
			}
			modifier = {
				factor = 2
				age = 45
			}
			modifier = {
				factor = 2
				age = 55
			}
			modifier = {
				factor = 2
				age = 65
			}
			modifier = {
				factor = 2
				age = 70
			}
			modifier = {
				factor = 2
				age = 75
			}
			modifier = {
				factor = 4
				NOT = {
					OR = {
						trait = master_warrior
						trait = skilled_warrior
						trait = trained_warrior
						trait = poor_warrior
					}
				}
			}
			modifier = {
				factor = 2
				NOT = {
					OR = {
						trait = master_warrior
						trait = skilled_warrior
						trait = trained_warrior
					}
				}
			}
			modifier = {
				factor = 8
				trait = craven
			}
			modifier = {
				factor = 4
				is_weak_trigger = yes
			}
			modifier = {
				factor = 4
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 2
				trait = shy
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -20 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -40 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -60 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -80 } }
			}
			modifier = {
				factor = 2
				is_short_trigger = yes
			}
		}
		if = {
			limit = {
				NOT = { age = 35 }
				OR = {
					NOT = { has_character_flag = ironborn_reaving }
					had_character_flag = { flag = ironborn_reaving days = 1825 }
				}
			}
			prestige = -20
			piety = -20
		}
	}

	option = {
		name = "EVTOPTCraid_events.2" #no reavings
		ai_chance = { factor = 0 }
		prestige = -20
		piety = -20
		set_character_flag = no_reavings_ever
	}
}

# Start of reaving
character_event = {
	id = raid_events.3
	desc = "EVTDESCraid_events.3"
	picture = "GFX_evt_reaving3"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.3"
		trigger = {
			OR = {
				war = no
				NOT = { demesne_size = 1 }
			}
			OR = {
				liege = { war = no }
				demesne_size = 1
			}
		}
		add_trait = on_reaving
		hidden_tooltip = {
			set_character_flag = reaving_begins
			set_variable = { which = number_of_reaving_events value = 1 }
			character_event = { id = raid_events.4 days = 365 } #end raid
			character_event = { id = raid_events.32 days = 40 random = 15 } #trigger fleet attack
			character_event = { id = raid_events.699 days = 80 random = 15 } #random event generator
			liege = {
				if = {
					limit = {
						ai = no
						NOT = { character = ROOT }
						NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving } }
					}
					character_event = { id = raid_events.399 }
				}
			}
			if = { #Take flagship?
				limit = {
					is_ruler = yes
					any_artifact = {
						has_artifact_flag = flagship
						is_artifact_equipped = yes
					}
				}
				character_event = { id = raid_events.160 }
			}
		}
		any_opinion_modifier_target = {
			limit = {
				trait = on_reaving
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			set_character_flag = reaving_begins_reaver
			add_trait = on_reaving
			tooltip = { show_portrait = yes }
		}
	}
	option = {
		name = "EVTOPTBraid_events.3"
		trigger = {
			OR = {
				AND = {
					war = yes
					demesne_size = 1
				}
				AND = {
					liege = { war = yes }
					NOT = { demesne_size = 1 }
				}
			}
		}
		prestige = -20
		piety = -20
		wealth = 40
		hidden_tooltip = {
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				character_event = { id = raid_events.6 }
			}
		}
		clr_character_flag = do_not_disturb
	}
}
character_event = { #inform liege
	id = raid_events.399
	picture = "GFX_evt_reaving3"

	desc = {
		text = "EVTDESCraid_events.399"
		trigger = { FROM = { has_character_flag = disputed_lands_raid } }
	}
	desc = {
		text = "EVTDESCraid_events.399B"
		trigger = { FROM = { has_character_flag = north_essos_raid } }
	}
	desc = {
		text = "EVTDESCraid_events.399C"
		trigger = { FROM = { has_character_flag = summer_sea_raid } }
	}
	desc = {
		text = "EVTDESCraid_events.399D"
		trigger = { FROM = { has_character_flag = slavers_bay_raid } }
	}

	is_triggered_only = yes

	option = {
		name = {
			text = "EVTOPTAraid_events.399"
			trigger = {
				OR = {
					religion_group = drowned_god_group
					culture_group = iron_isles_culture
				}
			}
		}
		name = {
			text = "EVTOPTBraid_events.399"
			trigger = {
				NOT = { religion_group = drowned_god_group }
				NOT = { culture_group = iron_isles_culture }
			}
		}
		FROM = {
			tooltip = { add_trait = on_reaving }
			tooltip = { show_portrait = yes }
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
				}
				tooltip = { add_trait = on_reaving }
				tooltip = { show_portrait = yes }
			}
		}
	}
}
# End of reaving
character_event = {
	id = raid_events.4
	desc = "EVTDESCraid_events.4"
	picture = "GFX_evt_reaving2"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.4"
		if = {
			limit = { trait = on_reaving }
			remove_trait = on_reaving
			if = { #add to seclusion if neccessary
				limit = {
					is_ruler = no
					prisoner = no
					liege = { has_character_modifier = in_seclusion }
				}
				add_character_modifier = {
					name = in_seclusion
					duration = -1
				}
			}
		}
		clr_character_flag = reaving_begins
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
		clr_character_flag = reaving_village_raid
		clr_character_flag = reaving_ship_attack
		clr_character_flag = reaving_duel
		clr_character_flag = finger_dance
		clr_character_flag = flagship_on_reaving
		clr_character_flag = had_reaving_village_raid
		clr_character_flag = had_reaving_duel
		clr_character_flag = had_reaving_ship_attack
		hidden_tooltip = { set_variable = { which = number_of_reaving_events value = 0 } }
		custom_tooltip = {
			text = TOOLTIPraid_events.4RESPECT
			hidden_tooltip = {
				if = {
					limit = { demesne_size = 1 }
					any_vassal = {
						limit = {
							NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving } }
							religion_group = drowned_god_group
							culture_group = iron_isles_culture
							is_female = no
							age = 10
						}
						opinion = {
							modifier = opinion_went_reaving
							who = ROOT
							years = 5
						}
					}
					any_courtier = {
						limit = {
							NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving } }
							religion_group = drowned_god_group
							culture_group = iron_isles_culture
							is_female = no
							age = 10
						}
						opinion = {
							modifier = opinion_went_reaving
							who = ROOT
							years = 5
						}
					}
				}
				if = {
					limit = { NOT = { demesne_size = 1 } }
					liege = {
						if = {
							limit = {
								NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving } }
								religion_group = drowned_god_group
								culture_group = iron_isles_culture
								is_female = no
								age = 10
							}
							opinion = {
								modifier = opinion_went_reaving
								who = ROOT
								years = 5
							}
						}
						any_courtier = {
							limit = {
								NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving } }
								religion_group = drowned_god_group
								culture_group = iron_isles_culture
								is_female = no
								age = 10
							}
							opinion = {
								modifier = opinion_went_reaving
								who = ROOT
								years = 5
							}
						}
					}
				}
			}
		}
		any_opinion_modifier_target = {
			limit = {
				trait = on_reaving
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			hidden_tooltip = { character_event = { id = raid_events.5 } }
		}
	}

}
# Inform reaver End of reaving
character_event = {
	id = raid_events.5
	desc = "EVTDESCraid_events.5"
	picture = "GFX_evt_reaving2"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.4"
		if = {
			limit = { trait = on_reaving }
			remove_trait = on_reaving
			if = { #add to seclusion if neccessary
				limit = {
					is_ruler = no
					prisoner = no
					liege = { has_character_modifier = in_seclusion }
				}
				add_character_modifier = {
					name = in_seclusion
					duration = -1
				}
			}
		}
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
		clr_character_flag = reaving_duel
		clr_character_flag = reaving_begins_reaver
		clr_character_flag = finger_dance
		hidden_tooltip = {
			remove_opinion = {
				modifier = opinion_on_reaving
				who = FROM
			}
			reverse_remove_opinion = {
				modifier = opinion_on_reaving
				who = FROM
			}
		}
		FROM = {
			opinion = {
				modifier = opinion_went_reaving
				who = ROOT
				years = 5
			}
		}
	}
}
# Inform reaving cancelled
character_event = {
	id = raid_events.6
	desc = "EVTDESCraid_events.6"
	picture = "GFX_evt_reaving2"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.6"
		remove_trait = on_reaving
		clr_character_flag = do_not_disturb
		clr_character_flag = reaving_begins_reaver
		prestige = -20
		piety = -20
		if = { #add to seclusion if neccessary
			limit = {
				is_ruler = no
				prisoner = no
				liege = { has_character_modifier = in_seclusion }
			}
			add_character_modifier = {
				name = in_seclusion
				duration = -1
			}
		}
		hidden_tooltip = {
			remove_opinion = {
				modifier = opinion_on_reaving
				who = FROM
			}
			reverse_remove_opinion = {
				modifier = opinion_on_reaving
				who = FROM
			}
		}
	}
}
###Random event generator###
character_event = {
	id = raid_events.699

	is_triggered_only = yes

	hide_window = yes

	has_character_flag = reaving_begins

	trigger = {
		trait = on_reaving
	}

	immediate = {
		character_event = { id = raid_events.699 days = 35 random = 10 } #re-iterate
		if = {
			limit = {
				OR = {
					is_incapable = yes
					prisoner = yes
				}
			}
			break = yes
		}
		#main raid events
		random_list = {
			200 = {
				#minimum of 4 events
				modifier = {
					factor = 0
					had_character_flag = { flag = reaving_begins days = 150 }
					NOT = { check_variable = { which = number_of_reaving_events value = 2 } }
				}
				modifier = {
					factor = 0
					had_character_flag = { flag = reaving_begins days = 300 }
					NOT = { check_variable = { which = number_of_reaving_events value = 4 } }
				}
			}
			40 = { #Village Raid
				modifier = {
					factor = 2
					NOT = { has_character_flag = had_reaving_village_raid }
				}
				set_character_flag = had_reaving_village_raid
				change_variable = { which = number_of_reaving_events value = 1 }
				character_event = { id = raid_events.7 }
			}
			40 = { #Duel!
				modifier = {
					factor = 2
					NOT = { has_character_flag = had_reaving_duel }
				}
				set_character_flag = had_reaving_duel
				change_variable = { which = number_of_reaving_events value = 1 }
				character_event = { id = raid_events.20 }
			}
			40 = { #Attack a ship
				modifier = {
					factor = 2
					NOT = { has_character_flag = had_reaving_ship_attack }
				}
				set_character_flag = had_reaving_ship_attack
				change_variable = { which = number_of_reaving_events value = 1 }
				character_event = { id = raid_events.32 }
			}
			1 = { #Kraken Attacks!
				modifier = {
					factor = 0.1
				}
				modifier = {
					factor = 10
					magic_returned_trigger = yes
				}
				character_event = { id = raid_events.60 }
			}
		}
		random = { #duel for follower
			chance = 25
			random_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				character_event = { id = raid_events.20 days = 10 random = 5 }
			}
		}
		#flavour events
		random_list = {
			50 = {
			}
			5 = { #Befriending
				modifier = {
					factor = 2
					trait = gregarious
				}
				modifier = {
					factor = 0.5
					trait = shy
				}
				character_event = { id = raid_events.43 days = 12 random = 6 }
			}
			5 = { #Rival
				modifier = {
					factor = 0.5
					trait = patient
				}
				modifier = {
					factor = 2
					trait = wroth
				}
				character_event = { id = raid_events.45 days = 12 random = 6 }
			}
			3 = { #Finger Dance
				trigger = {
					NOT = { trait = wounded }
					NOT = { is_maimed_trigger = yes }
				}
				modifier = {
					factor = 1.5
					OR = {
						trait = drunkard
						trait = impaler
						trait = duelist
						has_character_flag = fingerdance_expert
					}
				}
				modifier = {
					factor = 1.25
					OR = {
						trait = brave
						trait = arbitrary
						trait = wroth
					}
				}
				modifier = {
					factor = 1.25
					trait = proud
				}
				modifier = {
					factor = 1.25
					NOT = { trait = craven }
					has_character_flag = fingerdance_refused   #Other Ironborn calling him a chicken and egging him on
				}
				modifier = {
					factor = 0.5
					trait = craven
				}
				character_event = { id = raid_events.47 days = 12 random = 6 }
			}
		}
		#flavour for followers
		random = { #Befriending
			chance = 10
			random_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					NOT = { trait = shy }
				}
				character_event = { id = raid_events.43 days = 10 random = 5 }
			}
		}
		random = { #Rival
			chance = 10
			random_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					NOT = { trait = shy }
				}
				character_event = { id = raid_events.45 days = 10 random = 5 }
			}
		}
		random = { #Finger Dance
			chance = 5
			random_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					NOT = { trait = craven }
					NOT = { trait = wounded }
					NOT = { is_maimed_trigger = yes }
				}
				character_event = { id = raid_events.47 days = 10 random = 5 }
			}
		}
	}

	option = {
		name = OK
	}
}
###Village Raid###
character_event = {
	id = raid_events.7
	desc = "EVTDESCraid_events.7"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	immediate = { set_character_flag = reaving_village_raid }

	option = {
		name = "EVTOPTAraid_events.7"
		hidden_tooltip = { c_the_citadel = { holder_scope = { character_event = { id = raid_events.8 } } } } #citadel determines success
	}

}
#Citadel determines a reaving event's success
character_event = {
	id = raid_events.8
	desc = "Reaving Outcome Engine"
	picture = "GFX_evt_feast"

	is_triggered_only = yes

	option = {
		name = "Great Success"
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				FROM = { NOT = { trait = on_reaving } } #On Map
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 10 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 12 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 14 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 16 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 18 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 20 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 22 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 24 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 26 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 28 }
			}
			modifier = {
				factor = 1.6
				FROM = {
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						martial = 12
					}
				}
			}
			modifier = {
				factor = 1.6
				FROM = {
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						martial = 16
					}
				}
			}
			modifier = {
				factor = 1.6
				FROM = {
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						martial = 20
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = { trait = brave }
			}
			modifier = {
				factor = 1.2
				FROM = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROM = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 1.3
				FROM = { trait = master_warrior }
			}
			modifier = {
				factor = 1.2
				FROM = { trait = skilled_warrior }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 10 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 13 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 16 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 18 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 20 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 22 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 24 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 26 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 28 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 30 } }
			}
		}
		FROM = {
			if = {
				limit = { has_character_flag = reaving_village_raid }
				character_event = { id = raid_events.9 days = 3 }
			}
			if = {
				limit = { has_character_flag = reaving_ship_attack }
				character_event = { id = raid_events.33 days = 3 }
			}
		}
	}
	option = {
		name = "Mild Success"
		ai_chance = {
			factor = 70
			modifier = {
				factor = 2
				FROM = { NOT = { trait = on_reaving } } #On Map
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 10 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 12 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 14 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 16 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 18 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 20 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 22 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 24 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 26 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial = 28 }
			}
			modifier = {
				factor = 1.6
				FROM = {
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						martial = 12
					}
				}
			}
			modifier = {
				factor = 1.6
				FROM = {
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						martial = 16
					}
				}
			}
			modifier = {
				factor = 1.6
				FROM = {
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						martial = 20
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = { trait = brave }
			}
			modifier = {
				factor = 1.2
				FROM = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROM = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 1.3
				FROM = { trait = master_warrior }
			}
			modifier = {
				factor = 1.2
				FROM = { trait = skilled_warrior }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 10 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 13 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 16 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 18 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 20 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 22 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 24 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 26 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 28 } }
			}
			modifier = {
				factor = 1.25
				FROM = { check_variable = { which = "reaving_party_skill" value = 30 } }
			}
		}
		FROM = {
			if = {
				limit = { has_character_flag = reaving_village_raid }
				character_event = { id = raid_events.10 days = 3 }
			}
			if = {
				limit = { has_character_flag = reaving_ship_attack }
				character_event = { id = raid_events.34 days = 3 }
			}
		}
	}
	option = {
		name = "Mild Failiure"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.35
				FROM = { martial < 8 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial < 6 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial < 4 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial < 2 }
			}
			modifier = {
				factor = 1.2
				FROM = { trait = craven }
			}
			modifier = {
				factor = 1.2
				FROM = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROM = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 1.3
				FROM = {
					NOT = {
						OR = {
							trait = master_warrior
							trait = skilled_warrior
							trait = trained_warrior
							trait = poor_warrior
						}
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = { trait = poor_warrior }
			}
			modifier = {
				factor = 1.2
				FROM = { NOT = { check_variable = { which = "reaving_party_skill" value = 6 } } }
			}
			modifier = {
				factor = 1.2
				FROM = { NOT = { check_variable = { which = "reaving_party_skill" value = 3 } } }
			}
			modifier = {
				factor = 1.2
				FROM = { NOT = { check_variable = { which = "reaving_party_skill" value = 1 } } }
			}
		}
		FROM = {
			if = {
				limit = { has_character_flag = reaving_village_raid }
				character_event = { id = raid_events.11 days = 3 }
			}
			if = {
				limit = { has_character_flag = reaving_ship_attack }
				character_event = { id = raid_events.35 days = 3 }
			}
		}
	}
	option = {
		name = "Crushing defeat"
		ai_chance = {
			factor = 20
			modifier = {
				factor = 1.35
				FROM = { martial < 8 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial < 6 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial < 4 }
			}
			modifier = {
				factor = 1.35
				FROM = { martial < 2 }
			}
			modifier = {
				factor = 1.2
				FROM = { trait = craven }
			}
			modifier = {
				factor = 1.2
				FROM = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 1.2
				FROM = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 1.3
				FROM = {
					NOT = {
						OR = {
							trait = master_warrior
							trait = skilled_warrior
							trait = trained_warrior
							trait = poor_warrior
						}
					}
				}
			}
			modifier = {
				factor = 1.2
				FROM = { trait = poor_warrior }
			}
			modifier = {
				factor = 1.2
				FROM = { NOT = { check_variable = { which = "reaving_party_skill" value = 6 } } }
			}
			modifier = {
				factor = 1.2
				FROM = { NOT = { check_variable = { which = "reaving_party_skill" value = 3 } } }
			}
			modifier = {
				factor = 1.2
				FROM = { NOT = { check_variable = { which = "reaving_party_skill" value = 1 } } }
			}
		}
		FROM = {
			if = {
				limit = { has_character_flag = reaving_village_raid }
				character_event = { id = raid_events.12 days = 3 }
			}
			if = {
				limit = { has_character_flag = reaving_ship_attack }
				character_event = { id = raid_events.36 days = 3 }
			}
		}
	}
}
#Great Success
character_event = {
	id = raid_events.9
	desc = "EVTDESCraid_events.9"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	show_from_from = yes

	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { has_dlc = "The Old Gods" }
					trait = viking
				}
				has_nickname = no
			}
			random_list = {
				1 = { set_character_flag = nick_ironreaver }
				1 = { set_character_flag = nick_the_red_reaver }
				1 = { set_character_flag = nick_the_black_reaver }
				1 = { set_character_flag = nick_ironfist }
				1 = { set_character_flag = nick_ironsword }
				1 = { set_character_flag = nick_ironshield }
				1 = { set_character_flag = nick_the_raider }
				1 = { set_character_flag = nick_ironraider }
				1 = { set_character_flag = nick_ironheart }
				1 = { set_character_flag = nick_butcher }
				1 = { set_character_flag = nick_ironhand }
				1 = { set_character_flag = nick_hardhand }
				1 = { set_character_flag = nick_the_strong }
				1 = { set_character_flag = nick_the_bold }
				1 = { set_character_flag = nick_the_warrior }
				1 = { set_character_flag = nick_the_iron_storm }
				350 = {  }
			}
		}
		if = {
			limit = {
				has_dlc = "The Old Gods"
				NOT = { trait = viking }
			}
			random_list = {
				1 = {  }
				14 = { character_event = { id = TGF.3320 days = 1 } }
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.9"
		clr_character_flag = reaving_village_raid
		prestige = 40
		piety = 20
		wealth = 40
		if = {
			limit = { has_character_flag = nick_ironreaver }
			give_nickname = nick_ironreaver
			clr_character_flag = nick_ironreaver
		}
		if = {
			limit = { has_character_flag = nick_the_red_reaver }
			give_nickname = nick_the_red_reaver
			clr_character_flag = nick_the_red_reaver
		}
		if = {
			limit = { has_character_flag = nick_the_black_reaver }
			give_nickname = nick_the_black_reaver
			clr_character_flag = nick_the_black_reaver
		}
		if = {
			limit = { has_character_flag = nick_ironfist }
			give_nickname = nick_ironfist
			clr_character_flag = nick_ironfist
		}
		if = {
			limit = { has_character_flag = nick_ironsword }
			give_nickname = nick_ironsword
			clr_character_flag = nick_ironsword
		}
		if = {
			limit = { has_character_flag = nick_ironshield }
			give_nickname = nick_ironshield
			clr_character_flag = nick_ironshield
		}
		if = {
			limit = { has_character_flag = nick_the_raider }
			give_nickname = nick_the_raider
			clr_character_flag = nick_the_raider
		}
		if = {
			limit = { has_character_flag = nick_ironraider }
			give_nickname = nick_ironraider
			clr_character_flag = nick_ironraider
		}
		if = {
			limit = { has_character_flag = nick_ironheart }
			give_nickname = nick_ironheart
			clr_character_flag = nick_ironheart
		}
		if = {
			limit = { has_character_flag = nick_butcher }
			give_nickname = nick_butcher
			clr_character_flag = nick_butcher
		}
		if = {
			limit = { has_character_flag = nick_ironhand }
			give_nickname = nick_ironhand
			clr_character_flag = nick_ironhand
		}
		if = {
			limit = { has_character_flag = nick_hardhand }
			give_nickname = nick_hardhand
			clr_character_flag = nick_hardhand
		}
		if = {
			limit = { has_character_flag = nick_the_strong }
			give_nickname = nick_the_strong
			clr_character_flag = nick_the_strong
		}
		if = {
			limit = { has_character_flag = nick_the_bold }
			give_nickname = nick_the_bold
			clr_character_flag = nick_the_bold
		}
		if = {
			limit = { has_character_flag = nick_the_warrior }
			give_nickname = nick_the_warrior
			clr_character_flag = nick_the_warrior
		}
		if = {
			limit = { has_character_flag = nick_the_iron_storm }
			give_nickname = nick_the_iron_storm
			clr_character_flag = nick_the_iron_storm
		}
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 16
					character_event = { id = raid_events.17 } #captured Salt wife
				}
				random = {
					chance = 1
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = { #0.25% chance
					chance = 25
					random = {
						chance = 1
						character_event = { id = raid_events.41 } #finds valyrian steel blade
					}
				}
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_sucessful_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.13  days = 1 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = on_reaving }
				NOT = { liege = { character = ROOT } }
				is_ruler = no
				NOT = { is_primary_war_attacker = yes }
			}
			liege = { character_event = { id = raid_events.90 } } #Inform liege
		}
	}
}
#Mild Success
character_event = {
	id = raid_events.10
	desc = "EVTDESCraid_events.10"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.10"
		clr_character_flag = reaving_village_raid
		prestige = 20
		piety = 10
		wealth = 20
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 8
					character_event = { id = raid_events.17 } #captured Salt wife
				}
				random = {
					chance = 1
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
					set_character_flag = reaving_injury
				}
				if = {
					limit = { NOT = { has_character_flag = reaving_injury } }
					random = {
						chance = 2
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						character_event = { id = raid_events.24 } #wounded
					}
				}
				clr_character_flag = reaving_injury
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_sucessful_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.14  days = 1 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = on_reaving }
				NOT = { liege = { character = ROOT } }
				is_ruler = no
				NOT = { is_primary_war_attacker = yes }
			}
			liege = { character_event = { id = raid_events.91 } } #Inform liege
		}
	}
}
#Mild Failiure
character_event = {
	id = raid_events.11
	desc = "EVTDESCraid_events.11"
	picture = "GFX_evt_reaving_lose_raid"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.11"
		clr_character_flag = reaving_village_raid
		prestige = -20
		piety = -10
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 1
					character_event = { id = raid_events.29 } #death
					set_character_flag = reaving_injury
				}
				if = {
					limit = { NOT = { has_character_flag = reaving_injury } }
					random = {
						chance = 2
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						character_event = { id = raid_events.28 } #maimed
						set_character_flag = reaving_injury
					}
				}
				if = {
					limit = { NOT = { has_character_flag = reaving_injury } }
					random = {
						chance = 3
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						character_event = { id = raid_events.24 } #wounded
					}
				}
				clr_character_flag = reaving_injury
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_failed_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.15 days = 1 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = on_reaving }
				NOT = { liege = { character = ROOT } }
				is_ruler = no
				NOT = { is_primary_war_attacker = yes }
			}
			liege = { character_event = { id = raid_events.92 } } #Inform liege
		}
	}
}
#Crushing defeat
character_event = {
	id = raid_events.12
	desc = "EVTDESCraid_events.12"
	picture = "GFX_evt_reaving_lose_raid"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.12"
		clr_character_flag = reaving_village_raid
		prestige = -40
		piety = -20
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 2
					character_event = { id = raid_events.29 } #death
					set_character_flag = reaving_injury
				}
				if = {
					limit = { NOT = { has_character_flag = reaving_injury } }
					random = {
						chance = 3
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						character_event = { id = raid_events.28 } #maimed
						set_character_flag = reaving_injury
					}
				}
				if = {
					limit = { NOT = { has_character_flag = reaving_injury } }
					random = {
						chance = 6
						modifier = {
							factor = 0
							is_maimed_trigger = yes
						}
						character_event = { id = raid_events.24 } #wounded
					}
				}
				clr_character_flag = reaving_injury
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_failed_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.16 days = 1 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = on_reaving }
				is_ruler = no
				NOT = { liege = { character = ROOT } }
				NOT = { is_primary_war_attacker = yes }
			}
			liege = { character_event = { id = raid_events.93 } } #Inform liege
		}
	}
}
# Inform reaving great success
character_event = {
	id = raid_events.13
	desc = "EVTDESCraid_events.13"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { has_dlc = "The Old Gods" }
					trait = viking
				}
				has_nickname = no
			}
			random_list = {
				1 = { set_character_flag = nick_ironreaver }
				1 = { set_character_flag = nick_the_red_reaver }
				1 = { set_character_flag = nick_the_black_reaver }
				1 = { set_character_flag = nick_ironfist }
				1 = { set_character_flag = nick_ironsword }
				1 = { set_character_flag = nick_ironshield }
				1 = { set_character_flag = nick_the_raider }
				1 = { set_character_flag = nick_ironraider }
				1 = { set_character_flag = nick_ironheart }
				1 = { set_character_flag = nick_butcher }
				1 = { set_character_flag = nick_ironhand }
				1 = { set_character_flag = nick_hardhand }
				1 = { set_character_flag = nick_the_strong }
				1 = { set_character_flag = nick_the_bold }
				1 = { set_character_flag = nick_the_warrior }
				1 = { set_character_flag = nick_the_iron_storm }
				350 = {  }
			}
		}
		if = {
			limit = {
				has_dlc = "The Old Gods"
				NOT = { trait = viking }
			}
			random_list = {
				1 = {  }
				14 = { character_event = { id = TGF.3320 days = 1 } }
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.9"
		prestige = 30
		piety = 15
		wealth = 15
		if = {
			limit = { has_character_flag = nick_ironreaver }
			give_nickname = nick_ironreaver
			clr_character_flag = nick_ironreaver
		}
		if = {
			limit = { has_character_flag = nick_the_red_reaver }
			give_nickname = nick_the_red_reaver
			clr_character_flag = nick_the_red_reaver
		}
		if = {
			limit = { has_character_flag = nick_the_black_reaver }
			give_nickname = nick_the_black_reaver
			clr_character_flag = nick_the_black_reaver
		}
		if = {
			limit = { has_character_flag = nick_ironfist }
			give_nickname = nick_ironfist
			clr_character_flag = nick_ironfist
		}
		if = {
			limit = { has_character_flag = nick_ironsword }
			give_nickname = nick_ironsword
			clr_character_flag = nick_ironsword
		}
		if = {
			limit = { has_character_flag = nick_ironshield }
			give_nickname = nick_ironshield
			clr_character_flag = nick_ironshield
		}
		if = {
			limit = { has_character_flag = nick_the_raider }
			give_nickname = nick_the_raider
			clr_character_flag = nick_the_raider
		}
		if = {
			limit = { has_character_flag = nick_ironraider }
			give_nickname = nick_ironraider
			clr_character_flag = nick_ironraider
		}
		if = {
			limit = { has_character_flag = nick_ironheart }
			give_nickname = nick_ironheart
			clr_character_flag = nick_ironheart
		}
		if = {
			limit = { has_character_flag = nick_butcher }
			give_nickname = nick_butcher
			clr_character_flag = nick_butcher
		}
		if = {
			limit = { has_character_flag = nick_ironhand }
			give_nickname = nick_ironhand
			clr_character_flag = nick_ironhand
		}
		if = {
			limit = { has_character_flag = nick_hardhand }
			give_nickname = nick_hardhand
			clr_character_flag = nick_hardhand
		}
		if = {
			limit = { has_character_flag = nick_the_strong }
			give_nickname = nick_the_strong
			clr_character_flag = nick_the_strong
		}
		if = {
			limit = { has_character_flag = nick_the_bold }
			give_nickname = nick_the_bold
			clr_character_flag = nick_the_bold
		}
		if = {
			limit = { has_character_flag = nick_the_warrior }
			give_nickname = nick_the_warrior
			clr_character_flag = nick_the_warrior
		}
		if = {
			limit = { has_character_flag = nick_the_iron_storm }
			give_nickname = nick_the_iron_storm
			clr_character_flag = nick_the_iron_storm
		}
		hidden_tooltip = {
			random = {
				chance = 16
				character_event = { id = raid_events.17 } #captured Salt wife
			}
			random = {
				chance = 1
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.24 } #wounded
			}
			random = { #0.25% chance
				chance = 25
				random = {
					chance = 1
					character_event = { id = raid_events.41 } #finds valyrian steel blade
				}
			}
		}
	}
}
# Inform reaving mild success
character_event = {
	id = raid_events.14
	desc = "EVTDESCraid_events.14"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.10"
		prestige = 15
		piety = 10
		wealth = 15
		hidden_tooltip = {
			random = {
				chance = 8
				character_event = { id = raid_events.17 } #captured Salt wife
			}
			random = {
				chance = 1
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.28 } #maimed
				set_character_flag = reaving_injury
			}
			if = {
				limit = { NOT = { has_character_flag = reaving_injury } }
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
			}
			clr_character_flag = reaving_injury
		}
	}
}
# Inform reaving mild failiure
character_event = {
	id = raid_events.15
	desc = "EVTDESCraid_events.15"
	picture = "GFX_evt_reaving_lose_raid"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.11"
		prestige = -15
		piety = -10
		hidden_tooltip = {
			random = {
				chance = 1
				character_event = { id = raid_events.29 } #death
				set_character_flag = reaving_injury
			}
			if = {
				limit = { NOT = { has_character_flag = reaving_injury } }
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
					set_character_flag = reaving_injury
				}
			}
			if = {
				limit = { NOT = { has_character_flag = reaving_injury } }
				random = {
					chance = 3
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
			}
			clr_character_flag = reaving_injury
		}
	}
}
# Inform reaving crushing defeat
character_event = {
	id = raid_events.16
	desc = "EVTDESCraid_events.16"
	picture = "GFX_evt_reaving_lose_raid"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.12"
		prestige = -30
		piety = -15
		hidden_tooltip = {
			random = {
				chance = 2
				character_event = { id = raid_events.29 } #death
				set_character_flag = reaving_injury
			}
			if = {
				limit = { NOT = { has_character_flag = reaving_injury } }
				random = {
					chance = 3
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
					set_character_flag = reaving_injury
				}
			}
			if = {
				limit = { NOT = { has_character_flag = reaving_injury } }
				random = {
					chance = 6
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
			}
			clr_character_flag = reaving_injury
		}
	}
}
###Capture Salt Wife###
character_event = {
	id = raid_events.17
	desc = "EVTDESCraid_events.17"
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes
	only_men = yes

	hide_from = yes

	trigger = {
		#is_ruler = yes #Unlanded characters cannot have concubines (hardcoded) FIXED
		below_consort_limit_trigger = yes
		is_female = no
		has_polygamy = no #hardcoded restriction
	}

	immediate = {
		if = {
			limit = { has_character_flag = disputed_lands_raid }
			random_list = {
				33 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = trios
						culture = tyroshi
						female = yes
					}
				}
				33 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = rhllor
						culture = myrman
						female = yes
					}
				}
				33 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = rhllor
						culture = lysene
						female = yes
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = rhllor
						culture = myrman
						female = yes
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = rhllor
						culture = volantene
						female = yes
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = north_essos_raid }
			random_list = {
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = moonsingers
						culture = braavosi
						female = yes
					}
				}
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = moonsingers
						culture = lorathi
						female = yes
					}
				}
				25 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = gods_sarnor
						culture = sarnorian
						female = yes
					}
				}
				25 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = gods_ibben
						culture = ibbenese
						female = yes
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = summer_sea_raid }
			random_list = {
				90 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = summer_rel
						culture = summer_islander
						female = yes
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = corsair
						culture = random
						female = yes
						trait = pirate
					}
					new_character = { check_for_defunct_culture_effect = yes }
				}
				10 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = nath_pagan
						culture = naathi
						female = yes
					}
				}
				20 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = stone_cow
						culture = farosi
						female = yes
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = slavers_bay_raid }
			random_list = {
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = qarth_warlocks
						culture = qartheen
						female = yes
					}
				}
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = harpy
						culture = ghiscari
						female = yes
					}
				}
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = harpy
						culture = astapori
						female = yes
					}
				}
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = harpy
						culture = yunkaii
						female = yes
					}
				}
				50 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = harpy
						culture = meereenese
						female = yes
					}
				}
				25 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = valyrian_rel
						culture = mantaryan
						female = yes
					}
				}
				25 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = valyrian_rel
						culture = tolosi
						female = yes
					}
				}
				25 = {
					create_character = {
						random_traits = yes
						dynasty = none
						religion = valyrian_rel
						culture = elyrian
						female = yes
					}
				}
			}
		}
		new_character = {
			save_event_target_as = raiding_salt_wife
			random = {
				chance = 15
				add_trait = fair
				remove_trait = ugly
			}
			random_list = {
				60 = { }
				25 = { add_trait = poor_warrior }
				10 = { add_trait = trained_warrior }
				5 = { add_trait = skilled_warrior }
			}
		}
		if = {
			limit = { has_character_flag = reaving_begins }
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					ai = no
				}
				character_event = { id = raid_events.18 }
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				character_event = { id = raid_events.18 }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				character_event = { id = raid_events.18 }
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.17" #Keep her
		prestige = 10
		piety = 10
		event_target:raiding_salt_wife = {
			if = {
				limit = { NOT = { has_dlc = "The Old Gods" } }#Uses new DLC system instead if owned
				add_trait = salt_wife
				set_character_flag = no_court_invites
				save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
			}
			if = {
				limit = { has_dlc = "The Old Gods" } #Uses new DLC system instead if owned
				add_trait = salt_wife
				ROOT = { add_consort = PREV }
				opinion = {
					modifier = opinion_forced_consort
					who = ROOT
				}
			}
		}
	}
	option = {
		name = "EVTOPTBraid_events.17" #Kill her
		ai_chance = { factor = 0	}
		event_target:raiding_salt_wife = {
			death = {
				death_reason = death_execution
				killer = ROOT
			}
		}
		prestige = 10
		piety = 10
	}
}
# Inform reaver of salt wife capture
character_event = {
	id = raid_events.18
	desc = "EVTDESCraid_events.18"
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.18"
	}
}
###Duel!!!###
character_event = { #on_unit_entering_province
	id = raid_events.2099

	is_triggered_only = yes
	hide_window = yes
	in_command = yes

	trigger = {
		is_looting = yes
		NOT = { is_at_sea = yes }
		location = { owner = { NOT = { same_realm = ROOT } } }
	}

	immediate = { character_event = { id = raid_events.20 } }

	option = {
		name = OK
	}
}
character_event = {
	id = raid_events.20
	desc = "EVTDESCraid_events.20"
	picture = "GFX_evt_melee"

	is_triggered_only = yes
	only_capable = yes
	prisoner = no

	immediate = {
		set_character_flag = reaving_duel
		if = {
			limit = { NOT = { trait = on_reaving } }
			location = {
				random_province_lord = {
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						religion = PREV
						culture = PREV
						female = no
					}
					new_character = {
						random_list = {
							55 = { add_trait = poor_warrior }
							40 = { add_trait = trained_warrior }
							5 = { add_trait = skilled_warrior }
						}
						save_event_target_as = reaving_duel_target
					}
				}
			}
			break = yes
		}
		if = {
			limit = { has_character_flag = disputed_lands_raid }
			random_list = {
				33 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = trios
						culture = tyroshi
						female = no
					}
				}
				33 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = rhllor
						culture = myrman
						female = no
					}
				}
				33 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = rhllor
						culture = lysene
						female = no
					}
				}
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = rhllor
						culture = myrman
						female = no
					}
				}
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = rhllor
						culture = volantene
						female = no
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = north_essos_raid }
			random_list = {
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = moonsingers
						culture = braavosi
						female = no
					}
				}
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = moonsingers
						culture = lorathi
						female = no
					}
				}
				25 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = gods_sarnor
						culture = sarnorian
						female = no
					}
				}
				25 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = gods_ibben
						culture = ibbenese
						female = no
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = summer_sea_raid }
			random_list = {
				90 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = summer_rel
						culture = summer_islander
						female = no
					}
				}
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = corsair
						culture = random
						female = no
						trait = pirate
					}
					new_character = { check_for_defunct_culture_effect = yes }
				}
				10 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = nath_pagan
						culture = naathi
						female = no
					}
				}
				20 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = stone_cow
						culture = farosi
						female = no
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = slavers_bay_raid }
			random_list = {
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = qarth_warlocks
						culture = qartheen
						female = no
					}
				}
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = harpy
						culture = ghiscari
						female = no
					}
				}
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = harpy
						culture = astapori
						female = no
					}
				}
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = harpy
						culture = yunkaii
						female = no
					}
				}
				50 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = harpy
						culture = meereenese
						female = no
					}
				}
				25 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = valyrian_rel
						culture = mantaryan
						female = no
					}
				}
				25 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = valyrian_rel
						culture = tolosi
						female = no
					}
				}
				25 = {
					create_random_soldier = {
						random_traits = yes
						dynasty = actually_culture
						religion = valyrian_rel
						culture = elyrian
						female = no
					}
				}
			}
		}
		new_character = {
			random = { #0.2% chance
				chance = 20
				random = {
					chance = 1
					add_artifact = valyrian_steel
					new_artifact = { set_artifact_flag = heirloom_@PREV }
				}
			}
			random_list = {
				45 = { add_trait = poor_warrior }
				45 = { add_trait = trained_warrior }
				10 = { add_trait = skilled_warrior }
			}
			save_event_target_as = reaving_duel_target
			random_playable_ruler = {
				limit = {
					capital_scope = { culture = PREVPREV }
				}
				reverse_banish = PREV
				break = yes
			}
			random_playable_ruler = {
				limit = {
					capital_scope = { culture_group = PREVPREV }
				}
				reverse_banish = PREV
				break = yes
			}
			random_playable_ruler = {
				limit = {
					culture_group = PREV
				}
				reverse_banish = PREV
				break = yes
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.20"
		ai_chance = {
			factor = 80
			modifier = {
				factor = 5
				trait = berserker
			}
			modifier = {
				factor = 5
				trait = viking
			}
			modifier = {
				factor = 1.5
				is_strong_trigger = yes
			}
			modifier = {
				factor = 5
				trait = master_warrior
			}
			modifier = {
				factor = 3
				trait = skilled_warrior
			}
		}
		custom_tooltip = { text = TOOLTIPREAVINGDUEL }
		prestige = 15
		piety = 15
		event_target:reaving_duel_target = {
			set_character_flag = reaving_duel_target
			show_portrait = yes
			hidden_tooltip = { character_event = { id = raid_events.21 } }
		}
	}

	option = {
		name = "EVTOPTBraid_events.20" #Run away!!!!
		trigger = { NOT = { trait = berserker } }
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				trait = brave
			}
			modifier = {
				factor = 10
				trait = craven
			}
			modifier = {
				factor = 4
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 3
				NOT = {
					OR = {
						trait = master_warrior
						trait = skilled_warrior
						trait = trained_warrior
					}
				}
			}
		}
		prestige = -30
		piety = -20
		if = {
			limit = { trait = viking }
			remove_trait = viking
		}
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 20
				add_trait = craven
				if = {
					limit = { trait = brave }
					remove_trait = brave
				}
				hidden_tooltip = {
					character_event = {
						id = 38257 #Notify Craven
					}
				}
			}
		}
	}
}
# Target starts duel
character_event = {
	id = raid_events.21
	desc = "EVTDESCraid_events.21"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.21"
		set_character_flag = duel_can_be_draw
		FROM = { set_character_flag = duel_can_be_draw }
		e_rebels = { holder_scope = { character_event = { id = duel.0 } } }
	}
}
#I win the duel!
character_event = {
	id = raid_events.22
	desc = "EVTDESCraid_events.22"
	picture = "GFX_evt_melee"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.22"
		trigger = { NOT = { has_character_flag = reaving_begins } }
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
	option = {
		name = "EVTOPTBraid_events.22"
		trigger = { has_character_flag = reaving_begins }
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
		wealth = -20
		FROM = {
			wealth = 20
			opinion = {
				modifier = opinion_rewarded_reaving
				who = ROOT
				years = 5
			}
		}
	}
	option = {
		name = "EVTOPTCraid_events.22"
		trigger = { has_character_flag = reaving_begins }
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
		FROM = {
			opinion = {
				modifier = opinion_denied_rewarded_reaving
				who = ROOT
				years = 5
			}
		}
	}
}
#I lose the duel
character_event = {
	id = raid_events.23
	desc = "EVTDESCraid_events.23"
	picture = GFX_evt_bloody_man

	show_from_from = yes

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.23"
		FROM = { tooltip = { show_portrait = yes } }
		if = {
			limit = {
				FROM = { has_character_flag = reaving_begins }
			}
			hidden_tooltip = {
				remove_opinion = {
					modifier = opinion_on_reaving
					who = FROM
				}
				reverse_remove_opinion = {
					modifier = opinion_on_reaving
					who = FROM
				}
			}
			remove_trait = on_reaving
			clr_character_flag = reaving_begins_reaver
			clr_character_flag = do_not_disturb
			clr_character_flag = disputed_lands_raid
			clr_character_flag = north_essos_raid
			clr_character_flag = summer_sea_raid
			clr_character_flag = slavers_bay_raid
			if = { #add to seclusion if neccessary
				limit = {
					is_ruler = no
					prisoner = no
					liege = { has_character_modifier = in_seclusion }
				}
				add_character_modifier = {
					name = in_seclusion
					duration = -1
				}
			}
		}
	}
}
###Battle Wounding###
character_event = {
	id = raid_events.24
	desc = "EVTDESCraid_events.24"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	hide_from = yes

	option = {
		name = "EVTOPTAraid_events.24" #I will fight on!
		ai_chance = {
			factor = 75
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 1.5
				has_character_flag = reaving_begins
			}
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 2
				trait = master_warrior
			}
			modifier = {
				factor = 1.75
				trait = skilled_warrior
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
		}
		add_trait_silently_wounded_effect = yes
		prestige = 15
		piety = 15
		if = {
			limit = { has_character_flag = reaving_begins }
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.25 } }
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.25 } }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.25 } }
			}
		}
	}
	option = {
		name = "EVTOPTBraid_events.24" #Go home
		trigger = { trait = on_reaving NOT = { trait = berserker } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 2
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 2
				NOT = {
					OR = {
						trait = master_warrior
						trait = skilled_warrior
						trait = trained_warrior
						trait = poor_warrior
					}
				}
			}
			modifier = {
				factor = 1.75
				trait = poor_warrior
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = content
			}
		}
		add_trait_silently_wounded_effect = yes
		remove_trait = on_reaving
		if = { #add to seclusion if neccessary
			limit = {
				is_ruler = no
				prisoner = no
				liege = { has_character_modifier = in_seclusion }
			}
			add_character_modifier = {
				name = in_seclusion
				duration = -1
			}
		}
		clr_character_flag = reaving_begins_reaver
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 5
				add_trait = craven
				if = {
					limit = { trait = brave }
					remove_trait = brave
				}
				hidden_tooltip = {
					character_event = {
						id = 38257 #Notify Craven
					}
				}
			}
		}
		if = {
			limit = { NOT = { has_character_flag = reaving_begins } }
			prestige = -20
			piety = -20
		}
		if = {
			limit = { has_character_flag = reaving_begins }
			prestige = -40
			piety = -40
			clr_character_flag = reaving_begins
			clr_character_flag = reaving_village_raid
			clr_character_flag = reaving_ship_attack
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				hidden_tooltip = { character_event = { id = raid_events.27 } }
				opinion = {
					modifier = opinion_coward
					who = ROOT
					years = 3
				}
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			hidden_tooltip = {
				reverse_remove_opinion = {
					modifier = opinion_on_reaving
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_on_reaving
					who = ROOT
				}
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.26 } }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.26 } }
			}
		}
	}
}
# Inform reaver of wounding/maiming, fights on
character_event = {
	id = raid_events.25
	desc = "EVTDESCraid_events.25"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.25"
	}
}
# Inform reaver of wounding/maiming, goes home
character_event = {
	id = raid_events.26
	desc = "EVTDESCraid_events.26"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.26"
	}
}
# Inform reaver of wounding/maiming, leader goes home
character_event = {
	id = raid_events.27
	desc = "EVTDESCraid_events.27"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.27"
		remove_trait = on_reaving
		if = { #add to seclusion if neccessary
			limit = {
				is_ruler = no
				prisoner = no
				liege = { has_character_modifier = in_seclusion }
			}
			add_character_modifier = {
				name = in_seclusion
				duration = -1
			}
		}
		clr_character_flag = reaving_begins_reaver
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
		hidden_tooltip = {
			remove_opinion = {
				modifier = opinion_on_reaving
				who = FROM
			}
			reverse_remove_opinion = {
				modifier = opinion_on_reaving
				who = FROM
			}
		}
	}
}
###Battle Maiming###
character_event = {
	id = raid_events.28
	desc = "EVTDESCraid_events.28"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	hide_from = yes

	option = {
		name = "EVTOPTAraid_events.28" #I will fight on!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 1.5
				has_character_flag = reaving_begins
			}
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 2
				trait = master_warrior
			}
			modifier = {
				factor = 1.75
				trait = skilled_warrior
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
		}
		add_maimed_trait_effect = yes
		prestige = 30
		piety = 30
		if = {
			limit = { has_character_flag = reaving_begins }
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.25 } }
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.25 } }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.25 } }
			}
		}
	}
	option = {
		name = "EVTOPTBraid_events.24" #Go home
		trigger = { trait = on_reaving NOT = { trait = berserker } }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 2
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 2
				NOT = {
					OR = {
						trait = master_warrior
						trait = skilled_warrior
						trait = trained_warrior
						trait = poor_warrior
					}
				}
			}
			modifier = {
				factor = 1.75
				trait = poor_warrior
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = content
			}
		}
		add_maimed_trait_effect = yes
		remove_trait = on_reaving
		if = { #add to seclusion if neccessary
			limit = {
				is_ruler = no
				prisoner = no
				liege = { has_character_modifier = in_seclusion }
			}
			add_character_modifier = {
				name = in_seclusion
				duration = -1
			}
		}
		clr_character_flag = reaving_begins_reaver
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 2
				add_trait = craven
				if = {
					limit = { trait = brave }
					remove_trait = brave
				}
				hidden_tooltip = {
					character_event = {
						id = 38257 #Notify Craven
					}
				}
			}
		}
		if = {
			limit = { NOT = { has_character_flag = reaving_begins } }
			prestige = -15
			piety = -15
		}
		if = {
			limit = { has_character_flag = reaving_begins }
			prestige = -30
			piety = -30
			clr_character_flag = reaving_begins
			clr_character_flag = reaving_village_raid
			clr_character_flag = reaving_ship_attack
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				hidden_tooltip = { character_event = { id = raid_events.27 } }
				opinion = {
					modifier = opinion_coward
					who = ROOT
					years = 3
				}
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			hidden_tooltip = {
				reverse_remove_opinion = {
					modifier = opinion_on_reaving
					who = ROOT
				}
				remove_opinion = {
					modifier = opinion_on_reaving
					who = ROOT
				}
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.26 } }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.26 } }
			}
		}
	}
}
###Battle Death###
character_event = {
	id = raid_events.29
	desc = "EVTDESCraid_events.29"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	hide_from = yes

	option = {
		name = "EVTOPTBraid_events.29" #Oh Dear
		tooltip = {
			death = {
				death_reason = death_battle_raiding
			}
		}
		prestige = 50
		piety = 50
		if = {
			limit = { has_character_flag = reaving_begins }
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				hidden_tooltip = { character_event = { id = raid_events.31 } }
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.30 } }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.30 } }
			}
		}
		hidden_tooltip = {
			red_god_resurrect_effect = yes
			death = {
				death_reason = death_battle_raiding
			}
		}
	}
}
# Inform reaver of death
character_event = {
	id = raid_events.30
	desc = "EVTDESCraid_events.30"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	option = {
		name = "EVTOPTBraid_events.29"
	}
}
# Inform reaver of death of leader
character_event = {
	id = raid_events.31
	desc = "EVTDESCraid_events.31"
	picture = GFX_evt_bloody_man

	is_triggered_only = yes

	option = {
		name = "EVTOPTBraid_events.29"
		remove_trait = on_reaving
		if = { #add to seclusion if neccessary
			limit = {
				is_ruler = no
				prisoner = no
				liege = { has_character_modifier = in_seclusion }
			}
			add_character_modifier = {
				name = in_seclusion
				duration = -1
			}
		}
		clr_character_flag = reaving_begins_reaver
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
	}
}
###Attack a ship###
character_event = { #trigger for on map looting
	id = raid_events.3299

	is_triggered_only = yes
	hide_window = yes
	in_command = yes

	trigger = {
		#is_drowned_god_religion_trigger = yes
		is_allowed_to_loot = yes
		is_at_sea = yes
		location = {
			any_neighbor_province = {
				any_province_lord = {
					war_with = ROOT
					OR = {
						has_opinion_modifier = { who = ROOT modifier = opinion_looted }
						any_liege = { has_opinion_modifier = { who = ROOT modifier = opinion_looted } }
					}
				}
			}
		}
		NOT = { has_character_flag = reaving_village_raid }
		NOT = { has_character_flag = reaving_ship_attack }
	}

	immediate = {
		character_event = { id = raid_events.32 }
	}

	option = {
		name = OK
	}
}
character_event = {
	id = raid_events.32
	desc = "EVTDESCraid_events.32"
	picture = "GFX_evt_reaving3"

	is_triggered_only = yes
	only_capable = yes
	prisoner = no

	immediate = {
		set_character_flag = reaving_ship_attack
	}

	option = {
		name = "EVTOPTAraid_events.32" #Attack!!!
		ai_chance = {
			factor = 90
			modifier = {
				factor = 3
				trait = brave
			}
			modifier = {
				factor = 1.5
				has_character_flag = reaving_begins
			}
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 2
				trait = master_warrior
			}
			modifier = {
				factor = 1.75
				trait = skilled_warrior
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
		}
		hidden_tooltip = { c_the_citadel = { holder_scope = { character_event = { id = raid_events.8 } } } } #citadel determines success
	}

	option = {
		name = "EVTOPTBraid_events.32" #not wise
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				trait = craven
			}
			modifier = {
				factor = 2
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 2
				NOT = {
					OR = {
						trait = master_warrior
						trait = skilled_warrior
						trait = trained_warrior
						trait = poor_warrior
					}
				}
			}
			modifier = {
				factor = 1.75
				trait = poor_warrior
			}
			modifier = {
				factor = 1.5
				trait = patient
			}
			modifier = {
				factor = 1.5
				trait = content
			}
		}
		clr_character_flag = reaving_ship_attack
		prestige = -15
		piety = -15
		any_opinion_modifier_target = {
			limit = {
				trait = on_reaving
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			opinion = {
				modifier = opinion_reaver_no_attack
				who = ROOT
				years = 3
			}
		}
		if = {
			limit = { NOT = { trait = on_reaving } }
			any_vassal = {
				limit = {
					is_drowned_god_religion_trigger = yes
					NOT = { has_religion_feature = religion_peaceful }
					age = 14
					is_incapable = no
				}
				opinion = {
					modifier = opinion_reaver_no_attack
					who = ROOT
					years = 3
				}
			}
		}
	}

}
#Great Success
character_event = {
	id = raid_events.33
	desc = "EVTDESCraid_events.33"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	show_from_from = yes

	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { has_dlc = "The Old Gods" }
					trait = viking
				}
				has_nickname = no
			}
			random_list = {
				1 = { set_character_flag = nick_ironreaver }
				1 = { set_character_flag = nick_the_red_reaver }
				1 = { set_character_flag = nick_the_black_reaver }
				1 = { set_character_flag = nick_ironfist }
				1 = { set_character_flag = nick_ironsword }
				1 = { set_character_flag = nick_ironshield }
				1 = { set_character_flag = nick_the_raider }
				1 = { set_character_flag = nick_ironraider }
				1 = { set_character_flag = nick_ironheart }
				1 = { set_character_flag = nick_butcher }
				1 = { set_character_flag = nick_ironhand }
				1 = { set_character_flag = nick_hardhand }
				1 = { set_character_flag = nick_the_strong }
				1 = { set_character_flag = nick_the_bold }
				1 = { set_character_flag = nick_the_warrior }
				1 = { set_character_flag = nick_the_iron_storm }
				350 = {  }
			}
		}
		if = {
			limit = {
				has_dlc = "The Old Gods"
				NOT = { trait = viking }
			}
			random_list = {
				1 = {  }
				14 = { character_event = { id = TGF.3320 days = 1 } }
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.33"
		clr_character_flag = reaving_ship_attack
		prestige = 30
		piety = 30
		wealth = 40
		if = {
			limit = { has_character_flag = nick_ironreaver }
			give_nickname = nick_ironreaver
			clr_character_flag = nick_ironreaver
		}
		if = {
			limit = { has_character_flag = nick_the_red_reaver }
			give_nickname = nick_the_red_reaver
			clr_character_flag = nick_the_red_reaver
		}
		if = {
			limit = { has_character_flag = nick_the_black_reaver }
			give_nickname = nick_the_black_reaver
			clr_character_flag = nick_the_black_reaver
		}
		if = {
			limit = { has_character_flag = nick_ironfist }
			give_nickname = nick_ironfist
			clr_character_flag = nick_ironfist
		}
		if = {
			limit = { has_character_flag = nick_ironsword }
			give_nickname = nick_ironsword
			clr_character_flag = nick_ironsword
		}
		if = {
			limit = { has_character_flag = nick_ironshield }
			give_nickname = nick_ironshield
			clr_character_flag = nick_ironshield
		}
		if = {
			limit = { has_character_flag = nick_the_raider }
			give_nickname = nick_the_raider
			clr_character_flag = nick_the_raider
		}
		if = {
			limit = { has_character_flag = nick_ironraider }
			give_nickname = nick_ironraider
			clr_character_flag = nick_ironraider
		}
		if = {
			limit = { has_character_flag = nick_ironheart }
			give_nickname = nick_ironheart
			clr_character_flag = nick_ironheart
		}
		if = {
			limit = { has_character_flag = nick_butcher }
			give_nickname = nick_butcher
			clr_character_flag = nick_butcher
		}
		if = {
			limit = { has_character_flag = nick_ironhand }
			give_nickname = nick_ironhand
			clr_character_flag = nick_ironhand
		}
		if = {
			limit = { has_character_flag = nick_hardhand }
			give_nickname = nick_hardhand
			clr_character_flag = nick_hardhand
		}
		if = {
			limit = { has_character_flag = nick_the_strong }
			give_nickname = nick_the_strong
			clr_character_flag = nick_the_strong
		}
		if = {
			limit = { has_character_flag = nick_the_bold }
			give_nickname = nick_the_bold
			clr_character_flag = nick_the_bold
		}
		if = {
			limit = { has_character_flag = nick_the_warrior }
			give_nickname = nick_the_warrior
			clr_character_flag = nick_the_warrior
		}
		if = {
			limit = { has_character_flag = nick_the_iron_storm }
			give_nickname = nick_the_iron_storm
			clr_character_flag = nick_the_iron_storm
		}
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 16
					character_event = { id = raid_events.17 } #captured Salt wife
				}
				random = {
					chance = 1
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = { #0.25% chance
					chance = 25
					random = {
						chance = 1
						character_event = { id = raid_events.41 } #finds valyrian steel blade
					}
				}
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_sucessful_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.37 days = 1 } }
			}
		}
		if = {
			limit = { NOT = { trait = on_reaving } }
			hidden_tooltip = {
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
						NOT = { is_primary_war_attacker = yes }
					}
					liege = { character_event = { id = raid_events.94 } } #Inform liege
				}
			}
		}
	}
}
#Mild Success
character_event = {
	id = raid_events.34
	desc = "EVTDESCraid_events.34"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.34"
		clr_character_flag = reaving_ship_attack
		prestige = 15
		piety = 15
		wealth = 20
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 8
					character_event = { id = raid_events.17 } #captured Salt wife
				}
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = {
					chance = 1
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
				}
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_sucessful_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.38 days = 1 } }
			}
		}
		if = {
			limit = { NOT = { trait = on_reaving } }
			hidden_tooltip = {
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = {
					chance = 1
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
				}
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
						NOT = { is_primary_war_attacker = yes }
					}
					liege = { character_event = { id = raid_events.95 } } #Inform liege
				}
			}
		}
	}
}
#Mild Failiure
character_event = {
	id = raid_events.35
	desc = "EVTDESCraid_events.35"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.35"
		clr_character_flag = reaving_ship_attack
		prestige = -15
		piety = -15
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 3
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
				}
				random = {
					chance = 1
					character_event = { id = raid_events.29 } #death
				}
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_failed_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.39 days = 1 } }
			}
		}
		if = {
			limit = { NOT = { trait = on_reaving }  }
			hidden_tooltip = {
				random = {
					chance = 3
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = {
					chance = 2
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
				}
				random = {
					chance = 1
					character_event = { id = raid_events.29 } #death
				}
				if = {
					limit = {
						liege = { NOT = { character = ROOT } }
						is_ruler = no
						NOT = { is_primary_war_attacker = yes }
					}
					liege = { character_event = { id = raid_events.96 } } #Inform liege
				}
			}
		}
		hidden_tooltip = {
			random = { #Lose flagship
				chance = 4
				character_event = { id = raid_events.161 }
			}
		}
	}
}
#Crushing defeat
character_event = {
	id = raid_events.36
	desc = "EVTDESCraid_events.36"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.36"
		clr_character_flag = reaving_ship_attack
		prestige = -30
		piety = -30
		if = {
			limit = { trait = on_reaving }
			hidden_tooltip = {
				random = {
					chance = 6
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = {
					chance = 3
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
				}
				random = {
					chance = 2
					character_event = { id = raid_events.29 } #death
				}
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				opinion = {
					modifier = opinion_failed_raid
					who = ROOT
					years = 5
				}
				hidden_tooltip = { character_event = { id = raid_events.40 days = 1 } }
			}
		}
		if = {
			limit = { NOT = { trait = on_reaving }  }
			hidden_tooltip = {
				random = {
					chance = 6
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.24 } #wounded
				}
				random = {
					chance = 3
					modifier = {
						factor = 0
						is_maimed_trigger = yes
					}
					character_event = { id = raid_events.28 } #maimed
				}
				random = {
					chance = 2
					character_event = { id = raid_events.29 } #death
				}
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
						NOT = { is_primary_war_attacker = yes }
					}
					liege = { character_event = { id = raid_events.97 } } #Inform liege
				}
			}
		}
		hidden_tooltip = {
			random = { #Lose flagship
				chance = 8
				character_event = { id = raid_events.161 }
			}
		}
	}
}
# Inform reaving great success
character_event = {
	id = raid_events.37
	desc = "EVTDESCraid_events.37"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				OR = {
					NOT = { has_dlc = "The Old Gods" }
					trait = viking
				}
				has_nickname = no
			}
			random_list = {
				1 = { set_character_flag = nick_ironreaver }
				1 = { set_character_flag = nick_the_red_reaver }
				1 = { set_character_flag = nick_the_black_reaver }
				1 = { set_character_flag = nick_ironfist }
				1 = { set_character_flag = nick_ironsword }
				1 = { set_character_flag = nick_ironshield }
				1 = { set_character_flag = nick_the_raider }
				1 = { set_character_flag = nick_ironraider }
				1 = { set_character_flag = nick_ironheart }
				1 = { set_character_flag = nick_butcher }
				1 = { set_character_flag = nick_ironhand }
				1 = { set_character_flag = nick_hardhand }
				1 = { set_character_flag = nick_the_strong }
				1 = { set_character_flag = nick_the_bold }
				1 = { set_character_flag = nick_the_warrior }
				1 = { set_character_flag = nick_the_iron_storm }
				350 = {  }
			}
		}
		if = {
			limit = {
				has_dlc = "The Old Gods"
				NOT = { trait = viking }
			}
			random_list = {
				1 = {  }
				14 = { character_event = { id = TGF.3320 days = 1 } }
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.33"
		prestige = 25
		piety = 25
		wealth = 15
		if = {
			limit = { has_character_flag = nick_ironreaver }
			give_nickname = nick_ironreaver
			clr_character_flag = nick_ironreaver
		}
		if = {
			limit = { has_character_flag = nick_the_red_reaver }
			give_nickname = nick_the_red_reaver
			clr_character_flag = nick_the_red_reaver
		}
		if = {
			limit = { has_character_flag = nick_the_black_reaver }
			give_nickname = nick_the_black_reaver
			clr_character_flag = nick_the_black_reaver
		}
		if = {
			limit = { has_character_flag = nick_ironfist }
			give_nickname = nick_ironfist
			clr_character_flag = nick_ironfist
		}
		if = {
			limit = { has_character_flag = nick_ironsword }
			give_nickname = nick_ironsword
			clr_character_flag = nick_ironsword
		}
		if = {
			limit = { has_character_flag = nick_ironshield }
			give_nickname = nick_ironshield
			clr_character_flag = nick_ironshield
		}
		if = {
			limit = { has_character_flag = nick_the_raider }
			give_nickname = nick_the_raider
			clr_character_flag = nick_the_raider
		}
		if = {
			limit = { has_character_flag = nick_ironraider }
			give_nickname = nick_ironraider
			clr_character_flag = nick_ironraider
		}
		if = {
			limit = { has_character_flag = nick_ironheart }
			give_nickname = nick_ironheart
			clr_character_flag = nick_ironheart
		}
		if = {
			limit = { has_character_flag = nick_butcher }
			give_nickname = nick_butcher
			clr_character_flag = nick_butcher
		}
		if = {
			limit = { has_character_flag = nick_ironhand }
			give_nickname = nick_ironhand
			clr_character_flag = nick_ironhand
		}
		if = {
			limit = { has_character_flag = nick_hardhand }
			give_nickname = nick_hardhand
			clr_character_flag = nick_hardhand
		}
		if = {
			limit = { has_character_flag = nick_the_strong }
			give_nickname = nick_the_strong
			clr_character_flag = nick_the_strong
		}
		if = {
			limit = { has_character_flag = nick_the_bold }
			give_nickname = nick_the_bold
			clr_character_flag = nick_the_bold
		}
		if = {
			limit = { has_character_flag = nick_the_warrior }
			give_nickname = nick_the_warrior
			clr_character_flag = nick_the_warrior
		}
		if = {
			limit = { has_character_flag = nick_the_iron_storm }
			give_nickname = nick_the_iron_storm
			clr_character_flag = nick_the_iron_storm
		}
		hidden_tooltip = {
			random = {
				chance = 16
				character_event = { id = raid_events.17 } #captured Salt wife
			}
			random = {
				chance = 1
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.24 } #wounded
			}
			random = { #0.25% chance
				chance = 25
				random = {
					chance = 1
					character_event = { id = raid_events.41 } #finds valyrian steel blade
				}
			}
		}
	}
}
# Inform reaving mild success
character_event = {
	id = raid_events.38
	desc = "EVTDESCraid_events.38"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.34"
		prestige = 15
		piety = 15
		wealth = 15
		hidden_tooltip = {
			random = {
				chance = 8
				character_event = { id = raid_events.17 } #captured Salt wife
			}
			random = {
				chance = 2
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.24 } #wounded
			}
			random = {
				chance = 1
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.28 } #maimed
			}
		}
	}
}
# Inform reaving mild failiure
character_event = {
	id = raid_events.39
	desc = "EVTDESCraid_events.39"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.35"
		prestige = -15
		piety = -15
		hidden_tooltip = {
			random = {
				chance = 3
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.24 } #wounded
			}
			random = {
				chance = 2
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.28 } #maimed
			}
			random = {
				chance = 1
				character_event = { id = raid_events.29 } #death
			}
		}
	}
}
# Inform reaving crushing defeat
character_event = {
	id = raid_events.40
	desc = "EVTDESCraid_events.40"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.36"
		prestige = -25
		piety = -25
		hidden_tooltip = {
			random = {
				chance = 6
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.24 } #wounded
			}
			random = {
				chance = 3
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				character_event = { id = raid_events.28 } #maimed
			}
			random = {
				chance = 2
				character_event = { id = raid_events.29 } #death
			}
		}
	}
}
###Finds Valyrian Sword###
character_event = {
	id = raid_events.41
	desc = "EVTDESCraid_events.41"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	hide_from = yes

	immediate = {
		if = {
			limit = { has_character_flag = reaving_begins }
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.42 } }
			}
		}
		random_opinion_modifier_target = {
			limit = {
				has_character_flag = reaving_begins
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
			if = {
				limit = {
					NOT = { character = ROOT }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.42 } }
			}
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					NOT = { character = ROOT }
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					ai = no
				}
				hidden_tooltip = { character_event = { id = raid_events.42 } }
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.41"
		prestige = 50
		piety = 50
		add_artifact = valyrian_steel
		new_artifact = {
			set_artifact_flag = heirloom_@PREV
			get_random_sword_name_effect = yes
		}
		custom_tooltip = {
			text = TOOLTIPRENAMEARTIFACTADVICE
		}
	}
}
# Inform reaver of Valyrian sword find
character_event = {
	id = raid_events.42
	desc = "EVTDESCraid_events.42"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.41"
	}
}
###Befriending###
character_event = {
	id = raid_events.43
	desc = "EVTDESCraid_events.43"
	picture = "GFX_evt_feast"

	is_triggered_only = yes
	only_capable = yes
	prisoner = no

	trigger = {
		trait = on_reaving
		on_reaving = {
			OR = {
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				any_opinion_modifier_target = {
					trait = on_reaving
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
			}
			opinion = { who = ROOT value = 15 }
			reverse_opinion = { who = ROOT value = 15 }
			NOT = { is_friend = ROOT }
			NOT = { is_rival = ROOT }
		}
	}

	immediate = { set_character_flag = reaving_befriending }

	option = {
		name = "EVTOPTAraid_events.43"
		on_reaving = {
			limit = {
				OR = {
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					}
				}
				opinion = { who = ROOT value = 15 }
				reverse_opinion = { who = ROOT value = 15 }
				NOT = { is_friend = ROOT }
				NOT = { is_rival = ROOT }
			}
			add_friend = ROOT
			character_event = { id = raid_events.44 tooltip = "EVTTOOLTIPraid_events.44" }
		}
	}
}
# Inform new friend
character_event = {
	id = raid_events.44
	desc = "EVTDESCraid_events.44"
	picture = "GFX_evt_feast"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.43"
		FROM = {
			add_friend = ROOT
			clr_character_flag = reaving_befriending
		}
	}
}
###New Rival###
character_event = {
	id = raid_events.45
	desc = "EVTDESCraid_events.45"
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes
	only_capable = yes
	prisoner = no

	trigger = {
		trait = on_reaving
		on_reaving = {
			OR = {
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				any_opinion_modifier_target = {
					trait = on_reaving
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
			}
			NOT = { opinion = { who = ROOT value = -15 } }
			NOT = { reverse_opinion = { who = ROOT value = -15 } }
			NOT = { is_friend = ROOT }
			NOT = { is_rival = ROOT }
		}
		NOT = {
			on_reaving = {
				is_alive = yes
				has_character_flag = reaving_rival
			}
		}
	}

	immediate = { set_character_flag = reaving_rival }

	option = {
		name = "EVTOPTAraid_events.45"
		on_reaving = {
			limit = {
				OR = {
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					}
				}
				NOT = { opinion = { who = ROOT value = -15 } }
				NOT = { reverse_opinion = { who = ROOT value = -15 } }
				NOT = { is_friend = ROOT }
				NOT = { is_rival = ROOT }
			}
			add_rival = ROOT
			character_event = { id = raid_events.46 tooltip = "EVTTOOLTIPraid_events.46" }
		}
	}
}
# Inform new rival
character_event = {
	id = raid_events.46
	desc = "EVTDESCraid_events.46"
	picture = GFX_evt_courtiers_talking

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.45"
		FROM = {
			add_rival = ROOT
			clr_character_flag = reaving_rival
		}
	}
}
###Finger Dance###
character_event = {
	id = raid_events.47
	desc = "EVTDESCraid_events.47"
	picture = GFX_fingerdance

	is_triggered_only = yes
	only_capable = yes
	prisoner = no

	trigger = {
		trait = on_reaving
		NOT = { trait = wounded }
		NOT = { is_maimed_trigger = yes }
		NOT = { has_character_flag = finger_dance }
		OR = {
			is_female = no
			is_agile_trigger = yes
			is_strong_trigger = yes
			trait = brave
		}
		on_reaving = {
			NOT = { trait = wounded }
			NOT = { is_maimed_trigger = yes }
			NOT = { has_character_flag = finger_dance }
			OR = {
				is_female = no
				is_agile_trigger = yes
				is_strong_trigger = yes
				trait = brave
			}
			OR = {
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				any_opinion_modifier_target = {
					trait = on_reaving
					has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
			}
		}
	}

	immediate = {
		set_character_flag = finger_dance
		on_reaving = {
			limit = {
				NOT = { trait = wounded }
				NOT = { is_maimed_trigger = yes }
				NOT = { has_character_flag = finger_dance }
				OR = {
					is_female = no
					is_agile_trigger = yes
					is_strong_trigger = yes
					trait = brave
				}
				OR = {
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					any_opinion_modifier_target = {
						trait = on_reaving
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
					}
				}
			}
			save_event_target_as = finger_dancer
		}
	}

	option = {
		name = "EVTOPTAraid_events.47" #Challenge HIM!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = impaler
			}
			modifier = {
				factor = 1.25
				trait = duelist
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
		}
		event_target:finger_dancer = {
			set_character_flag = finger_dance
			character_event = { id = raid_events.48 tooltip = "EVTTOOLTIPraid_events.48" }
		}
	}
	option = {
		name = "EVTOPTBraid_events.47" #Too dangerous
		trigger = { NOT = { trait = berserker } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 10
				trait = craven
			}
			modifier = {
				factor = 0
				has_character_flag = fingerdance_expert
			}
		}
		prestige = -15
		piety = -15
		set_character_flag = fingerdance_refused
		clr_character_flag = finger_dance
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 10
				add_trait = craven
				if = {
					limit = { trait = brave }
					remove_trait = brave
				}
				hidden_tooltip = {
					character_event = {
						id = 38257 #Notify Craven
					}
				}
			}
		}
	}
}
#Challenged Responds
character_event = {
	id = raid_events.48
	desc = "EVTDESCraid_events.48"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.48" #Accept!
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.25
				trait = impaler
			}
			modifier = {
				factor = 1.25
				trait = duelist
			}
			modifier = {
				factor = 1.25
				trait = wroth
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 1.5
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = arbitrary
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
		}
		custom_tooltip = { text = TOOLTIPFINGERDANCEENSUES }
		set_character_flag = finger_dance

		set_character_flag = flag_duel_friendly
		set_character_flag = mock_duel
		set_character_flag = finger_dance_duel
		set_character_flag = duel_can_be_draw
		FROM = {
			set_character_flag = flag_duel_friendly
			set_character_flag = mock_duel
			set_character_flag = finger_dance_duel
			set_character_flag = duel_can_be_draw
		}

		hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.0 } } } }
	}
	option = {
		name = "EVTOPTBraid_events.47" #Too dangerous
		trigger = { NOT = { trait = berserker } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.5
				trait = temperate
			}
			modifier = {
				factor = 1.5
				trait = humble
			}
			modifier = {
				factor = 10
				trait = craven
			}
			modifier = {
				factor = 0
				has_character_flag = fingerdance_expert
			}
		}
		prestige = -15
		piety = -15
		set_character_flag = fingerdance_refused
		clr_character_flag = finger_dance
		FROM = {
			hidden_tooltip = {
				character_event = {
					id = raid_events.50
				}
			}
		}
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 10
				add_trait = craven
				if = {
					limit = { trait = brave }
					remove_trait = brave
				}
				hidden_tooltip = {
					character_event = {
						id = 38257 #Notify Craven
					}
				}
			}
		}
	}
}
#Inform challenger decline to dance
character_event = {
	id = raid_events.50
	desc = "EVTDESCraid_events.50"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.50"
		clr_character_flag = finger_dance
		prestige = 10
	}
}



#Inform target draw
character_event = {
	id = raid_events.54
	desc = "EVTDESCraid_events.54"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.53"
		prestige = 30
		random_list = {
			93 = { }
			5 = {
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = { id = 38280 }
				}
			}
			2 = {
				hidden_tooltip = {
					remove_trait = wounded
				}
				add_maimed_trait_effect = yes
			}
		}

		clr_character_flag = finger_dance
	}
}
#Inform challenger they lose
character_event = {
	id = raid_events.55
	desc = "EVTDESCraid_events.55"
	picture = GFX_fingerdance

	is_triggered_only = yes

	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.55"
		prestige = 20
		random_list = {
			85 = { }
			10 = {
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = { id = 38280 }
				}
			}
			5 = {
				hidden_tooltip = {
					remove_trait = wounded
				}
				add_maimed_trait_effect = yes
			}
		}
		hidden_tooltip = {
			FROM = { FROM = { character_event = { id = raid_events.56 } } }
		}
		clr_character_flag = finger_dance
	}
}
#Inform target they win
character_event = {
	id = raid_events.56
	desc = "EVTDESCraid_events.56"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.50"
		prestige = 40
		random_list = {
			96 = { }
			3 = {
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = {
					character_event = { id = 38280 }
				}
			}
			1 = {
				hidden_tooltip = {
					remove_trait = wounded
				}
				add_maimed_trait_effect = yes
			}
		}
		hidden_tooltip = {
			if = {
				limit = { has_character_flag = reaving_begins }
				any_opinion_modifier_target = {
					limit = {
						trait = on_reaving
						has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
						ai = no
					}
					hidden_tooltip = { character_event = { id = raid_events.59 } }
				}
			}
			random_opinion_modifier_target = {
				limit = {
					has_character_flag = reaving_begins
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				if = {
					limit = {
						NOT = { character = ROOT }
						ai = no
					}
					hidden_tooltip = { character_event = { id = raid_events.59 } }
				}
				any_opinion_modifier_target = {
					limit = {
						trait = on_reaving
						NOT = { character = ROOT }
						has_opinion_modifier = { who = PREV modifier = opinion_on_reaving }
						ai = no
					}
					hidden_tooltip = { character_event = { id = raid_events.59 } }
				}
			}
		}
		clr_character_flag = finger_dance
	}
}
#Inform lead reaver challenger wins
character_event = {
	id = raid_events.57
	desc = "EVTDESCraid_events.57"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.57"
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
}
#Inform lead reaver draw
character_event = {
	id = raid_events.58
	desc = "EVTDESCraid_events.58"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.58"
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
}
#Inform lead reaver challenger loses
character_event = {
	id = raid_events.59
	desc = "EVTDESCraid_events.59"
	picture = GFX_fingerdance

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.57"
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
}
###Kraken Attacks!###
character_event = {
	id = raid_events.60
	desc = "EVTDESCraid_events.60"
	picture = GFX_evt_kraken

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.60" #To arms!
		if = {
			limit = {
				NOT = { check_variable = { which = "reaving_party_skill" value = 5 } }
			}
			random_list = {
				25 = {
					custom_tooltip = { text = TOOLTIPKRAKENDEFEATED }
					hidden_tooltip = { character_event = { id = raid_events.61 } }
				}
				75 = {
					custom_tooltip = { text = TOOLTIPKRAKENWINS }
					hidden_tooltip = { character_event = { id = raid_events.62 } }
				}
			}
		}
		if = {
			limit = {
				check_variable = { which = "reaving_party_skill" value = 5 }
				NOT = { check_variable = { which = "reaving_party_skill" value = 10 } }
			}
			random_list = {
				50 = {
					custom_tooltip = { text = TOOLTIPKRAKENDEFEATED }
					hidden_tooltip = { character_event = { id = raid_events.61 } }
				}
				50 = {
					custom_tooltip = { text = TOOLTIPKRAKENWINS }
					hidden_tooltip = { character_event = { id = raid_events.62 } }
				}
			}
		}
		if = {
			limit = {
				check_variable = { which = "reaving_party_skill" value = 10 }
			}
			random_list = {
				75 = {
					custom_tooltip = { text = TOOLTIPKRAKENDEFEATED }
					hidden_tooltip = { character_event = { id = raid_events.61 } }
				}
				25 = {
					custom_tooltip = { text = TOOLTIPKRAKENWINS }
					hidden_tooltip = { character_event = { id = raid_events.62 } }
				}
			}
		}
	}
}
#Kraken defeated
character_event = {
	id = raid_events.61
	desc = "EVTDESCraid_events.61"
	picture = GFX_evt_kraken

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.61"
		prestige = 200
		if = {
			limit = { has_nickname = no }
			give_nickname = nick_the_krakenslayer
		}
		random_list = {
			5 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				tooltip = { add_maimed_trait_effect = yes }
				hidden_tooltip = { character_event = { id = raid_events.28 } }
			}
			10 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = raid_events.24 } }
			}
			85 = { }
		}
		hidden_tooltip = {
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				character_event = { id = raid_events.63 }
			}
		}
	}
}
#Kraken wins
character_event = {
	id = raid_events.62
	desc = "EVTDESCraid_events.62"
	picture = GFX_evt_kraken

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.62"
		random_list = {
			50 = {
				death = {
					death_reason = death_battle_raiding
				}
				hidden_tooltip = { character_event = { id = raid_events.29 } }
			}
			25 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				tooltip = { add_maimed_trait_effect = yes }
				hidden_tooltip = { character_event = { id = raid_events.28 } }
			}
			15 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = raid_events.24 } }
			}
			10 = { }
		}
		hidden_tooltip = {
			any_opinion_modifier_target = {
				limit = {
					trait = on_reaving
					has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
				}
				character_event = { id = raid_events.64 }
			}
		}
	}
}
#Inform reaver Kraken defeated
character_event = {
	id = raid_events.63
	desc = "EVTDESCraid_events.63"
	picture = GFX_evt_kraken

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.61"
		prestige = 100
		random_list = {
			5 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				tooltip = { add_maimed_trait_effect = yes }
				hidden_tooltip = { character_event = { id = raid_events.28 } }
			}
			10 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = raid_events.24 } }
			}
			85 = { }
		}
	}
}
#Inform reaver Kraken wins
character_event = {
	id = raid_events.64
	desc = "EVTDESCraid_events.64"
	picture = GFX_evt_kraken

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.62"
		random_list = {
			50 = {
				death = {
					death_reason = death_battle_raiding
				}
				hidden_tooltip = { character_event = { id = raid_events.29 } }
			}
			25 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				tooltip = { add_maimed_trait_effect = yes }
				hidden_tooltip = { character_event = { id = raid_events.28 } }
			}
			15 = {
				modifier = {
					factor = 0
					is_maimed_trigger = yes
				}
				add_trait_silently_wounded_effect = yes
				hidden_tooltip = { character_event = { id = raid_events.24 } }
			}
			10 = { }
		}
	}
}
###On map events###
###Village Raid###OBSOLETE
# character_event = {
	# id = raid_events.65
	# desc = "EVTDESCraid_events.7"
	# picture = "GFX_evt_reavingvillageraid"

	# min_age = 14
	# only_capable = yes
	# prisoner = no

	# trigger = {
		# in_command = yes
		# religion_group = drowned_god_group
		# culture_group = iron_isles_culture
		# NOT = { in_battle = yes }
		# location = {
			# port = yes
			# owner = {
				# OR = {
					# any_war = {
						# OR = {
							# using_cb = ironborn_raid
							# using_cb = invasion_ironborn
						# }
						# defender = { character = PREVPREV }
						# attacker = {
							# OR = {
								# character = ROOT
								# any_vassal = { character = ROOT }
								# any_courtier = { character = ROOT }
							# }
						# }
					# }
					# any_liege = {
						# any_war = {
							# OR = {
								# using_cb = ironborn_raid
								# using_cb = invasion_ironborn
							# }
							# defender = { character = PREVPREV }
							# attacker = {
								# OR = {
									# character = ROOT
									# any_vassal = { character = ROOT }
									# any_courtier = { character = ROOT }
								# }
							# }
						# }
					# }
				# }
			# }
		# }
		# NOT = { has_character_flag = reaving_village_raid }
		# NOT = { has_character_flag = reaving_ship_attack }
		# OR = {
			# NOT = { has_character_flag = reaving_village_timer }
			# had_character_flag = { flag = reaving_village_timer days = 200 }
		# }
	# }

	# mean_time_to_happen = {
		# days = 200
	# }

	# immediate = { set_character_flag = reaving_village_raid set_character_flag = reaving_village_timer }

	# option = {
		# name = "EVTOPTAraid_events.7"
		# hidden_tooltip = { c_the_citadel = { holder_scope = { character_event = { id = raid_events.8 } } } } #citadel determines success
	# }
# }
###Take saltwife from siege### Invasion Version
character_event = {
	id = raid_events.66
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes
	#only_rulers = yes #Unlanded characters cannot have concubines (hardcoded) FIXED
	religion_group = drowned_god_group
	culture_group = iron_isles_culture
	#only_men = yes
	min_age = 14
	only_capable = yes
	prisoner = no

	desc = {
		text = "EVTDESCraid_events.66"
		trigger = { is_female = no }
	}
	desc = {
		text = "EVTDESCraid_events.66D"
		trigger = { is_female = no }
	}

	trigger = {
		NOT = { trait = kind }
		OR = {
			is_female = no
			AND = {
				tier = EMPEROR
				has_dlc = "The Old Gods"
			}
		}
		has_polygamy = no #hardcoded restriction
		FROM = {
			holder_scope = {
				any_courtier = {
					is_alive = yes
					is_ruler = no
					NOT = { same_sex = ROOT }
					age = 16
					at_location = ROOT
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_pilgrimage_trait_trigger = yes }
					NOT = { trait = salt_wife }
					NOT = { trait = dragon }
					NOT = { culture_group = winter_group }
					NOT = { culture_group = unoccupied_group }
				}
				OR = {
					any_war = {
						#OR = {
							#using_cb = ironborn_raid
							using_cb = invasion_ironborn
						#}
						defender = { character = PREVPREV }
						attacker = {
							OR = {
								character = ROOT
								any_vassal = { character = ROOT }
								any_courtier = { character = ROOT }
							}
						}
					}
					any_liege = {
						any_war = {
							#OR = {
								#using_cb = ironborn_raid
								using_cb = invasion_ironborn
							#}
							defender = { character = PREVPREV }
							attacker = {
								OR = {
									character = ROOT
									any_vassal = { character = ROOT }
									any_courtier = { character = ROOT }
								}
							}
						}
					}
				}
			}
		}
		below_consort_limit_trigger = yes
	}

	immediate = {
		FROM = {
			holder_scope = {
				random_courtier = {
					limit = {
						is_alive = yes
						is_ruler = no
						NOT = { same_sex = ROOT }
						age = 16
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						NOT = { trait = salt_wife }
						NOT = { trait = dragon }
						NOT = { culture_group = winter_group }
						NOT = { culture_group = unoccupied_group }
					}
					set_character_flag = salt_wife
					save_event_target_as = salt_wife_1
				}
				random_courtier = {
					limit = {
						is_alive = yes
						is_ruler = no
						NOT = { same_sex = ROOT }
						age = 16
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						NOT = { trait = salt_wife }
						NOT = { trait = dragon }
						NOT = { culture_group = winter_group }
						NOT = { culture_group = unoccupied_group }
						NOT = { has_character_flag = salt_wife }
					}
					set_character_flag = salt_wife
					save_event_target_as = salt_wife_2
				}
				random_courtier = {
					limit = {
						is_alive = yes
						is_ruler = no
						NOT = { same_sex = ROOT }
						age = 16
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						NOT = { trait = salt_wife }
						NOT = { trait = dragon }
						NOT = { culture_group = winter_group }
						NOT = { culture_group = unoccupied_group }
						NOT = { has_character_flag = salt_wife }
					}
					save_event_target_as = salt_wife_3
				}
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.66" #Her
		trigger = {
			event_target:salt_wife_1 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { NOT = { age = 20 } }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { NOT = { age = 30 } }
			}
			modifier = {
				factor = 0
				event_target:salt_wife_1 = {
					age = 40
					NOT = { has_fair_trait_trigger = yes }
				}
			}
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { has_fair_trait_trigger = yes }
			}
			modifier = {
				factor = 0.33
				event_target:salt_wife_1 = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_1 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_1 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_1 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_1 = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { any_claim = { NOT = { lower_tier_than = ROOT } } }
			}
		}
		event_target:salt_wife_1 = {
			tooltip = { show_portrait = yes }
			if = {
				limit = { is_consort = yes }
				any_consort = { remove_consort = PREV }
			}
			if = {
				limit = { is_ruler = yes }
				hidden_tooltip = { #Universal on death/abdication event
					if = {
						limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
						set_character_flag = do_not_inherit_sword
					}
					set_character_flag = abdication
					character_event = { id = 45341 }
					clr_character_flag = abdication
					clr_character_flag = do_not_inherit_sword
					if = {
						limit = { is_merchant_republic = no }
						current_heir = { save_event_target_as = wealth_heir }
					}
					if = {
						limit = { is_merchant_republic = yes }
						family_palace = { current_heir = { save_event_target_as = wealth_heir } }
					}
					transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
				}
				abdicate = yes
			}
			if = {
				limit = { trait = slave }
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_stole_slave
					}
				}
				if = {
					limit = {
						ROOT = {
							is_ruler = yes
							OR = {
								can_buy_courtier_slaves_trigger = yes
								crownlaw_title = { has_law = slavery_3 } #Thralldom
							}
							NOT = { has_game_rule = { name = slavery value = off } }
						}
					}
					hidden_tooltip = {
						any_spouse = { remove_spouse = PREV }
						any_consort = { remove_consort = PREV }
						liege = {
							remove_opinion = { who = PREV modifier = opinion_my_slave }
							reverse_remove_opinion = { who = PREV modifier = opinion_my_owner }
						}
						opinion = { who = ROOT modifier = opinion_my_owner }
						reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					}
				}
				else = {
					tooltip = { remove_trait = slave }
					hidden_tooltip = { character_event = { id = slavery.0 } }
				}
			}
			ROOT = {
				if = {
					limit = { NOT = { has_dlc = "The Old Gods" } }
					if = {
						limit = { is_ruler = yes }
						reverse_banish = PREV
					}
					if = {
						limit = { is_ruler = no }
						liege = { reverse_banish = PREVPREV }
					}
					PREV = {
						imprison = yes
						if = {
							limit = { is_consort = yes }
							consort = { remove_consort = PREV }
						}
						hidden_tooltip = {
							remove_character_modifier = the_dungeon
							add_character_modifier = {
								name = house_arrest
								duration = -1
							}
						}
						save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
					}
				}
			}
			if = {
				limit = { has_dlc = "The Old Gods" }
				hidden_tooltip = {
					spouse = {
						character_event = { id = 662 }
						opinion = {
							who = PREV
							modifier = opinion_my_abducted_spouse
							years = 100
						}
					}
				}
				ROOT = { add_consort = PREV }
				opinion = {
					who = ROOT
					modifier = opinion_forced_consort
				}
			}
			hidden_tooltip = {
				if = {
					limit = { is_female = yes }
					add_trait = salt_wife
					set_character_flag = no_court_invites
				}
				character_event = { id = raid_events.660 }
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}

	option = {
		name = "EVTOPTBraid_events.66" #Her
		trigger = {
			event_target:salt_wife_2 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { NOT = { age = 20 } }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { NOT = { age = 30 } }
			}
			modifier = {
				factor = 0
				event_target:salt_wife_2 = {
					age = 40
					NOT = { has_fair_trait_trigger = yes }
				}
			}
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { has_fair_trait_trigger = yes }
			}
			modifier = {
				factor = 0.33
				event_target:salt_wife_2 = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_2 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_2 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_2 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_2 = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { any_claim = { NOT = { lower_tier_than = ROOT } } }
			}
		}
		event_target:salt_wife_2 = {
			tooltip = { show_portrait = yes }
			if = {
				limit = { is_consort = yes }
				any_consort = { remove_consort = PREV }
			}
			if = {
				limit = { is_ruler = yes }
				hidden_tooltip = { #Universal on death/abdication event
					if = {
						limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
						set_character_flag = do_not_inherit_sword
					}
					set_character_flag = abdication
					character_event = { id = 45341 }
					clr_character_flag = abdication
					clr_character_flag = do_not_inherit_sword
					if = {
						limit = { is_merchant_republic = no }
						current_heir = { save_event_target_as = wealth_heir }
					}
					if = {
						limit = { is_merchant_republic = yes }
						family_palace = { current_heir = { save_event_target_as = wealth_heir } }
					}
					transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
				}
				abdicate = yes
			}
			if = {
				limit = { trait = slave }
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_stole_slave
					}
				}
				if = {
					limit = {
						ROOT = {
							is_ruler = yes
							OR = {
								can_buy_courtier_slaves_trigger = yes
								crownlaw_title = { has_law = slavery_3 } #Thralldom
							}
							NOT = { has_game_rule = { name = slavery value = off } }
						}
					}
					hidden_tooltip = {
						any_spouse = { remove_spouse = PREV }
						any_consort = { remove_consort = PREV }
						liege = {
							remove_opinion = { who = PREV modifier = opinion_my_slave }
							reverse_remove_opinion = { who = PREV modifier = opinion_my_owner }
						}
						opinion = { who = ROOT modifier = opinion_my_owner }
						reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					}
				}
				else = {
					tooltip = { remove_trait = slave }
					hidden_tooltip = { character_event = { id = slavery.0 } }
				}
			}
			ROOT = {
				if = {
					limit = { NOT = { has_dlc = "The Old Gods" } }
					if = {
						limit = { is_ruler = yes }
						reverse_banish = PREV
					}
					if = {
						limit = { is_ruler = no }
						liege = { reverse_banish = PREVPREV }
					}
					PREV = {
						imprison = yes
						if = {
							limit = { is_consort = yes }
							consort = { remove_consort = PREV }
						}
						hidden_tooltip = {
							remove_character_modifier = the_dungeon
							add_character_modifier = {
								name = house_arrest
								duration = -1
							}
						}
						save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
					}
				}
			}
			if = {
				limit = { has_dlc = "The Old Gods" }
				hidden_tooltip = {
					spouse = {
						character_event = { id = 662 }
						opinion = {
							who = PREV
							modifier = opinion_my_abducted_spouse
							years = 100
						}
					}
				}
				ROOT = { add_consort = PREV }
				opinion = {
					who = ROOT
					modifier = opinion_forced_consort
				}
			}
			hidden_tooltip = {
				if = {
					limit = { is_female = yes }
					add_trait = salt_wife
					set_character_flag = no_court_invites
				}
				character_event = { id = raid_events.660 }
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}
	option = {
		name = "EVTOPTCraid_events.66" #Her
		trigger = {
			event_target:salt_wife_3 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { NOT = { age = 20 } }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { NOT = { age = 30 } }
			}
			modifier = {
				factor = 0
				event_target:salt_wife_3 = {
					age = 40
					NOT = { has_fair_trait_trigger = yes }
				}
			}
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { has_fair_trait_trigger = yes }
			}
			modifier = {
				factor = 0.33
				event_target:salt_wife_3 = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_3 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_3 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_3 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_3 = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { any_claim = { NOT = { lower_tier_than = ROOT } } }
			}
		}
		event_target:salt_wife_3 = {
			tooltip = { show_portrait = yes }
			if = {
				limit = { is_consort = yes }
				any_consort = { remove_consort = PREV }
			}
			if = {
				limit = { is_ruler = yes }
				hidden_tooltip = { #Universal on death/abdication event
					if = {
						limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
						set_character_flag = do_not_inherit_sword
					}
					set_character_flag = abdication
					character_event = { id = 45341 }
					clr_character_flag = abdication
					clr_character_flag = do_not_inherit_sword
					if = {
						limit = { is_merchant_republic = no }
						current_heir = { save_event_target_as = wealth_heir }
					}
					if = {
						limit = { is_merchant_republic = yes }
						family_palace = { current_heir = { save_event_target_as = wealth_heir } }
					}
					transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
				}
				abdicate = yes
			}
			if = {
				limit = { trait = slave }
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_stole_slave
					}
				}
				if = {
					limit = {
						ROOT = {
							is_ruler = yes
							OR = {
								can_buy_courtier_slaves_trigger = yes
								crownlaw_title = { has_law = slavery_3 } #Thralldom
							}
							NOT = { has_game_rule = { name = slavery value = off } }
						}
					}
					hidden_tooltip = {
						any_spouse = { remove_spouse = PREV }
						any_consort = { remove_consort = PREV }
						liege = {
							remove_opinion = { who = PREV modifier = opinion_my_slave }
							reverse_remove_opinion = { who = PREV modifier = opinion_my_owner }
						}
						opinion = { who = ROOT modifier = opinion_my_owner }
						reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					}
				}
				else = {
					tooltip = { remove_trait = slave }
					hidden_tooltip = { character_event = { id = slavery.0 } }
				}
			}
			ROOT = {
				if = {
					limit = { NOT = { has_dlc = "The Old Gods" } }
					if = {
						limit = { is_ruler = yes }
						reverse_banish = PREV
					}
					if = {
						limit = { is_ruler = no }
						liege = { reverse_banish = PREVPREV }
					}
					PREV = {
						imprison = yes
						if = {
							limit = { is_consort = yes }
							consort = { remove_consort = PREV }
						}
						hidden_tooltip = {
							remove_character_modifier = the_dungeon
							add_character_modifier = {
								name = house_arrest
								duration = -1
							}
						}
						save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
					}
				}
			}
			if = {
				limit = { has_dlc = "The Old Gods" }
				hidden_tooltip = {
					spouse = {
						character_event = { id = 662 }
						opinion = {
							who = PREV
							modifier = opinion_my_abducted_spouse
							years = 100
						}
					}
				}
				ROOT = { add_consort = PREV }
				opinion = {
					who = ROOT
					modifier = opinion_forced_consort
				}
			}
			hidden_tooltip = {
				if = {
					limit = { is_female = yes }
					add_trait = salt_wife
					set_character_flag = no_court_invites
				}
				character_event = { id = raid_events.660 }
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}

	option = {
		name = "EVTOPTDraid_events.66" #No
		ai_chance = {
			factor = 70
			modifier = {
				factor = 5
				trait = homosexual
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}
}
###Take saltwife/concubine from siege### looting version
character_event = {
	id = raid_events.665
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes

	desc = {
		text = EVTDESCraid_events.66 #salt wife
		trigger = {
			is_drowned_god_religion_trigger = yes
			is_female = no
		}
	}
	desc = {
		text = EVTDESCraid_events.66B #genric girl
		trigger = {
			is_drowned_god_religion_trigger = no
			is_female = no
		}
	}
	desc = {
		text = "EVTDESCraid_events.66C" #boy
		trigger = {
			is_drowned_god_religion_trigger = no
			is_female = yes
		}
	}
	desc = {
		text = "EVTDESCraid_events.66D" #salt husband
		trigger = {
			is_drowned_god_religion_trigger = yes
			is_female = yes
		}
	}
	# desc = {
		# text = EVTDESCraid_events.66C #homosexual
		# trigger = {
			# NOT = { is_drowned_god_religion_trigger = yes }
			# trait = homosexual
		# }
	# }
	#only_rulers = yes #Unlanded characters cannot have concubines (hardcoded) FIXED
	#only_men = yes
	min_age = 14
	only_capable = yes
	prisoner = no

	trigger = {
		is_allowed_to_loot = yes
		OR = {
			AND = {
				is_female = no
				is_drowned_god_religion_trigger = yes
			}
			AND = {
				has_dlc = "The Old Gods"
				has_concubinage = yes
			}
		}
		OR = { #Some women can do this
			is_female = no
			religion = corsair
			religion_group = pirate_group
			AND = {
				is_drowned_god_religion_trigger = yes
				tier = EMPEROR
			}
		}
		NOT = { has_landed_title = d_brotherhood }
		NOT = { trait = kind }
		below_consort_limit_trigger = yes
		has_polygamy = no #hardcoded restriction
		FROM = {
			holder_scope = {
				NAND = { #jogos nhai do not make war on eachother
					ROOT = { has_jogos_nhai_war_block_trigger = yes }
					has_jogos_nhai_war_block_trigger = yes
				}
				NOT = { is_liege_or_above = ROOT }
				OR = {
					NOT = { same_realm = ROOT }
					war_with = ROOT
					ROOT = { liege = { war_with = PREVPREV } }
					any_liege = {
						OR = {
							war_with = ROOT
							ROOT = { liege = { war_with = PREVPREV } }
						}
					}
				}
				any_courtier = {
					is_alive = yes
					#is_ruler = no
					NOT = { same_sex = ROOT }
					age = 16
					at_location = ROOT
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_pilgrimage_trait_trigger = yes }
					NOT = { trait = salt_wife }
					NOT = { trait = dragon }
					NOT = { culture_group = winter_group }
					NOT = { culture_group = unoccupied_group }
				}
				NOT = { #Invasion saltwife event has priority
					OR = {
						any_war = {
							#OR = {
								#using_cb = ironborn_raid
								using_cb = invasion_ironborn
							#}
							defender = { character = PREVPREV }
							attacker = {
								OR = {
									character = ROOT
									any_vassal = { character = ROOT }
									any_courtier = { character = ROOT }
								}
							}
						}
						any_liege = {
							any_war = {
								#OR = {
									#using_cb = ironborn_raid
									using_cb = invasion_ironborn
								#}
								defender = { character = PREVPREV }
								attacker = {
									OR = {
										character = ROOT
										any_vassal = { character = ROOT }
										any_courtier = { character = ROOT }
									}
								}
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		FROM = {
			holder_scope = {
				random_courtier = {
					limit = {
						is_alive = yes
						#is_ruler = no
						NOT = { same_sex = ROOT }
						age = 16
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						NOT = { trait = salt_wife }
						NOT = { trait = dragon }
						NOT = { culture_group = winter_group }
						NOT = { culture_group = unoccupied_group }
					}
					set_character_flag = salt_wife
					save_event_target_as = salt_wife_1
				}
				random_courtier = {
					limit = {
						is_alive = yes
						#is_ruler = no
						NOT = { same_sex = ROOT }
						age = 16
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						NOT = { trait = salt_wife }
						NOT = { trait = dragon }
						NOT = { culture_group = winter_group }
						NOT = { culture_group = unoccupied_group }
						NOT = { has_character_flag = salt_wife }
					}
					set_character_flag = salt_wife
					save_event_target_as = salt_wife_2
				}
				random_courtier = {
					limit = {
						is_alive = yes
						#is_ruler = no
						NOT = { same_sex = ROOT }
						age = 16
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						NOT = { trait = salt_wife }
						NOT = { trait = dragon }
						NOT = { culture_group = winter_group }
						NOT = { culture_group = unoccupied_group }
						NOT = { has_character_flag = salt_wife }
					}
					save_event_target_as = salt_wife_3
				}
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.66" #Her
		trigger = {
			event_target:salt_wife_1 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { NOT = { age = 20 } }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { NOT = { age = 30 } }
			}
			modifier = {
				factor = 0
				event_target:salt_wife_1 = {
					NOT = { has_fair_trait_trigger = yes }
					age = 40
				}
			}
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { has_fair_trait_trigger = yes }
			}
			modifier = {
				factor = 0.33
				event_target:salt_wife_1 = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_1 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_1 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_1 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_1 = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_1 = { any_claim = { NOT = { lower_tier_than = ROOT } } }
			}
		}
		event_target:salt_wife_1 = {
			tooltip = { show_portrait = yes }
			if = {
				limit = { is_consort = yes }
				any_consort = { remove_consort = PREV }
			}
			if = {
				limit = { is_ruler = yes }
				hidden_tooltip = { #Universal on death/abdication event
					if = {
						limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
						set_character_flag = do_not_inherit_sword
					}
					set_character_flag = abdication
					character_event = { id = 45341 }
					clr_character_flag = abdication
					clr_character_flag = do_not_inherit_sword
					if = {
						limit = { is_merchant_republic = no }
						current_heir = { save_event_target_as = wealth_heir }
					}
					if = {
						limit = { is_merchant_republic = yes }
						family_palace = { current_heir = { save_event_target_as = wealth_heir } }
					}
					transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
				}
				abdicate = yes
			}
			if = {
				limit = { trait = slave }
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_stole_slave
					}
				}
				if = {
					limit = {
						ROOT = {
							is_ruler = yes
							OR = {
								can_buy_courtier_slaves_trigger = yes
								crownlaw_title = { has_law = slavery_3 } #Thralldom
							}
							NOT = { has_game_rule = { name = slavery value = off } }
						}
					}
					hidden_tooltip = {
						any_spouse = { remove_spouse = PREV }
						any_consort = { remove_consort = PREV }
						liege = {
							remove_opinion = { who = PREV modifier = opinion_my_slave }
							reverse_remove_opinion = { who = PREV modifier = opinion_my_owner }
						}
						opinion = { who = ROOT modifier = opinion_my_owner }
						reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					}
				}
				else = {
					tooltip = { remove_trait = slave }
					hidden_tooltip = { character_event = { id = slavery.0 } }
				}
			}
			ROOT = {
				if = {
					limit = { NOT = { has_dlc = "The Old Gods" } }
					if = {
						limit = { is_ruler = yes }
						reverse_banish = PREV
					}
					if = {
						limit = { is_ruler = no }
						liege = { reverse_banish = PREVPREV }
					}
					PREV = {
						imprison = yes
						if = {
							limit = { is_consort = yes }
							consort = { remove_consort = PREV }
						}
						hidden_tooltip = {
							remove_character_modifier = the_dungeon
							add_character_modifier = {
								name = house_arrest
								duration = -1
							}
						}
						save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
					}
				}
			}
			if = {
				limit = { has_dlc = "The Old Gods" }
				hidden_tooltip = {
					spouse = {
						character_event = { id = 662 }
						opinion = {
							who = PREV
							modifier = opinion_my_abducted_spouse
							years = 100
						}
					}
				}
				ROOT = { add_consort = PREV }
				opinion = {
					who = ROOT
					modifier = opinion_forced_consort
				}
			}
			hidden_tooltip = {
				if = {
					limit = {
						is_female = yes
						ROOT = {
							OR = {
								culture_group = iron_isles_culture
								is_drowned_god_religion_trigger = yes
							}
						}
					}
					add_trait = salt_wife
					set_character_flag = no_court_invites
				}
				character_event = { id = raid_events.660 }
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}

	option = {
		name = "EVTOPTBraid_events.66" #Her
		trigger = {
			event_target:salt_wife_2 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { NOT = { age = 20 } }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { NOT = { age = 30 } }
			}
			modifier = {
				factor = 0
				event_target:salt_wife_2 = {
					NOT = { has_fair_trait_trigger = yes }
					age = 40
				}
			}
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { has_fair_trait_trigger = yes }
			}
			modifier = {
				factor = 0.33
				event_target:salt_wife_2 = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_2 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_2 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_2 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_2 = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_2 = { any_claim = { NOT = { lower_tier_than = ROOT } } }
			}
		}
		event_target:salt_wife_2 = {
			tooltip = { show_portrait = yes }
			if = {
				limit = { is_consort = yes }
				any_consort = { remove_consort = PREV }
			}
			if = {
				limit = { is_ruler = yes }
				hidden_tooltip = { #Universal on death/abdication event
					if = {
						limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
						set_character_flag = do_not_inherit_sword
					}
					set_character_flag = abdication
					character_event = { id = 45341 }
					clr_character_flag = abdication
					clr_character_flag = do_not_inherit_sword
					if = {
						limit = { is_merchant_republic = no }
						current_heir = { save_event_target_as = wealth_heir }
					}
					if = {
						limit = { is_merchant_republic = yes }
						family_palace = { current_heir = { save_event_target_as = wealth_heir } }
					}
					transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
				}
				abdicate = yes
			}
			if = {
				limit = { trait = slave }
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_stole_slave
					}
				}
				if = {
					limit = {
						ROOT = {
							is_ruler = yes
							OR = {
								can_buy_courtier_slaves_trigger = yes
								crownlaw_title = { has_law = slavery_3 } #Thralldom
							}
							NOT = { has_game_rule = { name = slavery value = off } }
						}
					}
					hidden_tooltip = {
						any_spouse = { remove_spouse = PREV }
						any_consort = { remove_consort = PREV }
						liege = {
							remove_opinion = { who = PREV modifier = opinion_my_slave }
							reverse_remove_opinion = { who = PREV modifier = opinion_my_owner }
						}
						opinion = { who = ROOT modifier = opinion_my_owner }
						reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					}
				}
				else = {
					tooltip = { remove_trait = slave }
					hidden_tooltip = { character_event = { id = slavery.0 } }
				}
			}
			ROOT = {
				if = {
					limit = { NOT = { has_dlc = "The Old Gods" } }
					if = {
						limit = { is_ruler = yes }
						reverse_banish = PREV
					}
					if = {
						limit = { is_ruler = no }
						liege = { reverse_banish = PREVPREV }
					}
					PREV = {
						imprison = yes
						if = {
							limit = { is_consort = yes }
							consort = { remove_consort = PREV }
						}
						hidden_tooltip = {
							remove_character_modifier = the_dungeon
							add_character_modifier = {
								name = house_arrest
								duration = -1
							}
						}
						save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
					}
				}
			}
			if = {
				limit = { has_dlc = "The Old Gods" }
				hidden_tooltip = {
					spouse = {
						character_event = { id = 662 }
						opinion = {
							who = PREV
							modifier = opinion_my_abducted_spouse
							years = 100
						}
					}
				}
				ROOT = { add_consort = PREV }
				opinion = {
					who = ROOT
					modifier = opinion_forced_consort
				}
			}
			hidden_tooltip = {
				if = {
					limit = {
						is_female = yes
						ROOT = {
							OR = {
								culture_group = iron_isles_culture
								is_drowned_god_religion_trigger = yes
							}
						}
					}
					add_trait = salt_wife
					set_character_flag = no_court_invites
				}
				character_event = { id = raid_events.660 }
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}
	option = {
		name = "EVTOPTCraid_events.66" #Her
		trigger = {
			event_target:salt_wife_3 = { always = yes }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { NOT = { age = 20 } }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { NOT = { age = 30 } }
			}
			modifier = {
				factor = 0
				event_target:salt_wife_3 = {
					NOT = { has_fair_trait_trigger = yes }
					age = 40
				}
			}
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { has_fair_trait_trigger = yes }
			}
			modifier = {
				factor = 0.33
				event_target:salt_wife_3 = { has_ugly_trait_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_3 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				event_target:salt_wife_3 = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_3 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:salt_wife_3 = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 3
				event_target:salt_wife_3 = { any_claim = { NOT = { lower_tier_than = ROOT } } }
			}
		}
		event_target:salt_wife_3 = {
			tooltip = { show_portrait = yes }
			if = {
				limit = { is_consort = yes }
				any_consort = { remove_consort = PREV }
			}
			if = {
				limit = { is_ruler = yes }
				hidden_tooltip = { #Universal on death/abdication event
					if = {
						limit = { any_artifact = { has_artifact_flag = valyrian_steel } }
						set_character_flag = do_not_inherit_sword
					}
					set_character_flag = abdication
					character_event = { id = 45341 }
					clr_character_flag = abdication
					clr_character_flag = do_not_inherit_sword
					if = {
						limit = { is_merchant_republic = no }
						current_heir = { save_event_target_as = wealth_heir }
					}
					if = {
						limit = { is_merchant_republic = yes }
						family_palace = { current_heir = { save_event_target_as = wealth_heir } }
					}
					transfer_scaled_wealth = { to = event_target:wealth_heir value = all }
				}
				abdicate = yes
			}
			if = {
				limit = { trait = slave }
				liege = {
					opinion = {
						who = ROOT
						modifier = opinion_stole_slave
					}
				}
				if = {
					limit = {
						ROOT = {
							is_ruler = yes
							OR = {
								can_buy_courtier_slaves_trigger = yes
								crownlaw_title = { has_law = slavery_3 } #Thralldom
							}
							NOT = { has_game_rule = { name = slavery value = off } }
						}
					}
					hidden_tooltip = {
						any_spouse = { remove_spouse = PREV }
						any_consort = { remove_consort = PREV }
						liege = {
							remove_opinion = { who = PREV modifier = opinion_my_slave }
							reverse_remove_opinion = { who = PREV modifier = opinion_my_owner }
						}
						opinion = { who = ROOT modifier = opinion_my_owner }
						reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					}
				}
				else = {
					tooltip = { remove_trait = slave }
					hidden_tooltip = { character_event = { id = slavery.0 } }
				}
			}
			ROOT = {
				if = {
					limit = { NOT = { has_dlc = "The Old Gods" } }
					if = {
						limit = { is_ruler = yes }
						reverse_banish = PREV
					}
					if = {
						limit = { is_ruler = no }
						liege = { reverse_banish = PREVPREV }
					}
					PREV = {
						imprison = yes
						if = {
							limit = { is_consort = yes }
							consort = { remove_consort = PREV }
						}
						hidden_tooltip = {
							remove_character_modifier = the_dungeon
							add_character_modifier = {
								name = house_arrest
								duration = -1
							}
						}
						save_persistent_event_target = { name = salt_wife_owner scope = ROOT }
					}
				}
			}
			if = {
				limit = { has_dlc = "The Old Gods" }
				hidden_tooltip = {
					spouse = {
						character_event = { id = 662 }
						opinion = {
							who = PREV
							modifier = opinion_my_abducted_spouse
							years = 100
						}
					}
				}
				ROOT = { add_consort = PREV }
				opinion = {
					who = ROOT
					modifier = opinion_forced_consort
				}
			}
			hidden_tooltip = {
				if = {
					limit = {
						is_female = yes
						ROOT = {
							OR = {
								culture_group = iron_isles_culture
								is_drowned_god_religion_trigger = yes
							}
						}
					}
					add_trait = salt_wife
					set_character_flag = no_court_invites
				}
				character_event = { id = raid_events.660 }
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}
	option = {
		name = "EVTOPTDraid_events.66" #No
		ai_chance = {
			factor = 70
			modifier = {
				factor = 5
				trait = homosexual
			}
		}
		hidden_tooltip = {
			event_target:salt_wife_1 = { clr_character_flag = salt_wife }
			event_target:salt_wife_2 = { clr_character_flag = salt_wife }
			event_target:salt_wife_3 = { clr_character_flag = salt_wife }
			clear_event_target = salt_wife_1
			clear_event_target = salt_wife_2
			clear_event_target = salt_wife_3
		}
	}
}
#Inform Salt wife
character_event = {
	id = raid_events.660
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes

	desc = {
		text = EVTDESCraid_events.660 #salt wife, NOW GENERIC
		# trigger = {
			# is_female = yes
			# FROM = { is_drowned_god_religion_trigger = yes }
		# }
	}
	# desc = {
		# text = EVTDESCraid_events.660B #generic
		# trigger = {
			# OR = {
				# is_female = no
				# FROM = { NOT = { is_drowned_god_religion_trigger = yes } }
			# }
		# }
	# }

	option = {
		name = "EVTOPTDraid_events.660" #No
		FROM = { FROM = { holder_scope = { character_event = { id = raid_events.661 } } } } #Inform Liege
		FROM = {
			if = {
				limit = {
					NOT = { liege = { character = PREV } }
					NOT = { is_primary_war_attacker = yes }
				}
				liege = { character_event = { id = raid_events.662 } } #Inform captor's liege
			}
		}
		hidden_tooltip = {
			any_child = {
				character_event = { id = 661 }
			}
			any_sibling = {
				character_event = { id = 661 }
			}
			father = {
				character_event = { id = 661 }
			}
			mother = {
				character_event = { id = 661 }
			}
		}
	}
}
#Inform Salt wife's liege
character_event = {
	id = raid_events.661
	picture = "GFX_evt_saltwife"

	# desc = {
		# text = EVTDESCraid_events.661 #salt wife
		# trigger = {
			# FROM = { is_female = yes }
			# FROMFROM = { is_drowned_god_religion_trigger = yes }
		# }
	# }
	desc = {
		text = EVTDESCraid_events.661B #generic
		# trigger = {
			# OR = {
				# FROM = { is_female = no }
				# FROMFROM = { NOT = { is_drowned_god_religion_trigger = yes } }
			# }
		# }
	}

	is_triggered_only = yes

	option = {
		name = "EVTOPTDraid_events.661" #No
		FROMFROM = { tooltip = { show_portrait = yes } }
		FROM = {
			if = {
				limit = { is_consort = no }
				remove_spouse = spouse
			}
		}
	}
}
#Inform Captor's liege
character_event = {
	id = raid_events.662
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes

	desc = {
		text = EVTDESCraid_events.662 #salt wife
		trigger = {
			FROM = { is_female = yes }
			FROMFROM = { is_drowned_god_religion_trigger = yes }
		}
	}
	desc = {
		text = EVTDESCraid_events.662B #generic
		trigger = {
			OR = {
				FROM = { is_female = no }
				FROMFROM = { NOT = { is_drowned_god_religion_trigger = yes } }
			}
		}
	}

	show_from_from = yes

	option = {
		name = "EVTOPTDraid_events.662" #No
		#tooltip = { FROM = { add_trait = salt_wife } }
		reverse_opinion = {
			modifier = opinion_sucessful_raid
			who = FROMFROM
			years = 5
		}
	}
}
###Take Sword### invasion version
character_event = {
	id = raid_events.67
	desc = "EVTDESCraid_events.67"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	min_age = 14
	only_capable = yes
	prisoner = no
	religion_group = drowned_god_group
	culture_group = iron_isles_culture

	trigger = {
		FROM = {
			holder_scope = {
				OR = {
					any_war = {
						#OR = {
							#using_cb = ironborn_raid
							using_cb = invasion_ironborn
						#}
						defender = { character = PREVPREV }
						attacker = {
							OR = {
								character = ROOT
								any_vassal = { character = ROOT }
								any_courtier = { character = ROOT }
							}
						}
					}
					any_liege = {
						any_war = {
							#OR = {
								#using_cb = ironborn_raid
								using_cb = invasion_ironborn
							#}
							defender = { character = PREVPREV }
							attacker = {
								OR = {
									character = ROOT
									any_vassal = { character = ROOT }
									any_courtier = { character = ROOT }
								}
							}
						}
					}
				}
				any_courtier = {
					at_location = ROOT
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_pilgrimage_trait_trigger = yes }
					any_artifact = {
						OR = {
							has_artifact_flag = valyrian_steel
							has_artifact_flag = valyrian_armour
						}
					}
				}
			}
		}
	}

	immediate = {
		FROM = {
			holder_scope = {
				random_courtier = {
					limit = {
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						any_artifact = {
							OR = {
								has_artifact_flag = valyrian_steel
								has_artifact_flag = valyrian_armour
							}
						}
					}
					add_trait = in_hiding #stop other siege events firing
					save_event_target_as = valyrian_steel_loot_target
				}
			}
		}
	}

	option = {
		name = {
			text = "EVTOPTAraid_events.67" #Take the sword
			trigger = { is_drowned_god_religion_trigger = yes }
		}
		name = {
			text = "EVTOPTAraid_events.67B" #Take the sword
			trigger = { NOT = { is_drowned_god_religion_trigger = yes } }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = skilled_warrior
			}
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 2
				is_genius_trigger = yes
			}
		}
		event_target:valyrian_steel_loot_target = {
			character_event = { id = raid_events.670 tooltip = TOOLTIPraid_events.670 }
		}
	}

	option = {
		name = "EVTOPTBraid_events.675" #Leave it
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				trait = master_warrior
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = poor_warrior
			}
			modifier = {
				factor = 2
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 2
				is_imbecile_trigger = yes
			}
		}
		prestige = -50
		hidden_tooltip = {
			event_target:valyrian_steel_loot_target = { remove_trait = in_hiding }
		}
	}
}
###Take Sword### looting version
character_event = {
	id = raid_events.675
	desc = "EVTDESCraid_events.67"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	min_age = 14
	only_capable = yes
	prisoner = no

	trigger = {
		is_allowed_to_loot = yes
		NOT = { has_landed_title = d_brotherhood }
		NOT = { has_severe_disability_trigger = yes }
		FROM = {
			holder_scope = {
				NAND = { #jogos nhai do not make war on eachother
					ROOT = { has_jogos_nhai_war_block_trigger = yes }
					has_jogos_nhai_war_block_trigger = yes
				}
				NOT = { is_liege_or_above = ROOT }
				OR = {
					NOT = { same_realm = ROOT }
					war_with = ROOT
					any_liege = { war_with = ROOT }
				}
				any_courtier = {
					at_location = ROOT
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_pilgrimage_trait_trigger = yes }
					any_artifact = {
						OR = {
							has_artifact_flag = valyrian_steel
							has_artifact_flag = valyrian_armour
						}
					}
				}
				NOT = { #Invasion event has priority
					OR = {
						any_war = {
							#OR = {
								#using_cb = ironborn_raid
								using_cb = invasion_ironborn
							#}
							defender = { character = PREVPREV }
							attacker = {
								OR = {
									character = ROOT
									any_vassal = { character = ROOT }
									any_courtier = { character = ROOT }
								}
							}
						}
						any_liege = {
							any_war = {
								#OR = {
									#using_cb = ironborn_raid
									using_cb = invasion_ironborn
								#}
								defender = { character = PREVPREV }
								attacker = {
									OR = {
										character = ROOT
										any_vassal = { character = ROOT }
										any_courtier = { character = ROOT }
									}
								}
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		FROM = {
			holder_scope = {
				random_courtier = {
					limit = {
						at_location = ROOT
						NOT = { is_inaccessible_trigger = yes }
						NOT = { has_pilgrimage_trait_trigger = yes }
						any_artifact = {
							OR = {
								has_artifact_flag = valyrian_steel
								has_artifact_flag = valyrian_armour
							}
						}
					}
					add_trait = in_hiding #stop other siege events firing
					save_event_target_as = valyrian_steel_loot_target
				}
			}
		}
	}

	option = {
		name = {
			text = "EVTOPTAraid_events.67" #Take the sword
			trigger = { is_drowned_god_religion_trigger = yes }
		}
		name = {
			text = "EVTOPTAraid_events.67B" #Take the sword
			trigger = { NOT = { is_drowned_god_religion_trigger = yes } }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = skilled_warrior
			}
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 2
				is_genius_trigger = yes
			}
		}
		event_target:valyrian_steel_loot_target = {
			character_event = { id = raid_events.670 tooltip = TOOLTIPraid_events.670 }
		}
	}

	option = {
		name = "EVTOPTBraid_events.675" #Leave it
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				trait = master_warrior
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = poor_warrior
			}
			modifier = {
				factor = 2
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 1.5
				is_dumb_trigger = yes
			}
			modifier = {
				factor = 2
				is_imbecile_trigger = yes
			}
		}
		prestige = -50
		hidden_tooltip = {
			event_target:valyrian_steel_loot_target = { remove_trait = in_hiding }
		}
	}
}
#Inform sword owner, duel?
character_event = {
	id = raid_events.670
	desc = "EVTDESCraid_events.670"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	immediate = {
		remove_trait = in_hiding
		if = { #find sword for loc
			limit = { ai = no }
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				save_event_target_as = valyrian_steel_sword
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.670" #Fight!
		trigger = {
			age = 14
			NOT = { has_severe_disability_trigger = yes }
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				is_female = yes
				NOT = {
					OR = {
						trait = brave
						is_strong_trigger = yes
						is_agile_trigger = yes
						trait = skilled_warrior
						trait = master_warrior
					}
				}
			}
			modifier = {
				factor = 5
				trait = skilled_warrior
			}
			modifier = {
				factor = 2
				is_strong_trigger = yes
			}
			modifier = {
				factor = 2
				is_agile_trigger = yes
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 1.5
				is_smart_trigger = yes
			}
			modifier = {
				factor = 2
				is_genius_trigger = yes
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						OR = {
							trait = trained_warrior
							trait = skilled_warrior
							trait = master_warrior
						}
					}
				}
			}
			modifier = {
				factor = 2
				FROM = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 2
				FROM = { is_lazy_trigger = yes }
			}
			modifier = {
				factor = 2
				FROM = { trait = craven }
			}
		}
		set_character_flag = reaving_sword_fight_target
		save_persistent_event_target = { name = reaving_sword_duel scope = FROM } #so that sword is properly transferred if they die in the duel
		FROM = { character_event = { id = raid_events.672 tooltip = TOOLTIPraid_events.672 } }
	}

	option = {
		name = "EVTOPTBraid_events.670" #Surrender/Flee
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				trait = master_warrior
			}
			modifier = {
				factor = 2
				NOT = {
					OR = {
						trait = trained_warrior
						trait = skilled_warrior
						trait = master_warrior
					}
				}
			}
			modifier = {
				factor = 2
				is_weak_trigger = yes
			}
			modifier = {
				factor = 2
				is_lazy_trigger = yes
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				FROM = { trait = skilled_warrior }
			}
			modifier = {
				factor = 3
				FROM = { trait = master_warrior }
			}
			modifier = {
				factor = 2
				FROM = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 2
				FROM = { is_agile_trigger = yes }
			}
			modifier = {
				factor = 2
				FROM = { trait = brave }
			}
			modifier = {
				factor = 1.5
				FROM = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 2
				FROM = { is_genius_trigger = yes }
			}
		}
		prestige = -50
		tooltip = {
			any_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				transfer_artifact = { from = ROOT to = FROM }
			}
		}
		FROM = { character_event = { id = raid_events.671 tooltip = TOOLTIPraid_events.671 } }
		hidden_tooltip = {
			if = {
				limit = {
					prisoner = yes
					NOT = { host = { character = FROM } }
				}
				prisoner = no
			}
		}
		tooltip = { imprison = FROM }
	}
}
character_event = { #Sword owner surrenders
	id = raid_events.671
	desc = "EVTDESCraid_events.671"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	immediate = {
		if = { #find sword for loc
			limit = { ai = no }
			FROM = {
				random_artifact = {
					limit = {
						OR = {
							has_artifact_flag = valyrian_steel
							has_artifact_flag = valyrian_armour
						}
					}
					save_event_target_as = valyrian_steel_sword
				}
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.671"
		if = {
			limit = { is_ruler = yes }
			FROM = { imprison = ROOT }
		}
		if = {
			limit = { is_ruler = no }
			liege = { FROM = { imprison = PREV } }
		}
		FROM = {
			set_character_flag = captured_in_battle
			#hidden_tooltip = { add_trait = held_important_artifact }
			any_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				set_artifact_flag = stolen_from_@PREV
				#set_artifact_flag = previous_holder_@PREV
				transfer_artifact = { from = PREV to = ROOT }
				ROOT = { prestige = 50 }
			}
			opinion = {
				who = ROOT
				modifier = opinion_stole_sword
				years = 100
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOT = { liege = { character = PREV } }
					NOT = { is_primary_war_attacker = yes }
				}
				liege = { character_event = { id = raid_events.676 } } #Inform captor's liege
			}
		}
	}
}
character_event = { #Inform sword owner fights
	id = raid_events.672
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	desc = {
		text = EVTDESCraid_events.672
		trigger = {
			is_drowned_god_religion_trigger = yes
		}
	}
	desc = {
		text = EVTDESCraid_events.672B
		trigger = {
			NOT = { is_drowned_god_religion_trigger = yes }
		}
	}

	immediate = {
		if = { #find sword for loc
			limit = { ai = no }
			FROM = {
				random_artifact = {
					limit = {
						OR = {
							has_artifact_flag = valyrian_steel
							has_artifact_flag = valyrian_armour
						}
					}
					save_event_target_as = valyrian_steel_sword
				}
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.672" #
		set_character_flag = reaving_sword_fight
		hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.0 } } } }
	}
}
character_event = { #Sword owner defeated
	id = raid_events.673
	desc = "EVTDESCraid_events.673"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes
	show_from_from = yes

	immediate = {
		if = { #find sword for loc
			limit = { ai = no }
			FROMFROM = {
				random_artifact = {
					limit = {
						OR = {
							has_artifact_flag = valyrian_steel
							has_artifact_flag = valyrian_armour
						}
					}
					save_event_target_as = valyrian_steel_sword
					break = yes
				}
			}
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
					previous_artifact_owner = { character = FROMFROM }
				}
				save_event_target_as = valyrian_steel_sword
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.673"
		FROMFROM = {
			#hidden_tooltip = { add_trait = held_important_artifact }
			any_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				set_artifact_flag = stolen_from_@PREV
				#set_artifact_flag = previous_holder_@PREV
				transfer_artifact = { from = PREV to = ROOT }
				ROOT = { prestige = 50 }
			}
			if = {
				limit = { is_alive = yes }
				opinion = {
					who = ROOT
					modifier = opinion_stole_sword
					years = 100
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					NOT = { liege = { character = PREV } }
					NOT = { is_primary_war_attacker = yes }
				}
				liege = { character_event = { id = raid_events.676 } } #Inform captor's liege
			}
			FROMFROM = { character_event = { id = raid_events.674 } }
		}
	}
}
#Inform duel and sword lost
character_event = {
	id = raid_events.674
	desc = "EVTDESCraid_events.674"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	immediate = {
		if = { #find sword for loc
			limit = { ai = no }
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				save_event_target_as = valyrian_steel_sword
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.674"
		prestige = -50
		tooltip = {
			any_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				transfer_artifact = { from = ROOT to = FROM }
			}
		}
		set_character_flag = captured_in_battle
		FROM = {
			if = {
				limit = { is_ruler = yes }
				ROOT = { imprison = PREV }
			}
			if = {
				limit = { is_ruler = no }
				liege = { ROOT = { imprison = PREV } }
			}
		}
	}
}
#Inform Captor's liege
character_event = {
	id = raid_events.676
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	desc = {
		text = EVTDESCraid_events.676
		trigger = {
			FROMFROM = { is_drowned_god_religion_trigger = yes }
		}
	}
	desc = {
		text = EVTDESCraid_events.676B
		trigger = {
			FROMFROM = { NOT = { is_drowned_god_religion_trigger = yes } }
		}
	}

	option = {
		name = "EVTOPTAraid_events.67" #No
		tooltip = { FROMFROM = { remove_trait = valyrian_steel } }
		reverse_opinion = {
			modifier = opinion_sucessful_raid
			who = FROM
			years = 5
		}
	}
}
#Inform sword owner duel won
character_event = {
	id = raid_events.677
	desc = "EVTDESCraid_events.677"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	immediate = {
		if = { #find sword for loc
			limit = { ai = no }
			random_artifact = {
				limit = {
					OR = {
						has_artifact_flag = valyrian_steel
						has_artifact_flag = valyrian_armour
					}
				}
				save_event_target_as = valyrian_steel_sword
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.677" #No
		if = {
			limit = { prisoner = yes }
			prisoner = no
			clr_character_flag = captured_in_battle
		}
	}
}
###Inform Liege of raid outcomes
#Village Great Success
character_event = {
	id = raid_events.90
	desc = "EVTDESCraid_events.90"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.9" #No
		prestige = 20
		piety = 10
		reverse_opinion = {
			modifier = opinion_sucessful_raid
			who = FROM
			years = 5
		}
	}
}
#Mild Success
character_event = {
	id = raid_events.91
	desc = "EVTDESCraid_events.91"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.10"
		prestige = 10
		piety = 5
		reverse_opinion = {
			modifier = opinion_sucessful_raid
			who = FROM
			years = 5
		}
	}
}
#Mild Failiure
character_event = {
	id = raid_events.92
	desc = "EVTDESCraid_events.92"
	picture = "GFX_evt_reaving_lose_raid"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.11"
		prestige = -10
		piety = -5
		reverse_opinion = {
			modifier = opinion_failed_raid
			who = FROM
			years = 5
		}
	}
}
#Crushing defeat
character_event = {
	id = raid_events.93
	desc = "EVTDESCraid_events.93"
	picture = "GFX_evt_reaving_lose_raid"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.12"
		prestige = -20
		piety = -10
		reverse_opinion = {
			modifier = opinion_failed_raid
			who = FROM
			years = 5
		}
	}
}
#Fleet raid Great Success
character_event = {
	id = raid_events.94
	desc = "EVTDESCraid_events.94"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.33"
		prestige = 20
		piety = 10
		reverse_opinion = {
			modifier = opinion_sucessful_raid
			who = FROM
			years = 5
		}
	}
}
#Fleet raid mild Success
character_event = {
	id = raid_events.95
	desc = "EVTDESCraid_events.95"
	picture = "GFX_evt_reavingvillageraid"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.34"
		prestige = 10
		piety = 5
		reverse_opinion = {
			modifier = opinion_sucessful_raid
			who = FROM
			years = 5
		}
	}
}
#Fleet raid mild failiure
character_event = {
	id = raid_events.96
	desc = "EVTDESCraid_events.96"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.35"
		prestige = -10
		piety = -5
		reverse_opinion = {
			modifier = opinion_failed_raid
			who = FROM
			years = 5
		}
	}
}
#Fleet raid great failiure
character_event = {
	id = raid_events.97
	desc = "EVTDESCraid_events.97"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	trigger = { is_drowned_god_religion_trigger = yes }

	option = {
		name = "EVTOPTAraid_events.97"
		prestige = -20
		piety = -10
		reverse_opinion = {
			modifier = opinion_failed_raid
			who = FROM
			years = 5
		}
	}
}
#Pillaging lands of the King during a mega war earns his wroth
character_event = {
	id = raid_events.98
	desc = "EVTDESCraid_events.98"
	picture = GFX_evt_vikings_arriving_oldgods

	only_playable = yes

	trigger = {
		is_allowed_to_loot = yes
		civil_war = {
			tier = EMPEROR
			is_alive = yes
			NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_looted } }
			OR = { #A looting liege doesn't care
				NOT = { is_allowed_to_loot = yes }
				NOT = { is_vassal_or_below = ROOT }
			}
			any_independent_ruler = {
				NOT = { tier = EMPEROR }
				demesne_size = 1
				has_opinion_modifier = { who = PREV modifier = opinion_de_facto_liege }
				OR = {
					has_character_flag = neutral
					has_character_flag = supporting_king
				}
				has_opinion_modifier = { who = ROOT modifier = opinion_looted }
			}
		}
	}

	mean_time_to_happen = {
		days = 20
	}

	immediate = {
		civil_war = {
			limit = {
				tier = EMPEROR
				is_alive = yes
				NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_looted } }
				OR = { #A looting liege doesn't care
					NOT = { is_allowed_to_loot = yes }
					NOT = { is_vassal_or_below = ROOT }
				}
				any_independent_ruler = {
					NOT = { tier = EMPEROR }
					demesne_size = 1
					has_opinion_modifier = { who = PREV modifier = opinion_de_facto_liege }
					OR = {
						has_character_flag = neutral
						has_character_flag = supporting_king
					}
					has_opinion_modifier = { who = ROOT modifier = opinion_looted }
				}
			}
			save_event_target_as = raiding_target
		}
	}

	option = {
		name = {
			text = "EVTOPTAraid_events.98"
			trigger = { is_drowned_god_religion_trigger = yes }
		}
		name = {
			text = "EVTOPTAraid_events.98B"
			trigger = { NOT = { is_drowned_god_religion_trigger = yes } }
		}
		event_target:raiding_target = {
			opinion = { who = ROOT modifier = opinion_looted }
			hidden_tooltip = { #anti-looter war prompt
				character_event = { id = 45416 days = 100 random = 50 }
			}
		}
	}
}
#Lost vengeance war, return all salt wives and swords (also used in Anti-piracy CB)
character_event = {
	id = raid_events.99
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	desc = {
		text = EVTDESCraid_events.99
		trigger = { is_drowned_god_religion_trigger = yes }
	}
	desc = {
		text = EVTDESCraid_events.99B
		trigger = { NOT = { is_drowned_god_religion_trigger = yes } }
	}

	option = {
		name = "EVTOPTAraid_events.99"
		custom_tooltip = { text = TOOLTIPlootvengeancereturnloot }
		hidden_tooltip = {
			any_realm_character = { #Return Salt Wives and Slaves
				limit = {
					OR = {
						is_consort = yes
						trait = slave
					}
					OR = {
						any_dynasty_member = {
							is_ruler = yes
							OR = {
								character = FROM
								any_liege = { character = FROM }
							}
						}
						AND = {
							culture = FROM
							religion = FROM
						}
					}
				}
				character_event = { id = raid_events.100 }
			}
			any_courtier = { #Release prisoners
				limit = {
					prisoner = yes
					host = { character = ROOT }
					OR = {
						same_realm = FROM
						any_dynasty_member = {
							is_ruler = yes
							OR = {
								character = FROM
								any_liege = { character = FROM }
							}
						}
						AND = {
							culture = FROM
							religion = FROM
						}
					}
				}
				character_event = { id = raid_events.100 }
			}
			#Return Artifacts
			if = {
				limit = {
					any_artifact = { quality >= 3 }
					FROM = {
						any_realm_character = {
							OR = {
								ROOT = {
									any_artifact = {
										quality >= 3
										OR = {
											has_artifact_flag = stolen_from_@PREVPREV
											has_artifact_flag = title_heirloom_@PREVPREV
											AND = { #family heirloom
												owner = { NOT = { dynasty = PREVPREVPREV } }
												NOT = { has_artifact_flag = crown_jewel } #reserved for title claims
												any_artifact_owner = {
													dynasty = PREVPREVPREV
													is_lowborn = no
													#PREV = { has_artifact_flag = heirloom_@PREV }
												}
											}
										}
									}
								}
							}
						}
					}
				}
				set_character_flag = sword_event
				character_event = { id = raid_events.103 }
			}
			any_realm_character = {
				limit = {
					NOT = { has_character_flag = sword_event }
					any_artifact = { quality >= 3 }
					FROM = {
						any_realm_character = {
							OR = {
								PREVPREV = {
									any_artifact = {
										quality >= 3
										OR = {
											has_artifact_flag = stolen_from_@PREVPREV
											has_artifact_flag = title_heirloom_@PREVPREV
											AND = { #family heirloom
												owner = { NOT = { dynasty = PREVPREVPREV } }
												NOT = { has_artifact_flag = crown_jewel } #reserved for title claims
												any_artifact_owner = {
													dynasty = PREVPREVPREV
													is_lowborn = no
													#PREV = { has_artifact_flag = heirloom_@PREV }
												}
											}
										}
									}
								}
							}
						}
					}
				}
				set_character_flag = sword_event
				character_event = { id = raid_events.103 }
			}
		}
	}
}
#Inform Captive they are freed
character_event = {
	id = raid_events.100
	desc = "EVTDESCraid_events.100"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.100"
		prisoner = no
		if = {
			limit = { trait = salt_wife }
			remove_trait = salt_wife
			clr_character_flag = no_court_invites
		}
		if = {
			limit = {
				is_consort = yes
				NOT = { trait = slave }
			}
			consort = {
				character_event = { id = raid_events.101 days = 1 }
				remove_consort = ROOT
			}
		}
		if = {
			limit = { trait = slave }
			slave_owner = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
				character_event = { id = raid_events.101 days = 1 }
			}
			character_event = { id = slavery.0 }
		}

		random_dynasty_member = {
			limit = {
				is_ruler = yes
				OR = {
					character = FROMFROM
					is_liege_or_above = FROMFROM
				}
			}
			ROOT = { move_character = PREV }
			character_event = { id = raid_events.102 }
			break = yes
		}
		if = {
			limit = {
				NOT = { is_liege_or_above = FROMFROM }
			}
			ROOT = { move_character = FROMFROM }
			set_character_flag = lowborn
		}
	}
}
#Inform captor
character_event = {
	id = raid_events.101
	desc = "EVTDESCraid_events.101"
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.101"
		if = {
			limit = { FROM = { NOT = { has_character_flag = lowborn } } }
			if = {
				limit = { FROM = { liege = { tier = BARON } } }
				wealth = -15
				prestige = -15
			}
			if = {
				limit = { FROM = { liege = { tier = COUNT } } }
				wealth = -30
				prestige = -30
			}
			if = {
				limit = { FROM = { liege = { tier = DUKE } } }
				wealth = -60
				prestige = -60
			}
			if = {
				limit = { FROM = { liege = { tier = KING } } }
				wealth = -100
				prestige = -100
			}
			if = {
				limit = { FROM = { liege = { tier = EMPEROR } } }
				wealth = -150
				prestige = -150
			}
		}
		FROM = { clr_character_flag = lowborn }
	}
}
#Inform relative
character_event = {
	id = raid_events.102
	desc = "EVTDESCraid_events.102"
	picture = "GFX_evt_saltwife"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.102"
		if = {
			limit = { tier = BARON }
			wealth = 15
		}
		if = {
			limit = { tier = COUNT }
			wealth = 30
		}
		if = {
			limit = { tier = DUKE }
			wealth = 60
		}
		if = {
			limit = { tier = KING }
			wealth = 100
		}
		if = {
			limit = { tier = EMPEROR }
			wealth = 150
		}
	}
}
#Inform Lost Sword
character_event = {
	id = raid_events.103
	desc = "EVTDESCraid_events.103"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	immediate = {
		any_artifact = {
			limit = {
				quality >= 3
			}
			save_event_target_as = check_sword
			FROMFROM = {
				random_realm_character = {
					limit = {
						OR = {
							event_target:check_sword = {
								OR = {
									has_artifact_flag = stolen_from_@PREV
									has_artifact_flag = title_heirloom_@PREV
									AND = { #family heirloom
										owner = { NOT = { dynasty = PREVPREV } }
										NOT = { has_artifact_flag = crown_jewel } #reserved for title claims
										any_artifact_owner = {
											dynasty = PREVPREV
											is_lowborn = no
											#PREV = { has_artifact_flag = heirloom_@PREV }
										}
									}
								}
							}
						}
					}
					event_target:check_sword = {
						set_artifact_flag = return_artifact
						set_artifact_flag = return_artifact_to_@PREV
					}
				}
			}
		}
	}

	option = {
		name = "EVTOPTAraid_events.103"
		prestige = -100
		wealth = -100
		clr_character_flag = sword_event
		FROMFROM = {
			any_realm_character = {
				limit = {
					ROOT = {
						any_artifact = {
							has_artifact_flag = return_artifact
							has_artifact_flag = return_artifact_to_@PREVPREV
						}
					}
				}
				ROOT = {
					#hidden_tooltip = { add_trait = held_important_artifact }
					any_artifact = {
						limit = {
							has_artifact_flag = return_artifact
							has_artifact_flag = return_artifact_to_@PREVPREV
						}
						#set_artifact_flag = previous_holder_@PREV
						set_artifact_flag = stolen_from_@PREV
						clr_artifact_flag = stolen_from_@PREVPREV
						transfer_artifact = { from = PREV to = PREVPREV }
						clr_artifact_flag = return_artifact
						clr_artifact_flag = return_artifact_to_@PREVPREV
					}
				}
				hidden_tooltip = { character_event = { id = raid_events.104 } }
			}
		}
	}
}
#Inform Sword Returned
character_event = {
	id = raid_events.104
	desc = "EVTDESCraid_events.104"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.104"
		prestige = 100
		wealth = 100
		#hidden_tooltip = { character_event = { id = valyrian_steel.999 days = 1 } }#sword ownership check
	}
}
#Post invasion recompense, invaded character set to FROM
character_event = {
	id = raid_events.105
	desc = "EVTDESCraid_events.105"
	picture = "GFX_evt_valyrian_steel"

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = { character_event = { id = raid_events.99 } }
	}

	option = {
		name = "EVTOPTAraid_events.105"
	}
}
##Seek Redress from Raider's Top Liege
letter_event = {
	id = raid_events.151
	desc = "EVTDESCraid_events.151"

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.151" #Yes
		ai_chance = {
			factor = 50

			modifier = { #Never accept
				factor = 0
				is_allowed_to_loot = yes
				relative_power = { who = FROMFROM power = 0.75 }
				NOT = { opinion = { who = FROMFROM value = 25 } }
				NOT = { is_allied_with = FROMFROM }
				NOT = { trait = craven }
			}

			modifier = {
				factor = 4
				NOT = { relative_power = { who = FROMFROM power = 0.5 } }
			}
			modifier = {
				factor = 2
				NOT = { relative_power = { who = FROMFROM power = 1 } }
			}
			modifier = {
				factor = 0.5
				relative_power = { who = FROMFROM power = 2 }
			}
			modifier = {
				factor = 0.25
				relative_power = { who = FROMFROM power = 4 }
			}
			modifier = {
				factor = 2
				NOT = { trait = dragon_rider }
				FROMFROM = { trait = dragon_rider }
			}
			modifier = {
				factor = 0.5
				trait = dragon_rider
				FROMFROM = { NOT = { trait = dragon_rider } }
			}
			modifier = {
				factor = 2
				NOT = { is_allowed_to_loot = yes }
			}
			modifier = {
				factor = 0.5
				FROMFROM = { is_allowed_to_loot = yes }	 #hypocrite
			}

			modifier = {
				factor = 2
				is_close_relative = FROMFROM
			}
			modifier = {
				factor = 2
				is_allied_with = FROMFROM
			}
			modifier = {
				factor = 1.5
				has_non_aggression_pact_with = FROMFROM
			}
			modifier = {
				factor = 0.25
				is_rival = FROMFROM
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 100 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 80 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 60 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 40 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 20 }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROMFROM value = -19 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROMFROM value = -39 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROMFROM value = -59 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROMFROM value = -79 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROMFROM value = -99 } }
			}

			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
		}
		any_realm_lord = {
			limit = {
				reverse_has_opinion_modifier = { who = FROMFROM modifier = opinion_looted }
				NOT = { has_opinion_modifier  = { who = FROMFROM modifier = forbidden_raid_target } }
			}
			opinion = {
				who = ROOT
				modifier = opinion_forbid_raiding
				months = 48
			}
			letter_event = { id = raid_events.153 tooltip = TOOLTIPraid_events.153 days = 1 }
			tooltip = {
				transfer_scaled_wealth = {
					to = FROMFROM
					value = 0.5
					min = 10
				}
			}
		}
	}
	option = {
		name = "EVTOPTBraid_events.151" #No
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				diplomacy = 12
				prestige = 500
			}
			modifier = {
				factor = 0
				intrigue = 12
				prestige = 500
			}
		}
		FROM = {
			FROM = {
				opinion = { who = ROOT modifier = opinion_looted }
				letter_event = { id = raid_events.152 tooltip = TOOLTIPraid_events.152 }
				hidden_tooltip = { character_event = { id = 45416 days = 100 random = 50 } } #Ai counter measure?
			}
		}
	}
	option = {
		name = "EVTOPTCraid_events.151" #No, diplomacy
		trigger = {
			diplomacy = 12
		}
		ai_chance = {
			factor = 150
			modifier = {
				factor = 0.1
				prestige < 200
			}
		}
		tooltip_info = diplomacy
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -75
		}
		if = {
			limit = { tier = DUKE }
			prestige = -50
		}
		if = {
			limit = { tier = COUNT }
			prestige = -25
		}
		FROM = {
			FROM = {
				letter_event = { id = raid_events.1521 tooltip = TOOLTIPraid_events.1521 }
			}
		}
		hidden_tooltip = {
			opinion = { who = FROMFROM modifier = forbidden_raid_target months = 24 } #forbid further raids
			any_realm_lord = {
				limit = {
					NOT = { tier = BARON }
					is_allowed_to_loot = yes
					NOT = { has_opinion_modifier  = { who = FROMFROM modifier = forbidden_raid_target } }
				}
				opinion = { who = FROMFROM modifier = forbidden_raid_target months = 24 } #forbid further raids
			}
		}
	}
	option = {
		name = "EVTOPTDraid_events.151" #No, intrigue
		trigger = {
			intrigue = 12
		}
		ai_chance = {
			factor = 150
			modifier = {
				factor = 0.1
				prestige < 200
			}
		}
		tooltip_info = intrigue
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -75
		}
		if = {
			limit = { tier = DUKE }
			prestige = -50
		}
		if = {
			limit = { tier = COUNT }
			prestige = -25
		}
		FROM = {
			FROM = {
				letter_event = { id = raid_events.1522 tooltip = TOOLTIPraid_events.1522 }
			}
		}
	}
}
letter_event = { #Inform reject
	id = raid_events.152
	desc = "EVTDESCraid_events.152"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.152"
	}
}
letter_event = { #Inform diplomatically reject
	id = raid_events.1521
	desc = "EVTDESCraid_events.1521"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.1521"
		if = {
			limit = { FROM = { higher_tier_than = DUKE } }
			prestige = 75
		}
		if = {
			limit = { FROM = { tier = DUKE } }
			prestige = 50
		}
		if = {
			limit = { FROM = { tier = COUNT } }
			prestige = 25
		}
	}
}
letter_event = { #Inform intrigue reject
	id = raid_events.1522
	desc = "EVTDESCraid_events.1522"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.1522"
	}
}
letter_event = { #Vassal receives demand to stop raiding
	id = raid_events.153
	desc = "EVTDESCraid_events.153"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.153" #Yes
		ai_chance = {
			factor = 75

			modifier = {
				factor = 4
				NOT = { relative_power = { who = FROM power = 0.5 } }
			}
			modifier = {
				factor = 2
				NOT = { relative_power = { who = FROM power = 1 } }
			}
			modifier = {
				factor = 0.5
				relative_power = { who = FROM power = 2 }
			}
			modifier = {
				factor = 0.25
				relative_power = { who = FROM power = 4 }
			}

			modifier = {
				factor = 2
				NOT = { trait = dragon_rider }
				FROM = { trait = dragon_rider }
			}
			modifier = {
				factor = 0.5
				trait = dragon_rider
				FROM = { NOT = { trait = dragon_rider } }
			}
			modifier = {
				factor = 0.5
				FROM = { is_allowed_to_loot = yes }	 #hypocrite
			}

			modifier = {
				factor = 2
				is_close_relative = FROM
			}
			modifier = {
				factor = 2
				is_allied_with = FROM
			}
			modifier = {
				factor = 1.5
				has_non_aggression_pact_with = FROM
			}
			modifier = {
				factor = 0.25
				is_rival = FROM
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 80 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -99 } }
			}

			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
		}
		tooltip = {
			transfer_scaled_wealth = {
				to = FROMFROMFROM
				value = 0.5
				min = 10
			}
		}
		hidden_tooltip = {
			FROM = { letter_event = { id = raid_events.155 } }
		}
		FROMFROMFROM = {
			letter_event = { id = raid_events.154 tooltip = TOOLTIPraid_events.154 }
			hidden_tooltip = { reverse_opinion = { who = ROOT modifier = forbidden_raid_target months = 120 } }#forbid further raids
		}
		prestige = -100
	}
	option = {
		name = "EVTOPTBraid_events.153" #No!
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				tier = BARON
			}
			modifier = {
				factor = 0
				NOT = { relative_power = { who = FROM power = 0.25 } }
			}
			modifier = {
				factor = 0
				diplomacy = 12
				prestige = 500
			}
			modifier = {
				factor = 0
				intrigue = 12
				prestige = 500
			}
		}
		FROM = {
			opinion = { who = ROOT modifier = opinion_traitor }
			if = {
				limit = { ROOT = { vassal_of = PREV } }
				reverse_war = {
					target = ROOT
					casus_belli = overthrow_ruler
				}
			}
			if = {
				limit = { NOT = { ROOT = { vassal_of = PREV } } }
				ROOT = { set_defacto_liege = PREV }
				reverse_war = {
					target = ROOT
					casus_belli = overthrow_ruler
				}
			}
			character_event = { id = 45431 } #other vassals may join
		}
		hidden_tooltip = {
			FROM = { letter_event = { id = raid_events.157 } }
			FROMFROMFROM = {
				letter_event = { id = raid_events.156 }
			}
		}
	}
	option = {
		name = "EVTOPTCraid_events.153" #No!, diplomacy
		trigger = {
			diplomacy = 12
		}
		ai_chance = {
			factor = 125
			modifier = {
				factor = 0.5
				prestige < 200
			}
		}
		tooltip_info = diplomacy
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -75
		}
		if = {
			limit = { tier = DUKE }
			prestige = -50
		}
		if = {
			limit = { lower_tier_than = DUKE }
			prestige = -25
		}
		FROMFROMFROM = {
			ROOT_FROM = {
				letter_event = { id = raid_events.158 tooltip = TOOLTIPraid_events.158 }
			}
		}
		hidden_tooltip = {
			reverse_opinion = { who = ROOT modifier = forbidden_raid_target months = 24 } #forbid further raids
			FROMFROMFROM = {
				letter_event = { id = raid_events.159 }
			}
		}
	}
	option = {
		name = "EVTOPTDraid_events.153" #No!, intrigue
		trigger = {
			intrigue = 12
		}
		ai_chance = {
			factor = 125
			modifier = {
				factor = 0.5
				prestige < 200
			}
		}
		tooltip_info = intrigue
		if = {
			limit = { higher_tier_than = DUKE }
			prestige = -75
		}
		if = {
			limit = { tier = DUKE }
			prestige = -50
		}
		if = {
			limit = { lower_tier_than = DUKE }
			prestige = -25
		}
		FROMFROMFROM = {
			ROOT_FROM = {
				letter_event = { id = raid_events.1591 tooltip = TOOLTIPraid_events.1591 }
			}
		}
		hidden_tooltip = {
			FROMFROMFROM = {
				letter_event = { id = raid_events.1592 }
			}
		}
	}
}
letter_event = { #Inform ROOT accept
	id = raid_events.154
	desc = "EVTDESCraid_events.154"

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.154"
		FROM = {
			custom_tooltip = { text = TOOLTIPlootvengeancereturnloot }
			show_portrait = yes
			hidden_tooltip = {
				character_event = { id = raid_events.99 }
			}
			transfer_scaled_wealth = {
				to = ROOT
				value = 0.5
				min = 10
			}
		}
	}
}
letter_event = { #Inform liege accept
	id = raid_events.155
	desc = "EVTDESCraid_events.155"

	is_triggered_only = yes

	option = {
		name = OK
		FROMFROMFROM = {
			show_portrait = yes
			FROM = {
				opinion = {
					who = ROOT
					modifier = opinion_stopped_raiding
					months = 24
				}
			}
		}
	}
}
letter_event = { #Inform ROOT reject
	id = raid_events.156
	desc = "EVTDESCraid_events.156"

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.156"
		FROM = { show_portrait = yes }
	}
}
letter_event = { #Inform liege reject
	id = raid_events.157
	desc = "EVTDESCraid_events.157"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.157"
		FROMFROMFROM = {
			show_portrait = yes
			FROM = {
				opinion = {
					who = ROOT
					modifier = opinion_failed_to_stop_raiding
					months = 24
				}
			}
		}
	}
}
letter_event = { #Inform ROOT reject, diplomacy
	id = raid_events.158
	desc = "EVTDESCraid_events.158"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.158"
		FROMFROM = { show_portrait = yes }
		if = {
			limit = { FROM = { higher_tier_than = DUKE } }
			prestige = 75
		}
		if = {
			limit = { FROM = { tier = DUKE } }
			prestige = 50
		}
		if = {
			limit = { FROM = { tier = COUNT } }
			prestige = 25
		}
	}
}
letter_event = { #Inform liege reject, diplomacy
	id = raid_events.159
	desc = "EVTDESCraid_events.159"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.159"
		FROMFROMFROM = { show_portrait = yes }
	}
}
letter_event = { #Inform ROOT reject, intrigue
	id = raid_events.1591
	desc = "EVTDESCraid_events.1591"

	is_triggered_only = yes
	show_from_from = yes

	option = {
		name = "EVTOPTAraid_events.1591"
		FROM = { show_portrait = yes }
	}
}
letter_event = { #Inform liege reject, intrigue
	id = raid_events.1592
	desc = "EVTDESCraid_events.1592"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAraid_events.1592"
		FROMFROMFROM = { show_portrait = yes }
	}
}
#Take flag ship?
character_event = {
	id = raid_events.160
	desc = EVTDESCraid_events.160
	picture = "GFX_evt_reaving3"

	is_triggered_only = yes
	hide_from = yes

	immediate = {
		if = {
			limit = {
				ai = no
			}
			find_ship_name_effect = yes
		}
	}

	option = {
		name = "EVTOPTAraid_events.160"
		set_character_flag = flagship_on_reaving
		random_artifact = {
			limit = {
				has_artifact_flag = flagship
				is_artifact_equipped = yes
			}
			if = {
				limit = { artifact_type = enormous_flagship }
				ROOT = { change_variable = { which = "reaving_party_skill" value = 5 } }
			}
			if = {
				limit = { artifact_type = regular_flagship }
				ROOT = { change_variable = { which = "reaving_party_skill" value = 3 } }
			}
			if = {
				limit = { artifact_type = small_flagship }
				ROOT = { change_variable = { which = "reaving_party_skill" value = 1 } }
			}
		}
	}
	option = {
		name = "EVTOPTBraid_events.160"
		clr_character_flag = flagship_on_reaving
	}
}
#Flagship lost
character_event = {
	id = raid_events.161
	desc =  "EVTDESCraid_events.161"
	picture = "GFX_evt_reaving_ship_lost"

	is_triggered_only = yes
	only_rulers = yes

	trigger = {
		OR = {
			is_at_sea = yes
			has_character_flag = flagship_on_reaving
		}
		any_artifact = {
			has_artifact_flag = flagship
			is_artifact_equipped = yes
		}
	}

	immediate = {
		find_ship_name_effect = yes
	}

	option = {
		name = "EVTOPTAraid_events.161"
		clr_character_flag = flagship_on_reaving
		random_artifact = {
			limit = {
				has_artifact_flag = flagship
				is_artifact_equipped = yes
			}
			if = {
				limit = { artifact_type = enormous_flagship }
				ROOT = { prestige = -100 }
			}
			if = {
				limit = { artifact_type = regular_flagship }
				ROOT = { prestige = -50 }
			}
			if = {
				limit = { artifact_type = small_flagship }
				ROOT = { prestige = -25 }
			}
			destroy_artifact = yes
		}
	}
}
###########################################
# Flag management                         #
###########################################

# Safety catch - clears character flags and modifiers
character_event = {
	id = raid_events.999

	hide_window = yes

	is_triggered_only = yes

	trigger = {
		trait = on_reaving
		NOT = { has_character_flag = reaving_begins }
		NOT = {
			any_opinion_modifier_target = {
				has_opinion_modifier = { who = ROOT modifier = opinion_on_reaving }
			}
		}
	}

	immediate = {
		remove_trait = on_reaving
		if = { #add to seclusion if neccessary
			limit = {
				is_ruler = no
				prisoner = no
				liege = { has_character_modifier = in_seclusion }
			}
			add_character_modifier = {
				name = in_seclusion
				duration = -1
			}
		}
		clr_character_flag = do_not_disturb
		clr_character_flag = disputed_lands_raid
		clr_character_flag = north_essos_raid
		clr_character_flag = summer_sea_raid
		clr_character_flag = slavers_bay_raid
		clr_character_flag = reaving_duel
		clr_character_flag = reaving_begins_reaver
		clr_character_flag = finger_dance
		clr_character_flag = had_reaving_village_raid
		clr_character_flag = had_reaving_duel
		clr_character_flag = had_reaving_ship_attack
		hidden_tooltip = { set_variable = { which = number_of_reaving_events value = 0 } }
	}
}
