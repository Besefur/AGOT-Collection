namespace = sb_warden

#Warden.1 - Emperor of Ghiscar is notified that a warden title is empty (yearly pulse)
character_event = {
	id = sb_warden.1
	desc = WARDEN1DESC #A Warden position stands empty. This is an ancient and venerable duty, and must be fulfilled.
	picture = GFX_Slavers_bay

	is_triggered_only = yes

	only_independent = yes
	has_global_flag = dany_stormborn_events

	trigger = {
		has_landed_title = e_ghiscar
		NOT = { trait = civil_war }
		OR = {
			NOT = { has_character_flag = mega_war_wardens_reset }
			had_character_flag = { flag = mega_war_wardens_reset days = 20 }
		}
		OR = {
			#any vassal has Warden of the River
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_river }
					any_independent_ruler = {
						has_character_flag = warden_of_the_river
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_river_self_assign
				}
			}
			#any vassal has Warden of Valyria
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_valyria }
					any_independent_ruler = {
						has_character_flag = warden_of_valyria
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_valyria_self_assign
				}
			}
			#any vassal has Warden of Ghis
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_ghis }
					any_independent_ruler = {
						has_character_flag = warden_of_ghis
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_ghis_self_assign
				}
			}
			#any vassal has Warden of the Steppe
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_steppe }
					any_independent_ruler = {
						has_character_flag = warden_of_the_steppe
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_steppe_self_assign
				}
			}
		}
	}

	immediate = { clr_character_flag = mega_war_wardens_reset }

	option = { #assign Warden of the River
		name = WARDEN1OPTA #We must assign a Warden of the North
		trigger = {
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_river }
					any_independent_ruler = {
						has_character_flag = warden_of_the_river
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_river_self_assign
				}
			}
		}
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = warden_of_the_river
				liege = { character = ROOT }
				NOT = { character = ROOT }
			}
			if = {
				limit = {
					prisoner = no
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_revoked_honorary_title } }
				}
				give_minor_title = warden_river
				break = yes
			}
			clr_character_flag = warden_of_the_river
		}
		set_character_flag = assign_river
		hidden_tooltip = { character_event = { id = sb_warden.2 } }
	}

	option = { #assign Warden of Valyria
		name = WARDEN1OPTB #We must assign a Warden of the East
		trigger = {
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_valyria }
					any_independent_ruler = {
						has_character_flag = warden_valyria
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_valyria_self_assign
				}
			}
		}
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = warden_of_valyria
				liege = { character = ROOT }
				NOT = { character = ROOT }
			}
			if = {
				limit = {
					prisoner = no
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_revoked_honorary_title } }
				}
				give_minor_title = warden_valyria
				break = yes
			}
			clr_character_flag = warden_of_valyria
		}
		set_character_flag = assign_valyria
		hidden_tooltip = { character_event = { id = sb_warden.2 } }
	}

	option = { #assign Warden of Ghis
		name = WARDEN1OPTC #We must assign a Warden of the West
		trigger = {
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_ghis }
					any_independent_ruler = {
						has_character_flag = warden_of_ghis
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_ghis_self_assign
				}
			}
		}
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = warden_of_ghis
				liege = { character = ROOT }
				NOT = { character = ROOT }
			}
			if = {
				limit = {
					prisoner = no
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_revoked_honorary_title } }
				}
				give_minor_title = warden_ghis
				break = yes
			}
			clr_character_flag = warden_of_ghis
		}
		set_character_flag = assign_ghis
		hidden_tooltip = { character_event = { id = sb_warden.2 } }
	}

	option = { #assign Warden of the Steppe
		name = WARDEN1OPTD #We must assign a Warden of the South
		trigger = {
			NOT = {
				OR = {
					any_courtier_or_vassal = { has_minor_title = warden_steppe }
					any_independent_ruler = {
						has_character_flag = warden_of_the_steppe
						primary_title = { ROOT = { primary_title = { is_variable_equal = { which = "de_facto_empire" which = PREVPREV } } } }
						NOT = { tier = EMPEROR }
						NOT = { war_with = ROOT }
					}
					has_character_flag = warden_steppe_self_assign
				}
			}
		}
		random_courtier_or_vassal = {
			limit = {
				has_character_flag = warden_of_the_steppe
				liege = { character = ROOT }
				NOT = { character = ROOT }
			}
			if = {
				limit = {
					prisoner = no
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_revoked_honorary_title } }
				}
				give_minor_title = warden_steppe
				break = yes
			}
			clr_character_flag = warden_of_the_steppe
		}
		set_character_flag = assign_steppe
		hidden_tooltip = { character_event = { id = sb_warden.2 } }
	}
}
#Warden.2 - Who should have the title
character_event = {
	id = sb_warden.2
	desc = WARDEN2DESC #"To whom should this duty fall?"
	picture = GFX_Slavers_bay

	is_triggered_only = yes

	trigger = { has_landed_title = e_ghiscar }

	immediate = {
		character_event = { id = sb_warden.1 days = 30 } #check again
	}

	option = { #it should go to the lord of the Skahazadhan
		name = WARDENRIVEROPTA #It should fall to the Lord of the Skahazadhan
		trigger = { #The Skahazadhan must be a vassal of Ghiscar
			has_character_flag = assign_river
			k_skahazadhan = { holder_scope = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } } }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -20 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -40 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -60 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -80 } }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 20 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 40 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 60 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 80 }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						martial < 1
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						martial < 4
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						martial < 7
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						martial = 14
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						martial = 17
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						martial = 20
					}
				}
			}
			modifier = {
				factor = 1.5
				k_skahazadhan = {
					holder_scope = {
						martial = 23
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						is_female = yes
					}
				}
			}
			modifier = {
				factor = 0.66
				k_skahazadhan = {
					holder_scope = {
						NOT = { age = 16 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = honorable
			}
		}
		k_skahazadhan = {
			holder_scope = {
				give_minor_title = warden_river
				hidden_tooltip = { character_event = { id = sb_warden.5 } }
				set_character_flag = warden_of_the_river
				if = {
					limit = { liege = { regent = { character = PREVPREV } } }
					custom_tooltip = { text = TOOLTIPWARDENREGENT }
				}
			}
		}
		clr_character_flag = assign_river
	}

	option = { #it should go to the lord of North Valyria
		name = WARDENVALYRIAOPTA #It should fall to a man of North Valyria
		trigger = { #North Valyria must be a vassal of Ghiscar
			has_character_flag = assign_valyria
			k_north_valyria = { holder_scope = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } } }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -20 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -40 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -60 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -80 } }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 20 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 40 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 60 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 80 }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						martial < 1
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						martial < 4
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						martial < 7
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						martial = 14
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						martial = 17
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						martial = 20
					}
				}
			}
			modifier = {
				factor = 1.5
				k_north_valyria = {
					holder_scope = {
						martial = 23
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						is_female = yes
					}
				}
			}
			modifier = {
				factor = 0.66
				k_north_valyria = {
					holder_scope = {
						NOT = { age = 16 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = honorable
			}
		}
		k_north_valyria = {
			holder_scope = {
				give_minor_title = warden_valyria
				hidden_tooltip = { character_event = { id = sb_warden.6 } }
				set_character_flag = warden_of_valyria
				if = {
					limit = { liege = { regent = { character = PREVPREV } } }
					custom_tooltip = { text = TOOLTIPWARDENREGENT }
				}
			}
		}
		clr_character_flag = assign_valyria
	}

	option = { #it should go to the lord of Ghis
		name = WARDENGHISOPTA #It should fall to a lord of New Ghis
		trigger = { #New Ghis must be a vassal of Ghiscar
			has_character_flag = assign_ghis
			k_new_ghis = { holder_scope = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } } }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -20 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -40 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -60 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -80 } }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 20 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 40 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 60 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 80 }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						martial < 1
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						martial < 4
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						martial < 7
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						martial = 14
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						martial = 17
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						martial = 20
					}
				}
			}
			modifier = {
				factor = 1.5
				k_new_ghis = {
					holder_scope = {
						martial = 23
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						is_female = yes
					}
				}
			}
			modifier = {
				factor = 0.66
				k_new_ghis = {
					holder_scope = {
						NOT = { age = 16 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = honorable
			}
		}
		k_new_ghis = {
			holder_scope = {
				give_minor_title = warden_ghis
				hidden_tooltip = { letter_event = { id = sb_warden.7 } }
				set_character_flag = warden_of_ghis
				if = {
					limit = { liege = { regent = { character = PREVPREV } } }
					custom_tooltip = { text = TOOLTIPWARDENREGENT }
				}
			}
		}
		clr_character_flag = assign_ghis
	}

	option = { #it should go to the lord of Hazdahn
		name = WARDENSTEPPEOPTA #It should fall to a lord of Hazdahn
		trigger = { #Hazdahn must be a vassal of Ghiscar
			has_character_flag = assign_steppe
			k_hazdahn = { holder_scope = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } } }
		}
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -20 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -40 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -60 } }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						NOT = { reverse_opinion = { who = ROOT value = -80 } }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 20 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 40 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 60 }
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						reverse_opinion = { who = ROOT value = 80 }
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						martial < 1
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						martial < 4
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						martial < 7
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						martial = 14
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						martial = 17
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						martial = 20
					}
				}
			}
			modifier = {
				factor = 1.5
				k_hazdahn = {
					holder_scope = {
						martial = 23
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						is_female = yes
					}
				}
			}
			modifier = {
				factor = 0.66
				k_hazdahn = {
					holder_scope = {
						NOT = { age = 16 }
					}
				}
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = honorable
			}
		}
		k_hazdahn = {
			holder_scope = {
				give_minor_title = warden_steppe
				hidden_tooltip = { character_event = { id = sb_warden.8 } }
				set_character_flag = warden_of_the_steppe
				if = {
					limit = { liege = { regent = { character = PREVPREV } } }
					custom_tooltip = { text = TOOLTIPWARDENREGENT }
				}
			}
		}
		clr_character_flag = assign_steppe
	}

	option = { #the traditional warden is incapable, pick other lord
		name = WARDEN2OPTE #The traditional warden is incapable, it shall fall to a great lord I like
		trigger = { #at least one other lord paramount
			any_vassal = {
				demesne_size = 1
				is_female = no
				age = 16
				reverse_opinion = { who = ROOT value = 25 }
				prisoner = no
				NOT = { has_landed_title = k_the_most_devout }
				NOT = {
					AND = {
						has_landed_title = k_skahazadhan
						ROOT = { has_character_flag = assign_river }
					}
				}
				NOT = {
					AND = {
						has_landed_title = k_north_valyria
						ROOT = { has_character_flag = assign_valyria }
					}
				}
				NOT = {
					AND = {
						has_landed_title = k_new_ghis
						ROOT = { has_character_flag = assign_ghis }
					}
				}
				NOT = {
					AND = {
						has_landed_title = k_hazdahn
						ROOT = { has_character_flag = assign_steppe }
					}
				}
			}
			#regents always get traditional title
			NOT = {
				AND = {
					has_character_flag = assign_river
					k_skahazadhan = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_valyria
					k_north_valyria = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_ghis
					k_new_ghis = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_steppe
					k_hazdahn = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 15
			modifier = {
				factor = 2
				trait = arbitrary
			}
		}
		if = {
			limit = { has_character_flag = assign_river }
			k_skahazadhan = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			k_north_valyria = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			k_new_ghis = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			k_hazdahn = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		set_character_flag = assign_vassal_warden
		hidden_tooltip = { character_event = { id = sb_warden.3 } }
	}

	option = { #a capable person
		name = WARDEN2OPTF #It shall go to the most capable person
		ai_chance = {
			factor = 15
			modifier = {
				factor = 2
				trait = ruthless
			}
		}
		trigger = { #at least one other lord paramount
			any_courtier_or_vassal = {
				liege = { character = ROOT }
				demesne_size = 1
				prisoner = no
				is_female = no
				age = 16
				martial = 12
				NOT = { has_landed_title = k_the_most_devout }
				NOT = {
					AND = {
						has_landed_title = k_skahazadhan
						ROOT = { has_character_flag = assign_river }
					}
				}
				NOT = {
					AND = {
						has_landed_title = k_north_valyria
						ROOT = { has_character_flag = assign_valyria }
					}
				}
				NOT = {
					AND = {
						has_landed_title = k_new_ghis
						ROOT = { has_character_flag = assign_ghis }
					}
				}
				NOT = {
					AND = {
						has_landed_title = k_hazdahn
						ROOT = { has_character_flag = assign_steppe }
					}
				}
			}
			#regents always get traditional title
			NOT = {
				AND = {
					has_character_flag = assign_river
					k_skahazadhan = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_valyria
					k_north_valyria = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_steppe
					k_hazdahn = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_ghis
					k_new_ghis = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_river }
			k_skahazadhan = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			k_north_valyria = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			k_new_ghis = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			k_hazdahn = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		set_character_flag = assign_martial_warden
		hidden_tooltip = { character_event = { id = sb_warden.3 } }
	}

	option = { #pick later
		name = WARDEN2OPTG #I will pick one later
		trigger = {
			ai = no
			#regents always get traditional title
			NOT = {
				AND = {
					has_character_flag = assign_river
					k_skahazadhan = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_valyria
					k_north_valyria = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_ghis
					k_new_ghis = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
			NOT = {
				AND = {
					has_character_flag = assign_steppe
					k_hazdahn = {
						holder_scope = {
							vassal_of = ROOT
							prisoner = no
							NOT = { character = ROOT }
							liege = { regent = { character = PREVPREV } }
						}
					}
				}
			}
		}
		custom_tooltip = { text = TOOLTIPWARDENSELFASSIGN }
		if = {
			limit = { has_character_flag = assign_river }
			set_character_flag = warden_river_self_assign
			clr_character_flag = assign_river
			k_skahazadhan = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			set_character_flag = warden_valyria_self_assign
			clr_character_flag = assign_valyria
			k_north_valyria = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			set_character_flag = warden_ghis_self_assign
			clr_character_flag = assign_ghis
			k_new_ghis = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			set_character_flag = warden_steppe_self_assign
			clr_character_flag = assign_steppe
			k_hazdahn = {
				holder_scope = {
					if = {
						limit = { vassal_of = ROOT prisoner = no NOT = { character = ROOT } }
						opinion = {
							who = ROOT
							modifier = opinion_denied_traditional_title
							years = 20
						}
						hidden_tooltip = { character_event = { id = sb_warden.9 } }
					}
				}
			}
		}
	}
}
#Warden 3- Emperor chooses warden
character_event = {
	id = sb_warden.3

	desc = {
		text = WARDEN3DESC #based on opinion
		trigger = { has_character_flag = assign_vassal_warden }
	}
	desc = {
		text = WARDEN4DESC #based on martial
		trigger = { has_character_flag = assign_martial_warden }
	}

	is_triggered_only = yes

	trigger = { has_landed_title = e_ghiscar }

	immediate = {
		if = {
			limit = { has_character_flag = assign_vassal_warden }
			random_vassal = {
				limit = {
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
					NOT = { has_character_flag = warden_candidate }
				}
				preferred_limit = {
					OR = {
						tier = KING
						reverse_opinion = { who = ROOT value = 50 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_1
			}
			random_vassal = {
				limit = {
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
					NOT = { has_character_flag = warden_candidate }
				}
				preferred_limit = {
					OR = {
						tier = KING
						reverse_opinion = { who = ROOT value = 50 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_2
			}
			random_vassal = {
				limit = {
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
					NOT = { has_character_flag = warden_candidate }
				}
				preferred_limit = {
					OR = {
						tier = KING
						reverse_opinion = { who = ROOT value = 50 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_3
			}
			random_vassal = {
				limit = {
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					reverse_opinion = { who = ROOT value = 25 }
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
					NOT = { has_character_flag = warden_candidate }
				}
				preferred_limit = {
					OR = {
						tier = KING
						reverse_opinion = { who = ROOT value = 50 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_4
			}
		}
		if = {
			limit = { has_character_flag = assign_martial_warden }
			random_courtier_or_vassal = {
				limit = {
					liege = { character = ROOT }
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					martial = 12
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
				}
				preferred_limit = {
					OR = {
						tier = KING
						martial = 16
						reverse_opinion = { who = ROOT value = 25 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_1
			}
			random_courtier_or_vassal = {
				limit = {
					liege = { character = ROOT }
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					martial = 12
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
				}
				preferred_limit = {
					OR = {
						tier = KING
						martial = 16
						reverse_opinion = { who = ROOT value = 25 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_2
			}
			random_courtier_or_vassal = {
				limit = {
					liege = { character = ROOT }
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					martial = 12
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
				}
				preferred_limit = {
					OR = {
						tier = KING
						martial = 16
						reverse_opinion = { who = ROOT value = 25 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_3
			}
			random_courtier_or_vassal = {
				limit = {
					liege = { character = ROOT }
					demesne_size = 1
					prisoner = no
					is_female = no
					age = 16
					martial = 12
					NOT = { has_landed_title = d_rhllor }
					NOT = {
						AND = {
							has_landed_title = k_skahazadhan
							ROOT = { has_character_flag = assign_river }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_north_valyria
							ROOT = { has_character_flag = assign_valyria }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_new_ghis
							ROOT = { has_character_flag = assign_ghis }
						}
					}
					NOT = {
						AND = {
							has_landed_title = k_hazdahn
							ROOT = { has_character_flag = assign_steppe }
						}
					}
				}
				preferred_limit = {
					OR = {
						tier = KING
						martial = 16
						reverse_opinion = { who = ROOT value = 25 }
						is_close_relative = ROOT
					}
				}
				set_character_flag = warden_candidate
				save_event_target_as = candidate_4
			}
		}
	}

	option = {
		name = WARDEN3OPTA #Candidate 1
		trigger = {
			event_target:candidate_1 = { always = yes }
		}
		ai_chance = {
			factor = 25

			modifier = {
				factor = 0.33
				event_target:candidate_1 = {
					OR = {
						has_minor_title = warden_river
						has_minor_title = warden_valyria
						has_minor_title = warden_ghis
						has_minor_title = warden_steppe
					}
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_1 = {
					martial = 12
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_1 = {
					martial = 15
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_1 = {
					martial = 18
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_1 = {
					martial = 21
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_1 = {
					martial = 24
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_1 = {
					NOT = { reverse_opinion = { who = ROOT value = -50 } }
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_1 = {
					NOT = { reverse_opinion = { who = ROOT value = -25 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_1 = {
					reverse_opinion = { who = ROOT value = 0 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_1 = {
					reverse_opinion = { who = ROOT value = 25 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_1 = {
					reverse_opinion = { who = ROOT value = 50 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_1 = {
					reverse_opinion = { who = ROOT value = 75 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_1 = {
					reverse_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_1 = {
					tier = DUKE
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_1 = {
					tier = KING
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_1 = {
					dynasty = ROOT
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_river }
			event_target:candidate_1 = {
				set_character_flag = warden_of_the_river
				give_minor_title = warden_river
				hidden_tooltip = { letter_event = { id = sb_warden.5 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_river
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			event_target:candidate_1 = {
				set_character_flag = warden_of_valyria
				give_minor_title = warden_valyria
				hidden_tooltip = { letter_event = { id = sb_warden.6 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_valyria
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			event_target:candidate_1 = {
				set_character_flag = warden_of_ghis
				give_minor_title = warden_ghis
				hidden_tooltip = { letter_event = { id = sb_warden.7 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_ghis
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			event_target:candidate_1 = {
				set_character_flag = warden_of_the_steppe
				give_minor_title = warden_steppe
				hidden_tooltip = { letter_event = { id = sb_warden.8 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_steppe
						years = 100
					}
				}
			}
		}
	}
	option = {
		name = WARDEN3OPTB #Candidate 2
		trigger = {
			event_target:candidate_2 = { always = yes }
		}
		ai_chance = {
			factor = 25

			modifier = {
				factor = 0.33
				event_target:candidate_2 = {
					OR = {
						has_minor_title = warden_river
						has_minor_title = warden_valyria
						has_minor_title = warden_ghis
						has_minor_title = warden_steppe
					}
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_2 = {
					martial = 12
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_2 = {
					martial = 15
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_2 = {
					martial = 18
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_2 = {
					martial = 21
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_2 = {
					martial = 24
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_2 = {
					NOT = { reverse_opinion = { who = ROOT value = -50 } }
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_2 = {
					NOT = { reverse_opinion = { who = ROOT value = -25 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_2 = {
					reverse_opinion = { who = ROOT value = 0 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_2 = {
					reverse_opinion = { who = ROOT value = 25 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_2 = {
					reverse_opinion = { who = ROOT value = 50 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_2 = {
					reverse_opinion = { who = ROOT value = 75 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_2 = {
					reverse_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_2 = {
					tier = DUKE
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_2 = {
					tier = KING
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_2 = {
					dynasty = ROOT
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_river }
			event_target:candidate_2 = {
				set_character_flag = warden_of_the_river
				give_minor_title = warden_river
				hidden_tooltip = { letter_event = { id = sb_warden.5 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_river
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			event_target:candidate_2 = {
				set_character_flag = warden_of_valyria
				give_minor_title = warden_valyria
				hidden_tooltip = { letter_event = { id = sb_warden.6 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_valyria
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			event_target:candidate_2 = {
				set_character_flag = warden_of_ghis
				give_minor_title = warden_ghis
				hidden_tooltip = { letter_event = { id = sb_warden.7 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_ghis
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			event_target:candidate_2 = {
				set_character_flag = warden_of_the_steppe
				give_minor_title = warden_steppe
				hidden_tooltip = { letter_event = { id = sb_warden.8 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_steppe
						years = 100
					}
				}
			}
		}
	}
	option = {
		name = WARDEN3OPTC #Candidate 3
		trigger = {
			event_target:candidate_3 = { always = yes }
		}
		ai_chance = {
			factor = 25

			modifier = {
				factor = 0.33
				event_target:candidate_3 = {
					OR = {
						has_minor_title = warden_river
						has_minor_title = warden_valyria
						has_minor_title = warden_ghis
						has_minor_title = warden_steppe
					}
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_3 = {
					martial = 12
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_3 = {
					martial = 15
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_3 = {
					martial = 18
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_3 = {
					martial = 21
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_3 = {
					martial = 24
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_3 = {
					NOT = { reverse_opinion = { who = ROOT value = -50 } }
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_3 = {
					NOT = { reverse_opinion = { who = ROOT value = -25 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_3 = {
					reverse_opinion = { who = ROOT value = 0 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_3 = {
					reverse_opinion = { who = ROOT value = 25 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_3 = {
					reverse_opinion = { who = ROOT value = 50 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_3 = {
					reverse_opinion = { who = ROOT value = 75 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_3 = {
					reverse_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_3 = {
					tier = DUKE
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_3 = {
					tier = KING
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_3 = {
					dynasty = ROOT
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_river }
			event_target:candidate_3 = {
				set_character_flag = warden_of_the_river
				give_minor_title = warden_river
				hidden_tooltip = { letter_event = { id = sb_warden.5 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_river
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			event_target:candidate_3 = {
				set_character_flag = warden_of_valyria
				give_minor_title = warden_valyria
				hidden_tooltip = { letter_event = { id = sb_warden.6 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_valyria
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			event_target:candidate_3 = {
				set_character_flag = warden_of_ghis
				give_minor_title = warden_ghis
				hidden_tooltip = { letter_event = { id = sb_warden.7 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_ghis
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			event_target:candidate_3 = {
				set_character_flag = warden_of_the_steppe
				give_minor_title = warden_steppe
				hidden_tooltip = { letter_event = { id = sb_warden.8 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_steppe
						years = 100
					}
				}
			}
		}
	}
	option = {
		name = WARDEN3OPTD #Candidate 4
		trigger = {
			event_target:candidate_4 = { always = yes }
		}
		ai_chance = {
			factor = 25

			modifier = {
				factor = 0.33
				event_target:candidate_4 = {
					OR = {
						has_minor_title = warden_river
						has_minor_title = warden_valyria
						has_minor_title = warden_ghis
						has_minor_title = warden_steppe
					}
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_4 = {
					martial = 12
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_4 = {
					martial = 15
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_4 = {
					martial = 18
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_4 = {
					martial = 21
				}
			}
			modifier = {
				factor = 1.25
				event_target:candidate_4 = {
					martial = 24
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_4 = {
					NOT = { reverse_opinion = { who = ROOT value = -50 } }
				}
			}
			modifier = {
				factor = 0.66
				event_target:candidate_4 = {
					NOT = { reverse_opinion = { who = ROOT value = -25 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_4 = {
					reverse_opinion = { who = ROOT value = 0 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_4 = {
					reverse_opinion = { who = ROOT value = 25 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_4 = {
					reverse_opinion = { who = ROOT value = 50 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_4 = {
					reverse_opinion = { who = ROOT value = 75 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_4 = {
					reverse_opinion = { who = ROOT value = 100 }
				}
			}
			modifier = {
				factor = 1.5
				event_target:candidate_4 = {
					tier = DUKE
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_4 = {
					tier = KING
				}
			}
			modifier = {
				factor = 2
				event_target:candidate_4 = {
					dynasty = ROOT
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_river }
			event_target:candidate_4 = {
				set_character_flag = warden_of_the_river
				give_minor_title = warden_river
				hidden_tooltip = { letter_event = { id = sb_warden.5 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_river
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_valyria }
			event_target:candidate_4 = {
				set_character_flag = warden_of_valyria
				give_minor_title = warden_valyria
				hidden_tooltip = { letter_event = { id = sb_warden.6 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_valyria
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_ghis }
			event_target:candidate_4 = {
				set_character_flag = warden_of_ghis
				give_minor_title = warden_ghis
				hidden_tooltip = { letter_event = { id = sb_warden.7 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_ghis
						years = 100
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = assign_steppe }
			event_target:candidate_4 = {
				set_character_flag = warden_of_the_steppe
				give_minor_title = warden_steppe
				hidden_tooltip = { letter_event = { id = sb_warden.8 } }
				tooltip = {
					opinion = {
						who = ROOT
						modifier = opinion_warden_steppe
						years = 100
					}
				}
			}
		}
	}

	after = {
		hidden_tooltip = {
			event_target:candidate_1 = { clr_character_flag = warden_candidate }
			event_target:candidate_2 = { clr_character_flag = warden_candidate }
			event_target:candidate_3 = { clr_character_flag = warden_candidate }
			event_target:candidate_4 = { clr_character_flag = warden_candidate }
			clr_character_flag = assign_river
			clr_character_flag = assign_valyria
			clr_character_flag = assign_ghis
			clr_character_flag = assign_steppe
		}
	}
}
#Warden 5 - Notify Warden of the River
letter_event = {
	id = sb_warden.5
	desc = "WARDENSB5DESC"

	trigger = { FROM = { has_landed_title = e_ghiscar } }

	is_triggered_only = yes

	option = {
		name = WARDEN5OPTA
	}
}
#Warden 6 - Notify Warden of Valyria
letter_event = {
	id = sb_warden.6
	desc = "WARDENSB6DESC"

	is_triggered_only = yes

	trigger = { FROM = { has_landed_title = e_ghiscar } }

	option = {
		name = WARDEN5OPTA
	}
}
#Warden 7 - Notify Warden of Ghis
letter_event = {
	id = sb_warden.7
	desc = "WARDENSB7DESC"

	is_triggered_only = yes

	trigger = { FROM = { has_landed_title = e_ghiscar } }

	option = {
		name = WARDEN5OPTA
	}
}
#Warden 8 - Notify Warden of the South
letter_event = {
	id = sb_warden.8
	desc = "WARDENSB8DESC"

	is_triggered_only = yes

	trigger = { FROM = { has_landed_title = e_ghiscar } }

	option = {
		name = WARDEN5OPTA
	}
}
#Warden 9 - Notify not given rightful title
character_event = {
	id = sb_warden.9
	desc = "WARDEN9DESC"

	is_triggered_only = yes

	trigger = { FROM = { has_landed_title = e_ghiscar } }

	option = {
		name = "WARDEN9OPTA"
	}
}
#Warden 10 - Post mega wars reassign titles
character_event = {
	id = sb_warden.10
	desc = WARDEN10DESC #A Warden position stands empty. This is an ancient and venerable duty, and must be fulfilled.

	is_triggered_only = yes
	hide_window = yes

	only_independent = yes

	trigger = {
		has_landed_title = e_ghiscar
		OR = {
			has_character_flag = mega_war_wardens_reset
			any_courtier_or_vassal = { has_character_flag = warden_of_the_river }
			any_courtier_or_vassal = { has_character_flag = warden_of_valyria }
			any_courtier_or_vassal = { has_character_flag = warden_of_ghis }
			any_courtier_or_vassal = { has_character_flag = warden_of_the_steppe }
		}
	}

	immediate = {
		clr_character_flag = mega_war_wardens_reset
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_character_flag = warden_of_the_river
				NOT = { has_minor_title = warden_river }
			}
			give_minor_title = warden_river
		}
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_character_flag = warden_of_valyria
				NOT = { has_minor_title = warden_valyria }
			}
			give_minor_title = warden_valyria
		}
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_character_flag = warden_of_ghis
				NOT = { has_minor_title = warden_ghis }
			}
			give_minor_title = warden_ghis
		}
		random_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				has_character_flag = warden_of_the_steppe
				NOT = { has_minor_title = warden_steppe }
			}
			give_minor_title = warden_steppe
		}
	}

	option = {
		name = WARDEN10OPTA
	}
}