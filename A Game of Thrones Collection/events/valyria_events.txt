
namespace = valyria

#Valyrian Freehold Submod Initialisation Event
character_event = {
	id = valyria.999

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_global_flag = revived_valyrian_freehold

		if = {
			limit = { e_ghiscar = { holder_scope = { war_with = ROOT } } }
			set_global_flag = ghiscari_war
			any_playable_ruler = {
				limit = {
					culture_group = ghiscari
					tier = KING
				}
				set_character_flag = supporting_king
			}
		}

		if = { #Freehold election
			limit = { is_valyrian_freehold_trigger = yes }
			set_character_flag = valyria_half_term
			any_courtier_or_vassal = {
				limit = {
					is_ruler = yes
					culture = high_valyrian
					is_lowborn = no
					OR = {
						has_job_title = job_castellan
						has_job_title = job_chancellor
						has_job_title = job_marshal
						has_job_title = job_treasurer
						has_job_title = job_spymaster
						has_minor_title = title_high_admiral
						has_minor_title = title_councilmember_king
						has_minor_title = title_councilmember_emperor
					}
				}
				set_character_flag = elected_valyrian_councillor
			}
		}
		if = {
			limit = { government = noble_oligarchy }
			primary_title = { add_law = noble_oligarchy_elective }
			recalc_succession = yes
		}
		#Congenital traits
		any_realm_character = {
			limit = { graphical_culture = valyriangfx }
			if = {
				limit = {
					NOT = { is_ugly_trigger = yes }
					NOT = { has_fair_trait_trigger = yes }
				}
				random = {
					chance = 10
					modifier = {
						factor = 2
						culture = high_valyrian
					}
					add_trait = fair
				}
			}
			remove_trait = inbred
		}

		#mark dynasties
		set_dynasty_flag = high_valyrian
		any_playable_ruler = {
			limit = {
				culture = high_valyrian
				is_lowborn = no
			}
			set_dynasty_flag = high_valyrian
		}

		#Add slaves
		if = {
			limit = {
				NOT = { has_game_rule = { name = symmetrical_start value = on } }
				NOT = { has_game_rule = { name = slavery value = off } }
			}
			add_trait = slave_trader
			add_trait = slave_owner
			# family_palace = {
				# add_building = fp_asoiaf_slavepit_1
				# add_building = fp_asoiaf_slavepit_2
				# add_building = fp_asoiaf_slavepit_3
				# add_building = fp_asoiaf_slavepit_4
			# }
			if = {
				limit = { start_date = 4000.1.1 } #post ghiscari conquest
				capital_holding = {
					add_building = ca_asoiaf_slavepit_1
					add_building = ca_asoiaf_slavepit_2
					add_building = ca_asoiaf_slavepit_3
					add_building = ca_asoiaf_slavepit_4
					add_building = ca_valyria_mines_1
					add_building = ca_valyria_mines_2
				}
				random_demesne_province = {
					limit = { is_capital = no }
					capital_holding = {
						add_building = ca_asoiaf_slavepit_1
						add_building = ca_asoiaf_slavepit_2
						add_building = ca_asoiaf_slavepit_3
						add_building = ca_valyria_mines_1
					}
				}
			}
			else = {
				capital_holding = {
					add_building = ca_asoiaf_slavepit_1
					add_building = ca_asoiaf_slavepit_2
					add_building = ca_valyria_mines_1
				}
				random_demesne_province = {
					limit = { is_capital = no }
					capital_holding = { add_building = ca_valyria_mines_1 }
				}
			}
			character_event = { id = slavery.4004 }
			character_event = { id = maintenance.34 days = 2 } #refill levy
			any_vassal = {
				limit = { is_patrician = yes }
				add_trait = slave_trader
				add_trait = slave_owner
				if = {
					limit = { start_date = 4000.1.1 } #post ghiscari conquest
					family_palace = {
						add_building = fp_asoiaf_slavepit_1
						add_building = fp_asoiaf_slavepit_2
						add_building = fp_asoiaf_slavepit_3
						add_building = fp_asoiaf_slavepit_4
					}
				}
				else = {
					family_palace = {
						add_building = fp_asoiaf_slavepit_1
						add_building = fp_asoiaf_slavepit_2
					}
				}
				character_event = { id = slavery.4004 }
				character_event = { id = maintenance.34 days = 2 } #refill levy
			}
			any_playable_ruler = {
				limit = {
					culture = high_valyrian
					is_patrician = no
					is_lowborn = no
					higher_tier_than = COUNT
					NOT = { character = ROOT }
				}
				add_trait = slave_owner
				if = {
					limit = { start_date = 4000.1.1 } #post ghiscari conquest
					capital_holding = {
						add_building = ca_asoiaf_slavepit_1
						add_building = ca_asoiaf_slavepit_2
						add_building = ca_asoiaf_slavepit_3
						add_building = ca_valyria_mines_1
					}
				}
				else = {
					capital_holding = {
						add_building = ca_asoiaf_slavepit_1
						add_building = ca_valyria_mines_1
					}
				}
				character_event = { id = slavery.4004 }
				character_event = { id = maintenance.34 days = 2 } #refill levy
			}
			if = {
				limit = { start_date = 4000.1.1 } #post ghiscari conquest
				any_playable_ruler = {
					limit = {
						culture = high_valyrian
						is_patrician = no
						is_lowborn = no
						tier = COUNT
						NOT = { character = ROOT }
					}
					add_trait = slave_owner
					capital_holding = {
						add_building = ca_asoiaf_slavepit_1
						add_building = ca_asoiaf_slavepit_2
					}
					character_event = { id = slavery.4004 }
					character_event = { id = maintenance.34 days = 2 } #refill levy
				}
			}
		}

		#Bloodlines
		create_bloodline = {
			type = blood_of_the_dragon
		}
		random_owned_bloodline = {
			ROOT = {
				any_dynasty_member_even_if_dead = { add_to_bloodline = PREVPREV }
			}
		}
		any_playable_ruler = {
			limit = {
				culture = high_valyrian
				is_lowborn = no
				NOT = { any_owned_bloodline = { has_bloodline_flag = blood_of_the_dragon } }
			}
			dynasty_head = {
				create_bloodline = {
					type = blood_of_the_dragon
				}
				save_event_target_as = new_bloodline
				random_owned_bloodline = {
					event_target:new_bloodline = {
						any_dynasty_member_even_if_dead = { add_to_bloodline = PREVPREV }
					}
				}
			}
		}

		#Generate Valyrian Dragons
		if = {
			limit = { NOT = { has_game_rule = { name = dragon_hatching_taming value = off } } }
			set_global_flag = age_of_dragons
			character_event = { id = valyria.997 }
			any_playable_ruler = {
				limit = {
					age = 10
					culture = high_valyrian
					NOT = { tier = BARON }
					NOT = { trait = dragon_rider }
					is_lowborn = no
					NOT = { dynasty = 52 }
					NOT = { character = ROOT }
				}
				character_event = { id = valyria.997 }
			}
			any_character = {
				limit = {
					age = 14
					culture = high_valyrian
					is_ruler = no
					any_liege = { culture = high_valyrian }
					liege = { dynasty = PREV }
					OR = {
						martial = 10
						learning = 10
					}
					NOT = { trait = dragon_rider }
					is_lowborn = no
					NOT = { dynasty = 52 }
				}
				random = { #chance of being eligible for election
					chance = 50
					set_character_flag = title_freeholder
					wealth = 30
					give_minor_title = title_freeholder
				}
				character_event = { id = valyria.997 }
			}
		}
		#Setup colonies
		any_vassal = {
			limit = {
				higher_tier_than = COUNT
				capital_scope = { NOT = { region = world_valyria } }
				NOT = { has_landed_title = d_dragonstone }
				NOT = { has_landed_title = d_gogossos }
			}
			any_demesne_title = {
				limit = { higher_tier_than = COUNT }
				set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
				add_law = valyria_colony
				set_title_flag = valyria_colony
				revoke_law = republic_law_oligarchy
				succession = appointment
			}
			capital_scope = {
				county = {
					set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
					add_law = valyria_colony
					set_title_flag = valyria_colony
					revoke_law = republic_law_oligarchy
					succession = appointment
				}
			}
			if = {
				limit = { NOT = { culture = high_valyrian } }
				character_event = { id = valyria.998 }
			}
			else = {
				set_government_type = colony_government
				recalc_succession = yes
			}
		}

		#Rename valyrian steel swords
		any_artifact = {
			limit = { artifact_type = valyrian_steel }
			get_random_sword_name_effect = yes
		}
		any_character = {
			limit = {
				any_artifact = { artifact_type = valyrian_steel }
				NOT = { character = ROOT }
			}
			any_artifact = {
				limit = { artifact_type = valyrian_steel }
				get_random_sword_name_effect = yes
			}
		}

		#Add canon sworn houses to Targaryens
		random_playable_ruler = {
			limit = {
				dynasty = 496
				dynasty_head = { character = PREV }
			}
			if = { #Qoherys
				limit = { NOT = { any_character = { dynasty = 359 } } }
				create_character = {
					dynasty = 359
					random_traits = yes
					female = no
					religion = valyrian_rel
					culture = high_valyrian
				}
				new_character = {
					random_list = {
						50 = { add_trait = trained_warrior }
						40 = { add_trait = poor_warrior }
						10 = { add_trait = skilled_warrior }
					}
					create_character = {
						dynasty = none
						random_traits = yes
						religion = valyrian_rel
						culture = eastern_valyrian
						female = yes
					}
					new_character = {
						add_spouse = PREV
						create_character = {
							dynasty = 359
							random_traits = yes
							age = 3
							female = no
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
						create_character = {
							dynasty = 359
							random_traits = yes
							age = 1
							female = yes
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
						create_character = {
							dynasty = 359
							random_traits = yes
							age = 2
							female = no
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
					}
				}
			}
			if = { #Velaryon
				limit = { NOT = { any_character = { dynasty = 52 } } }
				create_character = {
					dynasty = 52
					age = 48
					random_traits = yes
					female = no
					religion = valyrian_rel
					culture = high_valyrian
				}
				new_character = {
					random_list = {
						50 = { add_trait = trained_warrior }
						40 = { add_trait = poor_warrior }
						10 = { add_trait = skilled_warrior }
					}
					create_character = {
						dynasty = none
						age = 50
						random_traits = yes
						religion = valyrian_rel
						culture = eastern_valyrian
						female = yes
					}
					new_character = {
						add_spouse = PREV
						create_character = {
							dynasty = 52
							random_traits = yes
							age = 23
							female = no
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
						create_character = {
							dynasty = 52
							random_traits = yes
							age = 24
							female = yes
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
						create_character = {
							dynasty = 52
							random_traits = yes
							age = 20
							female = no
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
					}
				}
			}
			if = { #Celtigar
				limit = { NOT = { any_character = { dynasty = 50 } } }
				create_character = {
					dynasty = 50
					age = 37
					random_traits = yes
					female = no
					religion = valyrian_rel
					culture = high_valyrian
				}
				new_character = {
					random_list = {
						50 = { add_trait = trained_warrior }
						40 = { add_trait = poor_warrior }
						10 = { add_trait = skilled_warrior }
					}
					create_character = {
						dynasty = none
						age = 36
						random_traits = yes
						religion = valyrian_rel
						culture = eastern_valyrian
						female = yes
					}
					new_character = {
						add_spouse = PREV
						create_character = {
							dynasty = 50
							random_traits = yes
							age = 14
							female = no
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
						create_character = {
							dynasty = 50
							random_traits = yes
							age = 10
							female = yes
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
						create_character = {
							dynasty = 50
							random_traits = yes
							age = 9
							female = no
							religion = valyrian_rel
							culture = high_valyrian
						}
						new_character = {
							set_mother = PREV
							set_father = PREVPREV
						}
					}
				}
			}
		}
	}

	option = {
		name = OK
	}
}
character_event = { #Assign archons to colonies
	id = valyria.998

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				#ai = no
				NOT = { num_of_count_titles = 2 }
			}
			random_realm_title = {
				limit = {
					tier = COUNT
					NOT = { holder_scope = { character = ROOT } }
					NOT = { holder_scope = { ai = no } }
				}
				gain_title = ROOT
			}
		}
		if = {
			limit = { is_merchant_republic = yes }
			any_vassal = {
				limit = { is_patrician = yes }
				family_palace = { destroy_settlement = THIS }
				set_government_type = feudal_government
				hidden_tooltip = { character_event = { id = REP.902 days = 1 } } #switch to primogeniture
			}
			family_palace = { destroy_settlement = THIS }
			set_government_type = feudal_government
			hidden_tooltip = { character_event = { id = REP.902 days = 1 } } #switch to primogeniture
		}
		liege = {
			random_realm_character = {
				limit = {
					age = 16
					#is_female = no
					NOT = { has_landed_title = e_new_valyria }
					OR = {
						liege = { has_landed_title = e_new_valyria }
						is_ruler = no
					}
					NAND = {
						is_councillor = yes
						liege = { has_landed_title = e_new_valyria }
					}
					culture_group = valyrian #Must be of Valyrian blood
					prisoner = no
					is_incapable = no
					NOT = { trait = former_slave }
					can_press_claims_trigger = yes
					is_theocracy = no
					is_lowborn = no

					NOT = { has_character_flag = gained_valyrian_colony }
				}
				preferred_limit = {
					culture = high_valyrian
					trait = dragon_rider
				}
				preferred_limit = {
					culture = high_valyrian
					is_female = no
				}
				ROOT = {
					if = {
						limit = {
							any_demesne_title = {
								NOT = { tier = BARON }
								NOT = { has_title_flag = valyria_colony }
							}
						}
						any_demesne_title = {
							limit = { has_title_flag = valyria_colony }
							gain_title = PREVPREV
						}
					}
					else = {
						abdicate_to = PREV
					}
				}
				if = {
					limit = { is_patrician = no }
					set_government_type = colony_government
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony }
					succession = appointment
				}
				recalc_succession = yes
				clr_character_flag = elected_valyrian_councillor
				set_character_flag = gained_valyrian_colony
				break = yes
			}
			#if none found, revert to archon
			ROOT = {
				if = {
					limit = {
						any_demesne_title = {
							NOT = { tier = BARON }
							NOT = { has_title_flag = valyria_colony }
						}
					}
					any_demesne_title = {
						limit = { has_title_flag = valyria_colony }
						gain_title = PREVPREV
					}
				}
				else = {
					abdicate_to = PREV
				}
			}
		}
	}
}
#Generate Valyrian Dragons
character_event = {
	id = valyria.997

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		add_trait = dragon_rider
		set_dynasty_flag = dragon_riding_dynasty
		random_playable_ruler = {	#Find random ruler to base dragon on, this is done so not all dragons in the world are clones
			limit = {
				demesne_size = 1
				NOT = { age_diff = { who = ROOT years = 1 } }
				NOT = { culture = ROOT }
				NOT = { culture_group = winter_group }
				NOT = { culture_group = unoccupied_group }
			}
			if = {
				limit = { martial < 1 }
				create_character = {
					dynasty = actually_culture
					age = 2
					culture = dragon_culture
					religion = dragon_rel
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					change_martial = 1
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 1
					martial < 2
				}
				create_character = {
					dynasty = actually_culture
					age = 12
					culture = dragon_culture
					religion = dragon_rel
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					change_martial = 5
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 2
					martial < 3
				}
				create_character = {
					dynasty = actually_culture
					age = 22
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 10
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 3
					martial < 4
				}
				create_character = {
					dynasty = actually_culture
					age = 31
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 15
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 4
					martial < 5
				}
				create_character = {
					dynasty = actually_culture
					age = 40
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 20
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 5
					martial < 6
				}
				create_character = {
					dynasty = actually_culture
					age = 51
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 25
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 6
					martial < 7
				}
				create_character = {
					dynasty = actually_culture
					age = 63
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 31
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 7
					martial < 8
				}
				create_character = {
					dynasty = actually_culture
					age = 70
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 35
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 8
					martial < 9
				}
				create_character = {
					dynasty = actually_culture
					age = 80
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 40
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 9
					martial < 10
				}
				create_character = {
					dynasty = actually_culture
					age = 90
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 45
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 10
					martial < 11
				}
				create_character = {
					dynasty = actually_culture
					age = 102
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 50
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 11
					martial < 12
				}
				create_character = {
					dynasty = actually_culture
					age = 112
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 55
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 12
					martial < 13
				}
				create_character = {
					dynasty = actually_culture
					age = 120
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 60
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 13
					martial < 14
				}
				create_character = {
					dynasty = actually_culture
					age = 130
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 65
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 14
					martial < 15
				}
				create_character = {
					dynasty = actually_culture
					age = 135
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 70
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 15
					martial < 16
				}
				create_character = {
					dynasty = actually_culture
					age = 141
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 75
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 16
					martial < 17
				}
				create_character = {
					dynasty = actually_culture
					age = 147
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 80
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 17
					martial < 19
				}
				create_character = {
					dynasty = actually_culture
					age = 158
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 85
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 19
					martial < 21
				}
				create_character = {
					dynasty = actually_culture
					age = 170
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 90
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 21
					martial < 24
				}
				create_character = {
					dynasty = actually_culture
					age = 180
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 95
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
			if = {
				limit = {
					martial = 24
				}
				create_character = {
					dynasty = actually_culture
					age = 191
					culture = dragon_culture
					religion = dragon_rel
					attributes = {
						martial = 99
					}
				}
				new_character = {
					#dynasty = mother_bastard
					add_friend = ROOT
					add_trait = dragon
					add_trait = incapable_dragon
					random = {
						chance = 5
						add_trait = fair
					}
					random = {
						chance = 5
						if = {
							limit = { NOT = { is_fair_trigger = yes } }
							add_trait = ugly
						}
					}
					random = {
						chance = 5
						add_trait = strong
					}
					random_list = {
						1 = { add_trait = dragon_1 }
						1 = { add_trait = dragon_2 }
						1 = { add_trait = dragon_3 }
						1 = { add_trait = dragon_4 }
						1 = { add_trait = dragon_5 }
						1 = { add_trait = dragon_6 }
						1 = { add_trait = dragon_7 }
						1 = { add_trait = dragon_8 }
						1 = { add_trait = dragon_9 }
						1 = { add_trait = dragon_10 }
						1 = { add_trait = dragon_11 }
						1 = { add_trait = dragon_12 }
						1 = { add_trait = dragon_13 }
						1 = { add_trait = dragon_14 }
						1 = { add_trait = dragon_15 }
						1 = { add_trait = dragon_16 }
						1 = { add_trait = dragon_17 }
						1 = { add_trait = dragon_18 }
						1 = { add_trait = dragon_19 }
						1 = { add_trait = dragon_20 }
						1 = { add_trait = dragon_21 }
						1 = { add_trait = dragon_22 }
						1 = { add_trait = dragon_23 }
						1 = { add_trait = dragon_24 }
						1 = { add_trait = dragon_25 }
						1 = { add_trait = dragon_26 }
					}
					character_event = { id = dragon.599 }
				}
			}
		}
		if = { #Targaryen Dragons
			limit = {
				dynasty = 496
				is_ruler = yes
			}
			random_friend = {
				limit = { trait = dragon }
				dynasty = 497000
			}
		}
	}

	option = {
		name = OK
	}
}

###Freeholder Council Election
#5 Year Terms for Lord Freeholder and other councillors
#Post war election check , event needs to be delayed
character_event = {
	id = valyria.199

	is_triggered_only = yes
	hide_window = yes
	only_playable = yes

	trigger = {
		OR = {
			is_valyrian_freehold_trigger = yes
			FROM = { is_valyrian_freehold_trigger = yes	}
		}
	}

	immediate = {
		if = { #check if mega wars can end
			limit = {
				tier = EMPEROR
				trait = civil_war
			}
			character_event = { id = mega_wars.8 days = 2 }
		}
		character_event = { id = valyria.1 days = 6 }
		FROM = {
			if = { #check if mega wars can end
				limit = {
					tier = EMPEROR
					trait = civil_war
				}
				character_event = { id = mega_wars.8 days = 2 }
			}
			character_event = { id = valyria.1 days = 6 }
		}
	}

	option = {
		name = OK
	}
}
#Archon term has finished
character_event = {
	id = valyria.1
	desc = "EVTDESCvalyria.1"
	picture = GFX_evt_valyria_2

	only_rulers = yes
	is_triggered_only = yes

	trigger = {
		is_valyrian_freehold_trigger = yes

		#Elections are suspended in times of war or if the capital is occupied
		NOR = {
			is_primary_war_defender = yes
			is_primary_war_attacker = yes
		}
		capital_holding = { controller = { character = ROOT } }
		primary_title = { NOT = { has_law = republic_triarch_for_life } }
		OR = {
			NOT = { has_character_flag = valyrian_election }
			had_character_flag = { flag = valyrian_election days = 1800 }
		}
		OR = {
			NOT = { has_character_flag = valyria_half_term }
			had_character_flag = { flag = valyria_half_term days = 900 }
		}
	}

	immediate = {
		hidden_tooltip = {
			event_target:oligarchy_capital = { ROOT = { capital = PREV } } #if triggered by inheritance
			# #clear councillors seperated by mega war
			# if = {
				# limit = {
					# tier = EMPEROR
					# trait = civil_war
				# }
				# any_independent_ruler = {
					# limit = {
						# primary_title = {
							# ROOT = {
								# any_demesne_title = {
									# tier = EMPEROR
									# is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
								# }
							# }
							# check_variable = { which = "de_facto_empire" value = 0.9 }
						# }
					# }
					# if = {
						# limit = { has_character_flag = elected_valyrian_councillor }
						# clr_character_flag = elected_valyrian_councillor
					# }
					# any_realm_character = {
						# limit = { has_character_flag = elected_valyrian_councillor }
						# clr_character_flag = elected_valyrian_councillor
					# }
				# }
			# }
			any_realm_character = { #eligible characters buy freehold
				limit = {
					is_ruler = no
					is_adult = yes
					wealth = 100
					NOT = { has_character_flag = title_freeholder }
					can_press_claims_trigger = yes
					prisoner = no
					NOT = { is_inaccessible_trigger = yes }
					NOT = { has_character_modifier = planning_claimant_adventure }
					true_valyrian_culture_trigger = yes
					OR = {
						culture = high_valyrian
						liege = { any_demesne_province = { region = world_valyrian_peninsula } }
					}
				}
				wealth = -100
				set_character_flag = title_freeholder
				give_minor_title = title_freeholder
			}
		}
		clr_character_flag = valyrian_election
		set_character_flag = valyrian_election
		clr_character_flag = valyria_half_term
		clr_character_flag = election_candidate

		hidden_tooltip = {
			any_realm_character = {
				limit = {
					OR = {
						demesne_size = 1
						AND = {
							is_patrician = yes
							is_ruler = yes
						}
						has_character_flag = title_freeholder
					}
				}
				character_event = { id = valyria.2 days = 2 }
			}
		}
	}

	option = {
		name = "EVTOPTAvalyria.1" #My term has ended
		trigger = { primary_title = { NOT = { has_law = republic_triarch_for_life } } }
		hidden_tooltip = {
			character_event = { id = valyria.399 days = 4 }
		}
		custom_tooltip = { text = TOOLTIPvalyria.3C }
		custom_tooltip = { text = TOOLTIPVALYRIAFREEHOLD }
	}

	option = {
		name = "EVTOPTBvalyria.1"
		trigger = { primary_title = { has_law = republic_triarch_for_life } }
		custom_tooltip = { text = TOOLTIPvalyria.3D }
		custom_tooltip = { text = TOOLTIPVALYRIAFREEHOLD }
	}

}
#Inform Realm
character_event = {
	id = valyria.2
	desc = "EVTDESCvalyria.2"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_character_flag = title_freeholder
				is_ruler = no
				NOT = { has_minor_title = title_freeholder }
			}
			give_minor_title = title_freeholder
			#diplomatic_immunity = yes
		}
		#check triarch for life status
		if = {
			limit = { has_minor_title = title_archon_for_life }
			remove_title = title_archon_for_life
		}
		if = {
			limit = {
				has_character_flag = title_archon_for_life
				has_job_title = job_castellan
				liege = { character = FROM }
				FROM = {
					is_valyrian_freehold_trigger = yes
					primary_title = { has_law = republic_triarch_for_life }
					dynasty = ROOT
				}
			}
			if = {
				limit = {
					FROM = {
						is_merchant_republic = yes
						family_palace = { current_heir = { character = ROOT } }
					}
				}
				give_minor_title = title_archon_for_life
			}
			else_if = {
				limit = {
					FROM = {
						is_merchant_republic = no
						current_heir = { character = ROOT }
					}
				}
				give_minor_title = title_archon_for_life
			}
			else = {
				clr_character_flag = title_archon_for_life
			}
		}
		# if = {
			# limit = {
				# OR = {
					# any_heir_title = { title = e_new_valyria }
					# any_pretender_title = { title = e_new_valyria }
				# }
			# }
			# set_character_flag = eligible_for_election
		# }
	}

	option = {
		name = {
			text = OK
			trigger = { NOT = { has_minor_title = title_archon_for_life } }
		}
		name = {
			text = "EVTOPTBvalyria.1" #Triarch for life
			trigger = { has_minor_title = title_archon_for_life }
		}
		#trigger = { NOT = { has_character_flag = eligible_for_election } }
		#clr_character_flag = election_candidate
		custom_tooltip = { text = TOOLTIPVALYRIAFREEHOLD }
	}

	# option = {
		# name = "EVTOPTBvalyria.2" #I Put myself forward!
		# trigger = { has_character_flag = eligible_for_election }
		# ai_chance = {
			# factor = 100

			# modifier = {
				# factor = 2
				# is_councillor = yes
			# }
			# modifier = {
				# factor = 5
				# trait = ambitious
			# }
			# modifier = {
				# factor = 3
				# trait = ruthless
			# }
			# modifier = {
				# factor = 2
				# tier = COUNT
			# }
			# modifier = {
				# factor = 3
				# tier = DUKE
			# }
			# modifier = {
				# factor = 4
				# tier = KING
			# }
			# modifier = {
				# factor = 2
				# trait = brave
			# }
			# modifier = {
				# factor = 2
				# trait = diligent
			# }
			# modifier = {
				# factor = 3
				# intrigue = 15
			# }
			# modifier = {
				# factor = 3
				# diplomacy = 15
			# }
			# modifier = {
				# factor = 3
				# stewardship = 15
			# }
			# modifier = {
				# factor = 3
				# martial = 15
			# }
		# }
		# custom_tooltip = { text = TOOLTIPEVTOPTBvalyria.2 }
		# clr_character_flag = eligible_for_election
		# #set_character_flag = election_candidate
		# custom_tooltip = { text = TOOLTIPVALYRIAFREEHOLD }
	# }

	# option = {
		# name = "EVTOPTCvalyria.2" #No Thanks
		# trigger = { has_character_flag = eligible_for_election }
		# ai_chance = {
			# factor = 50

			# modifier = {
				# factor = 0
				# calc_true_if = {
					# amount = 2
					# trait = dragon_rider
					# higher_tier_than = BARON
					# trait = ambitious
					# trait = diligent
				# }
				# NOT = { trait = content }
				# NOT = { trait = slothful }
			# }
			# modifier = {
				# factor = 0
				# is_patrician = yes
			# }
			# modifier = {
				# factor = 3
				# NOT = { trait = dragon_rider }
			# }
			# modifier = {
				# factor = 10
				# trait = content
			# }
			# modifier = {
				# factor = 4
				# trait = shy
			# }
			# modifier = {
				# factor = 3
				# is_lowborn = yes
			# }
			# modifier = {
				# factor = 3
				# trait = craven
			# }
			# modifier = {
				# factor = 3
				# trait = slothful
			# }
			# modifier = {
				# factor = 3
				# intrigue < 3
			# }
			# modifier = {
				# factor = 3
				# diplomacy < 3
			# }
			# modifier = {
				# factor = 3
				# trait = weak
			# }
			# modifier = {
				# factor = 3
				# trait = infirm
			# }
		# }
		# custom_tooltip = { text = TOOLTIPvalyria.3 }
		# clr_character_flag = eligible_for_election
	# }
}

#Head Archon Elected
character_event = {
	id = valyria.399

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#Archon
		if = { #Archon for life
			limit = { primary_title = { has_law = republic_triarch_for_life } }
			save_event_target_as = lord_freeholder_elect
		}
		primary_title = {
			if = {
				limit = { current_heir = { eligible_archon_trigger = yes } }
				current_heir = {
					save_event_target_as = lord_freeholder_elect
					set_character_flag = elected_councillor
				}
			}
			else = {
				random_pretender = {
					limit = {
						eligible_archon_trigger = yes
					}
					save_event_target_as = lord_freeholder_elect
					set_character_flag = elected_councillor
				}
			}
			#If none found, keep incumbent
			if = {
				limit = { NOT = { event_target:lord_freeholder_elect = { always = yes } } }
				ROOT = { save_event_target_as = lord_freeholder_elect }
			}
		}
		#Castellan
		if = { #Archon for life
			limit = {
				job_castellan = {
					has_minor_title = title_archon_for_life
					NOT = { has_character_flag = elected_councillor }
				}
			}
			job_castellan = {
				save_event_target_as = job_castellan_elect
				set_character_flag = elected_councillor
			}
		}
		else = {
			primary_title = {
				random_pretender = {
					limit = {
						eligible_archon_trigger = yes
						NAND = {
							#is_councillor = yes
							has_character_flag = elected_valyrian_councillor
							liege = { has_landed_title = e_new_valyria }
						}
						NOT = { has_character_flag = elected_councillor }
					}
					preferred_limit = {
						OR = {
							prestige = 1500
							martial = 18
							stewardship = 18
							intrigue = 18
							diplomacy = 18
							AND = {
								stewardship = 15
								has_ambition = obj_become_castellan
							}
						}
					}
					preferred_limit = {
						OR = {
							prestige = 1000
							martial = 15
							stewardship = 15
							intrigue = 15
							diplomacy = 15
							AND = {
								stewardship = 12
								has_ambition = obj_become_castellan
							}
						}
					}
					preferred_limit = {
						OR = {
							prestige = 500
							martial = 12
							stewardship = 12
							intrigue = 12
							diplomacy = 12
							AND = {
								stewardship = 9
								has_ambition = obj_become_castellan
							}
						}
					}
					save_event_target_as = job_castellan_elect
					set_character_flag = elected_councillor
				}
			}
		}
		#Chancellor
		primary_title = {
			random_pretender = {
				limit = {
					eligible_archon_trigger = yes
					NAND = {
						#is_councillor = yes
						has_character_flag = elected_valyrian_councillor
						liege = { has_landed_title = e_new_valyria }
					}
					NOT = { has_character_flag = elected_councillor }
				}
				preferred_limit = {
					OR = {
						diplomacy = 18
						AND = {
							diplomacy = 15
							has_ambition = obj_become_chancellor
						}
					}
				}
				preferred_limit = {
					OR = {
						diplomacy = 15
						AND = {
							diplomacy = 12
							has_ambition = obj_become_chancellor
						}
					}
				}
				preferred_limit = {
					OR = {
						diplomacy = 12
						AND = {
							diplomacy = 9
							has_ambition = obj_become_chancellor
						}
					}
				}
				preferred_limit = {
					diplomacy = 8
				}
				save_event_target_as = job_chancellor_elect
				set_character_flag = elected_councillor
			}
		}
		#Marshal
		primary_title = {
			random_pretender = {
				limit = {
					eligible_archon_trigger = yes
					NAND = {
						#is_councillor = yes
						has_character_flag = elected_valyrian_councillor
						liege = { has_landed_title = e_new_valyria }
					}
					NOT = { has_character_flag = elected_councillor }
				}
				preferred_limit = {
					OR = {
						martial = 18
						AND = {
							martial = 15
							has_ambition = obj_become_marshal
						}
					}
				}
				preferred_limit = {
					OR = {
						martial = 15
						AND = {
							martial = 12
							has_ambition = obj_become_marshal
						}
					}
				}
				preferred_limit = {
					OR = {
						martial = 12
						AND = {
							martial = 9
							has_ambition = obj_become_marshal
						}
					}
				}
				preferred_limit = {
					martial = 8
				}
				save_event_target_as = job_marshal_elect
				set_character_flag = elected_councillor
			}
		}
		#Treasurer
		primary_title = {
			random_pretender = {
				limit = {
					eligible_archon_trigger = yes
					NAND = {
						#is_councillor = yes
						has_character_flag = elected_valyrian_councillor
						liege = { has_landed_title = e_new_valyria }
					}
					NOT = { has_character_flag = elected_councillor }
				}
				preferred_limit = {
					OR = {
						stewardship = 18
						AND = {
							stewardship = 15
							has_ambition = obj_become_treasurer
						}
					}
				}
				preferred_limit = {
					OR = {
						stewardship = 15
						AND = {
							stewardship = 12
							has_ambition = obj_become_treasurer
						}
					}
				}
				preferred_limit = {
					OR = {
						stewardship = 12
						AND = {
							stewardship = 9
							has_ambition = obj_become_treasurer
						}
					}
				}
				preferred_limit = {
					stewardship = 8
				}
				save_event_target_as = job_treasurer_elect
				set_character_flag = elected_councillor
			}
		}
		#Spymaster
		primary_title = {
			random_pretender = {
				limit = {
					eligible_archon_trigger = yes
					NAND = {
						#is_councillor = yes
						has_character_flag = elected_valyrian_councillor
						liege = { has_landed_title = e_new_valyria }
					}
					NOT = { has_character_flag = elected_councillor }
				}
				preferred_limit = {
					OR = {
						intrigue = 18
						AND = {
							intrigue = 15
							has_ambition = obj_become_spymaster
						}
					}
				}
				preferred_limit = {
					OR = {
						intrigue = 15
						AND = {
							intrigue = 12
							has_ambition = obj_become_spymaster
						}
					}
				}
				preferred_limit = {
					OR = {
						intrigue = 12
						AND = {
							intrigue = 9
							has_ambition = obj_become_spymaster
						}
					}
				}
				preferred_limit = {
					intrigue = 8
				}
				save_event_target_as = job_spymaster_elect
				set_character_flag = elected_councillor
			}
		}

		if = {
			limit = { has_dlc = Zeus }
			#Admiral
			primary_title = {
				random_pretender = {
					limit = {
						eligible_archon_trigger = yes
						NAND = {
							#is_councillor = yes
							has_character_flag = elected_valyrian_councillor
							liege = { has_landed_title = e_new_valyria }
						}
						NOT = { has_character_flag = elected_councillor }
					}
					preferred_limit = {
						OR = {
							martial = 18
							AND = {
								martial = 15
								has_ambition = obj_become_councillor
							}
						}
					}
					preferred_limit = {
						OR = {
							martial = 15
							AND = {
								martial = 12
								has_ambition = obj_become_councillor
							}
						}
					}
					preferred_limit = {
						OR = {
							martial = 12
							AND = {
								martial = 9
								has_ambition = obj_become_councillor
							}
						}
					}
					preferred_limit = {
						martial = 8
					}
					save_event_target_as = job_admiral_elect
					set_character_flag = elected_councillor
				}
			}
			#Advisors
			primary_title = {
				random_pretender = {
					limit = {
						eligible_archon_trigger = yes
						NAND = {
							#is_councillor = yes
							has_character_flag = elected_valyrian_councillor
							liege = { has_landed_title = e_new_valyria }
						}
						NOT = { has_character_flag = elected_councillor }
					}
					save_event_target_as = job_advisor_elect
					set_character_flag = elected_councillor
				}
				random_pretender = {
					limit = {
						eligible_archon_trigger = yes
						NAND = {
							#is_councillor = yes
							has_character_flag = elected_valyrian_councillor
							liege = { has_landed_title = e_new_valyria }
						}
						NOT = { has_character_flag = elected_councillor }
					}
					save_event_target_as = job_advisor_elect_2
					set_character_flag = elected_councillor
				}
			}
		}
		primary_title = {
			any_pretender = { clr_character_flag = elected_councillor }
		}

		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# martial = 18
					# stewardship = 18
					# intrigue = 18
					# diplomacy = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# higher_tier_than = COUNT
							# age = 45
							# any_friend = { trait = dragon martial = 75 }
						# }
						# OR = {
							# prestige = 1000
							# martial = 12
							# stewardship = 12
							# intrigue = 12
							# diplomacy = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# martial = 15
					# stewardship = 15
					# intrigue = 15
					# diplomacy = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# higher_tier_than = COUNT
							# age = 45
							# any_friend = { trait = dragon martial = 75 }
						# }
						# OR = {
							# prestige = 750
							# martial = 10
							# stewardship = 10
							# intrigue = 10
							# diplomacy = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# martial = 12
					# stewardship = 12
					# intrigue = 12
					# diplomacy = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# higher_tier_than = COUNT
							# age = 45
							# any_friend = { trait = dragon martial = 75 }
						# }
						# OR = {
							# prestige = 500
							# martial = 8
							# stewardship = 8
							# intrigue = 8
							# diplomacy = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# martial = 10
					# stewardship = 10
					# intrigue = 10
					# diplomacy = 10
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# higher_tier_than = COUNT
							# age = 45
							# any_friend = { trait = dragon martial = 75 }
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# martial = 8
					# stewardship = 8
					# intrigue = 8
					# diplomacy = 8
				# }
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
				# trait = dragon_rider
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# OR = {
					# ROOT = { is_merchant_republic = no }
					# AND = {
						# is_patrician = yes
						# liege = { character = ROOT }
					# }
				# }
				# has_character_flag = election_candidate
			# }
			# character_event = { id = valyria.3 }
			# break = yes
		# }
	}

	option = {
		name = OK
		character_event = { id = valyria.9 } #finish election
	}
}

# character_event = {
	# id = valyria.3
	# picture = GFX_evt_valyria_2

	# is_triggered_only = yes

	# desc = {
		# text = "EVTDESCvalyria.3"
		# trigger = { NOT = { character = FROM } }
	# }
	# desc = {
		# text = "EVTDESCvalyria.3B"
		# trigger = {
			# character = FROM
			# primary_title = { has_law = republic_triarch_for_life }
		# }
	# }
	# desc = {
		# text = "EVTDESCvalyria.3C"
		# trigger = {
			# character = FROM
			# NOT = { primary_title = { has_law = republic_triarch_for_life } }
		# }
	# }

	# option = {
		# name = "EVTOPTAvalyria.3"
		# prestige = 100
		# clr_character_flag = election_candidate
		# set_character_flag = lord_freeholder_elect
	# }
# }
##Elect councillors##
# #Castellan Elected
# character_event = {
	# id = valyria.499

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# job_castellan = { #Archon for life
			# if = {
				# limit = { has_minor_title = title_archon_for_life }
				# clr_character_flag = election_candidate
				# set_character_flag = job_castellan_elect
				# break = yes
			# }
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# martial = 18
					# stewardship = 18
					# intrigue = 18
					# diplomacy = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_castellan
						# }
						# OR = {
							# prestige = 1000
							# martial = 12
							# stewardship = 12
							# intrigue = 12
							# diplomacy = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# martial = 15
					# stewardship = 15
					# intrigue = 15
					# diplomacy = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_castellan
						# }
						# OR = {
							# prestige = 750
							# martial = 10
							# stewardship = 10
							# intrigue = 10
							# diplomacy = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# martial = 12
					# stewardship = 12
					# intrigue = 12
					# diplomacy = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_castellan
						# }
						# OR = {
							# prestige = 500
							# martial = 8
							# stewardship = 8
							# intrigue = 8
							# diplomacy = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# martial = 10
					# stewardship = 10
					# intrigue = 10
					# diplomacy = 10
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_castellan
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# martial = 8
					# stewardship = 8
					# intrigue = 8
					# diplomacy = 8
				# }
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# martial = 12
					# stewardship = 12
					# intrigue = 12
					# diplomacy = 12
				# }
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
			# }
			# character_event = { id = valyria.4 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# character_event = { id = valyria.599 days = 1 } #elect chancellor
	# }
# }
character_event = {
	id = valyria.4
	desc = "EVTDESCvalyria.4"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_castellan_elect
	# }

	option = {
		name = "EVTOPTAvalyria.4"
		prestige = 25
	}
}
# #Chancellor Elected
# character_event = {
	# id = valyria.599

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# diplomacy = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_chancellor
						# }
						# OR = {
							# prestige = 1000
							# diplomacy = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.5 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# diplomacy = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_chancellor
						# }
						# OR = {
							# prestige = 750
							# diplomacy = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.5 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# diplomacy = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_chancellor
						# }
						# OR = {
							# prestige = 500
							# diplomacy = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.5 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# diplomacy = 10
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_chancellor
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.5 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# diplomacy = 8
				# }
			# }
			# character_event = { id = valyria.5 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# diplomacy = 12
				# }
			# }
			# character_event = { id = valyria.5 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# character_event = { id = valyria.699 days = 1 }
	# }
# }
character_event = {
	id = valyria.5
	desc = "EVTDESCvalyria.5"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_chancellor_elect
	# }

	option = {
		name = "EVTOPTAvalyria.5"
		prestige = 25
	}
}
# #Marshal Elected
# character_event = {
	# id = valyria.699

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# martial = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_marshal
						# }
						# OR = {
							# prestige = 1000
							# martial = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.6 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# martial = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_marshal
						# }
						# OR = {
							# prestige = 750
							# martial = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.6 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# martial = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_marshal
						# }
						# OR = {
							# prestige = 500
							# martial = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.6 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# martial = 10
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_marshal
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.6 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# martial = 8
				# }
			# }
			# character_event = { id = valyria.6 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# martial = 12
				# }
			# }
			# character_event = { id = valyria.6 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# character_event = { id = valyria.799 days = 1 }
	# }
# }
character_event = {
	id = valyria.6
	desc = "EVTDESCvalyria.6"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_marshal_elect
	# }

	option = {
		name = "EVTOPTAvalyria.6"
		prestige = 25
	}
}
# #Treasurer Elected
# character_event = {
	# id = valyria.799

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# stewardship = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_treasurer
						# }
						# OR = {
							# prestige = 1000
							# stewardship = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.7 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# stewardship = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_treasurer
						# }
						# OR = {
							# prestige = 750
							# stewardship = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.7 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# stewardship = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_treasurer
						# }
						# OR = {
							# prestige = 500
							# stewardship = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.7 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# stewardship = 10
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_treasurer
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.7 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# stewardship = 8
				# }
			# }
			# character_event = { id = valyria.7 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# stewardship = 12
				# }
			# }
			# character_event = { id = valyria.7 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# character_event = { id = valyria.899 days = 1 }
	# }
# }
character_event = {
	id = valyria.7
	desc = "EVTDESCvalyria.7"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_treasurer_elect
	# }

	option = {
		name = "EVTOPTAvalyria.7"
		prestige = 25
	}
}
#Spymaster Elected
# character_event = {
	# id = valyria.899

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# intrigue = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon intrigue = 75 }
							# has_ambition = obj_become_spymaster
						# }
						# OR = {
							# prestige = 1000
							# intrigue = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.8 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# intrigue = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon intrigue = 75 }
							# has_ambition = obj_become_spymaster
						# }
						# OR = {
							# prestige = 750
							# intrigue = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.8 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# intrigue = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon intrigue = 75 }
							# has_ambition = obj_become_spymaster
						# }
						# OR = {
							# prestige = 500
							# intrigue = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.8 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# intrigue = 10
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon intrigue = 75 }
							# has_ambition = obj_become_spymaster
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.8 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# intrigue = 8
				# }
			# }
			# character_event = { id = valyria.8 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# intrigue = 12
				# }
			# }
			# character_event = { id = valyria.8 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# if = {
			# limit = { NOT = { has_dlc = Zeus } }
			# character_event = { id = valyria.9 days = 1 } #Finish
		# }
		# else = {
			# character_event = { id = valyria.890 days = 1 } #Admiral
		# }
	# }
# }
character_event = {
	id = valyria.8
	desc = "EVTDESCvalyria.8"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_spymaster_elect
	# }

	option = {
		name = "EVTOPTAvalyria.8"
		prestige = 25
	}
}
#Admiral Elected
# character_event = {
	# id = valyria.890

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# martial = 18
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
						# OR = {
							# prestige = 1000
							# martial = 12
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.891 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# martial = 15
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
						# OR = {
							# prestige = 750
							# martial = 10
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.891 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# martial = 12
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
						# OR = {
							# prestige = 500
							# martial = 8
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.891 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# martial = 10
					# AND = {
						# age = 19
						# s_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.891 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 500
					# martial = 8
				# }
			# }
			# character_event = { id = valyria.891 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# martial = 12
				# }
			# }
			# character_event = { id = valyria.891 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# character_event = { id = valyria.892 days = 1 }
	# }
# }
character_event = {
	id = valyria.891
	desc = "EVTDESCvalyria.891"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_admiral_elect
	# }

	option = {
		name = "EVTOPTAvalyria.891"
		prestige = 25
	}
}
#Advisor Elected
# character_event = {
	# id = valyria.892

	# is_triggered_only = yes
	# hide_window = yes

	# immediate = {
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 2000
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
						# prestige = 1000
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1500
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
						# prestige = 750
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 9.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 1000
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
						# prestige = 500
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# OR = {
					# prestige = 750
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# any_friend = { trait = dragon martial = 75 }
							# has_ambition = obj_become_councillor
						# }
					# }
				# }
				# NOT = { check_variable = { which = "tyrant" value = 19.9 } }
				# NOT = { check_variable = { which = "dishonorable" value = 19.9 } }
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# trait = dragon_rider

				# prestige = 500
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 1000
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# trait = dragon_rider
							# has_ambition = obj_become_councillor
						# }
						# prestige = 500
					# }
				# }
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
		# random_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
				# OR = {
					# prestige = 500
					# AND = {
						# age = 19
						# has_disease = no
						# has_severe_disability_trigger = no
						# OR = {
							# is_patrician = yes
							# higher_tier_than = COUNT
							# trait = dragon_rider
							# has_ambition = obj_become_councillor
						# }
						# prestige = 250
					# }
				# }
			# }
			# character_event = { id = valyria.893 }
			# break = yes
		# }
	# }

	# option = {
		# name = OK
		# if = {
			# limit = { NOT = { has_character_flag = first_advisor_found } }
			# set_character_flag = first_advisor_found
			# character_event = { id = valyria.892 days = 1 }
		# }
		# else = {
			# character_event = { id = valyria.9 days = 2 } #Finish
		# }
	# }
# }
character_event = {
	id = valyria.893
	desc = "EVTDESCvalyria.893"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	# immediate = {
		# clr_character_flag = election_candidate
		# set_character_flag = job_advisor_elect
	# }

	option = {
		name = "EVTOPTAvalyria.893"
		prestige = 25
	}
}
#Inform election finished
character_event = {
	id = valyria.9
	desc = "EVTDESCvalyria.9"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes
	hide_from = yes

	immediate = {
		clr_character_flag = valyrian_election
		# any_realm_character = {
			# limit = {
				# has_character_flag = election_candidate
			# }
			# clr_character_flag = election_candidate
		# }
	}

	option = {
		name = OK
		event_target:job_castellan_elect = {
			character_event = { id = valyria.4 tooltip = TOOLTIPjob_castellan_elect }
			show_portrait = yes
		}
		event_target:job_chancellor_elect = {
			character_event = { id = valyria.5 tooltip = TOOLTIPjob_chancellor_elect }
			show_portrait = yes
		}
		event_target:job_marshal_elect = {
			character_event = { id = valyria.6 tooltip = TOOLTIPjob_marshal_elect }
			show_portrait = yes
		}
		event_target:job_treasurer_elect = {
			character_event = { id = valyria.7 tooltip = TOOLTIPjob_treasurer_elect }
			show_portrait = yes
		}
		event_target:job_spymaster_elect  = {
			character_event = { id = valyria.8 tooltip = TOOLTIPjob_spymaster_elect }
			show_portrait = yes
		}
		event_target:job_admiral_elect  = {
			character_event = { id = valyria.891 tooltip = TOOLTIPjob_admiral_elect }
			show_portrait = yes
		}
		event_target:job_advisor_elect  = {
			character_event = { id = valyria.893 tooltip = TOOLTIPjob_advisor_elect }
			show_portrait = yes
		}
		event_target:job_advisor_elect_2  = {
			character_event = { id = valyria.893 tooltip = TOOLTIPjob_advisor_elect }
			show_portrait = yes
		}
		event_target:lord_freeholder_elect  = {
			character_event = { id = valyria.10 tooltip = TOOLTIPvalyria.10 }
			show_portrait = yes
		}
	}
}
# Inform new Lord Freeholder
character_event = {
	id = valyria.10

	desc = {
		text = "EVTDESCvalyria.3"
		trigger = { NOT = { character = FROM } }
	}
	desc = {
		text = "EVTDESCvalyria.3B"
		trigger = {
			character = FROM
			primary_title = { has_law = republic_triarch_for_life }
		}
	}
	desc = {
		text = "EVTDESCvalyria.3C"
		trigger = {
			character = FROM
			NOT = { primary_title = { has_law = republic_triarch_for_life } }
		}
	}
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	immediate = {
		hidden_tooltip = {
			clr_character_flag = lord_freeholder_elect
			clr_character_flag = no_court_invites
			clr_character_flag = elected_valyrian_councillor
			clr_character_flag = valyrian_election
			set_character_flag = valyrian_election
			if = {
				limit = {
					FROM = {
						is_merchant_republic = yes
						NOT = { character = ROOT }
					}
				}
				prestige = 80000
				set_character_flag = 80000_prestige_added
			}
			FROM = {
				recalc_succession = yes
				clr_character_flag = no_court_invites
				clr_character_flag = elected_valyrian_councillor
				any_vassal = { #mark vassals before handover
					limit = { is_patrician = no }
					set_character_flag = check_vassal
				}

				if = {
					limit = { NOT = { character = ROOT } }
					character_event = { id = valyria.20 days = 1 } #select conquest/colony appointment
				}
				job_castellan = {
					if = {
						limit = {
							has_character_flag = elected_valyrian_councillor
							NOT = { character = event_target:job_castellan_elect }
						}
						clr_character_flag = no_court_invites
						clr_character_flag = elected_valyrian_councillor
						set_character_flag = not_fired_from_council
						remove_title = job_castellan
						clr_character_flag = not_fired_from_council
						character_event = { id = valyria.20 days = 2 } #select conquest/colony appointment
					}
				}
				job_chancellor = {
					if = {
						limit = { has_character_flag = elected_valyrian_councillor }
						clr_character_flag = no_court_invites
						clr_character_flag = elected_valyrian_councillor
						set_character_flag = not_fired_from_council
						remove_title = job_chancellor
						clr_character_flag = not_fired_from_council
						character_event = { id = valyria.20 days = 3 } #select conquest/colony appointment
					}
				}
				job_marshal = {
					if = {
						limit = { has_character_flag = elected_valyrian_councillor }
						clr_character_flag = no_court_invites
						clr_character_flag = elected_valyrian_councillor
						set_character_flag = not_fired_from_council
						remove_title = job_marshal
						clr_character_flag = not_fired_from_council
						character_event = { id = valyria.20 days = 4 } #select conquest/colony appointment
					}
				}
				job_treasurer = {
					if = {
						limit = { has_character_flag = elected_valyrian_councillor }
						clr_character_flag = no_court_invites
						clr_character_flag = elected_valyrian_councillor
						set_character_flag = not_fired_from_council
						remove_title = job_treasurer
						clr_character_flag = not_fired_from_council
						character_event = { id = valyria.20 days = 5 } #select conquest/colony appointment
					}
				}
				random_courtier_or_vassal = {
					limit = {
						has_minor_title = title_high_admiral
						has_character_flag = elected_valyrian_councillor
					}
					clr_character_flag = no_court_invites
					clr_character_flag = elected_valyrian_councillor
					set_character_flag = not_fired_from_council
					remove_title = title_high_admiral
					clr_character_flag = not_fired_from_council
					character_event = { id = valyria.20 days = 6 } #select conquest/colony appointment
				}
				job_spymaster = {
					if = {
						limit = { has_character_flag = elected_valyrian_councillor }
						clr_character_flag = no_court_invites
						clr_character_flag = elected_valyrian_councillor
						set_character_flag = not_fired_from_council
						remove_title = job_spymaster
						clr_character_flag = not_fired_from_council
						character_event = { id = valyria.20 days = 7 } #select conquest/colony appointment
					}
				}
				random_courtier_or_vassal = {
					limit = {
						has_minor_title = title_councilmember_king
						has_character_flag = elected_valyrian_councillor
					}
					clr_character_flag = no_court_invites
					clr_character_flag = elected_valyrian_councillor
					set_character_flag = not_fired_from_council
					remove_title = title_councilmember_king
					clr_character_flag = not_fired_from_council
					character_event = { id = valyria.20 days = 8 } #select conquest/colony appointment
				}
				random_courtier_or_vassal = {
					limit = {
						has_minor_title = title_councilmember_emperor
						has_character_flag = elected_valyrian_councillor
					}
					clr_character_flag = no_court_invites
					clr_character_flag = elected_valyrian_councillor
					set_character_flag = not_fired_from_council
					remove_title = title_councilmember_emperor
					clr_character_flag = not_fired_from_council
					character_event = { id = valyria.20 days = 9 } #select conquest/colony appointment
				}
				any_courtier_or_vassal = { #elected councillors who somehow lost their job during term
					limit = {
						has_character_flag = elected_valyrian_councillor
					}
					clr_character_flag = no_court_invites
					clr_character_flag = elected_valyrian_councillor
					if = {
						limit = {
							prisoner = no
							is_incapable = no
						}
						character_event = { id = valyria.20 days = 10 random = 4 } #select conquest/colony appointment
					}
				}

				# capital_scope = { set_province_flag = republic_capital }
				if = {
					limit = { NOT = { character = ROOT } }
					if = {
						limit = { is_merchant_republic = yes }
						hold_election = yes
					}
					else = {
						capital_holding = { save_event_target_as = freehold_capital }
						if = { #no own personal titles
							limit = {
								NOT = {
									any_demesne_title = {
										tier = COUNT
										NOT = {
											dejure_liege_title = {
												has_title_flag = valyria_colony
											}
										}
										NOT = {
											dejure_liege_title = {
												dejure_liege_title = {
													has_title_flag = valyria_colony
												}
											}
										}
										NOT = { location = { is_capital = yes } }
									}
								}
							}
							random_realm_title = { #try and find relative's title to assume
								limit = {
									tier = COUNT
									holder_scope = {
										dynasty = ROOT_FROM
										OR = {
											is_child_of = ROOT_FROM
											is_grandchild_of = ROOT_FROM
											AND = {
												sibling = ROOT_FROM
												NOT = { is_older_than = ROOT_FROM }
											}
										}
										NAND = {
											trait = dragon_rider
											any_friend = {
												trait = dragon
												martial = 50
											}
										}
									}
									NOT = {
										dejure_liege_title = {
											has_title_flag = valyria_colony
										}
									}
									NOT = {
										dejure_liege_title = {
											dejure_liege_title = {
												has_title_flag = valyria_colony
											}
										}
									}
									OR = {
										location = { is_capital = no }
										holder_scope = { ai = yes }
									}
								}
								preferred_limit = {
									location = { is_capital = no }
									holder_scope = {
										OR = {
											is_child_of = ROOT_FROM
											is_grandchild_of = ROOT_FROM
										}
									}
								}
								preferred_limit = {
									location = { is_capital = no }
								}
								preferred_limit = {
									holder_scope = {
										OR = {
											is_child_of = ROOT_FROM
											is_grandchild_of = ROOT_FROM
										}
									}
								}
								gain_title = ROOT_FROM
								ROOT_FROM = { add_trait = dead_target }
							}
							if = { #if none found, abdicate to freehold heir
								limit = { NOT = { trait = dead_target } }
								ROOT = { save_event_target_as = debt_inheritor }
								inherit_debt_effect = yes
								abdicate_to = ROOT
							}
						}
						if = {
							limit = { tier = EMPEROR } #check havent already abdicated
							primary_title = {
								gain_title = ROOT
							}
							capital_scope = {
								kingdom = {
									if = {
										limit = { holder_scope = { character = ROOT_FROM } }
										gain_title = ROOT
									}
								}
								duchy = {
									if = {
										limit = { holder_scope = { character = ROOT_FROM } }
										gain_title = ROOT
									}
								}
								county = {
									if = {
										limit = { holder_scope = { character = ROOT_FROM } }
										gain_title = ROOT
									}
								}
							}
						}
						event_target:freehold_capital = { ROOT = { capital = PREV } }
					}
				}
			}
			if = {
				limit = { NOT = { character = ROOT_FROM } }
				#make sure kingdom is transferred
				if = {
					limit = { tier = EMPEROR }
					capital_scope = {
						kingdom = {
							if = {
								limit = { holder_scope = { character = ROOT_FROM } }
								gain_title = ROOT
							}
						}
					}
				}
				#transfer any directly held colonies
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony }
					score_value = { #higher titles first
						value = 1
						additive_modifier = {
							value = 1
							higher_tier_than = COUNT
						}
					}
					gain_title = ROOT
					add_law = valyria_colony
					hidden_tooltip = { revoke_law = republic_law_oligarchy }
					any_de_jure_vassal_title = {
						limit = { holder_scope = { character = ROOT_FROM } }
						gain_title = ROOT
						clr_title_flag = valyria_colony_assigned
						if = {
							limit = { has_title_flag = valyria_colony }
							add_law = valyria_colony
							hidden_tooltip = { revoke_law = republic_law_oligarchy }
						}
					}
					clr_title_flag = valyria_colony_assigned
				}
				#transfer any tributaries
				any_playable_ruler = {
					limit = {
						suzerain = { character = FROM }
					}
					FROM = { remove_tributary = PREV }
					ROOT = { make_tributary = { who = PREV tributary_type = valyrian_tributary } }
				}
				#Check vassals
				any_vassal = {
					limit = {
						has_character_flag = check_vassal
						primary_title = {
							OR = {
								has_de_jure_pretension = FROM
								dejure_liege_title = { has_de_jure_pretension = FROM }
								dejure_liege_title = { dejure_liege_title = { has_de_jure_pretension = FROM } }
							}
						}
					}
					clr_character_flag = check_vassal
					set_defacto_liege = FROM
				}
				#Return any vassals in dejure realm
				any_vassal = {
					limit = {
						has_character_flag = check_vassal
						is_patrician = no
						lower_tier_than = FROM
						primary_title = {
							OR = {
								has_de_jure_pretension = FROM
								dejure_liege_title = { has_de_jure_pretension = FROM }
								dejure_liege_title = { dejure_liege_title = { has_de_jure_pretension = FROM } }
							}
						}
					}
					clr_character_flag = check_vassal
					set_defacto_liege = FROM
				}
				FROM = { #check barons
					any_demesne_title = {
						limit = { tier = COUNT }
						any_direct_de_jure_vassal_title = {
							holder_scope = {
								if = {
									limit = {
										has_character_flag = check_vassal
										tier = BARON
										is_patrician = no
										liege = { character = ROOT }
									}
									clr_character_flag = check_vassal
									set_defacto_liege = ROOT_FROM
								}
							}
						}
					}
				}
				if = {
					limit = { is_patrician = no }
					set_government_type = noble_oligarchy
					primary_title = { add_law = noble_oligarchy_elective }
					recalc_succession = yes
				}
			}
			any_vassal = {
				clr_character_flag = check_vassal
			}
			FROM = {
				any_vassal = {
					clr_character_flag = check_vassal
				}
			}
			# random_demesne_title = {
				# limit = {
					# tier = BARON
					# holding_type = city
					# location = { has_province_flag = republic_capital }
				# }
				# ROOT = { capital = PREV }
				# location = { clr_province_flag = republic_capital }
			# }
			# any_independent_ruler = {
				# limit = { has_character_flag = broke_vassal }
				# set_defacto_liege = ROOT
			# }
			# any_realm_lord = { clr_character_flag = broke_vassal }
			FROM = { clr_character_flag = valyrian_election }
			clr_character_flag = valyrian_election
			set_character_flag = valyrian_election
			any_realm_lord = {
				limit = {
					ai = no
					NOT = { character = ROOT }
					NOT = { character = FROM }
				}
				character_event = { id = valyria.11 days = 1 }
			}
		}
		if = {
			limit = { has_character_flag = 80000_prestige_added }
			prestige = -80000
			clr_character_flag = 80000_prestige_added
		}
	}

	option = {
		name = "OK"
		prestige = 100
		event_target:job_castellan_elect = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					job_castellan = {
						set_character_flag = not_fired_from_council
						remove_title = job_castellan
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_job_title = job_castellan
			clr_character_flag = job_castellan_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
		event_target:job_chancellor_elect = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					job_chancellor = {
						set_character_flag = not_fired_from_council
						remove_title = job_chancellor
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_job_title = job_chancellor
			clr_character_flag = job_chancellor_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
		event_target:job_marshal_elect = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					job_marshal = {
						set_character_flag = not_fired_from_council
						remove_title = job_marshal
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_job_title = job_marshal
			clr_character_flag = job_marshal_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
		event_target:job_treasurer_elect = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					job_treasurer = {
						set_character_flag = not_fired_from_council
						remove_title = job_treasurer
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_job_title = job_treasurer
			clr_character_flag = job_treasurer_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
		event_target:job_spymaster_elect  = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					job_spymaster = {
						set_character_flag = not_fired_from_council
						remove_title = job_spymaster
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_job_title = job_spymaster
			clr_character_flag = job_spymaster_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
		event_target:job_admiral_elect  = {
			if = {
				limit = { has_character_flag = job_admiral_elect }
				hidden_tooltip = {
					if = {
						limit = {
							NOT = { liege = { character = ROOT } }
							is_ruler = no
						}
						set_character_flag = no_court_invites
						move_character = ROOT
					}
					ROOT = {
						random_courtier_or_vassal = {
							limit = { has_minor_title = title_high_admiral }
							set_character_flag = not_fired_from_council
							remove_title = title_high_admiral
							clr_character_flag = not_fired_from_council
						}
					}
					any_demesne_title = {
						limit = { has_title_flag = valyria_colony_assigned }
						clr_title_flag = valyria_colony_assigned
					}
				}
				give_minor_title = title_high_admiral
				clr_character_flag = job_admiral_elect
				set_character_flag = elected_valyrian_councillor
				show_portrait = yes
			}
		}
		event_target:job_advisor_elect  = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					random_courtier_or_vassal = {
						limit = { has_minor_title = title_councilmember_king }
						set_character_flag = not_fired_from_council
						remove_title = title_councilmember_king
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_minor_title = title_councilmember_king
			clr_character_flag = job_advisor_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
		event_target:job_advisor_elect_2  = {
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { liege = { character = ROOT } }
						is_ruler = no
					}
					set_character_flag = no_court_invites
					move_character = ROOT
				}
				ROOT = {
					random_courtier_or_vassal = {
						limit = { has_minor_title = title_councilmember_emperor }
						set_character_flag = not_fired_from_council
						remove_title = title_councilmember_emperor
						clr_character_flag = not_fired_from_council
					}
				}
				any_demesne_title = {
					limit = { has_title_flag = valyria_colony_assigned }
					clr_title_flag = valyria_colony_assigned
				}
			}
			give_minor_title = title_councilmember_emperor
			clr_character_flag = job_advisor_elect
			set_character_flag = elected_valyrian_councillor
			show_portrait = yes
		}
	}
}
#Inform realm
character_event = {
	id = valyria.11
	desc = "EVTDESCvalyria.11"
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	option = {
		name = OK
		FROM = {
			tooltip = { character_event = { id = valyria.10 tooltip = TOOLTIPvalyria.10 } }
			job_castellan = {
				if = {
					limit = { has_character_flag = elected_valyrian_councillor }
					custom_tooltip = { text = TOOLTIPjob_castellan_elect }
				}
			}
			job_chancellor = {
				if = {
					limit = { has_character_flag = elected_valyrian_councillor }
					custom_tooltip = { text = TOOLTIPjob_chancellor_elect }
				}
			}
			job_marshal = {
				if = {
					limit = { has_character_flag = elected_valyrian_councillor }
					custom_tooltip = { text = TOOLTIPjob_marshal_elect }
				}
			}
			job_treasurer = {
				if = {
					limit = { has_character_flag = elected_valyrian_councillor }
					custom_tooltip = { text = TOOLTIPjob_treasurer_elect }
				}
			}
			job_spymaster = {
				if = {
					limit = { has_character_flag = elected_valyrian_councillor }
					custom_tooltip = { text = TOOLTIPjob_spymaster_elect }
				}
			}
			random_courtier_or_vassal = {
				limit = {
					has_minor_title = title_high_admiral
					has_character_flag = elected_valyrian_councillor
				}
				custom_tooltip = { text = TOOLTIPjob_admiral_elect }
			}
			random_courtier_or_vassal = {
				limit = {
					has_minor_title = title_councilmember_king
					has_character_flag = elected_valyrian_councillor
				}
				custom_tooltip = { text = TOOLTIPjob_advisor_elect }
			}
			random_courtier_or_vassal = {
				limit = {
					has_minor_title = title_councilmember_emperor
					has_character_flag = elected_valyrian_councillor
				}
				custom_tooltip = { text = TOOLTIPjob_advisor_elect }
			}
		}
	}
}

##Former Councillor Selects Colony/Conquest##
character_event = {
	id = valyria.20
	desc = "EVTDESCvalyria.20"

	is_triggered_only = yes

	trigger = {
		top_liege = {
			has_landed_title = e_new_valyria
			NOT = { war_with = ROOT }
		}
		NOT = { has_character_flag = elected_valyrian_councillor }
		is_theocracy = no
		can_press_claims_trigger = yes
	}

	option = {
		name = "EVTOPTAvalyria.20" #Colony
		trigger = { NOT = { has_character_flag = no_colonies_available } }
		ai_chance = {
			factor = 50
		}
		character_event = { id = valyria.21 tooltip = TOOLTIPvalyria.21 }
		clr_character_flag = no_conquests_available
	}
	option = {
		name = "EVTOPTBvalyria.20" #Conquest
		trigger = {
			trait = dragon_rider
			any_friend = {
				trait = dragon
				martial = 10
				NOT = { trait = maimed_dragon }
			}
			NOT = { has_character_flag = no_conquests_available }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				trait = content
			}
			modifier = {
				factor = 5
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 2
				trait = greedy
			}
		}
		clr_character_flag = no_colonies_available
		character_event = { id = valyria.25 tooltip = TOOLTIPvalyria.25 }
	}
	option = {
		name = "EVTOPTCvalyria.20" #None
		ai_chance = {
			factor = 0
		}
		if = {
			limit = {
				OR = {
					NOT = { has_character_flag = no_colonies_available }
					AND = {
						trait = dragon_rider
						any_friend = {
							trait = dragon
							martial = 10
							NOT = { trait = maimed }
						}
					}
				}
			}
			prestige = -100
		}
		clr_character_flag = no_colonies_available
		clr_character_flag = no_conquests_available
	}
}
#Select Colony
character_event = {
	id = valyria.21
	desc = "EVTDESCvalyria.21"

	is_triggered_only = yes

	immediate = {
		random_demesne_title = { #check that the lord doesnt already have a colony
			limit = {
				NOT = { tier = EMPEROR }
				higher_tier_than = COUNT
				has_title_flag = valyria_colony
				NOT = { has_title_flag = valyria_colony_option }
				NOT = {
					dejure_liege_title = {
						NOT = { tier = EMPEROR }
						has_title_flag = valyria_colony
						holder_scope = { character = PREVPREVPREV }
					}
				}
			}
			set_title_flag = valyria_colony_option
			save_event_target_as = valyria_colony_1
		}
		e_new_valyria = {
			holder_scope = {
				save_event_target_as = valyrian_archon
				if = {
					limit = { NOT = { event_target:valyria_colony_1 = { always = yes } } }
					random_demesne_title = {
						limit = {
							NOT = { tier = EMPEROR }
							higher_tier_than = COUNT
							has_title_flag = valyria_colony
							NOT = { has_title_flag = valyria_colony_option }
							NOT = {
								dejure_liege_title = {
									NOT = { tier = EMPEROR }
									has_title_flag = valyria_colony
									holder_scope = { character = PREVPREVPREV }
								}
							}
						}
						set_title_flag = valyria_colony_option
						save_event_target_as = valyria_colony_1
					}
				}
				random_demesne_title = {
					limit = {
						NOT = { tier = EMPEROR }
						higher_tier_than = COUNT
						has_title_flag = valyria_colony
						NOT = { has_title_flag = valyria_colony_option }
						NOT = {
							dejure_liege_title = {
								NOT = { tier = EMPEROR }
								has_title_flag = valyria_colony
								holder_scope = { character = PREVPREVPREV }
							}
						}
					}
					set_title_flag = valyria_colony_option
					save_event_target_as = valyria_colony_2
				}
				random_demesne_title = {
					limit = {
						NOT = { tier = EMPEROR }
						higher_tier_than = COUNT
						has_title_flag = valyria_colony
						NOT = { has_title_flag = valyria_colony_option }
						NOT = {
							dejure_liege_title = {
								NOT = { tier = EMPEROR }
								has_title_flag = valyria_colony
								holder_scope = { character = PREVPREVPREV }
							}
						}
					}
					set_title_flag = valyria_colony_option
					save_event_target_as = valyria_colony_3
					break = yes
				}
				if = {
					limit = { NOT = { event_target:valyria_colony_1 = { always = yes } } }
					random_realm_lord = {
						limit = {
							NOT = { has_character_modifier = extended_valyria_colony_term } #does not have extended term
							any_demesne_title = {
								NOT = { tier = EMPEROR }
								higher_tier_than = COUNT
								has_title_flag = valyria_colony
								NOT = { has_title_flag = valyria_colony_option }
								NOT = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										has_title_flag = valyria_colony
										holder_scope = { character = PREVPREVPREV }
									}
								}
								OR = {
									holder_scope = { liege = { tier = EMPEROR } }
									NOT = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											has_title_flag = valyria_colony
											holder_scope = { same_realm = ROOT }
										}
									}
								}
								OR = {
									NOT = { has_title_flag = valyria_colony_assigned }
									had_title_flag = { flag = valyria_colony_assigned days = 1820 }
								}
							}
						}
						random_demesne_title = {
							limit = {
								NOT = { tier = EMPEROR }
								higher_tier_than = COUNT
								has_title_flag = valyria_colony
								NOT = { has_title_flag = valyria_colony_option }
								NOT = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										has_title_flag = valyria_colony
										holder_scope = { character = PREVPREVPREV }
									}
								}
								OR = {
									holder_scope = { liege = { tier = EMPEROR } }
									NOT = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											has_title_flag = valyria_colony
											holder_scope = { same_realm = ROOT }
										}
									}
								}
								OR = {
									NOT = { has_title_flag = valyria_colony_assigned }
									had_title_flag = { flag = valyria_colony_assigned days = 1820 }
								}
							}
							set_title_flag = valyria_colony_option
							save_event_target_as = valyria_colony_1
						}
					}
				}
				if = {
					limit = { NOT = { event_target:valyria_colony_2 = { always = yes } } }
					random_realm_lord = {
						limit = {
							NOT = { has_character_modifier = extended_valyria_colony_term } #does not have extended term
							any_demesne_title = {
								NOT = { tier = EMPEROR }
								higher_tier_than = COUNT
								has_title_flag = valyria_colony
								NOT = { has_title_flag = valyria_colony_option }
								NOT = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										has_title_flag = valyria_colony
										holder_scope = { character = PREVPREVPREV }
									}
								}
								OR = {
									holder_scope = { liege = { tier = EMPEROR } }
									NOT = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											has_title_flag = valyria_colony
											holder_scope = { same_realm = ROOT }
										}
									}
								}
								OR = {
									NOT = { has_title_flag = valyria_colony_assigned }
									had_title_flag = { flag = valyria_colony_assigned days = 1820 }
								}
							}
						}
						random_demesne_title = {
							limit = {
								NOT = { tier = EMPEROR }
								higher_tier_than = COUNT
								has_title_flag = valyria_colony
								NOT = { has_title_flag = valyria_colony_option }
								NOT = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										has_title_flag = valyria_colony
										holder_scope = { character = PREVPREVPREV }
									}
								}
								OR = {
									holder_scope = { liege = { tier = EMPEROR } }
									NOT = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											has_title_flag = valyria_colony
											holder_scope = { same_realm = ROOT }
										}
									}
								}
								OR = {
									NOT = { has_title_flag = valyria_colony_assigned }
									had_title_flag = { flag = valyria_colony_assigned days = 1820 }
								}
							}
							set_title_flag = valyria_colony_option
							save_event_target_as = valyria_colony_2
						}
					}
				}
				if = {
					limit = { NOT = { event_target:valyria_colony_3 = { always = yes } } }
					random_realm_lord = {
						limit = {
							NOT = { has_character_modifier = extended_valyria_colony_term } #does not have extended term
							any_demesne_title = {
								NOT = { tier = EMPEROR }
								higher_tier_than = COUNT
								has_title_flag = valyria_colony
								NOT = { has_title_flag = valyria_colony_option }
								NOT = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										has_title_flag = valyria_colony
										holder_scope = { character = PREVPREVPREV }
									}
								}
								OR = {
									holder_scope = { liege = { tier = EMPEROR } }
									NOT = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											has_title_flag = valyria_colony
											holder_scope = { same_realm = ROOT }
										}
									}
								}
								OR = {
									NOT = { has_title_flag = valyria_colony_assigned }
									had_title_flag = { flag = valyria_colony_assigned days = 1820 }
								}
							}
						}
						random_demesne_title = {
							limit = {
								NOT = { tier = EMPEROR }
								higher_tier_than = COUNT
								has_title_flag = valyria_colony
								NOT = { has_title_flag = valyria_colony_option }
								NOT = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										has_title_flag = valyria_colony
										holder_scope = { character = PREVPREVPREV }
									}
								}
								OR = {
									holder_scope = { liege = { tier = EMPEROR } }
									NOT = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											has_title_flag = valyria_colony
											holder_scope = { same_realm = ROOT }
										}
									}
								}
								OR = {
									NOT = { has_title_flag = valyria_colony_assigned }
									had_title_flag = { flag = valyria_colony_assigned days = 1820 }
								}
							}
							set_title_flag = valyria_colony_option
							save_event_target_as = valyria_colony_3
						}
					}
				}
			}
		}
	}

	option = {
		name = "EVTOPTAvalyria.21" #Colony 1
		trigger = { event_target:valyria_colony_1 = { always = yes } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				event_target:valyria_colony_1 = { tier = KING }
			}
			modifier = {
				factor = 2
				event_target:valyria_colony_1 = { title = k_long_summer }
			}
			modifier = {
				factor = 5
				event_target:valyria_colony_1 = { dejure_liege_title = { title = k_long_summer } }
			}
		}
		event_target:valyria_colony_1 = {
			hidden_tooltip = {
				save_event_target_as = valyria_colony
				holder_scope = {
					character_event = { id = valyria.23 }
					top_liege = {
						if = {
							limit = { NOT = { has_landed_title = PREVPREV } }
							character_event = { id = valyria.24 }
						}
					}
				}
			}
			tooltip = {
				any_de_jure_vassal_title = {
					limit = { holder_scope = { has_landed_title = PREVPREV } }
					gain_title = ROOT
				}
				gain_title = ROOT
			}
			clr_title_flag = valyria_colony_assigned
			set_title_flag = valyria_colony_assigned

			clr_title_flag = valyria_colony_option
		}
		tooltip = {
			any_demesne_title = { #give back any other colonies
				limit = {
					NOT = { tier = EMPEROR }
					higher_tier_than = COUNT
					has_title_flag = valyria_colony
					NOT = { title = event_target:valyria_colony_1 }
					NOT = {
						dejure_liege_title = {
							NOT = { tier = EMPEROR }
							has_title_flag = valyria_colony
							title = event_target:valyria_colony_1
							holder_scope = { character = ROOT }
						}
					}
				}
				gain_title = event_target:valyrian_archon
			}
		}
		event_target:valyria_colony_2 = { clr_title_flag = valyria_colony_option }
		event_target:valyria_colony_3 = { clr_title_flag = valyria_colony_option }
	}
	option = {
		name = "EVTOPTBvalyria.21" #Colony 2
		trigger = { event_target:valyria_colony_2 = { always = yes } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				event_target:valyria_colony_2 = { tier = KING }
			}
			modifier = {
				factor = 2
				event_target:valyria_colony_2 = { title = k_long_summer }
			}
			modifier = {
				factor = 5
				event_target:valyria_colony_2 = { dejure_liege_title = { title = k_long_summer } }
			}
		}
		event_target:valyria_colony_2 = {
			hidden_tooltip = {
				save_event_target_as = valyria_colony
				holder_scope = {
					character_event = { id = valyria.23 }
					top_liege = {
						if = {
							limit = { NOT = { has_landed_title = PREVPREV } }
							character_event = { id = valyria.24 }
						}
					}
				}
			}
			tooltip = {
				any_de_jure_vassal_title = {
					limit = { holder_scope = { has_landed_title = PREVPREV } }
					gain_title = ROOT
				}
				gain_title = ROOT
			}
			clr_title_flag = valyria_colony_assigned
			set_title_flag = valyria_colony_assigned

			clr_title_flag = valyria_colony_option
		}
		tooltip = {
			any_demesne_title = { #give back any other colonies
				limit = {
					NOT = { tier = EMPEROR }
					higher_tier_than = COUNT
					has_title_flag = valyria_colony
					NOT = { title = event_target:valyria_colony_2 }
					NOT = {
						dejure_liege_title = {
							NOT = { tier = EMPEROR }
							has_title_flag = valyria_colony
							title = event_target:valyria_colony_2
							holder_scope = { character = ROOT }
						}
					}
				}
				gain_title = event_target:valyrian_archon
			}
		}
		event_target:valyria_colony_1 = { clr_title_flag = valyria_colony_option }
		event_target:valyria_colony_3 = { clr_title_flag = valyria_colony_option }
	}
	option = {
		name = "EVTOPTCvalyria.21" #Colony 3
		trigger = { event_target:valyria_colony_3 = { always = yes } }
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				event_target:valyria_colony_3 = { tier = KING }
			}
			modifier = {
				factor = 2
				event_target:valyria_colony_3 = { title = k_long_summer }
			}
			modifier = {
				factor = 5
				event_target:valyria_colony_3 = { dejure_liege_title = { title = k_long_summer } }
			}
		}
		event_target:valyria_colony_3 = {
			hidden_tooltip = {
				save_event_target_as = valyria_colony
				holder_scope = {
					character_event = { id = valyria.23 }
					top_liege = {
						if = {
							limit = { NOT = { has_landed_title = PREVPREV } }
							character_event = { id = valyria.24 }
						}
					}
				}
			}
			tooltip = {
				any_de_jure_vassal_title = {
					limit = { holder_scope = { has_landed_title = PREVPREV } }
					gain_title = ROOT
				}
				gain_title = ROOT
			}
			clr_title_flag = valyria_colony_assigned
			set_title_flag = valyria_colony_assigned

			clr_title_flag = valyria_colony_option
		}
		tooltip = {
			any_demesne_title = { #give back any other colonies
				limit = {
					NOT = { tier = EMPEROR }
					higher_tier_than = COUNT
					has_title_flag = valyria_colony
					NOT = { title = event_target:valyria_colony_3 }
					NOT = {
						dejure_liege_title = {
							NOT = { tier = EMPEROR }
							has_title_flag = valyria_colony
							title = event_target:valyria_colony_3
							holder_scope = { character = ROOT }
						}
					}
				}
				gain_title = event_target:valyrian_archon
			}
		}
		event_target:valyria_colony_2 = { clr_title_flag = valyria_colony_option }
		event_target:valyria_colony_1 = { clr_title_flag = valyria_colony_option }
	}
	option = {
		name = "EVTOPTDvalyria.21" #Decline
		trigger = {
			ai = no
			event_target:valyria_colony_3 = { always = yes }
		}
		ai_chance = {
			factor = 0.1
		}
		hidden_tooltip = {
			set_character_flag = no_colonies_available
			character_event = { id = valyria.20 }
			event_target:valyria_colony_3 = { clr_title_flag = valyria_colony_option }
			event_target:valyria_colony_2 = { clr_title_flag = valyria_colony_option }
			event_target:valyria_colony_1 = { clr_title_flag = valyria_colony_option }
		}
		any_demesne_title = { #give back any other colonies
			limit = {
				NOT = { tier = EMPEROR }
				higher_tier_than = COUNT
				has_title_flag = valyria_colony
			}
			gain_title = event_target:valyrian_archon
			hidden_tooltip = {
				any_de_jure_vassal_title = {
					limit = { holder_scope = { character = ROOT } }
					gain_title = event_target:valyrian_archon
					if = {
						limit = { has_title_flag = valyria_colony }
						add_law = valyria_colony
						revoke_law = republic_law_oligarchy
					}
				}
				add_law = valyria_colony
				revoke_law = republic_law_oligarchy
				ROOT = { set_defacto_liege = event_target:valyrian_archon } #make sure they stay vassalised
			}
		}
	}
	option = {
		name = "EVTOPTEvalyria.21" #None available
		trigger = {
			NOT = { event_target:valyria_colony_1 = { always = yes } }
			NOT = { event_target:valyria_colony_2 = { always = yes } }
			NOT = { event_target:valyria_colony_3 = { always = yes } }
		}
		ai_chance = {
			factor = 0.1
		}
		hidden_tooltip = {
			set_character_flag = no_colonies_available
			character_event = { id = valyria.20 }
		}
		any_demesne_title = { #give back any other colonies
			limit = {
				NOT = { tier = EMPEROR }
				higher_tier_than = COUNT
				has_title_flag = valyria_colony
			}
			gain_title = event_target:valyrian_archon
			hidden_tooltip = {
				any_de_jure_vassal_title = {
					limit = { holder_scope = { character = ROOT } }
					gain_title = event_target:valyrian_archon
					if = {
						limit = { has_title_flag = valyria_colony }
						add_law = valyria_colony
						revoke_law = republic_law_oligarchy
					}
				}
				add_law = valyria_colony
				revoke_law = republic_law_oligarchy
				ROOT = { set_defacto_liege = event_target:valyrian_archon } #make sure they stay vassalised
			}
		}
	}
}
character_event = { #Inform former Archon
	id = valyria.23
	desc = "EVTDESCvalyria.23"

	is_triggered_only = yes

	option = {
		name = OK
		event_target:valyria_colony = {
			any_de_jure_vassal_title = {
				limit = { holder_scope = { character = ROOT } }
				gain_title = FROM
			}
			gain_title = FROM
		}
		hidden_tooltip = {
			FROM = {
				any_demesne_title = { #give back any other colonies
					limit = {
						NOT = { tier = EMPEROR }
						higher_tier_than = COUNT
						has_title_flag = valyria_colony
						NOT = { title = event_target:valyria_colony }
						NOT = {
							dejure_liege_title = {
								NOT = { tier = EMPEROR }
								has_title_flag = valyria_colony
								title = event_target:valyria_colony
								holder_scope = { character = ROOT_FROM }
							}
						}
					}
					gain_title = event_target:valyrian_archon
					hidden_tooltip = {
						succession = appointment
						any_de_jure_vassal_title = {
							limit = { holder_scope = { character = ROOT_FROM } }
							gain_title = event_target:valyrian_archon
							succession = appointment
							if = {
								limit = { has_title_flag = valyria_colony }
								add_law = valyria_colony
								revoke_law = republic_law_oligarchy
							}
						}
						add_law = valyria_colony
						revoke_law = republic_law_oligarchy
					}
				}
				set_defacto_liege = event_target:valyrian_archon #make sure they stay vassalised
				set_government_type = colony_government
				recalc_succession = yes
			}
			set_defacto_liege = event_target:valyrian_archon #make sure they stay vassalised
		}
	}
}
character_event = { #Inform top liege
	id = valyria.24
	desc = "EVTDESCvalyria.24"

	is_triggered_only = yes

	option = {
		name = OK
	}
}
#Select Conquest/Colonisation
character_event = {
	id = valyria.25
	desc = "EVTDESCvalyria.25"

	is_triggered_only = yes

	immediate = {
		e_new_valyria = { holder_scope = { save_event_target_as = e_new_valyria_holder } }
		random_independent_ruler = { #find generic conquest
			limit = {
				NOT = { same_realm = ROOT }
				NOT_mythical_creature_trigger = yes
				NOT = { culture_group = unoccupied_group }
				NOT = { trait = nightswatch }
				demesne_size = 1
				higher_tier_than = BARON
				NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
				NOT = { has_non_aggression_pact_with = ROOT }
				capital_scope = {
					kingdom = {
						dejure_liege_title = {
							OR = {
								title = e_new_valyria
								holder_scope = { character = event_target:e_new_valyria_holder }
							}
						}
						NOT = { capital_scope = { owner = { culture_group = unoccupied_group } } } #capital must not be a ruin
					}
				}
				OR = {
					tier = EMPEROR
					NOR = {
						any_demesne_title = {
							NOT = { tier = BARON }
							event_target:e_new_valyria_holder = {
								any_demesne_title = {
									tier = EMPEROR
									is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
									check_variable = { which = "de_facto_empire" value = 0.9 }
								}
							}
						}
						has_opinion_modifier = { who = event_target:e_new_valyria_holder modifier = opinion_de_facto_liege }
					}
				}
				NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
				OR = { #Cannot attack vassals split by mega war
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
					NOT = { ROOT = { higher_tier_than = PREV } }
				}
			}
			save_event_target_as = valyria_generic_conquest
		}

		random_independent_ruler = { #find generic colony
			limit = {
				NOT = { same_realm = ROOT }
				culture_group = unoccupied_group
				demesne_size = 1
				higher_tier_than = BARON
				NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
				NOT = { has_non_aggression_pact_with = ROOT }
				capital_scope = {
					kingdom = {
						dejure_liege_title = {
							OR = {
								title = e_new_valyria
								holder_scope = { character = event_target:e_new_valyria_holder }
							}
						}
						NOT = { capital_scope = { owner = { culture_group = unoccupied_group } } } #capital must not be a ruin
					}
					NOT = { province_id = 417 }
					NOT = { province_id = 418 }
					NOT = { province_id = 419 }
					NOT = { province_id = 368 }
					NOT = { province_id = 420 }
					NOT = { province_id = 422 }
					NOT = { province_id = 423 }
					NOT = { province_id = 367 }
					NOT = { province_id = 378 }
					NOT = { province_id = 406 }
					NOT = { province_id = 221 }
				}
			}
			capital_scope = { save_event_target_as = valyria_generic_colony }
		}
	}

	option = {
		name = "EVTOPTAvalyria.25" #Back
		ai_chance = { factor = 0 }
		hidden_tooltip = {
			character_event = { id = valyria.20 }
		}
		if = {
			limit = { ai = yes }
			set_character_flag = no_conquests_available
		}
	}
	option = {
		name = "EVTOPTBvalyria.25" #Subdue Tribes of Lands of the Long Summer
		trigger = {
			NOT = { k_long_summer = { dejure_liege_title = { title = e_new_valyria } } }
		}
		k_long_summer = {
			save_event_target_as = valyrian_conquest_target
			ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
		}
		hidden_tooltip = {
			top_liege = {
				character_event = { id = valyria.27 }
				any_realm_lord = {
					limit = {
						ai = no
						NOT = { character = ROOT }
					}
					character_event = { id = valyria.27 }
				}
			}
		}
	}
	option = {
		name = "EVTOPTCvalyria.25" #De Jure Colony
		trigger = {
			event_target:valyria_generic_colony = { always = yes }
		}
		wealth = -250
		tooltip = {
			top_liege = { wealth = -250 }
		}
		prestige = 200
		event_target:valyria_generic_colony = {
			kingdom = {
				if = {
					limit = {
						title = k_north_valyria
						NOT = { dejure_liege_title = { title = e_new_valyria } }
					}
					de_jure_liege = e_new_valyria
				}
			}
			save_event_target_as = valyrian_colony_target
			ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
		}
		hidden_tooltip = {
			top_liege = {
				character_event = { id = valyria.29 }
				any_realm_lord = {
					limit = {
						ai = no
						NOT = { character = ROOT }
					}
					character_event = { id = valyria.29 }
				}
			}
		}
	}
	option = {
		name = "EVTOPTEvalyria.25" #Volantis
		trigger = {
			598 = { owner = { NOT = { culture_group = unoccupied_group } } } #Dracarys
			419 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				419 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			419 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			419 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTFvalyria.25" #Volon Therys
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			420 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				420 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			420 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			420 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTGvalyria.25" #Valysar
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			422 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				422 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			422 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			422 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTHvalyria.25" #Selhorys
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			423 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				423 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			423 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			423 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	# option = {
		# name = "EVTOPTIvalyria.25" #Attack Ghiscar
		# trigger = {
			# 599 = { owner = { NOT = { culture_group = unoccupied_group } } } #Mantarys
			# 598 = { owner = { NOT = { culture_group = unoccupied_group } } } #Dracarys
			# e_ghiscar = {
				# holder_scope = {
					# NOT = { same_realm = ROOT }
					# any_realm_title = {
						# tier = COUNT
						# location = {
							# OR = {
								# region = world_summer_sea
								# region = world_free_cities
								# region = world_sarnor
							# }
						# }
					# }
				# }
			# }
		# }
		# e_ghiscar = {
			# holder_scope = {
				# random_demesne_title = {
					# limit = {
						# tier = COUNT
						# location = {
							# OR = {
								# region = world_summer_sea
								# region = world_free_cities
								# region = world_sarnor
							# }
						# }
					# }
					# save_event_target_as = valyrian_conquest_target
					# ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				# }
				# if = {
					# limit = {
						# NOT = {
							# any_demesne_title = {
								# tier = COUNT
								# location = {
									# OR = {
										# region = world_summer_sea
										# region = world_free_cities
										# region = world_sarnor
									# }
								# }
							# }
						# }
					# }
					# random_realm_lord = {
						# limit = {
							# any_demesne_title = {
								# tier = COUNT
								# location = {
									# OR = {
										# region = world_summer_sea
										# region = world_free_cities
										# region = world_sarnor
									# }
								# }
							# }
						# }
						# random_demesne_title = {
							# limit = {
								# tier = COUNT
								# location = {
									# OR = {
										# region = world_summer_sea
										# region = world_free_cities
										# region = world_sarnor
									# }
								# }
							# }
							# save_event_target_as = valyrian_conquest_target
							# ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
						# }
					# }
				# }
			# }
		# }
		# hidden_tooltip = {
			# top_liege = {
				# character_event = { id = valyria.27 }
				# any_realm_lord = {
					# limit = {
						# ai = no
						# NOT = { character = ROOT }
					# }
					# character_event = { id = valyria.27 }
				# }
			# }
		# }
	# }
	option = {
		name = "EVTOPTJvalyria.25" #Lys
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			368 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				368 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			368 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			368 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTKvalyria.25" #Tyrosh
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			367 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				367 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			367 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			367 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTLvalyria.25" #Myr
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			378 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				378 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			378 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			378 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTMvalyria.25" #Pentos
		trigger = {
			419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
			406 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				406 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			406 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			406 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTQvalyria.25" #Essaria
		trigger = {
			476 = { #Qohor
				owner = {
					top_liege = {
						OR = {
							has_landed_title = e_new_valyria
							suzerain = { has_landed_title = e_new_valyria }
						}
					}
				}
			}
			542 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				542 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			542 = {
				save_event_target_as = valyrian_colony_target
				set_flag = valyria_primary_colony
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			542 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTNvalyria.25" #Dragonstone
		trigger = {
			406 = { #Pentos
				owner = {
					top_liege = {
						OR = {
							has_landed_title = e_new_valyria
							suzerain = { has_landed_title = e_new_valyria }
						}
					}
				}
			}
			221 = {
				OR = {
					AND = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					AND = {
						NOT = { empire = { title = e_new_valyria } }
						e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
						owner = {
							top_liege = {
								NOT = { same_realm = ROOT }
								NOT_mythical_creature_trigger = yes
								NOT = { culture_group = unoccupied_group }
								NOT = { trait = nightswatch }
								demesne_size = 1
								higher_tier_than = BARON
								NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
								OR = { #Cannot attack vassals split by mega war
									NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
									NOT = { ROOT = { higher_tier_than = PREV } }
								}
								NOT = { e_new_valyria = { holder_scope = { has_non_aggression_pact_with = PREVPREV } } }
								NOT = { has_non_aggression_pact_with = ROOT }
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				221 = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
				}
			}
			wealth = -250
			tooltip = {
				top_liege = { wealth = -250 }
			}
			prestige = 200
			221 = {
				save_event_target_as = valyrian_colony_target
				ROOT = { character_event = { id = valyria.28 tooltip = TOOLTIPvalyria.28 } } #COLONISE
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.29 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.29 }
					}
				}
			}
		}
		else = {
			221 = {
				county = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
			hidden_tooltip = {
				top_liege = {
					character_event = { id = valyria.27 }
					any_realm_lord = {
						limit = {
							ai = no
							NOT = { character = ROOT }
						}
						character_event = { id = valyria.27 }
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTOvalyria.25" #Generic dejure
		trigger = {
			599 = { owner = { NOT = { culture_group = unoccupied_group } } } #Mantarys
			598 = { owner = { NOT = { culture_group = unoccupied_group } } } #Dracarys
			e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
			event_target:valyria_generic_conquest = { always = yes }
		}
		event_target:valyria_generic_conquest = {
			capital_scope = {
				kingdom = {
					save_event_target_as = valyrian_conquest_target
					ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
				}
			}
		}
		hidden_tooltip = {
			top_liege = {
				character_event = { id = valyria.27 }
				any_realm_lord = {
					limit = {
						ai = no
						NOT = { character = ROOT }
					}
					character_event = { id = valyria.27 }
				}
			}
		}
	}
	# option = {
		# name = "EVTOPTPvalyria.25" #Qarth
		# trigger = {
			# e_new_valyria = {
				# holder_scope = { NOT = { trait = civil_war } }
			# }
			# k_qarth = {
				# holder_scope = {
					# NOT = { same_realm = ROOT }
					# NOT_mythical_creature_trigger = yes
					# OR = {
						# tier = EMPEROR
						# NOT = {
							# any_demesne_title = {
								# NOT = { tier = BARON }
								# e_new_valyria = {
									# holder_scope = {
										# any_demesne_title = {
											# tier = EMPEROR
											# is_variable_equal = { which = "de_facto_empire" which = PREVPREVPREV }
											# check_variable = { which = "de_facto_empire" value = 0.9 }
										# }
									# }
								# }
							# }
						# }
					# }
				# }
			# }
		# }
		# k_qarth = {
			# save_event_target_as = valyrian_conquest_target
			# ROOT = { character_event = { id = valyria.26 tooltip = TOOLTIPvalyria.26 } } #CONQUEST
		# }
		# hidden_tooltip = {
			# top_liege = {
				# character_event = { id = valyria.27 }
				# any_realm_lord = {
					# limit = {
						# ai = no
						# NOT = { character = ROOT }
					# }
					# character_event = { id = valyria.27 }
				# }
			# }
		# }
	# }
}
character_event = { #start conquest
	id = valyria.26
	desc = "EVTDESCvalyria.26"

	is_triggered_only = yes

	immediate = {
		top_liege = {
			capital_scope = {
				save_event_target_as = valyria_capital
			}
		}
		if = {
			limit = { is_ruler = no }
			liege = {
				capital_scope = {
					save_event_target_as = liege_capital
				}
			}
			create_title = {
				tier = DUKE
				landless = yes
				temporary = yes
				culture = ROOT
				name = "VALYRIAN_ARMY"
				holder = ROOT
			}
			# Create some decent commander characters
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = event_target:liege_capital
				culture = event_target:liege_capital
				female = no
				age = 30
				trait = trained_warrior
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = event_target:liege_capital
				culture = event_target:liege_capital
				female = no
				age = 25
				trait = trained_warrior
			}
			character_event = { id = TOG.1378 days = 1 } #Acquire companions
		}
	}

	option = {
		name = "EVTOPTAvalyria.26"
		event_target:valyrian_conquest_target = {
			holder_scope = {
				if = {
					limit = {
						NOT = { same_realm = ROOT }
						NOT = { war_with = ROOT }
						independent = yes
						demesne_size = 1
						liege = { character = PREV }
						NOT_mythical_creature_trigger = yes
						NOT = { culture_group = unoccupied_group }
						NOT = { trait = nightswatch }
						OR = {
							tier = EMPEROR
							NOR = {
								any_demesne_title = {
									NOT = { tier = BARON }
									event_target:e_new_valyria_holder = {
										any_demesne_title = {
											tier = EMPEROR
											is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
											check_variable = { which = "de_facto_empire" value = 0.9 }
										}
									}
								}
								has_opinion_modifier = { who = event_target:e_new_valyria_holder modifier = opinion_de_facto_liege }
							}
						}
						NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
						OR = { #Cannot attack vassals split by mega war
							NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
							NOT = { ROOT = { higher_tier_than = PREV } }
						}
					}
					reverse_unsafe_war = {
						target = ROOT
						casus_belli = valyrian_conquest
						thirdparty_title = event_target:valyrian_conquest_target
					}
				}
			}
			any_de_jure_vassal_title = {
				limit = {
					holder_scope = {
						NOT = { same_realm = ROOT }
						NOT = { war_with = ROOT }
						independent = yes
						NOT = { has_landed_title = event_target:valyrian_conquest_target }
						NOT_mythical_creature_trigger = yes
						NOT = { culture_group = unoccupied_group }
						NOT = { trait = nightswatch }
						OR = {
							tier = EMPEROR
							NOR = {
								any_demesne_title = {
									NOT = { tier = BARON }
									event_target:e_new_valyria_holder = {
										any_demesne_title = {
											tier = EMPEROR
											is_variable_equal = { which = "de_facto_empire" which = PREVPREV }
											check_variable = { which = "de_facto_empire" value = 0.9 }
										}
									}
								}
								has_opinion_modifier = { who = event_target:e_new_valyria_holder modifier = opinion_de_facto_liege }
							}
						}
						NOT = { suzerain = { character = event_target:e_new_valyria_holder } }
						OR = { #Cannot attack vassals split by mega war
							NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
							NOT = { ROOT = { higher_tier_than = PREV } }
						}
					}
				}
				holder_scope = {
					reverse_unsafe_war = {
						target = ROOT
						casus_belli = valyrian_conquest
						thirdparty_title = event_target:valyrian_conquest_target
					}
				}
			}
		}
		top_liege = {
			ROOT = {
				spawn_unit = {
					province = event_target:valyria_capital
					home = event_target:valyria_capital
					owner = THIS
					leader = THIS
					match_character = PREV
					match_mult = 0.1
					match_min = 500
					match_max = 3000
					attrition = 1
					earmark = duchy_adventure
					disband_on_peace = yes
					cannot_inherit = yes
				}
				spawn_unit = {
					province = event_target:valyria_capital
					home = event_target:valyria_capital
					owner = THIS
					match_character = PREV
					match_mult = 0.1
					match_min = 500
					match_max = 3000
					attrition = 1
					earmark = duchy_adventure
					disband_on_peace = yes
					cannot_inherit = yes
				}
				spawn_unit = {
					province = event_target:valyria_capital
					home = event_target:valyria_capital
					owner = THIS
					match_character = PREV
					match_mult = 0.1
					match_min = 500
					match_max = 3000
					attrition = 1
					earmark = duchy_adventure
					disband_on_peace = yes
					cannot_inherit = yes
				}
				spawn_fleet = { #Just in case
					province = closest
					owner = THIS
					troops = {
						galleys = { 75 75 }
					}
					disband_on_peace = yes
					cannot_inherit = yes
				}
			}
		}
	}
}
character_event = { #Inform top liege/realm
	id = valyria.27
	desc = "EVTDESCvalyria.27"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAvalyria.27"
	}
}
character_event = { #start colony
	id = valyria.28
	desc = "EVTDESCvalyria.28"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAvalyria.28"
		top_liege = { save_event_target_as = colonise_liege }	#record liege just in case
		if = { #record patrician status
			limit = {
				is_patrician = yes
				is_merchant_republic = no
			}
			set_character_flag = is_patrician
		}
		event_target:valyrian_colony_target = {
			owner = {
				save_event_target_as = old_ruin_holder
				hidden_tooltip = {
					if = {
						limit = { culture_group = unoccupied_group }
						set_defacto_liege = event_target:colonise_liege
					}
				}
			}
		}
		event_target:valyrian_colony_target = {
			#build castle if needed
			if = {
				limit = {
					NOT = {
						any_province_holding = {
							NOT = { holding_type = nomad }
							NOT = { holding_type = temple }
							NOT = { holding_type = tribal }
						}
					}
				}
				build_holding = {
					type = castle
					holder = ROOT
				}
				random_province_holding = {
					limit = {
						holding_type = castle
						holder_scope = { character = ROOT }
					}
					save_event_target_as = new_city_holding
					location = { province_event = { id = unoccupied.399 } } #increase base value, seperate event to avoid 'break'
					if = {
						limit = { ROOT = { is_feudal = yes } }
						make_capital_holding = yes
					}
				}
			}
			county = {
				gain_title = ROOT
				add_law = valyria_colony
				set_title_flag = valyria_colony
				revoke_law = republic_law_oligarchy
				set_title_flag = valyria_colony_assigned
				dejure_liege_title = {
					if = {
						limit = {
							tier = DUKE
							has_holder = no
						}
						gain_title = ROOT
						add_law = valyria_colony
						set_title_flag = valyria_colony
						revoke_law = republic_law_oligarchy
						set_title_flag = valyria_colony_assigned
						hidden_tooltip = {
							set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
						}
					}
				}
				hidden_tooltip = {
					set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
					any_de_jure_vassal_title = {
						limit = { has_holder = yes }
						remove_building = ca_sub_barony_ruin
						remove_building = ct_sub_barony_ruin
						clr_title_flag = sub_barony_ruin
					}
				}
			}
			hidden_tooltip = {  #just in case coloniser erroneously becomes independent
				ROOT = {
					if = {
						limit = {
							NOT = { vassal_of = event_target:colonise_liege }
							NOT = { character = event_target:colonise_liege }
							NAND = {
								is_ruler = yes
								is_patrician = yes
								liege = { is_merchant_republic = yes NOT = { character = ROOT } }
							}
						}
						set_defacto_liege = event_target:colonise_liege
					}
				}
			}
			if = {
				limit = { has_province_flag = ca_colony_6 }
				capital_holding = {
					if = {
						limit = { holding_type = castle }
						add_building = ca_colony_6
					}
					if = {
						limit = { holding_type = city }
						add_building = ct_colony_6
					}
				}
			}
			else_if = {
				limit = { has_province_flag = ca_colony_5 }
				capital_holding = {
					if = {
						limit = { holding_type = castle }
						add_building = ca_colony_5
					}
					if = {
						limit = { holding_type = city }
						add_building = ct_colony_5
					}
				}
			}
			else_if = {
				limit = { has_province_flag = ca_colony_4 }
				capital_holding = {
					if = {
						limit = { holding_type = castle }
						add_building = ca_colony_4
					}
					if = {
						limit = { holding_type = city }
						add_building = ct_colony_4
					}
				}
			}
			else_if = {
				limit = { has_province_flag = ca_colony_3 }
				capital_holding = {
					if = {
						limit = { holding_type = castle }
						add_building = ca_colony_3
					}
					if = {
						limit = { holding_type = city }
						add_building = ct_colony_3
					}
				}
			}
			else_if = {
				limit = { has_province_flag = ca_colony_2 }
				capital_holding = {
					if = {
						limit = { holding_type = castle }
						add_building = ca_colony_2
					}
					if = {
						limit = { holding_type = city }
						add_building = ct_colony_2
					}
				}
			}
			else = {
				set_province_flag = ca_colony_1
				capital_holding = {
					if = {
						limit = { holding_type = castle }
						add_building = ca_colony_1
					}
					if = {
						limit = { holding_type = city }
						add_building = ct_colony_1
					}
				}
			}
			set_province_flag = colony_province
			if = {
				limit = { has_province_modifier = ruined_province }
				remove_province_modifier = ruined_province
			}
			# if = {
				# limit = { has_province_modifier = dothraki_domain }
				# remove_province_modifier = dothraki_domain
			# }
			# if = {
				# limit = { has_province_modifier = jogos_nhai_domain }
				# remove_province_modifier = jogos_nhai_domain
			# }
			add_province_modifier = {
				name = colony
				duration = -1
			}
		}
		custom_tooltip = { text = TOOLTIPunoccupied.3 }

		hidden_tooltip = {
			event_target:old_ruin_holder = {
				if = {
					limit = { culture_group = unoccupied_group }
					clear_wealth = yes
					wealth = -500
					death = yes
				}
			}
			any_vassal = {
				limit = { culture_group = unoccupied_group }
				any_demesne_title = { gain_title = ROOT }
				clear_wealth = yes
				wealth = -500
				death = yes
			}
			if = { #maintain patrician status
				limit = {
					has_character_flag = is_patrician
					is_patrician = no
				}
				set_government_type = merchant_republic_government
			}
			clr_character_flag = is_patrician

			if = {
				limit = {
					higher_tier_than = COUNT
					is_patrician = no
					primary_title = { check_variable = { which = "lord_paramount_status" value = 0.9 } } #1 = lord paramount, 2 = interregnum
				}
				set_government_type = feudal_government_LP
			}
		}
	}
}
character_event = { #Inform top liege/realm
	id = valyria.29
	desc = "EVTDESCvalyria.29"

	is_triggered_only = yes

	option = {
		name = OK
		if = {
			limit = { has_landed_title = e_new_valyria }
			wealth = -250
		}
	}
}

#Senior Freeholder dies, councillor promoted
character_event = {
	id = valyria.35
	desc = "EVTDESCvalyria.35"

	is_triggered_only = yes

	option = {
		name = OK
		hidden_tooltip = {
			if = {
				limit = { has_character_flag = changed_heir }
				prestige = -50000
				clr_character_flag = changed_heir
			}
			any_realm_lord = {
				limit = { ai = no }
				character_event = { id = valyria.36 }
			}
			event_target:oligarchy_capital = { ROOT = { capital = PREV } }
		}
	}
}
#Inform realm
character_event = {
	id = valyria.36
	desc = "EVTDESCvalyria.36"

	is_triggered_only = yes

	option = {
		name = OK
		show_portrait = FROMFROM
	}
}

###Council petitions building project###
character_event = {
	id = valyria.40
	desc = "EVTDESCvalyria.40"
	picture = GFX_evt_busy_trading_dock_republic

	only_independent = yes
	only_capable = yes
	prisoner = no
	war = no

	trigger = {
		is_valyrian_freehold_trigger = yes
		wealth = 300
		capital_scope = {
			any_province_holding = { holding_type = city }
		}
	}

	mean_time_to_happen = {
		years = 20
		modifier = {
			factor = 0.75
			wealth = 500
		}
		modifier = {
			factor = 0.75
			wealth = 750
		}
		modifier = {
			factor = 0.75
			wealth = 1000
		}
	}

	immediate = {
		capital_scope = {
			random_province_holding = {
				limit = { holding_type = city }
				preferred_limit = { base_value_6_trigger = yes }
				preferred_limit = { base_value_5_trigger = yes }
				preferred_limit = { base_value_4_trigger = yes }
				preferred_limit = { base_value_3_trigger = yes }
				save_event_target_as = freehold_capital
			}
		}
		event_target:freehold_capital = {
			random_list = {
				10 = {
					trigger = { NOT = { has_building = ct_wall_5 } }
					ROOT = { set_character_flag = ct_wall }
				}
				10 = {
					trigger = { NOT = { has_building = ct_marketplace_6 } }
					ROOT = { set_character_flag = ct_marketplace }
				}
				10 = {
					trigger = { NOT = { has_building = ct_wall_q_5 } }
					ROOT = { set_character_flag = ct_wall_q }
				}
				10 = {
					trigger = { NOT = { has_building = ct_training_grounds_5 } }
					ROOT = { set_character_flag = ct_training_grounds }
				}
				10 = {
					trigger = { NOT = { has_building = ct_port_5 } }
					ROOT = { set_character_flag = ct_port }
				}
				10 = {
					trigger = { NOT = { has_building = ct_barracks_6 } }
					ROOT = { set_character_flag = ct_barracks }
				}
			}
		}
	}

	option = {
		name = "EVTOPTAvalyria.40" #Yes, fund it
		ai_chance = {
			factor = 75
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				wealth = 900
			}
		}
		event_target:freehold_capital = {
			if = {
				limit = { ROOT = { has_character_flag = ct_wall } }
				if = {
					limit = {
						has_building = ct_wall_4
						NOT = { has_building = ct_wall_5 }
					}
					add_building = ct_wall_5
					ROOT = { wealth = -180 }
				}
				if = {
					limit = {
						has_building = ct_wall_3
						NOT = { has_building = ct_wall_4 }
					}
					add_building = ct_wall_4
					ROOT = { wealth = -120 }
				}
				if = {
					limit = {
						has_building = ct_wall_2
						NOT = { has_building = ct_wall_3 }
					}
					add_building = ct_wall_3
					ROOT = { wealth = -120 }
				}
				if = {
					limit = {
						has_building = ct_wall_1
						NOT = { has_building = ct_wall_2 }
					}
					add_building = ct_wall_2
					ROOT = { wealth = -60 }
				}
				if = {
					limit = { NOT = { has_building = ct_wall_1 } }
					add_building = ct_wall_1
					ROOT = { wealth = -60 }
				}
			}
			if = {
				limit = { ROOT = { has_character_flag = ct_marketplace } }
				if = {
					limit = {
						has_building = ct_marketplace_5
						NOT = { has_building = ct_marketplace_6 }
					}
					add_building = ct_marketplace_5
					ROOT = { wealth = -550 }
				}
				if = {
					limit = {
						has_building = ct_marketplace_4
						NOT = { has_building = ct_marketplace_5 }
					}
					add_building = ct_marketplace_5
					ROOT = { wealth = -450 }
				}
				if = {
					limit = {
						has_building = ct_marketplace_3
						NOT = { has_building = ct_marketplace_4 }
					}
					add_building = ct_marketplace_4
					ROOT = { wealth = -350 }
				}
				if = {
					limit = {
						has_building = ct_marketplace_2
						NOT = { has_building = ct_marketplace_3 }
					}
					add_building = ct_marketplace_3
					ROOT = { wealth = -240 }
				}
				if = {
					limit = {
						has_building = ct_marketplace_1
						NOT = { has_building = ct_marketplace_2 }
					}
					add_building = ct_marketplace_2
					ROOT = { wealth = -144 }
				}
				if = {
					limit = { NOT = { has_building = ct_marketplace_1 } }
					add_building = ct_marketplace_1
					ROOT = { wealth = -120 }
				}
			}
			if = {
				limit = { ROOT = { has_character_flag = ct_port } }
				if = {
					limit = {
						has_building = ct_port_4
						NOT = { has_building = ct_port_5 }
					}
					add_building = ct_port_5
					ROOT = { wealth = -450 }
				}
				if = {
					limit = {
						has_building = ct_port_3
						NOT = { has_building = ct_port_4 }
					}
					add_building = ct_port_4
					ROOT = { wealth = -350 }
				}
				if = {
					limit = {
						has_building = ct_port_2
						NOT = { has_building = ct_port_3 }
					}
					add_building = ct_port_3
					ROOT = { wealth = -240 }
				}
				if = {
					limit = {
						has_building = ct_port_1
						NOT = { has_building = ct_port_2 }
					}
					add_building = ct_port_2
					ROOT = { wealth = -144 }
				}
				if = {
					limit = { NOT = { has_building = ct_port_1 } }
					add_building = ct_port_1
					ROOT = { wealth = -120 }
				}
			}
			if = {
				limit = { ROOT = { has_character_flag = ct_wall_q } }
				if = {
					limit = {
						has_building = ct_wall_q_4
						NOT = { has_building = ct_wall_q_5 }
					}
					add_building = ct_wall_q_5
					ROOT = { wealth = -120 }
				}
				if = {
					limit = {
						has_building = ct_wall_q_3
						NOT = { has_building = ct_wall_q_4 }
					}
					add_building = ct_wall_q_4
					ROOT = { wealth = -120 }
				}
				if = {
					limit = {
						has_building = ct_wall_q_2
						NOT = { has_building = ct_wall_q_3 }
					}
					add_building = ct_wall_q_3
					ROOT = { wealth = -60 }
				}
				if = {
					limit = {
						has_building = ct_wall_q_1
						NOT = { has_building = ct_wall_q_2 }
					}
					add_building = ct_wall_q_2
					ROOT = { wealth = -60 }
				}
				if = {
					limit = { NOT = { has_building = ct_wall_q_1 } }
					add_building = ct_wall_q_1
					ROOT = { wealth = -60 }
				}
			}
			if = {
				limit = { ROOT = { has_character_flag = ct_training_grounds } }
				if = {
					limit = {
						has_building = ct_training_grounds_4
						NOT = { has_building = ct_training_grounds_5 }
					}
					add_building = ct_training_grounds_5
					ROOT = { wealth = -550 }
				}
				if = {
					limit = {
						has_building = ct_training_grounds_3
						NOT = { has_building = ct_training_grounds_4 }
					}
					add_building = ct_training_grounds_4
					ROOT = { wealth = -450 }
				}
				if = {
					limit = {
						has_building = ct_training_grounds_2
						NOT = { has_building = ct_training_grounds_3 }
					}
					add_building = ct_training_grounds_3
					ROOT = { wealth = -350 }
				}
				if = {
					limit = {
						has_building = ct_training_grounds_1
						NOT = { has_building = ct_training_grounds_2 }
					}
					add_building = ct_training_grounds_2
					ROOT = { wealth = -240 }
				}
				if = {
					limit = { NOT = { has_building = ct_training_grounds_1 } }
					add_building = ct_training_grounds_1
					ROOT = { wealth = -180 }
				}
			}
			if = {
				limit = { ROOT = { has_character_flag = ct_barracks } }
				if = {
					limit = {
						has_building = ct_barracks_5
						NOT = { has_building = ct_barracks_6 }
					}
					add_building = ct_barracks_6
					ROOT = { wealth = -550 }
				}
				if = {
					limit = {
						has_building = ct_barracks_4
						NOT = { has_building = ct_barracks_5 }
					}
					add_building = ct_barracks_5
					ROOT = { wealth = -450 }
				}
				if = {
					limit = {
						has_building = ct_barracks_3
						NOT = { has_building = ct_barracks_4 }
					}
					add_building = ct_barracks_4
					ROOT = { wealth = -350 }
				}
				if = {
					limit = {
						has_building = ct_barracks_2
						NOT = { has_building = ct_barracks_3 }
					}
					add_building = ct_barracks_3
					ROOT = { wealth = -240 }
				}
				if = {
					limit = {
						has_building = ct_barracks_1
						NOT = { has_building = ct_barracks_2 }
					}
					add_building = ct_barracks_2
					ROOT = { wealth = -144 }
				}
				if = {
					limit = { NOT = { has_building = ct_barracks_1 } }
					add_building = ct_barracks_1
					ROOT = { wealth = -120 }
				}
			}
		}
		clr_character_flag = ct_wall
		clr_character_flag = ct_marketplace
		clr_character_flag = ct_port
		clr_character_flag = ct_wall_q
		clr_character_flag = ct_training_grounds
		clr_character_flag = ct_barracks
		prestige = 50
	}
	option = {
		name = "EVTOPTBvalyria.40" #No
		ai_chance = {
			factor = 25
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = content
			}
		}
		prestige = -100
		any_courtier_or_vassal = {
			limit = {
				liege = { character = ROOT }
				OR = {
					is_voter = yes
					is_councillor = yes
				}
			}
			opinion = { who = ROOT modifier = opinion_no_fund_project }
		}
		clr_character_flag = ct_wall
		clr_character_flag = ct_marketplace
		clr_character_flag = ct_port
		clr_character_flag = ct_wall_q
		clr_character_flag = ct_training_grounds
		clr_character_flag = ct_barracks
	}
}
#Elected councillor appointed regent
character_event = {
	id = valyria.45
	desc = "EVTDESCvalyria.45"

	only_independent = yes

	trigger = {
		is_valyrian_freehold_trigger = yes
		has_regent = yes
		regent = { NOT = { has_character_flag = elected_valyrian_councillor } }
		any_courtier_or_vassal = {
			OR = {
				is_voter = yes
				is_councillor = yes
			}
			has_character_flag = elected_valyrian_councillor
			NOT = { is_incapable = yes }
			prisoner = no
		}
	}

	mean_time_to_happen  = {
		days = 1
	}

	option = {
		name = OK
		random_courtier_or_vassal = {
			limit = {
				OR = {
					is_voter = yes
					is_councillor = yes
				}
				has_character_flag = elected_valyrian_councillor
				NOT = { is_incapable = yes }
				prisoner = no
			}
			gain_regency_effect = yes
		}
	}
}
#Archon died in office
character_event = {
	id = valyria.46
	desc = "EVTDESCvalyria.46"

	is_triggered_only = yes

	option = {
		name = OK
	}
}
#New holder of e_new_valyria, ensure tributaries are transferred (on_new_holder)
character_event = {
	id = valyria.47

	is_triggered_only = yes
	hide_window = yes
	only_independent = yes

	trigger = {
		FROM = { title = e_new_valyria }
	}

	immediate = {
		FROMFROM = {
			any_tributary = {
				ROOT_FROMFROM = {
					remove_tributary = PREV
				}
				ROOT = {
					make_tributary = { who = PREV tributary_type = valyrian_tributary }
				}
			}
		}
	}

	option = {
		name = OK
	}
}
#Tributary has new holder, ensure suzerain is transferred (on_new_holder)
character_event = {
	id = valyria.4799

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		FROM = { tier = KING }
		FROMFROM = {
			is_tributary = { type = valyrian_tributary }
		}
	}

	immediate = {
		FROMFROM = {
			suzerain = {
				if = {
					limit = { ROOT = { NOT = { tier = EMPEROR } } }
					make_tributary = { who = ROOT tributary_type = valyrian_tributary }
				}
				remove_tributary = ROOT_FROMFROM
			}
		}
	}

	option = {
		name = OK
	}
}
# Valyrian Vassal requests free city status
character_event = {
	id = valyria.48
	desc = EVTDESCvalyria.48

	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_diplomacy

	is_triggered_only = yes
	only_playable = yes
	only_capable = yes
	prisoner = no
	min_age = 16
	war = no

	trigger = {
		independent = no
		tier = KING
		liege = {
			is_valyrian_freehold_trigger = yes
			war = no
		}
		OR = { #valyrian or free city culture vassals only
			culture_group = valyrian
			culture_group = free_cities
		}
		NAND = { #will want to pursue power in the freehold
			culture = high_valyrian
			is_republic = no
		}
		NOR = { #Not in core valyrian lands
			capital_scope = { region = world_valyrian_peninsula }
			has_landed_title = k_valyria
			has_landed_title = k_long_summer
		}
		NOT = { #Is not an appointed Archon
			#liege = { is_valyrian_freehold_trigger = yes }
			government = colony_government
		}
		OR = {
			NOT = { has_character_flag = requested_free_city_status }
			had_character_flag = { flag = requested_free_city_status days = 3650 }
		}

	}

	weight_multiplier = {
		factor = 1

		modifier = {
			factor = 4
			liege = { regent = { character = PREVPREV } }
		}
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 0.5
			trait = kind
		}
		modifier = {
			factor = 0.5
			trait = charitable
		}
		modifier = {
			factor = 0.2
			trait = content
		}
	}

	option = {
		name = {
			text = EVTOPTAvalyria.48 # Ask
			trigger = { NOT = { liege = { regent = { character = PREVPREV } } } }
		}
		name = {
			text = EVTOPTCvalyria.48 # I am regent
			trigger = { liege = { regent = { character = PREVPREV } } }
		}
		ai_chance = { factor = 100 }
		set_character_flag = requested_free_city_status
		liege = { letter_event = { id = valyria.49 days = 4 tooltip = EVTTOOLTIPvalyria.49 } }
	}

	option = {
		name = EVTOPTBvalyria.48 # Better not
		ai_chance = { factor = 0 }
	}
}

# Liege receives the request
character_event = {
	id = valyria.49

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = { #Regent may decide
			limit = {
				has_regent = yes
				OR = {
					is_adult = no
					prisoner = yes
					is_incapable = yes
				}
			}
			regent = { letter_event = { id = valyria.50 } }
			break = yes
		}
		letter_event = { id = valyria.50 }
	}
}
letter_event = {
	id = valyria.50

	is_friendly = yes

	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes
	show_from_from = yes

	trigger = {
		FROMFROM = {
			is_ruler = yes
			vassal_of = ROOT_FROM
			tier = KING
			is_alive = yes
		}
	}

	desc = {
		text = EVTDESCvalyria.50 #Liege
		trigger = {
			character = FROM
		}
	}
	desc = {
		text = EVTDESCvalyria.50B #Regent
		trigger = {
			NOT = { character = FROM }
			NOT = { character = FROMFROM }
		}
	}
	desc = {
		text = EVTDESCvalyria.50C #Regent give self
		trigger = {
			NOT = { character = FROM }
			character = FROMFROM
		}
	}

	option = {
		name = EVTOPTDvalyria.50 # Accept the request for a favor
		trigger = {
			has_dlc = "Zeus"
			NOT = { holds_favor_on = FROMFROM }
			NOT = { character = FROMFROM }
		}
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				NOT = { opinion = { who = FROMFROM value = -24 } }
			}

			modifier = {
				factor = 0.2
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 100 }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 25 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 50 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 75 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 100 } }
			}
		}
		add_favor = FROMFROM
		FROMFROM = {
			set_defacto_liege = THIS
			ROOT_FROM = {
				make_tributary = { who = PREV tributary_type = valyrian_tributary }
			}
			hidden_tooltip = {
				clr_character_flag = requested_free_city_status
				clr_mega_war_variables_and_flags_effect = yes
				reverse_remove_opinion = { who = ROOT_FROM modifier = opinion_de_facto_liege }
			}
		}
		hidden_tooltip = {
			FROMFROM = { letter_event = { id = valyria.51 } }
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.54 } }
			}
		}
	}

	option = {
		name = {
			text = EVTOPTAvalyria.50 # Accept the request
			trigger = { NOT = { character = FROMFROM } }
		}
		name = {
			text = EVTOPTEvalyria.50 # Regent
			trigger = { character = FROMFROM }
		}
		ai_chance = {
			factor = 100

			modifier = {
				factor = 0.5
				has_dlc = "Zeus"
				NOT = { holds_favor_on = FROMFROM }
				NOT = { character = FROMFROM }
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROMFROM value = -24 } }
			}

			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 100 }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 25 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 50 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 75 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 100 } }
			}
		}
		FROMFROM = {
			set_defacto_liege = THIS
			ROOT_FROM = {
				make_tributary = { who = PREV tributary_type = valyrian_tributary }
			}
			hidden_tooltip = {
				clr_character_flag = requested_free_city_status
				clr_mega_war_variables_and_flags_effect = yes
				reverse_remove_opinion = { who = ROOT_FROM modifier = opinion_de_facto_liege }
			}
		}
		if = {
			limit = { NOT = { character = FROMFROM } }
			reverse_opinion = {
				who = FROMFROM
				modifier = opinion_grateful
				months = 120
			}
			hidden_tooltip = {
				FROMFROM = { letter_event = { id = valyria.51 days = 1 } }
			}
		}
		hidden_tooltip = {
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.54 } }
			}
		}
	}

	option = {
		name = EVTOPTBvalyria.50 # Deny the request
		trigger = {
			diplomacy < 14
			NOT = { character = FROMFROM }
		}
		ai_chance = {
			factor = 100

			modifier = {
				factor = 5
				trait = greedy
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROMFROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -24 } } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -49 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -74 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -99 } } }
			}
		}
		FROMFROM = {
			opinion = {
				who = ROOT
				modifier = opinion_denied_title
				months = 120
				multiplier = 2
			}
		}
		hidden_tooltip = {
			FROMFROM = { letter_event = { id = valyria.52 } }
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.55 } }
			}
		}
	}

	option = {
		name = EVTOPTCvalyria.50 # Deny with superior diplomacy
		trigger = {
			diplomacy = 14
			NOT = { character = FROMFROM }
		}

		ai_chance = {
			factor = 150

			modifier = {
				factor = 5
				trait = greedy
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROMFROM value = 0 } }
			}

			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -24 } } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -49 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -74 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -99 } } }
			}
		}
		tooltip_info = diplomacy
		FROMFROM = { letter_event = { id = valyria.53 tooltip = EVTTOOLTIPvalyria.53 } }
		hidden_tooltip = {
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.55 } }
			}
		}
	}
}

# Vassal request granted
letter_event = {
	id = valyria.51

	is_friendly = yes

	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes

	desc = {
		text = EVTDESCvalyria.51
		trigger = { vassal_of = FROM }
	}
	desc = {
		text = EVTDESCvalyria.51B
		trigger = { NOT = { vassal_of = FROM } }
	}

	option = {
		name = EXCELLENT
	}
}

# Vassal request denied
letter_event = {
	id = valyria.52
	desc = EVTDESCvalyria.52

	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.52
		prestige = -50
	}
}

# Vassal request denied with flattery
letter_event = {
	id = valyria.53
	desc = EVTDESCvalyria.53 # The same as that event for now

	is_friendly = yes

	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.53
		prestige = -25
	}
}

# Inform liege regent released tributary
character_event = {
	id = valyria.54
	desc = EVTDESCvalyria.54

	is_triggered_only = yes

	option = {
		name = OK
		FROMFROMFROM = { tooltip = { show_portrait = yes } }
	}
}
# Inform liege regent refused to give away title
character_event = {
	id = valyria.55
	desc = EVTDESCvalyria.55

	is_triggered_only = yes

	option = {
		name = OK
		if = {
			limit = { NOT = { FROM = { diplomacy = 14 } } }
			FROMFROMFROM = {
				opinion = {
					who = ROOT
					modifier = opinion_denied_title
					months = 120
				}
			}
		}
	}
}
##Council demands that territory be made a colony
character_event = {
	id = valyria.58
	desc = EVTDESCvalyria.58
	picture = GFX_evt_council

	is_triggered_only = yes
	only_playable = yes
	war = no

	trigger = {
		OR = {
			is_valyrian_freehold_trigger = yes
			liege = {
				is_valyrian_freehold_trigger = yes
				war = no
				NOT = { trait = civil_war }
			}
		}
		higher_tier_than = COUNT
		NOT = { has_character_modifier = refusing_valyria_colony }
		liege = {
			capital_scope = {
				kingdom = {
					ROOT = {
						any_demesne_title = {
							NOT = { tier = EMPEROR }
							NOT = { tier = BARON }
							NOT = { has_title_flag = valyria_colony }
							custom_tooltip = { #Not in capital region
								text = TOOLTIPmake_valyrian_colonyA
								NOR = {
									AND = {
										location = { is_capital = yes }
										holder_scope = { is_valyrian_freehold_trigger = yes }
									}
									title = PREVPREV
									de_jure_liege_or_above = PREVPREV
								}
							}
							custom_tooltip = { #Does not own higher dejure title
								text = TOOLTIPmake_valyrian_colonyB
								NOR = {
									dejure_liege_title = {
										NOT = { tier = EMPEROR }
										holder = ROOT
									}
									dejure_liege_title = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											holder = ROOT
										}
									}
								}
							}
							custom_tooltip = { #No military comands
								text = TOOLTIPset_heir_titleD
								NOT = { has_title_flag = military_command }
							}
							custom_tooltip = { #No colonies
								text = TOOLTIPset_heir_titleE
								NOT = { location = { has_province_flag = colony_province } }
							}
							is_landless_type_title = no
							controls_religion = no
						}
					}
				}
			}
		}
	}

	immediate = {
		#find title for loc
		liege = {
			show_scope_change = no
			capital_scope = {
				show_scope_change = no
				kingdom = {
					show_scope_change = no
					ROOT = {
						show_scope_change = no
						any_demesne_title = {
							limit = {
								NOT = { tier = EMPEROR }
								NOT = { tier = BARON }
								NOT = { has_title_flag = valyria_colony }
								custom_tooltip = { #Not in capital region
									text = TOOLTIPmake_valyrian_colonyA
									NOR = {
										AND = {
											location = { is_capital = yes }
											holder_scope = { is_valyrian_freehold_trigger = yes }
										}
										title = PREVPREV
										de_jure_liege_or_above = PREVPREV
									}
								}
								custom_tooltip = { #Does not own higher dejure title
									text = TOOLTIPmake_valyrian_colonyB
									NOR = {
										dejure_liege_title = {
											NOT = { tier = EMPEROR }
											holder = ROOT
										}
										dejure_liege_title = {
											dejure_liege_title = {
												NOT = { tier = EMPEROR }
												holder = ROOT
											}
										}
									}
								}
								custom_tooltip = { #No military comands
									text = TOOLTIPset_heir_titleD
									NOT = { has_title_flag = military_command }
								}
								custom_tooltip = { #No colonies
									text = TOOLTIPset_heir_titleE
									NOT = { location = { has_province_flag = colony_province } }
								}
								is_landless_type_title = no
								controls_religion = no
							}
							show_scope_change = no
							save_event_target_as = new_valyrian_colony
							set_title_flag = new_valyria_colony
							add_law = valyria_colony
						}
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTAvalyria.58
		ai_chance = {
			factor = 90
		}
		any_demesne_title = {
			limit = {
				has_title_flag = new_valyria_colony
			}
			show_scope_change = no
			custom_tooltip = {
				text = TOOLTIPnew_valyria_colony
				clr_title_flag = new_valyria_colony
				set_title_flag = valyria_colony
				add_law = valyria_colony
			}
		}
		hidden_tooltip = {
			if = {
				limit = { is_government_potential = colony_government }
				set_government_type = colony_government
			}
			any_player = {
				limit = {
					same_realm = ROOT
					NOT = { character = ROOT }
				}
				character_event = { id = valyria.59 }
			}
		}
	}

	option = {
		name = EVTOPTBvalyria.58 #No
		trigger = {
			has_regent = no
		}
		ai_chance = {
			factor = 10
			modifier = { #Motives
				factor = 0
				NOR = {
					trait = ambitious
					trait = lunatic
					AND = {
						relative_power_to_liege = 0.5
						is_valyrian_freehold_trigger = no
					}
					AND = {
						relative_power_to_liege = 0.25
						government = feudal_government
					}
				}
			}
			modifier = { #too weak
				factor = 0
				is_valyrian_freehold_trigger = no
				NOT = { relative_power_to_liege = 0.2 }
				NOT = { trait = lunatic }
				NOT = { trait = greedy }
			}

			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = wroth
			}

			modifier = {
				factor = 0
				trait = just
			}
			modifier = {
				factor = 0
				trait = honorable
			}
			modifier = {
				factor = 0
				trait = content
			}
			modifier = {
				factor = 0.33
				trait = humble
			}
			modifier = {
				factor = 0.33
				trait = charitable
			}
			modifier = {
				factor = 0.33
				trait = honest
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
		}
		liege = {
			if = {
				limit = { NOT = { character = ROOT } }
				opinion = { who = ROOT modifier = opinion_traitor }
				#Ai try to imprison?
				if = {
					limit = { ai = yes }
					ROOT = { save_event_target_as = imprison_target }
					character_event = { id = imprisoned.1 days = 1 random = 2 }
				}
			}
		}
		change_variable = { which = "tyrant" value = 10 }
		character_event = { id = maintenance.1 }
		add_character_modifier = { name = refusing_valyria_colony duration = 5475 }
		hidden_tooltip = {
			any_demesne_title = {
				limit = {
					has_title_flag = new_valyria_colony
				}
				show_scope_change = no
				clr_title_flag = new_valyria_colony
			}
			any_player = {
				limit = {
					same_realm = ROOT
					NOT = { character = ROOT }
				}
				character_event = { id = valyria.60 }
			}
		}
	}
}
character_event = { #Inform land dedicated as colony
	id = valyria.59
	desc = EVTDESCvalyria.59
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = OK
	}
}
character_event = { #Inform land refused as colony
	id = valyria.60
	desc = EVTDESCvalyria.60
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.60
		tooltip = {
			FROM = {
				change_variable = { which = "tyrant" value = 10 }
				add_character_modifier = { name = refusing_valyria_colony duration = 5475 }
			}
		}
	}
}
# Free City culture melting pot
province_event = {
	id = valyria.65
	desc = "EVTDESCvalyria.65"
	picture = GFX_evt_culture_change

	trigger = {
		OR = {
			region = world_free_cities
			province_id = 747
			region = world_sothoryos
		}
		NOT = { region = world_rhoynar }
		NOT = { culture_group = valyrian }
		NOT = { culture_group = free_cities }
		owner = {
			OR = {
				culture_group = valyrian
				culture_group = free_cities
			}
			NOT = { culture_group = unoccupied_group }
		}
		OR = {
			owner = { culture_group = dornish }
			any_neighbor_province = { culture_group = dornish }
		}
	}

	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 0.25
			owner = { culture_group = free_cities }
		}
		modifier = {
			factor = 0.75
			has_province_flag = recent_depopulation_1
		}
		modifier = {
			factor = 0.5
			has_province_flag = recent_depopulation_2
		}
		modifier = {
			factor = 0.25
			has_province_flag = recent_depopulation_3
		}
	}

	immediate = {
		duchy = { save_event_target_as = ROOT_duchy }
	}

	option = {
		name = "EVTOPTAvalyria.65"
		#try liege's region first
		if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_pentos
						any_liege = { has_landed_title = k_pentos }
					}
				}
				OR = {
					region = world_pentos
					region = world_stepstones
					any_neighbor_province = { culture = pentosi }
				}
			}
			culture = pentosi
			religion = pentoshi_religion
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_braavos
						any_liege = { has_landed_title = k_braavos }
					}
				}
				OR = {
					region = world_braavos
					region = world_stepstones
					any_neighbor_province = { culture = braavosi }
				}
			}
			culture = braavosi
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_lys
						any_liege = { has_landed_title = k_lys }
					}
				}
				OR = {
					region = world_lys
					region = world_stepstones
					any_neighbor_province = { culture = lysene }
				}
			}
			culture = lysene
			religion = weeping_lady
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_qohor
						any_liege = { has_landed_title = k_qohor }
					}
				}
				OR = {
					region = world_qohor
					region = world_stepstones
					any_neighbor_province = { culture = qohorik }
				}
			}
			culture = qohorik
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_norvos
						any_liege = { has_landed_title = k_norvos }
					}
				}
				OR = {
					region = world_norvos
					region = world_stepstones
					any_neighbor_province = { culture = norvosi }
				}
			}
			culture = norvosi
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_myr
						any_liege = { has_landed_title = k_myr }
					}
				}
				OR = {
					region = world_myr
					region = world_stepstones
					any_neighbor_province = { culture = myrman }
				}
			}
			culture = myrman
			religion = myrish_religion
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_tyrosh
						any_liege = { has_landed_title = k_tyrosh }
					}
				}
				OR = {
					region = world_tyrosh
					region = world_stepstones
					any_neighbor_province = { culture = tyroshi }
				}
			}
			culture = tyroshi
			religion = trios
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_volantis
						any_liege = { has_landed_title = k_volantis }
					}
				}
				OR = {
					region = world_volantis
					region = world_stepstones
					any_neighbor_province = { culture = volantene }
				}
			}
			culture = volantene
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = k_lorath
						any_liege = { has_landed_title = k_lorath }
					}
				}
				OR = {
					region = world_lorath
					region = world_stepstones
					any_neighbor_province = { culture = lorathi }
				}
			}
			culture = lorathi
		}
		else_if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = d_gogossos
						any_liege = { has_landed_title = d_gogossos }
					}
				}
				OR = {
					province_id = 747
					region = world_sothoryos
					region = world_stepstones
					any_neighbor_province = { culture = gogossosi }
				}
			}
			culture = gogossosi
		}
		# else_if = {
			# limit = {
				# owner = { any_liege = { has_landed_title = k_essaria  } }
				# OR = {
					# region = world_essaria
					# any_neighbor_province = { culture = essarian }
				# }
			# }
			# culture = essarian
		# }

		##Then go by region
		else_if = {
			limit = {
				region = world_pentos
			}
			culture = pentosi
			religion = pentoshi_religion
		}
		else_if = {
			limit = {
				region = world_braavos
				any_neighbor_province = { culture_group = free_cities }
			}
			random_neighbor_province = {
				limit = { culture_group = free_cities }
				ROOT = { culture = PREV }
			}
		}
		else_if = {
			limit = {
				region = world_braavos
			}
			culture = braavosi
		}

		else_if = {
			limit = {
				region = world_lys
			}
			culture = lysene
			religion = weeping_lady
		}
		else_if = {
			limit = {
				region = world_qohor
			}
			culture = qohorik
		}
		else_if = {
			limit = {
				region = world_norvos
			}
			culture = norvosi
		}
		else_if = {
			limit = {
				region = world_myr
			}
			culture = myrman
			religion = myrish_religion
		}
		else_if = {
			limit = {
				region = world_tyrosh
			}
			culture = tyroshi
			religion = trios
		}
		else_if = {
			limit = {
				region = world_volantis
			}
			culture = volantene
		}
		else_if = {
			limit = {
				region = world_lorath
			}
			culture = lorathi
		}
		else_if = {
			limit = {
				OR = {
					province_id = 747
					region = world_sothoryos
				}
			}
			culture = gogossosi
		}
		else_if = {
			limit = {
				region = world_stepstones
				owner = { culture_group = free_cities }
			}
			owner = { ROOT = { culture = PREV } }
		}
		else_if = {
			limit = {
				region = world_stepstones
			}
			random_province = {
				limit = {
					culture_group = free_cities
				}
				preferred_limit = {
					OR = {
						region = world_tyrosh
						region = world_lys
						region = world_myr
					}
				}
				ROOT = { culture = PREV }
			}
		}
		# else_if = {
			# limit = {
				# region = world_essaria
			# }
			# culture = essarian
		# }
		else = {
			culture = eastern_valyrian
		}

		if = {
			limit = {
				owner = {
					OR = {
						has_landed_title = event_target:ROOT_duchy
						completely_controls = event_target:ROOT_duchy
						any_liege = {
							OR = {
								has_landed_title = event_target:ROOT_duchy
								completely_controls = event_target:ROOT_duchy
							}
						}
					}
				}
			}
			custom_tooltip = {
				text = TOOLTIPvalyria.65_DEJURE
				if = {
					limit = { culture = pentosi }
					event_target:ROOT_duchy = { de_jure_liege = k_pentos }
				}
				else_if = {
					limit = { culture = braavosi }
					event_target:ROOT_duchy = { de_jure_liege = k_braavos }
				}
				else_if = {
					limit = { culture = lysene }
					event_target:ROOT_duchy = { de_jure_liege = k_lys }
				}
				else_if = {
					limit = { culture = qohorik }
					event_target:ROOT_duchy = { de_jure_liege = k_qohor }
				}
				else_if = {
					limit = { culture = norvosi }
					event_target:ROOT_duchy = { de_jure_liege = k_norvos }
				}
				else_if = {
					limit = { culture = myrman }
					event_target:ROOT_duchy = { de_jure_liege = k_myr }
				}
				else_if = {
					limit = { culture = tyroshi }
					event_target:ROOT_duchy = { de_jure_liege = k_tyrosh }
				}
				else_if = {
					limit = { culture = volantene }
					event_target:ROOT_duchy = {
						de_jure_liege = k_volantis
						if = {
							limit = { title = d_volantis }
							d_volaena = { de_jure_liege = k_volantis }
						}
					}
				}
				else_if = {
					limit = { culture = lorathi }
					event_target:ROOT_duchy = { de_jure_liege = k_lorath }
				}
				else_if = {
					limit = { culture = essarian }
					event_target:ROOT_duchy = { de_jure_liege = k_essaria }
				}
				else_if = {
					limit = {
						culture = eastern_valyrian
						region = world_essaria
					}
					event_target:ROOT_duchy = { de_jure_liege = k_essaria }
				}
			}
		}

		culture_scope = {
			if = {
				limit = { check_variable = { which = defunct value = 1 } }
				set_variable = { which = defunct value = 0 }
			}
		}
	}
}
# Locals requests free city status
character_event = {
	id = valyria.66

	is_triggered_only = yes
	hide_window = yes
	only_independent = yes

	trigger = {
		is_valyrian_freehold_trigger = yes
		any_demesne_title = { #has colony title with no current Archon
			tier = KING
			NOR = { #Not in core valyrian lands
				capital_scope = { region = world_valyrian_peninsula }
				title = k_valyria
				title = k_long_summer
			}
			has_title_flag = valyria_colony
			OR = {
				NOT = { has_title_flag = requested_free_city_status }
				had_title_flag = { flag = requested_free_city_status days = 3650 }
			}
			ROOT = {
				any_demesne_province = {
					kingdom = {
						title = PREVPREVPREV
					}
					NOT = { has_province_flag = colony_province }
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1
	}

	immediate = {
		#find title
		random_demesne_title = {
			limit = {
				tier = KING
				NOR = { #Not in core valyrian lands
					capital_scope = { region = world_valyrian_peninsula }
					title = k_valyria
					title = k_long_summer
				}
				has_title_flag = valyria_colony
				OR = {
					NOT = { has_title_flag = requested_free_city_status }
					had_title_flag = { flag = requested_free_city_status days = 3650 }
				}
				ROOT = {
					any_demesne_province = {
						kingdom = {
							title = PREVPREVPREV
						}
						NOT = { has_province_flag = colony_province }
					}
				}
			}
			clr_title_flag = requested_free_city_status
			set_title_flag = requested_free_city_status
			save_event_target_as = target_colony_title
		}
		#find capital province
		random_demesne_province = {
			limit = {
				kingdom = {
					title = event_target:target_colony_title
				}
				NOT = { has_province_flag = colony_province }
			}
			preferred_limit = {
				event_target:target_colony_title = {
					capital_scope = {
						province_id = PREVPREV
					}
				}
			}
			preferred_limit = {
				port = yes
			}
			save_event_target_as = target_colony_province
		}
		#find beneficiary
		random_realm_character = {
			limit = {
				is_female = no
				is_lowborn = no
				age = 21
				is_incapable = no
				prisoner = no
				culture = event_target:target_colony_province
				OR = {
					is_ruler = no
					capital_scope = { kingdom = { title = event_target:target_colony_title } }
				}
				is_theocracy = no
				can_press_claims_trigger = yes
				NOT = { any_dynasty_member = { is_patrician = yes } }
				reverse_opinion = { who = ROOT value = -25 }
				opinion = { who = ROOT value = -25 }
				OR = {
					diplomacy = 10
					intrigue = 10
					stewardship = 10
				}
			}
			preferred_limit = {
				is_ruler = yes
				religion = event_target:target_colony_province
				prestige = 500
			}
			preferred_limit = {
				is_ruler = yes
				religion = event_target:target_colony_province
			}
			preferred_limit = {
				is_ruler = yes
			}
			preferred_limit = {
				religion = event_target:target_colony_province
				prestige = 500
			}
			preferred_limit = {
				prestige = 250
			}
			save_event_target_as = target_colony_beneficiary
			break = yes
		}
		#create random if none found
		create_character = {
			random_traits = yes
			dynasty = culture
			religion = event_target:target_colony_province
			culture = event_target:target_colony_province
			female = no
		}
		new_character = {
			save_event_target_as = target_colony_beneficiary

			remove_trait = blinded
			remove_trait = crippled
			remove_trait = mangled
			remove_trait = incapable
			remove_trait = dwarf
			remove_trait = dwarf_1
			remove_trait = dwarf_2
			remove_trait = weak
			remove_trait = weak_1
			remove_trait = weak_2
			remove_trait = feeble
			remove_trait = inbred
			remove_trait = imbecile
			remove_trait = imbecile_1
			remove_trait = dull
			remove_trait = slow
			remove_trait = slow_1
			remove_trait = ugly
			remove_trait = ugly_1
			remove_trait = ugly_2
			remove_trait = uncouth
			remove_trait = clubfooted
			remove_trait = hunchback
			random_list = {
				30 = { add_trait = poor_warrior }
				25 = { add_trait = trained_warrior }
				5 = { add_trait = skilled_warrior }
			}
		}
	}

	immediate = {
		event_target:target_colony_beneficiary = {
			character_event = { id = valyria.67 }
		}
	}

	option = {
		name = OK
	}
}
character_event = { #ping to beneficiary
	id = valyria.67

	is_triggered_only = yes

	immediate = {
		FROM = {
			character_event = { id = valyria.68 }
		}
	}

	option = {
		name = OK
	}
}
# Liege receives the request
character_event = {
	id = valyria.68

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = { #Regent may decide
			limit = {
				has_regent = yes
				OR = {
					is_adult = no
					prisoner = yes
					is_incapable = yes
				}
			}
			regent = { letter_event = { id = valyria.69 } }
			break = yes
		}
		letter_event = { id = valyria.69 }
	}
}
letter_event = {
	id = valyria.69

	is_friendly = yes

	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes
	show_from_from = yes

	desc = {
		text = EVTDESCvalyria.69 #Liege
		trigger = {
			character = FROM
		}
	}
	desc = {
		text = EVTDESCvalyria.69B #Regent
		trigger = {
			NOT = { character = FROM }
			NOT = { character = FROMFROM }
		}
	}
	desc = {
		text = EVTDESCvalyria.69C #Regent give self
		trigger = {
			NOT = { character = FROM }
			character = FROMFROM
		}
	}

	option = {
		name = EVTOPTDvalyria.69 # Accept the request for a favor
		trigger = {
			has_dlc = "Zeus"
			NOT = { holds_favor_on = FROMFROM }
			NOT = { character = FROMFROM }
		}
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				NOT = { opinion = { who = FROMFROM value = -24 } }
			}

			modifier = {
				factor = 0.2
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 100 }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 25 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 50 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 75 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 100 } }
			}
		}
		add_favor = FROMFROM
		hidden_tooltip = {
			event_target:target_colony_province = {
				county = { grant_title = FROMFROM }
				capital_holding = { ROOT_FROMFROM = { capital = PREV } }
			}
		}
		event_target:target_colony_title = { grant_title = FROMFROM }
		FROMFROM = {
			set_defacto_liege = THIS
			ROOT_FROM = {
				make_tributary = { who = PREV tributary_type = valyrian_tributary }
			}
			hidden_tooltip = {
				clr_character_flag = requested_free_city_status
				clr_mega_war_variables_and_flags_effect = yes
				reverse_remove_opinion = { who = ROOT_FROM modifier = opinion_de_facto_liege }
			}
		}
		hidden_tooltip = {
			FROMFROM = { letter_event = { id = valyria.70 } }
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.71 } }
			}
		}
	}

	option = {
		name = {
			text = EVTOPTAvalyria.69 # Accept the request
			trigger = { NOT = { character = FROMFROM } }
		}
		name = {
			text = EVTOPTEvalyria.69 # Regent
			trigger = { character = FROMFROM }
		}
		ai_chance = {
			factor = 100

			modifier = {
				factor = 0.5
				has_dlc = "Zeus"
				NOT = { holds_favor_on = FROMFROM }
				NOT = { character = FROMFROM }
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROMFROM value = -24 } }
			}

			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 50 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 75 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROMFROM value = 100 }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 25 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 50 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 75 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { opinion = { who = ROOT_FROM value = 100 } }
			}
		}
		hidden_tooltip = {
			event_target:target_colony_province = {
				county = { grant_title = FROMFROM }
				capital_holding = { ROOT_FROMFROM = { capital = PREV } }
			}
		}
		event_target:target_colony_title = { grant_title = FROMFROM }
		FROMFROM = {
			set_defacto_liege = THIS
			ROOT_FROM = {
				make_tributary = { who = PREV tributary_type = valyrian_tributary }
			}
			hidden_tooltip = {
				clr_character_flag = requested_free_city_status
				clr_mega_war_variables_and_flags_effect = yes
				reverse_remove_opinion = { who = ROOT_FROM modifier = opinion_de_facto_liege }
			}
		}
		if = {
			limit = { NOT = { character = FROMFROM } }
			reverse_opinion = {
				who = FROMFROM
				modifier = opinion_grateful
				months = 120
			}
			hidden_tooltip = {
				FROMFROM = { letter_event = { id = valyria.70 days = 1 } }
			}
		}
		hidden_tooltip = {
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.71 } }
			}
		}
	}

	option = {
		name = EVTOPTBvalyria.69 # Deny the request
		trigger = {
			diplomacy < 14
			NOT = { character = FROMFROM }
		}
		ai_chance = {
			factor = 100

			modifier = {
				factor = 5
				trait = greedy
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROMFROM value = 0 } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -24 } } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -49 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -74 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -99 } } }
			}
		}
		FROMFROM = {
			opinion = {
				who = ROOT
				modifier = opinion_denied_title
				months = 120
				multiplier = 2
			}
			letter_event = { id = valyria.52 }
		}
		hidden_tooltip = {
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.72 } }
			}
		}
	}

	option = {
		name = EVTOPTCvalyria.69 # Deny with superior diplomacy
		trigger = {
			diplomacy = 14
			NOT = { character = FROMFROM }
		}

		ai_chance = {
			factor = 150

			modifier = {
				factor = 5
				trait = greedy
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROMFROM value = 0 } }
			}

			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -24 } } }
			}
			modifier = {
				factor = 1.5
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -49 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -74 } } }
			}
			modifier = {
				factor = 2
				FROMFROM = { NOT = { opinion = { who = ROOT_FROM value = -99 } } }
			}
		}
		tooltip_info = diplomacy
		FROMFROM = { letter_event = { id = valyria.53 tooltip = EVTTOOLTIPvalyria.53 } }
		hidden_tooltip = {
			if = { #Regent inform liege
				limit = { NOT = { character = FROM } }
				FROM = { character_event = { id = valyria.72 } }
			}
		}
	}
}
# Vassal request granted
letter_event = {
	id = valyria.70

	is_friendly = yes

	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes

	desc = {
		text = EVTDESCvalyria.51
		trigger = { vassal_of = FROM }
	}
	desc = {
		text = EVTDESCvalyria.51B
		trigger = { NOT = { vassal_of = FROM } }
	}

	immediate = {
		##Take new dejure titles and vassals from liege
		FROMFROM = {
			any_demesne_title = {
				limit = {
					OR = {
						has_de_jure_pretension = ROOT
						dejure_liege_title = { has_de_jure_pretension = ROOT }
						dejure_liege_title = { dejure_liege_title = { has_de_jure_pretension = ROOT } }
					}
					can_be_given_away = yes
					NAND = {
						tier = COUNT
						location = { is_capital = yes }
					}
					OR = { #Nomads dont give grazing lands to non-nomads
						holder_scope = { is_nomadic = no }
						ROOT = { is_nomadic = yes }
					}
				}
				grant_title = ROOT
			}
			any_vassal = {
				limit = {
					lower_tier_than = ROOT
					OR = {
						ROOT = { de_jure_vassal_or_below = PREV }
						primary_title = { #for religious and other titles not part of dejure realm
							is_landless_type_title = yes
							capital_scope = { owner = { character = ROOT } }
							NOT = { dejure_liege_title = { holder_scope = { is_liege_of = ROOT } } }
						}
					}
					is_patrician = no
					NOT = {
						primary_title = {
							tier = COUNT
							location = { has_province_flag = colony_province }
						}
					}
				}
				set_defacto_liege = ROOT
			}
		}
	}

	option = { #Merchant Republic
		name = "EVTOPTAvalyria.70"
		trigger = {
			NAND = {
				ai = no
				NOT = { has_dlc = "The Republic" }
			}
			OR = {
				is_merchant_republic = yes
				event_target:target_colony_province = { port = yes }
			}
			NOT = {
				any_liege = {
					NOT = { character = FROMFROM }
					is_republic = yes
				}
			}
		}
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0
				culture_group = iron_isles_culture
			}
			modifier = {
				factor = 0.25
				OR = {
					any_vassal = {
						is_merchant_republic = yes
						NOT = { has_character_flag = republic_faction_patrician }
					}
					FROMFROM = {
						any_vassal = {
							is_merchant_republic = yes
							NOT = { has_character_flag = republic_faction_patrician }
							NOT = { character = ROOT }
						}
					}
				}
			}
			modifier = {
				factor = 4
				OR = {
					culture = astapori
					culture = meereenese
					culture = asshai
				}
			}
			modifier = {
				factor = 0.25
				OR = {
					culture_group = andal
					culture_group = first_men
					culture_group = dornish
				}
			}
		}

		#Make merchant republic
		hidden_tooltip = {
			event_target:target_colony_title = {
				if = {
					limit = { has_dlc = "Zeus" }
					add_law = law_voting_power_1
					add_law = diplomacy_voting_power_1
					add_law = titles_voting_power_1
					add_law = justice_voting_power_1
				}
			}
			if = {
				limit = { NOT = { capital_holding = { holding_type = city } } }
				random_demesne_title = {
					limit = {
						tier = BARON
						holding_type = city
						location = { province_id = event_target:target_colony_province }
					}
					preferred_limit = { holder_scope = { character = ROOT } }
					make_capital_holding = yes
					ROOT = { capital = PREV }
				}
			}
		}
		if = {
			limit = {
				higher_tier_than = DUKE
				OR = {
					culture = volantene
					culture = eastern_valyrian
					AND = {
						culture_group = valyrian
						primary_title = { title = k_volantis }
					}
				}
				OR = { #triarch elections do not happen in the revived freehold
					NOT = { has_global_flag = revived_valyrian_freehold }
					primary_title = { NOT = { title = e_new_valyria } }
				}
			}
			set_government_type = triarch_merchant_republic_government
			set_character_flag = volantene_election #If Triarchy no election for a year
		}
		else = {
			set_government_type = merchant_republic_government
		}
		# if = {
			# limit = { capital_holding = { NOT = { holding_type = city } } }
			# random_demesne_title = {
				# limit = {
					# tier = BARON
					# holding_type = city
					# location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
				# }
				# province_capital = yes
				# ROOT = { capital = PREV }
			# }
			# random_realm_lord = {
				# limit = {
					# any_demesne_title = {
						# tier = BARON
						# holding_type = city
						# location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
					# }
				# }
				# random_demesne_title = {
					# limit = {
						# tier = BARON
						# holding_type = city
						# location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
					# }
					# usurp_title = ROOT
					# province_capital = yes
					# ROOT = { capital = PREV }
				# }
			# }
		# }
		# if = { #If still no city found convert random sub barony
			# limit = { capital_holding = { NOT = { holding_type = city } } }
			# random_realm_lord = {
				# limit = {
					# any_demesne_title = {
						# tier = BARON
						# holding_type = castle
						# location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
					# }
				# }
				# random_demesne_title = {
					# limit = {
						# tier = BARON
						# holding_type = castle
						# location = { ROOT = { capital_scope = { province_id = PREVPREV } } }
					# }
					# convert_to = CITY
					# usurp_title = ROOT
					# province_capital = yes
					# ROOT = { capital = PREV }
				# }
			# }
		# }
		hidden_tooltip = {
			#Create new patricians
			if = {
				limit = { is_patrician = no }
				create_family_palace = yes
			}
			primary_title = {
				add_law = succ_patrician_elective
			}
			any_realm_lord = {
				limit = { has_character_flag = republic_faction_patrician }
				set_defacto_liege = ROOT
				if = {
					limit = { is_patrician = no }
					create_family_palace = yes
				}
				clr_character_flag = republic_faction_patrician
			}
			character_event = { id = faction_event_new.67 } #If still not 5 patricians found, randomly add more

			clr_character_flag = faction_republic_ultimatum_taken
			clear_event_target = faction_republic_title

			character_event = { id = dynamic_coa.1 } #reset coas
		}
	}
	option = { #Oligarchy
		name = "EVTOPTBvalyria.71"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					is_merchant_republic = yes
					culture_group = free_cities
					culture = eastern_valyrian
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = { is_merchant_republic = yes }
				family_palace = { destroy_settlement = THIS }
				any_vassal = {
					limit = { is_patrician = yes }
					family_palace = { destroy_settlement = THIS }
					set_government_type = feudal_government
					primary_title = { succession = seniority }
					recalc_succession = yes
				}
			}
		}
		event_target:target_colony_title = {
			hidden_tooltip = {
				add_law = republic_law_oligarchy
				if = {
					limit = { has_dlc = "Zeus" }
					add_law = law_voting_power_1
					add_law = diplomacy_voting_power_1
					add_law = titles_voting_power_1
					add_law = justice_voting_power_1
				}
			}
			add_law = noble_oligarchy_elective
		}
		set_government_type = noble_oligarchy
		recalc_succession = yes
	}
	after = {
		hidden_tooltip = {
			character_event = { id = dynamic_coa.1 days = 1 } #reset coas
		}
	}
}

# Inform liege regent released tributary
character_event = {
	id = valyria.71
	desc = EVTDESCvalyria.71

	is_triggered_only = yes

	option = {
		name = OK
		show_portrait = FROMFROMFROM
	}
}
# Inform liege regent refused to give away title
character_event = {
	id = valyria.72
	desc = EVTDESCvalyria.72

	is_triggered_only = yes

	option = {
		name = OK
		show_portrait = FROMFROMFROM
		if = {
			limit = { NOT = { FROM = { diplomacy = 14 } } }
			FROMFROMFROM = {
				opinion = {
					who = ROOT
					modifier = opinion_denied_title
					months = 120
				}
			}
		}
	}
}
#Valyrian colony expansion
province_event = {
	id = valyria.75
	desc = "EVTDESCvalyria.75"
	picture = GFX_evt_prospering_province

	has_flag = valyria_primary_colony

	trigger = {
		NOT = { has_province_flag = colony_province }
		NOT = { check_variable = { which = valyria_primary_colony_stage value = 3 } }
		owner = {
			OR = {
				culture_group = valyrian
				culture_group = free_cities
			}
			OR = {
				has_landed_title = e_new_valyria
				top_liege = { has_landed_title = e_new_valyria }
				suzerain = { has_landed_title = e_new_valyria }
				top_liege = { suzerain = { has_landed_title = e_new_valyria } }
			}
		}
		is_occupied = no
	}

	mean_time_to_happen = {
		months = 480

		modifier = {
			factor = 1.5
			has_province_modifier = asoiaf_mild_winter
		}
		modifier = {
			factor = 2
			has_province_modifier = asoiaf_normal_winter
		}
		modifier = {
			factor = 3
			has_province_modifier = asoiaf_harsh_winter
		}

		#Slavery
		modifier = {
			factor = 0.9
			has_province_modifier = slave_modifier_1
		}
		modifier = {
			factor = 0.8
			has_province_modifier = slave_modifier_2
		}
		modifier = {
			factor = 0.7
			has_province_modifier = slave_modifier_3
		}
		modifier = {
			factor = 0.6
			has_province_modifier = slave_modifier_4
		}
		modifier = {
			factor = 0.5
			has_province_modifier = slave_modifier_5
		}

		#misc modifiers from other sources
		modifier = {
			factor = 0.95
			has_province_modifier = master_builder
		}
		modifier = {
			factor = 1.3
			has_province_modifier = sabotaged_building
		}
		modifier = {
			factor = 1.5
			has_province_modifier = smugglers_ring
		}
		modifier = {
			factor = 0.8
			has_province_modifier = stone_quarry
		}
		modifier = {
			factor = 0.8
			has_province_modifier = friendly_innovations
		}
		modifier = {
			factor = 0.8
			has_province_modifier = carpenters_guild
		}
		modifier = {
			factor = 1.3
			has_province_modifier = outlawed_guild
		}
		modifier = {
			factor = 0.975
			has_province_modifier = prosperity_modifier_2
		}
		modifier = {
			factor = 0.95
			has_province_modifier = prosperity_modifier_3
		}
		modifier = {
			factor = 0.85
			has_province_modifier = logging_company_province
		}
		modifier = {
			factor = 0.85
			has_province_modifier = inspired_peasantry
		}
		modifier = {
			factor = 0.85
			has_province_modifier = new_roads
		}
		modifier = {
			factor = 1.2
			has_province_modifier = sabotaged_buildings
		}
		modifier = {
			factor = 0.8
			has_province_modifier = blast_furnace
		}
	}

	immediate = {
		change_variable = { which = valyria_primary_colony_stage value = 1 }
		owner = { save_event_target_as = province_owner }
	}

	option = {
		name = "EVTOPTAvalyria.75"
		random_province_holding = {
			limit = { holding_type = city }
			preferred_limit = { base_value_5_trigger = yes }
			preferred_limit = { base_value_4_trigger = yes }
			preferred_limit = { base_value_3_trigger = yes }
			preferred_limit = { base_value_2_trigger = yes }
			increase_holding_base_value_effect = yes
		}
		if = { #Old VOlantis
			limit = { province_id = 419 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_rhoyne_manor
				   type = castle
				   holder = event_target:province_owner
				}
				build_holding = {
				   title = b_blood_palace
				   type = castle
				   holder = event_target:province_owner
				}
				build_holding = {
				   title = b_izulepsia
				   type = castle
				   holder = event_target:province_owner
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				#Add free colony in new volantis
				417 = {
					tooltip = { county = { gain_title = ROOT } }
					save_event_target_as = valyrian_colony_target
					ROOT = { owner = { character_event = { id = valyria.28 } } }#COLONISE
				}
				b_blackwall = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_rhoyne_manor = { add_building = ca_asoiaf_essos_basevalue_1 }
				b_blood_palace = { add_building = ca_asoiaf_essos_basevalue_1 }
				b_izulepsia = { add_building = ca_asoiaf_essos_basevalue_1 }
			}
			else = {

				b_blackwall = { add_building = ca_asoiaf_essos_basevalue_4 }
				b_rhoyne_manor = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_blood_palace = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_izulepsia = { add_building = ca_asoiaf_essos_basevalue_2 }
			}
		}
		else_if = { #Volantis
			limit = { province_id = 417 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_volantisharbor
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_volantisharbor = { add_building = ct_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_brokengate
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_brokengate = { add_building = ca_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_longbridge
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_longbridge = { add_building = ct_asoiaf_essos_basevalue_1 } }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_volantisgates = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_volantisharbor = { add_building = ct_asoiaf_essos_basevalue_2 }
				b_brokengate = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_longbridge = { add_building = ct_asoiaf_essos_basevalue_2 }
			}
			else = {
				b_volantisharbor = { add_building = ct_asoiaf_essos_basevalue_3 }
				b_brokengate = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_longbridge = { add_building = ct_asoiaf_essos_basevalue_3 }
			}
		}
		else_if = { #Volon Therys
			limit = { province_id = 420 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				b_volontherys_castle = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_volontherys_castle = { add_building = ca_asoiaf_essos_basevalue_4 }
			}
		}
		else_if = { #Valysar
			limit = { province_id = 422 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				b_valysar_castle = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
		}
		else_if = { #Selhorys
			limit = { province_id = 423 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				b_selhorys_castle = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
		}
		else_if = { #Tyrosh
			limit = { province_id = 367 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_tyroshharbor
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_tyroshharbor = { add_building = ct_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_fountaindrunkengod
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_fountaindrunkengod = { add_building = ct_asoiaf_essos_basevalue_2 } }
				b_bleedingtower = { add_building = ca_asoiaf_essos_basevalue_4 }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_tyroshharbor = { add_building = ct_asoiaf_essos_basevalue_4 }
				b_bleedingtower = { add_building = ca_asoiaf_essos_basevalue_5 }
				b_fountaindrunkengod = { add_building = ct_asoiaf_essos_basevalue_4 }
			}
			else = {
				b_tyroshharbor = { add_building = ct_asoiaf_essos_basevalue_5 }
				b_bleedingtower = { add_building = ca_asoiaf_essos_basevalue_6 }
				b_fountaindrunkengod = { add_building = ct_asoiaf_essos_basevalue_5 }
			}
		}
		else_if = { #Lys
			limit = { province_id = 368 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_lyseneharbor
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_lyseneharbor = { add_building = ct_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_pleasuregardens
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_pleasuregardens = { add_building = ct_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_numys
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_numys = { add_building = ca_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_lentorys
					type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_lentorys = { add_building = ca_asoiaf_essos_basevalue_1 } }
				b_tear_tower = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_lyseneharbor = { add_building = ct_asoiaf_essos_basevalue_4 }
				b_pleasuregardens = { add_building = ct_asoiaf_essos_basevalue_2 }
				b_numys = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_lentorys = { add_building = ca_asoiaf_essos_basevalue_2 }
			}
			else = {
				b_lyseneharbor = { add_building = ct_asoiaf_essos_basevalue_5 }
				b_pleasuregardens = { add_building = ct_asoiaf_essos_basevalue_3 }
				b_numys = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_lentorys = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
		}
		else_if = { #Pentos
			limit = { province_id = 406 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_pentosharbor
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_pentosharbor = { add_building = ct_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_spicertowers
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_spicertowers = { add_building = ca_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_sunrisegate
					type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_sunrisegate = { add_building = ca_asoiaf_essos_basevalue_2 } }
				b_princespalace = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_pentosharbor = { add_building = ct_asoiaf_essos_basevalue_3 }
				b_spicertowers = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_sunrisegate = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
			else = {
				b_pentosharbor = { add_building = ct_asoiaf_essos_basevalue_4 }
				b_spicertowers = { add_building = ca_asoiaf_essos_basevalue_4 }
				b_sunrisegate = { add_building = ca_asoiaf_essos_basevalue_4 }
			}
		}
		else_if = { #Myr
			limit = { province_id = 378 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_myrishharbor
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_myrishharbor = { add_building = ct_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_lace_tower
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_lace_tower = { add_building = ca_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_green_gate
					type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_green_gate = { add_building = ca_asoiaf_essos_basevalue_1 } }
				b_vyrelos = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_myrishharbor = { add_building = ct_asoiaf_essos_basevalue_4 }
				b_lace_tower = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_green_gate = { add_building = ca_asoiaf_essos_basevalue_2 }
			}
			else = {
				b_myrishharbor = { add_building = ct_asoiaf_essos_basevalue_5 }
				b_lace_tower = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_green_gate = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
		}
		else_if = { #Norvos
			limit = { province_id = 433 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_lowernorvos
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_lowernorvos = { add_building = ct_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_narrah
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_narrah = { add_building = ca_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_nyel
					type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_nyel = { add_building = ca_asoiaf_essos_basevalue_1 } }
				b_noom = { add_building = ca_asoiaf_essos_basevalue_3 }
				if = {
					limit = { owner = { has_landed_title = d_bearded_priests } }
					b_beardedtemple = {
						add_building = tp_monastery_2
						add_building = tp_wall_q_2
						add_building = tp_elite_barracks_2
					}
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_lowernorvos = { add_building = ct_asoiaf_essos_basevalue_4 }
				b_narrah = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_nyel = { add_building = ca_asoiaf_essos_basevalue_2 }
				if = {
					limit = { owner = { has_landed_title = d_bearded_priests } }
					b_beardedtemple = {
						add_building = tp_monastery_4
						add_building = tp_wall_q_4
						add_building = tp_elite_barracks_4
					}
				}
			}
			else = {
				b_lowernorvos = { add_building = ct_asoiaf_essos_basevalue_5 }
				b_narrah = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_nyel = { add_building = ca_asoiaf_essos_basevalue_3 }
				if = {
					limit = { owner = { has_landed_title = d_bearded_priests } }
					b_beardedtemple = {
						add_building = tp_monastery_5
						add_building = tp_wall_q_5
						add_building = tp_elite_barracks_6
					}
				}
			}
		}
		else_if = { #Qohor
			limit = { province_id = 476 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				build_holding = {
				   title = b_smiths_port
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_smiths_port = { add_building = ct_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_city_guard
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_city_guard = { add_building = ca_asoiaf_essos_basevalue_1 } }
				build_holding = {
				   title = b_goat_tower
					type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_goat_tower = { add_building = ca_asoiaf_essos_basevalue_1 } }
				b_qohorwalls = { add_building = ca_asoiaf_essos_basevalue_3 }
				if = {
					limit = { owner = { has_landed_title = d_bearded_priests } }
					b_beardedtemple = {
						add_building = tp_monastery_2
						add_building = tp_wall_q_2
						add_building = tp_elite_barracks_2
					}
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_qohorwalls = { add_building = ca_asoiaf_essos_basevalue_4 }
				b_smiths_port = { add_building = ct_asoiaf_essos_basevalue_2 }
				b_city_guard = { add_building = ca_asoiaf_essos_basevalue_2 }
				b_goat_tower = { add_building = ca_asoiaf_essos_basevalue_2 }
			}
			else = {
				b_smiths_port = { add_building = ct_asoiaf_essos_basevalue_3 }
				b_city_guard = { add_building = ca_asoiaf_essos_basevalue_3 }
				b_goat_tower = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
		}
		else_if = { #Essaria
			limit = { province_id = 542 }
			if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 1 } }
				b_essaria = { add_building = ca_asoiaf_essos_basevalue_3 }
				build_holding = {
				   title = b_essaria4
				   type = city
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_essaria4 = { add_building = ct_asoiaf_essos_basevalue_2 } }
				build_holding = {
				   title = b_essaria3
				   type = castle
				   holder = event_target:province_owner
				}
				hidden_tooltip = { b_essaria3 = { add_building = ca_asoiaf_essos_basevalue_2 } }
			}
			else_if = {
				limit = { is_variable_equal = { which = valyria_primary_colony_stage value = 2 } }
				b_essaria = { add_building = ca_asoiaf_essos_basevalue_4 }
				b_essaria4 = { add_building = ct_asoiaf_essos_basevalue_3 }
				b_essaria3 = { add_building = ca_asoiaf_essos_basevalue_3 }
			}
			else = {
				b_essaria4 = { add_building = ct_asoiaf_essos_basevalue_4 }
				b_essaria3 = { add_building = ca_asoiaf_essos_basevalue_4 }
			}
		}
	}
}
#Valyrian heartland expansion
province_event = {
	id = valyria.78
	desc = "EVTDESCvalyria.78"
	picture = GFX_evt_prospering_province

	trigger = {
		NOT = { start_date = 4000.1.1 } #Pre-ghiscari wars
		NOT = { has_province_flag = valyria_heartland_expansion }
		OR = {
			region = world_valyrian_peninsula
			region = world_north_valyria
		}
		owner = {
			OR = {
				culture_group = valyrian
				culture_group = free_cities
			}
			OR = {
				has_landed_title = e_new_valyria
				top_liege = { has_landed_title = e_new_valyria }
				suzerain = { has_landed_title = e_new_valyria }
				top_liege = { suzerain = { has_landed_title = e_new_valyria } }
			}
		}
		e_new_valyria = {
			holder_scope = {
				yearly_income = 200 #base wealth needed
			}
		}
		is_occupied = no
	}

	mean_time_to_happen = {
		months = 2400 #200 years

		modifier = {
			factor = 2
			owner = { war = yes }
		}
		modifier = {
			factor = 2
			owner = { any_liege = { war = yes } }
		}

		modifier = {
			factor = 0.66
			e_new_valyria = { holder_scope = { yearly_income = 275 } }
		}
		modifier = {
			factor = 0.66
			e_new_valyria = { holder_scope = { yearly_income = 350 } }
		}
		modifier = {
			factor = 0.66
			e_new_valyria = { holder_scope = { yearly_income = 500 } }
		}

		modifier = {
			factor = 2
			e_ghiscar = { holder_scope = { culture_group = ghiscari } }
		}

		modifier = {
			factor = 0.66
			is_capital = yes
			owner = { has_landed_title = e_new_valyria }
		}

		modifier = {
			factor = 1.5
			has_province_modifier = asoiaf_mild_winter
		}
		modifier = {
			factor = 2
			has_province_modifier = asoiaf_normal_winter
		}
		modifier = {
			factor = 3
			has_province_modifier = asoiaf_harsh_winter
		}

		#misc modifiers from other sources
		modifier = {
			factor = 0.95
			has_province_modifier = master_builder
		}
		modifier = {
			factor = 1.3
			has_province_modifier = sabotaged_building
		}
		modifier = {
			factor = 1.5
			has_province_modifier = smugglers_ring
		}
		modifier = {
			factor = 0.8
			has_province_modifier = stone_quarry
		}
		modifier = {
			factor = 0.8
			has_province_modifier = friendly_innovations
		}
		modifier = {
			factor = 0.8
			has_province_modifier = carpenters_guild
		}
		modifier = {
			factor = 1.3
			has_province_modifier = outlawed_guild
		}
		modifier = {
			factor = 0.975
			has_province_modifier = prosperity_modifier_2
		}
		modifier = {
			factor = 0.95
			has_province_modifier = prosperity_modifier_3
		}
		modifier = {
			factor = 0.85
			has_province_modifier = logging_company_province
		}
		modifier = {
			factor = 0.85
			has_province_modifier = inspired_peasantry
		}
		modifier = {
			factor = 0.85
			has_province_modifier = new_roads
		}
		modifier = {
			factor = 1.2
			has_province_modifier = sabotaged_buildings
		}
		modifier = {
			factor = 0.8
			has_province_modifier = blast_furnace
		}
	}

	immediate = {
		set_province_flag = valyria_heartland_expansion
	}

	option = {
		name = "EVTOPTAvalyria.78"
		any_province_holding = {
			limit = {
				OR = {
					holding_type = castle
					holding_type = city
				}
			}
			increase_holding_base_value_effect = yes
		}
	}
}
#Colony governor asserts power and extends term
character_event = { #Top liege responds
	id = valyria.82
	picture = GFX_evt_china_expansionist

	desc = {
		text = EVTDESCvalyria.82
		trigger = { FROM = { NOT = { has_character_flag = rejected_compromise } } }
	}
	desc = {
		text = EVTDESCvalyria.82B
		trigger = { FROM = { has_character_flag = rejected_compromise } }
	}

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.82 #Accept
		ai_chance = {
			factor = 25

			modifier = {
				factor = 0.25
				FROM = { NOT = { relative_power_to_liege = 0.2 } }
			}
			modifier = {
				factor = 1.5
				relative_power_to_liege = 0.5
			}

			modifier = {
				factor = 3
				OR = {
					is_close_relative = FROM
					is_married = FROM
					is_friend = FROM
					is_lover = FROM
				}
			}
			modifier = {
				factor = 2
				trait = familyperson
				is_close_relative = FROM
			}

			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -75 } }
			}

			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = slothful
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = content
			}

			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 0.5
				trait = diligent
			}
			modifier = {
				factor = 0.25
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = ambitious
			}
		}
		FROM = {
			custom_tooltip = {
				text = TOOLTIPvalyria.82A
				add_character_modifier = {
					name = extended_valyria_colony_term
					duration = 5475
				}
				character_event = { id = valyria.83 days = 3 }
			}
			opinion = { who = ROOT modifier = opinion_extend_term_agreed months = 120 }
		}
		prestige = -500
		war_lost_lose_authority_effect = yes
		add_character_modifier = {
			name = extended_valyria_colony_term_agreed
			duration = 3650
		}
	}
	option = {
		name = EVTOPTBvalyria.82 #Offer Compromise
		trigger = {
			diplomacy = 10
			NOT = { FROM = { has_character_flag = rejected_compromise } }
		}
		ai_chance = {
			factor = 75

			modifier = {
				factor = 0.25
				FROM = { NOT = { relative_power_to_liege = 0.2 } }
			}
			modifier = {
				factor = 3
				relative_power_to_liege = 0.5
			}
			modifier = {
				factor = 3
				trait = patient
			}
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 0.33
				trait = wroth
			}
			modifier = {
				factor = 0.33
				trait = proud
			}

			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 25 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 50 }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = -25 } }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = -50 } }
			}
			modifier = {
				factor = 0.5
				NOT = { opinion = { who = FROM value = -75 } }
			}
		}
		tooltip_info = diplomacy
		FROM = {
			custom_tooltip = {
				text = TOOLTIPvalyria.82B
				character_event = { id = valyria.84 days = 3  }
			}
		}
	}
	option = {
		name = EVTOPTCvalyria.82 #Reject
		ai_chance = {
			factor = 75
		}
		FROM = {
			custom_tooltip = {
				text = TOOLTIPvalyria.82C
				character_event = { id = valyria.85 days = 3 }
			}
			opinion = { who = ROOT modifier = opinion_extend_term_rejected months = 120 }
		}
	}
}
character_event = { #Inform accept
	id = valyria.83
	desc = EVTDESCvalyria.83
	picture = GFX_evt_china_expansionist

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.83
		custom_tooltip = {
			text = TOOLTIPvalyria.83
		}
		prestige = 250
		add_character_modifier = {
			name = extended_valyria_colony_term
			duration = 5475
		}
		clr_character_flag = freehold_colony_extend_term
		clr_character_flag = rejected_compromise
		hidden_tooltip = {
			any_player = {
				limit = {
					same_realm = ROOT
					NOT = { character = ROOT }
					NOT = { character = FROM }
				}
				character_event = { id = valyria.89 }
			}
		}
	}
}
character_event = { #Inform compromise offered
	id = valyria.84
	desc = EVTDESCvalyria.84

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.84 #Accept
		ai_chance = {
			factor = 50
		}
		custom_tooltip = {
			text = TOOLTIPvalyria.84A
			diplomatic_immunity = yes
			character_event = { id = trial.500 days = 3650 } #diplomatic immunity end after 10 years
			FROM = {
				character_event = { id = valyria.86 }
			}
		}
		tooltip = { #add minor title
			if = {
				limit = {
					can_hold_title = title_state_inquisitor
					FROM = { NOT = { has_assigned_minor_title = title_state_inquisitor } }
				}
				give_minor_title = title_state_inquisitor
			}
			else_if = {
				limit = {
					can_hold_title = title_chief_architect
					FROM = { NOT = { has_assigned_minor_title = title_chief_architect } }
				}
				give_minor_title = title_chief_architect
			}
			else_if = {
				limit = {
					can_hold_title = title_court_musician
					FROM = { NOT = { has_assigned_minor_title = title_court_musician } }
				}
				give_minor_title = title_court_musician
			}
		}
		hidden_tooltip = {
			any_player = {
				limit = {
					same_realm = ROOT
					NOT = { character = ROOT }
					NOT = { character = FROM }
				}
				character_event = { id = valyria.90 }
			}
		}
	}
	option = {
		name = EVTOPTBvalyria.84 #Reject
		ai_chance = {
			factor = 50

			modifier = {
				factor = 0.25
				NOT = { relative_power_to_liege = 0.2 }
			}
			modifier = {
				factor = 2
				relative_power_to_liege = 0.5
			}
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = brave
			}

			modifier = {
				factor = 0
				trait = content
			}
			modifier = {
				factor = 0.33
				trait = humble
			}
			modifier = {
				factor = 0.33
				trait = charitable
			}
			modifier = {
				factor = 0.33
				trait = honest
			}
			modifier = {
				factor = 0.33
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
		}
		custom_tooltip = {
			text = TOOLTIPvalyria.84B
			set_character_flag = rejected_compromise
			FROM = {
				character_event = { id = valyria.82 }
			}
		}
	}
}
character_event = { #Inform rejected
	id = valyria.85
	desc = EVTDESCvalyria.85
	picture = GFX_evt_china_expansionist

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.85 #Back Down
		ai_chance = {
			factor = 25
			modifier = {
				OR = {
					trait = proud
					trait = lunatic
					relative_power_to_liege = 0.5
				}
			}
		}
		prestige = -500
		clr_character_flag = rejected_compromise
		FROM = { character_event = { id = valyria.87 } }
		hidden_tooltip = {
			any_player = {
				limit = {
					same_realm = ROOT
					NOT = { character = ROOT }
					NOT = { character = FROM }
				}
				character_event = { id = valyria.91 }
			}
		}
	}
	option = {
		name = EVTOPTBvalyria.85 #Stand Ground
		ai_chance = {
			factor = 75

			modifier = {
				factor = 0.25
				NOT = { relative_power_to_liege = 0.2 }
			}
			modifier = {
				factor = 2
				relative_power_to_liege = 0.5
			}
			modifier = {
				factor = 3
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = brave
			}

			modifier = {
				factor = 0
				trait = content
			}
			modifier = {
				factor = 0.33
				trait = humble
			}
			modifier = {
				factor = 0.33
				trait = charitable
			}
			modifier = {
				factor = 0.33
				trait = honest
			}
			modifier = {
				factor = 0.33
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
		}
		custom_tooltip = {
			text = TOOLTIPvalyria.83
		}
		prestige = 250
		add_character_modifier = {
			name = extended_valyria_colony_term
			duration = 5475
		}
		clr_character_flag = freehold_colony_extend_term
		clr_character_flag = rejected_compromise
		FROM = {
			character_event = { id = valyria.88 }
			tooltip = { opinion = { who = ROOT modifier = opinion_traitor } }
		}
		hidden_tooltip = {
			any_player = {
				limit = {
					same_realm = ROOT
					NOT = { character = ROOT }
					NOT = { character = FROM }
				}
				character_event = { id = valyria.92 }
			}
		}
	}
}
character_event = { #Inform compromise accepted
	id = valyria.86
	desc = EVTDESCvalyria.86

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.86 #Accept
		custom_tooltip = {
			text = TOOLTIPvalyria.86A
		}
		FROM = { #add minor title
			if = {
				limit = {
					can_hold_title = title_state_inquisitor
					ROOT = { NOT = { has_assigned_minor_title = title_state_inquisitor } }
				}
				give_minor_title = title_state_inquisitor
			}
			else_if = {
				limit = {
					can_hold_title = title_chief_architect
					ROOT = { NOT = { has_assigned_minor_title = title_chief_architect } }
				}
				give_minor_title = title_chief_architect
			}
			else_if = {
				limit = {
					can_hold_title = title_court_musician
					ROOT = { NOT = { has_assigned_minor_title = title_court_musician } }
				}
				give_minor_title = title_court_musician
			}
		}
		prestige = 100
	}
}
character_event = { #Inform backed down
	id = valyria.87
	desc = EVTDESCvalyria.87

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.87
		prestige = 250
		add_character_modifier = {
			name = extended_valyria_colony_term_rejected
			duration = 3650
		}
	}
}
character_event = { #Inform stood ground
	id = valyria.88
	desc = EVTDESCvalyria.88
	picture = GFX_evt_china_expansionist

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.88
		custom_tooltip = {
			text = TOOLTIPvalyria.88
			#Ai try to imprison?
			if = {
				limit = { ai = yes }
				FROM = { save_event_target_as = imprison_target }
				character_event = { id = imprisoned.1 days = 1 random = 2 }
			}
		}
	}
}

character_event = { #Inform realm accepted
	id = valyria.89
	desc = EVTDESCvalyria.89
	picture = GFX_evt_china_expansionist

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.89
		show_portrait = FROMFROM
		custom_tooltip = {
			text = TOOLTIPvalyria.89
		}
	}
}
character_event = { #Inform realm compromise
	id = valyria.90
	desc = EVTDESCvalyria.90

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.90
		show_portrait = FROMFROM
		custom_tooltip = {
			text = TOOLTIPvalyria.90
		}
	}
}
character_event = { #Inform realm back down
	id = valyria.91
	desc = EVTDESCvalyria.91
	picture = GFX_evt_china_expansionist

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.91
		show_portrait = FROMFROM
	}
}
character_event = { #Inform realm stood ground
	id = valyria.92
	desc = EVTDESCvalyria.92
	picture = GFX_evt_china_expansionist

	is_triggered_only = yes

	option = {
		name = EVTOPTAvalyria.92
		show_portrait = FROMFROM
		custom_tooltip = {
			text = TOOLTIPvalyria.92
		}
	}
}
##The Ghiscari Wars##
character_event = { #Ghiscar attacks Valyria
	id = valyria.100
	desc = "EVTDESCvalyria.100"

	only_independent = yes
	prisoner =  no
	has_global_flag = freehold_submod_initialised

	trigger = {
		tier = EMPEROR
		has_landed_title = e_ghiscar
		culture_group = ghiscari
		war = no
		e_new_valyria = {
			has_holder = yes
			holder_scope = {
				true_valyrian_culture_trigger = yes
				NOT = { same_realm = ROOT }
				demesne_size = 1
				NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
				NOT = { reverse_has_truce = ROOT }
				independent = yes
			}
		}
	}

	mean_time_to_happen = {
		months = 480

		modifier = {
			factor = 0.33
			e_new_valyria = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 0.33
			trait = ambitious
		}
		modifier = {
			factor = 0.66
			trait = ruthless
		}
		modifier = {
			factor = 0.66
			trait = envious
		}
		modifier = {
			factor = 0.66
			trait = wroth
		}
		modifier = {
			factor = 0.66
			trait = diligent
		}
		modifier = {
			factor = 1.5
			trait = honorable
		}
		modifier = {
			factor = 1.5
			trait = kind
		}
		modifier = {
			factor = 1.5
			trait = patient
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
		modifier = {
			factor = 3
			trait = content
		}
	}

	option = {
		name = "EVTOPTAvalyria.100" #Attack!
		set_global_flag = ghiscari_war
		e_new_valyria = {
			holder_scope = {
				random_realm_province = {
					limit = {
						duchy = {
							holder_scope = {
								OR = {
									character = PREVPREVPREV
									is_liege_or_above = PREVPREVPREV
								}
							}
						}
					}
					preferred_limit = {
						any_neighbor_province = {
							owner = {
								OR = {
									character = ROOT
									is_liege_or_above = ROOT
								}
							}
						}
					}
					preferred_limit = {
						empire = { title = e_ghiscar }
					}
					preferred_limit = {
						kingdom = { title = k_north_valyria }
					}
					preferred_limit = {
						region = world_summer_sea
					}
					preferred_limit = {
						kingdom = { title = k_long_summer }
					}
					duchy = {
						reverse_unsafe_war = {
							target = ROOT
							casus_belli = invasion
						}
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTBvalyria.100" #No
		trigger = { ai = no }
	}
}
character_event = { #Valyria wins, resolve war
	id = valyria.101
	desc = "EVTDESCvalyria.101"

	is_triggered_only = yes

	immediate = {
		clr_global_flag = ghiscari_war
		FROM = {
			random_demesne_title = {
				limit = {
					tier = COUNT
					location = {
						OR = {
							region = world_summer_sea
							region = world_free_cities
							region = world_sarnor
						}
					}
				}
				save_event_target_as = ghiscari_colony
				break = yes
			}
			random_realm_lord = {
				limit = {
					any_demesne_title = {
						tier = COUNT
						holder_scope = { culture_group = ghiscari }
						location = {
							OR = {
								region = world_summer_sea
								region = world_free_cities
								region = world_sarnor
							}
						}
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
						holder_scope = { culture_group = ghiscari }
						location = {
							OR = {
								region = world_summer_sea
								region = world_free_cities
								region = world_sarnor
							}
						}
					}
					save_event_target_as = ghiscari_colony
					break = yes
				}
			}
		}
	}

	option = {
		name = "EVTOPTAvalyria.101" #Compensation
		ai_chance = {
			factor = 1
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = selfish
			}
			modifier = {
				factor = 3
				trait = arbitrary
			}
		}
		FROM = {
			transfer_scaled_wealth = {
				to = ROOT
				value = 8
			}
		}
	}
	option = {
		name = "EVTOPTBvalyria.101" #Seize colony
		trigger = { event_target:ghiscari_colony = { always = yes } }
		ai_chance = {
			factor = 1

			modifier = {
				factor = 3
				trait = honest
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
		}
		event_target:ghiscari_colony = {
			dejure_liege_title = {
				if = {
					limit = { holder_scope = { same_realm = FROM } }
					usurp_title = ROOT
					hidden_tooltip = {
						if = {
							limit = {
								NOT = {
									dejure_liege_title = {
										ROOT = {
											capital_scope = {
												kingdom = {
													title = PREVPREVPREV
												}
											}
										}
									}
								}
							}
							add_law = valyria_colony
							set_title_flag = valyria_colony
							hidden_tooltip = {
								set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
							}
						}
					}
				}
			}
			usurp_title = ROOT
		}
		FROM = {
			transfer_scaled_wealth = {
				to = ROOT
				value = 1
			}
		}
	}
	option = {
		name = "EVTOPTCvalyria.101" #Destroy capital!
		trigger = { has_character_flag = ghiscar_capital_occupied }
		ai_chance = {
			factor = 500
		}
		custom_tooltip = {
			text = TOOLTIPvalyria.102
			hidden_tooltip = {
				FROM = {
					capital_scope = {
						county = { save_event_target_as = capital_county }
					}
					character_event = { id = valyria.102 }
				}
				#give everyone slave camps
				character_event = { id = slavery.1000 }
				character_event = { id = slavery.1000 }
				any_realm_lord = {
					limit = {
						culture = high_valyrian
						OR = {
							NOT = { tier = BARON }
							trait = dragon_rider
							is_patrician = yes
						}
					}
					character_event = { id = slavery.1000 }
				}
			}
		}
	}
}
narrative_event = { #Inform empire destroyed
	id = valyria.102
	desc = "EVTDESCvalyria.102"
	title = "EVTTITLEvalyria.102"

	is_triggered_only = yes
	major = yes

	option = {
		name = "EVTOPTAvalyria.102"
		trigger = { character = FROMFROM }
		custom_tooltip = {
			text = TOOLTIPvalyria.102B
			hidden_tooltip = {
				any_realm_province = {
					limit = { region = world_ghiscar }
					add_province_modifier = {
						name = sacked
						duration = 5475
					}
				}
				any_vassal = {
					limit = {
						NOT = { tier = BARON }
						OR = {
							capital_scope = {
								OR = {
									region = world_new_ghis
									region = world_jade_sea
									region = world_bone_mountains
								}
							}
							culture = lhazareen
							is_nomadic = yes
						}
					}
					set_defacto_liege = THIS
					any_demesne_title = {
						limit = { NOT = { tier = BARON } NOT = { tier = EMPEROR } }
						set_variable = { which = "de_facto_empire" value = 0 }
					}
					any_realm_lord = {
						any_demesne_title = {
							limit = { NOT = { tier = BARON } NOT = { tier = EMPEROR } }
							set_variable = { which = "de_facto_empire" value = 0 }
						}
					}
				}
				any_realm_lord = {
					any_demesne_title = {
						limit = {
							higher_tier_than = COUNT
							is_titular = no
							controls_religion = no
						}
						add_law = valyria_colony
						set_title_flag = valyria_colony
						hidden_tooltip = {
							set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
						}
					}
				}
				any_vassal = {
					limit = { NOT = { tier = BARON } }
					set_defacto_liege = FROM
					any_demesne_title = {
						limit = { NOT = { tier = BARON } NOT = { tier = EMPEROR } }
						set_variable = { which = "de_facto_empire" value = 0 }
					}
					any_realm_lord = {
						any_demesne_title = {
							limit = { NOT = { tier = BARON } NOT = { tier = EMPEROR } }
							set_variable = { which = "de_facto_empire" value = 0 }
						}
					}
					if = {
						limit = {
							higher_tier_than = COUNT
							primary_title = { check_variable = { which = "lord_paramount_status" value = 0.9 } } #1 = lord paramount, 2 = interregnum
						}
						set_government_type = feudal_government_LP
					}
				}
				e_ghiscar = { destroy_landed_title = THIS }
				k_new_ghis = { destroy_landed_title = THIS }
				d_old_ghis = { destroy_landed_title = THIS }
				capital_scope = {
					set_province_flag = ca_colony_6
				}
				create_character = {
					name = ""
					religion = "ruins"
					culture = "ruin"
					dynasty = none
					attributes = {
						martial = 0
						diplomacy = 0
						intrigue = 0
						stewardship = 0
						learning = 0
					}
					trait = ruin
				}
				new_character = {
					event_target:capital_county = {
						gain_title = PREV
					}
					set_character_flag = new_ruin
					character_event = { id = unoccupied.101 }
				}
				any_demesne_title = {
					usurp_title = FROM
					if = {
						limit = {
							higher_tier_than = COUNT
							is_titular = no
							controls_religion = no
						}
						add_law = valyria_colony
						set_title_flag = valyria_colony
						hidden_tooltip = {
							set_variable = { which = "lord_paramount_status" value = 1 } #1 = lord paramount, 2 = interregnum
						}
					}
				}
			}
		}
		imprison = FROM
	}
	option = {
		name = "EVTOPTBvalyria.102"
		trigger = { NOT = { character = FROMFROM } }
	}
}

###The Rhoynish Wars##
narrative_event = { #Volantis attacks rhoynar city
	id = valyria.150
	title = "EVTTITLEvalyria.150"
	desc = "EVTDESCvalyria.150"

	has_global_flag = freehold_submod_initialised
	only_independent = yes
	culture_group = valyrian
	prisoner = no
	war = no
	only_capable = yes

	trigger = {
		has_landed_title = k_volantis
		any_neighbor_independent_ruler = {
			higher_tier_than = COUNT
			culture = rhoynar
			NOT = { reverse_has_truce = ROOT }
			NOT = { has_non_aggression_pact_with = ROOT }
			NOT = { is_allied_with = ROOT }
			NOT = { reverse_opinion = { who = ROOT value = -25 } }
		}
		OR = {
			trait = cynical
			NOT = { trait = elephant }
		}
		NOT = { trait = content }
		NOT = { has_global_flag = volantis_rhoynar_invasion }
	}

	mean_time_to_happen = {
		years = 200

		modifier = {
			factor = 0.2
			year = 7250
		}
		modifier = {
			factor = 0.33
			trait = ambitious
		}
		modifier = {
			factor = 0.66
			trait = ruthless
		}
		modifier = {
			factor = 0.66
			trait = envious
		}
		modifier = {
			factor = 0.66
			trait = wroth
		}
		modifier = {
			factor = 0.66
			trait = diligent
		}
		modifier = {
			factor = 1.5
			trait = honorable
		}
		modifier = {
			factor = 1.5
			trait = kind
		}
		modifier = {
			factor = 1.5
			trait = patient
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
	}

	immediate = {
		d_orange_shore = { #Try sarhoy first
			holder_scope = {
				if = {
					limit = {
						culture = rhoynar
						NOT = { reverse_has_truce = ROOT }
						NOT = { has_non_aggression_pact_with = ROOT }
						NOT = { is_allied_with = ROOT }
						NOT = { reverse_opinion = { who = ROOT value = -20 } }
					}
					save_event_target_as = rhoynar_target
					break = yes
				}
			}
		}
		random_neighbor_independent_ruler = {
			limit = {
				higher_tier_than = COUNT
				culture = rhoynar
				NOT = { reverse_has_truce = ROOT }
				NOT = { has_non_aggression_pact_with = ROOT }
				NOT = { is_allied_with = ROOT }
				NOT = { reverse_opinion = { who = ROOT value = -20 } }
			}
			save_event_target_as = rhoynar_target
		}
	}

	option = {
		name = "EVTOPTAvalyria.150" #Attack!
		set_global_flag = volantis_rhoynar_invasion
		event_target:rhoynar_target = {
			primary_title = {
				reverse_war = {
					target = ROOT
					casus_belli = invasion
				}
			}
		}
	}
	option = {
		name = "EVTOPTBvalyria.150" #No
		trigger = { ai = no }
	}
}
#Rhoynar counter invasion
character_event = { #Volantis attacks rhoynar city
	id = valyria.151

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		#Find leader
		c_chroyane = { #chroyane has priority
			holder_scope = {
				if = {
					limit = {
						independent = yes
						higher_tier_than = COUNT
						culture = rhoynar
						NOT = { has_non_aggression_pact_with = ROOT }
						NOT = { is_allied_with = ROOT }
						NOT = { war_with = ROOT }
						NOT = { trait = content }

						is_incapable = no
						is_adult = yes
						prisoner = no
						OR = {
							martial = 12
							diplomacy = 12
							prestige = 1000
						}
					}
					narrative_event = { id = valyria.152 days = 3 }
					break = yes
				}
			}
		}
		random_independent_ruler = {
			limit = {
				higher_tier_than = BARON
				culture = rhoynar
				NOT = { has_non_aggression_pact_with = ROOT }
				NOT = { is_allied_with = ROOT }
				NOT = { war_with = ROOT }
				NOT = { trait = content }

				is_incapable = no
				is_adult = yes
				prisoner = no
				OR = {
					martial = 12
					diplomacy = 12
					prestige = 1000
				}

				NOT = {
					any_independent_ruler = {
						higher_tier_than = BARON
						culture = rhoynar
						NOT = { has_non_aggression_pact_with = ROOT }
						NOT = { is_allied_with = ROOT }
						NOT = { war_with = ROOT }
						NOT = { trait = content }

						is_incapable = no
						is_adult = yes
						prisoner = no
						OR = {
							martial = 12
							diplomacy = 12
							prestige = 1000
						}

						relative_power = { who = PREV power = 1.01 }
					}
				}
			}
			narrative_event = { id = valyria.152 days = 3 }
		}
	}

	option = {
		name = OK
	}
}
narrative_event = { #Rhoynar unite against volantis
	id = valyria.152
	title = "EVTTITLEvalyria.152"
	desc = "EVTDESCvalyria.152"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAvalyria.152" #Attack!
		set_global_flag = volantis_rhoynar_counter_invasion
		if = {
			limit = { NOT = { war_with = FROM } }
			FROM = {
				primary_title = {
					reverse_war = {
						target = ROOT
						casus_belli = invasion
					}
				}
			}
		}
		any_independent_ruler = {
			limit = {
				culture = rhoynar
				NOT = { has_non_aggression_pact_with = FROM }
				NOT = { is_allied_with = FROM }
				NOT = { war_with = FROM }
				NOT = { war_with = ROOT }
				NOT = { character = ROOT }
			}
			hidden_tooltip = {
				opinion = { modifier = in_non_aggression_pact years = 5 who = ROOT }
				reverse_opinion = { modifier = in_non_aggression_pact years = 5 who = ROOT }
			}
			add_alliance = { who = ROOT years = 10 }
			tooltip = { join_attacker_wars = ROOT }
			narrative_event = { id = valyria.153 }
		}
		capital_scope = {
			ROOT = {
				tooltip = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 10000 10000 }
							heavy_infantry = { 5000 5000 }
							light_cavalry = { 2500 2500 }
							pikemen = { 15000 15000 }
							horse_archers = { 2500 2500 }
							archers = { 5000 5000 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
				}
				hidden_tooltip = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
				}
			}
		}
	}
	option = {
		name = "EVTOPTBvalyria.152" #No
		trigger = {
			ai = no
			NOT = { war_with = FROM }
		}
	}
}
narrative_event = {
	id = valyria.153
	title = "EVTTITLEvalyria.153"
	desc = "EVTDESCvalyria.153"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAvalyria.153"
		add_alliance = { who = FROM years = 10 }
		join_attacker_wars = FROM
	}
}
#Ten Thousand Ships
narrative_event = {
	id = valyria.155
	desc = "EVTDESCvalyria.155"
	title = "EVTTITLEvalyria.155"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAvalyria.155"
		narrative_event = { id = valyria.156 days = 30 }
		hidden_tooltip = {
			#Move free rhoynar into court
			any_character = {
				limit = {
					culture = rhoynar
					is_ruler = no
					is_councillor = no
					is_voter = no
					liege = {
						NOT = { culture = rhoynar }
						NOT = { is_close_relative = PREV }
						NOT = { is_married = PREV }
						NOT = { any_consort = { character = PREVPREV } }
						NOT = { is_friend = PREV }
					}
					prisoner = no
					can_press_claims_trigger = yes
					opinion = { who = ROOT value = -39 }
				}
				move_character = ROOT
			}
			# Create some decent commander characters
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = no
				historical = yes
			}
			new_character = {
				random_list = {
					15 = { add_trait = master_warrior }
					60 = { add_trait = skilled_warrior }
					25 = { add_trait = trained_warrior }
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = yes
				age = 25
				historical = yes
			}
			new_character = {
				random_list = {
					15 = { add_trait = master_warrior }
					60 = { add_trait = skilled_warrior }
					25 = { add_trait = trained_warrior }
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = no
				historical = yes
			}
			new_character = {
				random_list = {
					15 = { add_trait = master_warrior }
					60 = { add_trait = skilled_warrior }
					25 = { add_trait = trained_warrior }
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = yes
				age = 21
				historical = yes
			}
			new_character = {
				random_list = {
					15 = { add_trait = master_warrior }
					60 = { add_trait = skilled_warrior }
					25 = { add_trait = trained_warrior }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = no
				historical = yes
			}
			new_character = {
				random_list = {
					3 = { add_trait = master_warrior }
					30 = { add_trait = skilled_warrior }
					52 = { add_trait = trained_warrior }
					15 = { add_trait = poor_warrior }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = no
				historical = yes
			}
			new_character = {
				random_list = {
					3 = { add_trait = master_warrior }
					30 = { add_trait = skilled_warrior }
					52 = { add_trait = trained_warrior }
					15 = { add_trait = poor_warrior }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = yes
				age = 25
				historical = yes
			}
			new_character = {
				random_list = {
					3 = { add_trait = master_warrior }
					30 = { add_trait = skilled_warrior }
					52 = { add_trait = trained_warrior }
					15 = { add_trait = poor_warrior }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = yes
				age = 26
				historical = yes
			}
			new_character = {
				random_list = {
					3 = { add_trait = master_warrior }
					30 = { add_trait = skilled_warrior }
					52 = { add_trait = trained_warrior }
					15 = { add_trait = poor_warrior }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = yes
				age = 23
				historical = yes
			}
			new_character = {
				random_list = {
					3 = { add_trait = master_warrior }
					30 = { add_trait = skilled_warrior }
					52 = { add_trait = trained_warrior }
					15 = { add_trait = poor_warrior }
				}
			}
			create_character = {
				random_traits = yes
				dynasty = none
				religion = rhoynar_pagan
				culture = rhoynar
				female = yes
				age = 32
				historical = yes
			}
			new_character = {
				random_list = {
					3 = { add_trait = master_warrior }
					30 = { add_trait = skilled_warrior }
					52 = { add_trait = trained_warrior }
					15 = { add_trait = poor_warrior }
				}
			}
		}
	}
}
narrative_event = {
	id = valyria.156
	desc = "EVTDESCvalyria.156"
	title = "EVTTITLEvalyria.156"

	is_triggered_only = yes

	immediate = {
		#Find dorne ally
		c_sunspear = {
			holder_scope = {
				if = {
					limit = {
						capital_scope = {
							region = world_dorne
							port = yes
						}
						can_marry_trigger = yes
						NOT = { same_sex = ROOT }
						is_adult = yes
						NOT = { trait = proud }
						is_lowborn = no
						any_dynasty_member = { NOT = { character = PREV } }
						opinion = { who = ROOT value = -39 }
						OR = {
							lower_tier_than = KING
							opinion = { who = ROOT value = 10 }
						}
					}
					save_event_target_as = dornish_ally
					break = yes
				}
			}
		}
		random_independent_ruler = {
			limit = {
				capital_scope = {
					region = world_dorne
					port = yes
				}
				can_marry_trigger = yes
				demesne_size = 1
				NOT = { same_sex = ROOT }
				is_adult = yes
				NOT = { trait = proud }
				is_lowborn = no
				any_dynasty_member = { NOT = { character = PREV } }
				opinion = { who = ROOT value = -39 }
				OR = {
					lower_tier_than = KING
					opinion = { who = ROOT value = 10 }
				}
			}
			save_event_target_as = dornish_ally
			break = yes
		}
		save_event_target_as = dornish_ally
	}

	option = { #Dorne
		name = "EVTOPTAvalyria.156"
		trigger = {
			e_dorne = { has_holder = no }
			e_iron_throne = { has_holder = no }
		}
		ai_chance = {
			factor = 95
		}
		if = {
			limit = { event_target:dornish_ally = { NOT = { character = ROOT } } }
			event_target:dornish_ally = {
				tooltip = {
					add_spouse = ROOT
					e_dorne = { gain_title = PREV }
				}
				hidden_tooltip = { #Temp make ROOT's dynasty so they can succeed
					random_dynasty_member = { #Mark current dynasty
						limit = { NOT = { character = PREV } }
						save_event_target_as = current_dynasty
					}
					dynasty = ROOT
				}
				ROOT = {
					hidden_tooltip = {
						any_courtier = {
							limit = { is_ruler = no }
							move_character = PREVPREV
						}
					}
					abdicate_to = PREV
				}
				any_demesne_title = {
					limit = { is_landless_type_title = yes }
					activate_title = { status = no title = THIS }
					destroy_landed_title = THIS
				}
				character_event = { id = valyria.157 }
			}
		}
		else = {
			e_dorne = { gain_title = ROOT }
			c_plankytown = {
				gain_title = ROOT
				location = {
					culture = rhoynar
					ROOT = { religion = PREV }
				}
			}
			any_demesne_title = {
				limit = { is_landless_type_title = yes }
				activate_title = { status = no title = THIS }
				destroy_landed_title = THIS
			}
			hidden_tooltip = {
				primary_title = {
					succession = primogeniture
					gender_succ = true_cognatic
				}
				recalc_succession = yes
			}
		}
		event_target:dornish_ally = {
			capital_scope = {
				ROOT = {
					tooltip = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								light_infantry = { 1000 1000 }
								heavy_infantry = { 500 500 }
								light_cavalry = { 250 250 }
								pikemen = { 1500 1500 }
								horse_archers = { 250 250 }
								archers = { 500 500 }
							}
							attrition = 1.0
							earmark = dummy #needs or else it will CTD for some reason
						}
					}
					hidden_tooltip = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								light_infantry = { 250 250 }
								heavy_infantry = { 125 125 }
								light_cavalry = { 65 65 }
								pikemen = { 375 375 }
								horse_archers = { 65 65 }
								archers = { 125 125 }
							}
							attrition = 1.0
							earmark = dummy #needs or else it will CTD for some reason
						}
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								light_infantry = { 250 250 }
								heavy_infantry = { 125 125 }
								light_cavalry = { 65 65 }
								pikemen = { 375 375 }
								horse_archers = { 65 65 }
								archers = { 125 125 }
							}
							attrition = 1.0
							earmark = dummy #needs or else it will CTD for some reason
						}
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								light_infantry = { 250 250 }
								heavy_infantry = { 125 125 }
								light_cavalry = { 65 65 }
								pikemen = { 375 375 }
								horse_archers = { 65 65 }
								archers = { 125 125 }
							}
							attrition = 1.0
							earmark = dummy #needs or else it will CTD for some reason
						}
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								light_infantry = { 250 250 }
								heavy_infantry = { 125 125 }
								light_cavalry = { 65 65 }
								pikemen = { 375 375 }
								horse_archers = { 65 65 }
								archers = { 125 125 }
							}
							attrition = 1.0
							earmark = dummy #needs or else it will CTD for some reason
						}
					}
				}
			}
		}
	}
	option = { #Stay here
		name = "EVTOPTCvalyria.156"
		ai_chance = {
			factor = 5
		}
		c_isle_of_women = {
			gain_title = ROOT
			location = {
				culture = rhoynar
				religion = rhoynar_pagan
			}
		}
		any_demesne_title = {
			limit = { is_landless_type_title = yes }
			activate_title = { status = no title = THIS }
			destroy_landed_title = THIS
		}
		hidden_tooltip = {
			primary_title = {
				succession = primogeniture
				gender_succ = true_cognatic
			}
			recalc_succession = yes
		}
		492 = {
			ROOT = {
				tooltip = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 1000 1000 }
							heavy_infantry = { 500 500 }
							light_cavalry = { 250 250 }
							pikemen = { 1500 1500 }
							horse_archers = { 250 250 }
							archers = { 500 500 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
				}
				hidden_tooltip = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 250 250 }
							heavy_infantry = { 125 125 }
							light_cavalry = { 65 65 }
							pikemen = { 375 375 }
							horse_archers = { 65 65 }
							archers = { 125 125 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 250 250 }
							heavy_infantry = { 125 125 }
							light_cavalry = { 65 65 }
							pikemen = { 375 375 }
							horse_archers = { 65 65 }
							archers = { 125 125 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 250 250 }
							heavy_infantry = { 125 125 }
							light_cavalry = { 65 65 }
							pikemen = { 375 375 }
							horse_archers = { 65 65 }
							archers = { 125 125 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							light_infantry = { 250 250 }
							heavy_infantry = { 125 125 }
							light_cavalry = { 65 65 }
							pikemen = { 375 375 }
							horse_archers = { 65 65 }
							archers = { 125 125 }
						}
						attrition = 1.0
						earmark = dummy #needs or else it will CTD for some reason
					}
				}
			}
		}
		spawn_fleet = {
			province = closest
			owner = ROOT
			troops = {
				galleys = { 75 75 }
			}
			earmark = ten_thousand_ships
			cannot_inherit = yes
		}
	}

	after = {
		492 = {
			set_name = c_isle_of_women
			hidden_tooltip = { county = { set_name = c_isle_of_women } }
		}
	}
}
narrative_event = { #inform dornish ally
	id = valyria.157
	desc = "EVTDESCvalyria.157"
	title = "EVTTITLEvalyria.157"

	is_triggered_only = yes

	option = {
		name = "EVTOPTAvalyria.157"
		add_spouse = FROM
		FROM = { move_character = ROOT }
		e_dorne = {
			gain_title = ROOT
			gender_succ = true_cognatic
		}
		capital_scope = {
			if = {
				limit = { region = world_east_dorne }
				culture = salt_dornish
				ROOT = { culture = salt_dornish }
			}
			else_if = {
				limit = { region = world_dornish_desert }
				culture = sand_dornish
				ROOT = { culture = sand_dornish }
			}
			else_if = {
				limit = { region = world_red_mountains }
				culture = stone_dornish
				ROOT = { culture = stone_dornish }
			}
			else = {
				culture = salt_dornish
				ROOT = { culture = salt_dornish }
			}
			culture_scope = {
				if = {
					limit = { check_variable = { which = defunct value = 1 } }
					set_variable = { which = defunct value = 0 }
				}
			}
		}
		any_realm_province = {
			limit = { province_id = 350 }
			culture = rhoynar
			religion = rhoynar_pagan
		}
		hidden_tooltip = {
			primary_title = {
				succession = primogeniture
				gender_succ = true_cognatic
			}
			any_courtier = {
				limit = {
					culture = dornish_andal
					is_ruler = no
				}
				culture = ROOT
			}
			any_courtier = {
				limit = {
					culture = rhoynar
					is_ruler = no
				}
				religion = ROOT
			}
			dynasty = event_target:current_dynasty #restore dynasty
			recalc_succession = yes
			character_event = { id = dynamic_coa.1 } #check dynamic CoA
		}
	}
}
# Rhoynar-dornish melting pot
province_event = {
	id = valyria.158
	desc = "EVTDESCvalyria.158"
	picture = GFX_evt_culture_change

	trigger = {
		culture = dornish_andal
		owner = {
			OR = {
				culture_group = dornish
				any_liege = { culture_group = dornish }
			}
			NOT = { culture_group = unoccupied_group }
		}
		OR = {
			owner = { culture_group = dornish }
			any_neighbor_province = { culture_group = dornish }
		}
	}

	mean_time_to_happen = {
		months = 120

		modifier = {
			factor = 0.25
			owner = { culture_group = dornish }
		}
		modifier = {
			factor = 0.75
			has_province_flag = recent_depopulation_1
		}
		modifier = {
			factor = 0.5
			has_province_flag = recent_depopulation_2
		}
		modifier = {
			factor = 0.25
			has_province_flag = recent_depopulation_3
		}
	}

	option = {
		name = "EVTOPTAvalyria.158"
		if = {
			limit = { region = world_east_dorne }
			culture = salt_dornish
		}
		else_if = {
			limit = { region = world_dornish_desert }
			culture = sand_dornish
		}
		else_if = {
			limit = { region = world_red_mountains }
			culture = stone_dornish
		}
		else = {
			culture = salt_dornish
		}
		culture_scope = {
			if = {
				limit = { check_variable = { which = defunct value = 1 } }
				set_variable = { which = defunct value = 0 }
			}
		}
		hidden_tooltip = { #check for dornish andal extinction
			if = {
				limit = {
					NOT = { any_province = { culture = dornish_andal } }
					dornish_andal = { NOT = { check_variable = { which = defunct value = 1 } } }
				}
				dornish_andal = {
					set_variable = { which = defunct value = 1 }
				}
			}
		}
	}
}

#Norvos Established
narrative_event = {
	id = valyria.200
	title = "EVTTITLEvalyria.200"
	desc = "EVTDESCvalyria.200"
	picture = "GFX_evt_norvos"

	only_independent = yes
	major = yes

	trigger = {
		has_landed_title = e_new_valyria

		NOT = { start_date = 4000.1.1 }
		culture = high_valyrian

		NOT = { has_global_flag = norvos_founded }
		433 = {
			OR = {
				owner = { culture_group = unoccupied_group }
				AND = {
					NOT = { empire = { title = e_new_valyria } }
					e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
					owner = {
						top_liege = {
							NOT = { same_realm = ROOT }
							NOT_mythical_creature_trigger = yes
							NOT = { culture_group = unoccupied_group }
							NOT = { trait = nightswatch }
							demesne_size = 1
							higher_tier_than = BARON
							NOT = { suzerain = { character = ROOT } }
							OR = { #Cannot attack vassals split by mega war
								NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
								NOT = { ROOT = { higher_tier_than = PREV } }
							}
							NOT = { has_non_aggression_pact_with = ROOT }
						}
					}
				}
			}

		}
		419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
		NOT = { e_ghiscar = { holder_scope = { culture_group = ghiscari } } } #post ghiscari wars only
	}

	mean_time_to_happen = {
		years = 200

		modifier = {
			factor = 0.2
			OR = {
				has_global_flag = qohor_founded
				has_global_flag = lorath_founded
			}
		}
	}

	immediate = {
		if = {
			limit = { character = ROOT }
			set_global_flag = norvos_founded
			create_random_soldier = {
				female = no
				culture = norvosi
				dynasty = actually_culture
				religion = bearded_priests
				random_traits = yes
			}
			new_character = {
				prestige = 100
				remove_trait = cynical
				add_trait = zealous
				random_list = {
					15 = { add_trait = skilled_warrior }
					5 = { add_trait = master_warrior }
				}
				add_priest_trait_effect = yes
				remove_trait = slow
				remove_trait = slow_1
				remove_trait = imbecile
				remove_trait = imbecile_1
				remove_trait = dull

				remove_lifestyle_trait_effect = yes

				random_list = { # Flavor Randomization
					35 = {
						# Nothing
					}
					15 = {
						change_learning = 2
					}
					20 = {
						add_trait = theologian
					}
					5 = {
						add_trait = scholar
					}
					5 = {
						add_trait = mystic
					}
					10 = {
						change_learning = 4
					}
					5 = {
						change_learning = 6
					}
					5 = {
						trigger = {
							is_smart_incl_genius_trigger = no
						}
						add_trait = shrewd
					}
				}
				while = {
					limit = { learning < 12 }
					change_learning = 1
				}
				activate_title = { status = yes title = d_bearded_priests }
				d_bearded_priests = { gain_title = PREV }
				save_event_target_as = norvos_holder
			}
		}
	}

	option = {
		name = EVTOPTAvalyria.200
		trigger = { character = ROOT }
		433 = {
			set_province_flag = valyria_primary_colony
			county = {
				gain_title = event_target:norvos_holder
				hidden_tooltip = {
					any_de_jure_vassal_title = {
						limit = { has_holder = yes }
						remove_building = ca_sub_barony_ruin
						remove_building = ct_sub_barony_ruin
					}
				}
			}
			hidden_tooltip = {
				remove_province_modifier = ruined_province
				clr_province_flag = ruined_province
				clr_province_flag = ca_colony_1
				clr_province_flag = ca_colony_2
				clr_province_flag = ca_colony_3
				clr_province_flag = ca_colony_4
				clr_province_flag = ca_colony_5
				clr_province_flag = ca_colony_6
				culture = norvosi
				religion = bearded_priests
			}
		}
		event_target:norvos_holder = {
			hidden_tooltip = {
				norvosi = {
					if = {
						limit = { check_variable = { which = defunct value = 1 } }
						set_variable = { which = defunct value = 0 }
					}
				}
				set_government_type = theocratic_feudal_government
				character_event = { id = free_cities.223 } #setup
				set_defacto_liege = ROOT
				any_realm_character = {
					limit = { culture_group = unoccupied_group }
					any_demesne_title = { gain_title = event_target:norvos_holder }
					clear_wealth = yes
					wealth = -500
					death = yes
				}
				spawn_unit = {
					province = 433
					home = 433
					troops = {
						light_infantry = { 1800 1800 }
						heavy_infantry = { 2500 2500 }
						light_cavalry = { 300 300 }
						archers = { 400 400 }
					}
					attrition = 1.0
				}
				create_random_soldier = {
					female = no
					culture = norvosi
					dynasty = actually_culture
					religion = bearded_priests
					random_traits = yes
				}
				new_character = {
					remove_trait = cynical
					add_trait = zealous
					random_list = {
						20 = { add_trait = trained_warrior }
						10 = { add_trait = skilled_warrior }
						5 = { add_trait = master_warrior }
					}
					add_priest_trait_effect = yes
					remove_trait = slow
					remove_trait = slow_1
					remove_trait = imbecile
					remove_trait = imbecile_1
					remove_trait = dull

					remove_lifestyle_trait_effect = yes

					random_list = { # Flavor Randomization
						35 = {
							# Nothing
						}
						15 = {
							change_learning = 2
						}
						20 = {
							add_trait = theologian
						}
						5 = {
							add_trait = scholar
						}
						5 = {
							add_trait = mystic
						}
						10 = {
							change_learning = 4
						}
						5 = {
							change_learning = 6
						}
						5 = {
							trigger = {
								is_smart_incl_genius_trigger = no
							}
							add_trait = shrewd
						}
					}
				}
				create_random_soldier = {
					female = no
					culture = norvosi
					dynasty = actually_culture
					religion = bearded_priests
					random_traits = yes
				}
				new_character = {
					remove_trait = cynical
					add_trait = zealous
					random_list = {
						20 = { add_trait = trained_warrior }
						10 = { add_trait = skilled_warrior }
						5 = { add_trait = master_warrior }
					}
					add_priest_trait_effect = yes
					remove_trait = slow
					remove_trait = slow_1
					remove_trait = imbecile
					remove_trait = imbecile_1
					remove_trait = dull

					remove_lifestyle_trait_effect = yes

					random_list = { # Flavor Randomization
						35 = {
							# Nothing
						}
						15 = {
							change_learning = 2
						}
						20 = {
							add_trait = theologian
						}
						5 = {
							add_trait = scholar
						}
						5 = {
							add_trait = mystic
						}
						10 = {
							change_learning = 4
						}
						5 = {
							change_learning = 6
						}
						5 = {
							trigger = {
								is_smart_incl_genius_trigger = no
							}
							add_trait = shrewd
						}
					}
				}
				create_random_soldier = {
					female = no
					culture = norvosi
					dynasty = actually_culture
					religion = bearded_priests
					random_traits = yes
				}
				new_character = {
					remove_trait = cynical
					add_trait = zealous
					random_list = {
						20 = { add_trait = trained_warrior }
						10 = { add_trait = skilled_warrior }
						5 = { add_trait = master_warrior }
					}
					add_priest_trait_effect = yes
					remove_trait = slow
					remove_trait = slow_1
					remove_trait = imbecile
					remove_trait = imbecile_1
					remove_trait = dull

					remove_lifestyle_trait_effect = yes

					random_list = { # Flavor Randomization
						35 = {
							# Nothing
						}
						15 = {
							change_learning = 2
						}
						20 = {
							add_trait = theologian
						}
						5 = {
							add_trait = scholar
						}
						5 = {
							add_trait = mystic
						}
						10 = {
							change_learning = 4
						}
						5 = {
							change_learning = 6
						}
						5 = {
							trigger = {
								is_smart_incl_genius_trigger = no
							}
							add_trait = shrewd
						}
					}
				}
			}
		}
	}
	option = {
		name = OK
		trigger = { NOT = { character = ROOT } }
	}
}
#Qohor Established
narrative_event = {
	id = valyria.205
	title = "EVTTITLEvalyria.205"
	desc = "EVTDESCvalyria.205"
	picture = GFX_evt_bishop_aztec

	only_independent = yes
	major = yes

	trigger = {
		has_landed_title = e_new_valyria

		NOT = { start_date = 4000.1.1 }
		culture = high_valyrian

		NOT = { has_global_flag = qohor_founded }
		476 = {
			OR = {
				owner = { culture_group = unoccupied_group }
				AND = {
					NOT = { empire = { title = e_new_valyria } }
					e_new_valyria = { holder_scope = { NOT = { trait = civil_war } } }
					owner = {
						top_liege = {
							NOT = { same_realm = ROOT }
							NOT_mythical_creature_trigger = yes
							NOT = { culture_group = unoccupied_group }
							NOT = { trait = nightswatch }
							demesne_size = 1
							higher_tier_than = BARON
							NOT = { suzerain = { character = ROOT } }
							OR = { #Cannot attack vassals split by mega war
								NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_de_facto_liege } }
								NOT = { ROOT = { higher_tier_than = PREV } }
							}
							NOT = { has_non_aggression_pact_with = ROOT }
						}
					}
				}
			}

		}
		419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
		NOT = { e_ghiscar = { holder_scope = { culture_group = ghiscari } } } #post ghiscari wars only
	}

	mean_time_to_happen = {
		years = 200
		modifier = {
			factor = 0.2
			OR = {
				has_global_flag = norvos_founded
				has_global_flag = lorath_founded
			}
		}
	}

	immediate = {
		if = {
			limit = { character = ROOT }
			set_global_flag = qohor_founded
			create_random_steward = {
				female = no
				culture = qohorik
				dynasty = actually_culture
				religion = black_goat
				random_traits = yes
			}
			new_character = {
				prestige = 100
				remove_trait = cynical
				add_trait = zealous
				random_list = {
					25 = { }
					35 = { add_trait = poor_warrior }
					30 = { add_trait = trained_warrior }
					10 = { add_trait = skilled_warrior }
				}
				remove_trait = slow
				remove_trait = slow_1
				remove_trait = imbecile
				remove_trait = imbecile_1
				remove_trait = dull

				remove_lifestyle_trait_effect = yes

				random_list = { # Flavor Randomization
					35 = {
						# Nothing
					}
					15 = {
						change_stewardship = 2
					}
					10 = {
						add_trait = gardener
					}
					10 = {
						add_trait = architect
					}
					10 = {
						add_trait = administrator
					}
					10 = {
						change_stewardship = 4
					}
					5 = {
						change_stewardship = 6
					}
					5 = {
						trigger = {
							is_smart_incl_genius_trigger = no
						}
						add_trait = shrewd
					}
				}
				while = {
					limit = { stewardship < 12 }
					change_stewardship = 1
				}
				save_event_target_as = qohor_holder
			}
		}
	}

	option = {
		name = EVTOPTAvalyria.205
		trigger = { character = ROOT }
		476 = {
			set_province_flag = valyria_primary_colony
			county = {
				gain_title = event_target:qohor_holder
				hidden_tooltip = {
					any_de_jure_vassal_title = {
						limit = { has_holder = yes }
						remove_building = ca_sub_barony_ruin
						remove_building = ct_sub_barony_ruin
					}
				}
			}
			duchy = {
				if = {
					limit = { has_holder = no }
					gain_title = event_target:qohor_holder
				}
			}
			hidden_tooltip = {
				remove_province_modifier = ruined_province
				clr_province_flag = ruined_province
				clr_province_flag = ca_colony_1
				clr_province_flag = ca_colony_2
				clr_province_flag = ca_colony_3
				clr_province_flag = ca_colony_4
				clr_province_flag = ca_colony_5
				clr_province_flag = ca_colony_6
				culture = qohorik
				religion = black_goat
			}
		}
		event_target:qohor_holder = {
			hidden_tooltip = {
				qohorik = {
					if = {
						limit = { check_variable = { which = defunct value = 1 } }
						set_variable = { which = defunct value = 0 }
					}
				}
				set_government_type = feudal_government
				set_defacto_liege = ROOT
				wealth = 250
				if = {
					limit = {
						tier = DUKE
						ROOT = { is_merchant_republic = no }
					}
					create_family_palace = yes
					set_government_type = merchant_republic_government
					recalc_succession = yes
				}
				any_realm_character = {
					limit = { culture_group = unoccupied_group }
					any_demesne_title = { gain_title = event_target:qohor_holder }
					clear_wealth = yes
					wealth = -500
					death = yes
				}
				spawn_unit = {
					province = 476
					home = 476
					troops = {
						light_infantry = { 1800 1800 }
						heavy_infantry = { 2500 2500 }
						light_cavalry = { 300 300 }
						archers = { 400 400 }
					}
					attrition = 1.0
				}

				#create family
				character_event = { id = roberts_rebellion.150 }
				if = {
					limit = {
						is_married = yes
						spouse = { is_alive = yes }
						NOR = {
							num_of_children = 3
							any_sibling_even_if_dead = { count = 2 }
						}
					}
					character_event = { id = roberts_rebellion.151 }
				}
			}
		}
	}
	option = {
		name = OK
		trigger = { NOT = { character = ROOT } }
	}
}

#Braavos- slaves go missing on the way to sothoryos
character_event = {
	id = valyria.210
	desc = "EVTDESCvalyria.210"
	picture = GFX_evt_slavery

	only_independent = yes
	major = yes

	trigger = {
		has_landed_title = e_new_valyria

		NOT = { start_date = 7589.1.1 }
		culture = high_valyrian

		NOT = { has_global_flag = braavos_founded }
		419 = { owner = { NOT = { culture_group = unoccupied_group } } } #Volantis
		NOT = { e_ghiscar = { holder_scope = { culture_group = ghiscari } } } #post ghiscari wars only
		primary_title = { has_law = slavery_2 }
	}

	mean_time_to_happen = {
		years = 400
	}

	immediate = {
		set_global_flag = braavos_founded
		hidden_tooltip = { #Find province
			470 = { #Braavos
				if = {
					limit = {
						has_province_flag = ruined_province
						owner = { culture_group = unoccupied_group }
					}
					random = {
						chance = 80
						add_province_modifier = { name = braavos_home duration = -1 }
						province_event = { id = valyria.211 days = 36500 random = 9125 } #uncloaking
						break = yes
					}
				}
			}
			random_province = {
				limit = {
					has_province_flag = ruined_province
					owner = { culture_group = unoccupied_group }
					port = yes
					NOT = { region = world_valyrian_peninsula }
					NOT = { region = world_north_valyria }
					NOT = { region = world_ghiscar }
				}
				preferred_limit = {
					OR = {
						region = world_free_cities
						region = world_summer_sea
					}
					num_of_max_settlements = 5
				}
				preferred_limit = {
					OR = {
						region = world_westeros
						region = world_shivering_sea
						region = world_qarth
						region = world_moraq
					}
					num_of_max_settlements = 6
				}
				preferred_limit = {
					OR = {
						region = world_free_cities
						region = world_summer_sea
					}
				}
				preferred_limit = {
					OR = {
						region = world_westeros
						region = world_shivering_sea
						region = world_qarth
						region = world_moraq
					}
				}
				preferred_limit = {
					num_of_max_settlements = 5
				}
				add_province_modifier = { name = braavos_home duration = -1 }
				province_event = { id = valyria.211 days = 36500 random = 9125 } #uncloaking
			}
		}
	}

	option = {
		name = EVTOPTAvalyria.210
	}
}
#Uncloaking
province_event = {
	id = valyria.211

	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_global_flag = braavos_uncloaked
		create_random_steward = {
			female = no
			culture = braavosi
			dynasty = actually_culture
			religion = moonsingers
			random_traits = yes
		}
		new_character = {
			prestige = 500
			remove_trait = content
			add_trait = ambitious
			random_list = {
				25 = { }
				35 = { add_trait = poor_warrior }
				30 = { add_trait = trained_warrior }
				10 = { add_trait = skilled_warrior }
			}
			remove_trait = slow
			remove_trait = slow_1
			remove_trait = imbecile
			remove_trait = imbecile_1
			remove_trait = dull

			remove_lifestyle_trait_effect = yes

			random_list = { # Flavor Randomization
				35 = {
					# Nothing
				}
				15 = {
					change_stewardship = 2
				}
				10 = {
					add_trait = gardener
				}
				10 = {
					add_trait = architect
				}
				10 = {
					add_trait = administrator
				}
				10 = {
					change_stewardship = 4
				}
				5 = {
					change_stewardship = 6
				}
				5 = {
					trigger = {
						is_smart_incl_genius_trigger = no
					}
					add_trait = shrewd
				}
			}
			while = {
				limit = { stewardship < 12 }
				change_stewardship = 1
			}
			save_event_target_as = braavos_holder
		}

		set_province_flag = valyria_primary_colony
		county = {
			gain_title = event_target:braavos_holder
			location = { set_name = "Braavos" }
			set_name = "Braavos"
			de_jure_liege = d_braavos
			hidden_tooltip = {
				any_de_jure_vassal_title = {
					limit = { has_holder = yes }
					remove_building = ca_sub_barony_ruin
					remove_building = ct_sub_barony_ruin
				}
			}
		}
		d_braavos = { gain_title = event_target:braavos_holder }
		k_braavos = { gain_title = event_target:braavos_holder }
		hidden_tooltip = {
			remove_province_modifier = ruined_province
			clr_province_flag = ruined_province
			clr_province_flag = ca_colony_1
			clr_province_flag = ca_colony_2
			clr_province_flag = ca_colony_3
			clr_province_flag = ca_colony_4
			clr_province_flag = ca_colony_5
			clr_province_flag = ca_colony_6
			culture = braavosi
			religion = moonsingers

			#Upgrade the province
			if = {
				limit = { province_id = 470 } #is in canon braavos
				b_braavos = {
					set_title_flag = titan_location
					add_building = ct_titan_castle
					add_building = ct_asoiaf_essos_basevalue_6
					add_building = ct_asoiaf_essosshipyard
					make_capital_holding = yes
				}
				b_sealordpalace = {
					add_building = ca_asoiaf_essos_basevalue_6
				}
				build_holding = {
				   title = b_titan
				   type = castle
				   holder = event_target:braavos_holder
				}
				b_titan = {
					add_building = ca_asoiaf_essos_basevalue_3
				}
				build_holding = {
				   title = b_arsenal
				   type = castle
				   holder = event_target:braavos_holder
				}
				b_arsenal = {
					add_building = ca_asoiaf_essos_basevalue_3
				}
				build_holding = {
				   title = b_purpleharbor
				   type = city
				   holder = event_target:braavos_holder
				}
				b_purpleharbor = {
					add_building = ct_asoiaf_essos_basevalue_3
					add_building = ct_asoiaf_essosshipyard
				}
				build_holding = {
				   title = b_ragmansharbor
				   type = city
				   holder = event_target:braavos_holder
				}
				b_ragmansharbor = {
					add_building = ct_asoiaf_essos_basevalue_3
					add_building = ct_asoiaf_essosshipyard
				}
				build_holding = {
				   title = b_templemoonsingers
				   type = temple
				   holder = event_target:braavos_holder
				}
			}
			else = {
				random_province_holding = {
					limit = { holding_type = city }
					preferred_limit = { is_capital = yes }
					preferred_limit = { base_value_5_trigger = yes }
					preferred_limit = { base_value_4_trigger = yes }
					preferred_limit = { base_value_3_trigger = yes }
					preferred_limit = { base_value_2_trigger = yes }
					while = {
						limit = { NOT = { base_value_6_trigger = yes } }
						count = 5
						increase_holding_base_value_effect = yes
					}
					add_building = ct_asoiaf_smallshipyard
					make_capital_holding = yes
				}
				random_province_holding = {
					limit = { holding_type = castle }
					preferred_limit = { is_capital = yes }
					preferred_limit = { base_value_5_trigger = yes }
					preferred_limit = { base_value_4_trigger = yes }
					preferred_limit = { base_value_3_trigger = yes }
					preferred_limit = { base_value_2_trigger = yes }
					while = {
						limit = { NOT = { base_value_6_trigger = yes } }
						count = 5
						increase_holding_base_value_effect = yes
					}
					add_building = ca_asoiaf_smallshipyard
				}
				random_province_holding = {
					limit = {
						holding_type = castle
						NOT = { base_value_6_trigger = yes }
					}
					while = {
						limit = { NOT = { base_value_4_trigger = yes } }
						count = 3
						increase_holding_base_value_effect = yes
					}
					add_building = ca_asoiaf_smallshipyard
				}
				random_province_holding = {
					limit = {
						holding_type = city
						NOT = { base_value_6_trigger = yes }
					}
					while = {
						limit = { NOT = { base_value_4_trigger = yes } }
						count = 3
						increase_holding_base_value_effect = yes
					}
					add_building = ct_asoiaf_smallshipyard
				}
			}
		}
		event_target:braavos_holder = {
			hidden_tooltip = {
				set_defacto_liege = THIS
				create_family_palace = yes
				set_government_type = merchant_republic_government
				recalc_succession = yes
				any_realm_character = {
					limit = { culture_group = unoccupied_group }
					any_demesne_title = { gain_title = event_target:braavos_holder }
					clear_wealth = yes
					wealth = -500
					death = yes
				}
				wealth = 350
				character_event = { id = maintenance.34 days = 1 } #refil levy

				#Create family
				character_event = { id = roberts_rebellion.150 }
				if = {
					limit = {
						is_married = yes
						spouse = { is_alive = yes }
						NOR = {
							num_of_children = 3
							any_sibling_even_if_dead = { count = 2 }
						}
					}
					character_event = { id = roberts_rebellion.151 }
				}

				##Iron Bank
				set_global_flag = iron_bank_founded
				join_society = iron_bank
				society_rank_up = 3
				set_variable = { which = shares value = 5 }
				set_society_grandmaster = yes
				character_event = { id = bankruptcy.21 days = 2 } #bookkeeping
				society = {
					set_flag = bank_society
					set_variable = { which = cash_reserve value = 1500 }
				}
				ROOT = {
					set_province_flag = location_has_bank
					iron_bank = { save_persistent_event_target = { name = location scope = PREV } }
				}

				while = {
					limit = { always = yes }
					count = 2
					create_character = {
						female = no
						culture = braavosi
						dynasty = actually_culture
						religion = moonsingers
						random_traits = yes
					}
					new_character = {
						create_family_palace = yes
						set_defacto_liege = event_target:braavos_holder
						random_list = {
							25 = { }
							35 = { add_trait = poor_warrior }
							30 = { add_trait = trained_warrior }
							10 = { add_trait = skilled_warrior }
						}
						remove_trait = slow
						remove_trait = slow_1
						remove_trait = imbecile
						remove_trait = imbecile_1
						remove_trait = dull

						join_society = iron_bank
						society_rank_up = 3
						set_variable = { which = shares value = 5 }
						wealth = 250

						#create family
						character_event = { id = roberts_rebellion.150 }
						if = {
							limit = {
								is_married = yes
								spouse = { is_alive = yes }
								NOR = {
									num_of_children = 3
									any_sibling_even_if_dead = { count = 2 }
								}
							}
							character_event = { id = roberts_rebellion.151 }
						}
					}
				}
				while = {
					limit = { always = yes }
					count = 2
					create_character = {
						female = no
						culture = braavosi
						dynasty = actually_culture
						religion = moonsingers
						random_traits = yes
					}
					new_character = {
						create_family_palace = yes
						set_defacto_liege = event_target:braavos_holder
						random_list = {
							25 = { }
							35 = { add_trait = poor_warrior }
							30 = { add_trait = trained_warrior }
							10 = { add_trait = skilled_warrior }
						}
						remove_trait = slow
						remove_trait = slow_1
						remove_trait = imbecile
						remove_trait = imbecile_1
						remove_trait = dull

						join_society = iron_bank
						society_rank_up = 2
						set_variable = { which = shares value = 5 }
						wealth = 250

						#create family
						character_event = { id = roberts_rebellion.150 }
						if = {
							limit = {
								is_married = yes
								spouse = { is_alive = yes }
								NOR = {
									num_of_children = 3
									any_sibling_even_if_dead = { count = 2 }
								}
							}
							character_event = { id = roberts_rebellion.151 }
						}
					}
				}
				while = {
					limit = { always = yes }
					count = 2
					create_character = {
						female = no
						culture = braavosi
						dynasty = actually_culture
						religion = moonsingers
						random_traits = yes
					}
					new_character = {
						move_character = event_target:braavos_holder
						random_list = {
							25 = { }
							35 = { add_trait = poor_warrior }
							30 = { add_trait = trained_warrior }
							10 = { add_trait = skilled_warrior }
						}
						remove_trait = slow
						remove_trait = slow_1
						remove_trait = imbecile
						remove_trait = imbecile_1
						remove_trait = dull

						join_society = iron_bank
						society_rank_up = 2
						set_variable = { which = shares value = 5 }
						wealth = 150

						#create family
						character_event = { id = roberts_rebellion.150 }
						if = {
							limit = {
								is_married = yes
								spouse = { is_alive = yes }
								NOR = {
									num_of_children = 3
									any_sibling_even_if_dead = { count = 2 }
								}
							}
							character_event = { id = roberts_rebellion.151 }
						}
					}
				}
				while = {
					limit = { always = yes }
					count = 10
					create_character = {
						female = no
						culture = braavosi
						dynasty = actually_culture
						religion = moonsingers
						random_traits = yes
					}
					new_character = {
						move_character = event_target:braavos_holder
						random_list = {
							25 = { }
							35 = { add_trait = poor_warrior }
							30 = { add_trait = trained_warrior }
							10 = { add_trait = skilled_warrior }
						}
						remove_trait = slow
						remove_trait = slow_1
						remove_trait = imbecile
						remove_trait = imbecile_1
						remove_trait = dull

						join_society = iron_bank
						society_rank_up = 1
						set_variable = { which = shares value = 1 }
						wealth = 50

						#create family
						character_event = { id = roberts_rebellion.150 }
						if = {
							limit = {
								is_married = yes
								spouse = { is_alive = yes }
								NOR = {
									num_of_children = 3
									any_sibling_even_if_dead = { count = 2 }
								}
							}
							character_event = { id = roberts_rebellion.151 }
						}
					}
				}

				#Faceless men
				create_random_intriguer = {
					female = no
					culture = braavosi
					dynasty = actually_culture
					religion = many_faced_god
					random_traits = yes
				}
				new_character = {
					change_intrigue = 8
					set_character_flag = faceless_man
					set_immune_to_pruning = yes
					remove_trait = honorable
					remove_trait = honest
					remove_trait = craven
					remove_trait = content
					random_list =	{
						30 = { add_trait = poor_warrior }
						30 = { add_trait = trained_warrior }
						20 = { add_trait = skilled_warrior }
						5 = { add_trait = master_warrior }
					}
					random = {
						chance = 10
						add_trait = mystic
					}

					activate_title = { status = yes title = d_faceless_men  }
					d_faceless_men  = { gain_title = PREV }
					set_defacto_liege = event_target:braavos_holder
				}
			}
		}
		braavosi = {
			if = {
				limit = { check_variable = { which = defunct value = 1 } }
				set_variable = { which = defunct value = 0 }
			}
		}
		any_playable_ruler = {
			limit = {
				OR = {
					ai = no
					has_landed_title = e_new_valyria
				}
			}
			character_event = { id = valyria.212 }
		}
	}

	option = {
		name = OK
	}
}
narrative_event = {
	id = valyria.212
	title = "EVTTITLEvalyria.212"
	desc = "EVTDESCvalyria.212"
	picture = GFX_braavos

	is_triggered_only = yes
	portrait = event_target:braavos_holder

	option = {
		name = EVTOPTAvalyria.212
		trigger = { NOT = { has_landed_title = e_new_valyria } }
	}
	option = {
		name = EVTOPTBvalyria.212
		trigger = { has_landed_title = e_new_valyria }
		wealth = 300
	}
}

#Rhllor Established
narrative_event = {
	id = valyria.220
	title = "EVTTITLEvalyria.220"
	desc = "EVTDESCvalyria.220"
	picture = "GFX_evt_red_priest_approaches"

	only_independent = yes
	major = yes

	trigger = {
		has_landed_title = e_new_valyria
		NOT = { start_date = 4000.1.1 }

		d_rhllor = { has_holder = no }
		419 = { owner = { is_liege_or_above = ROOT } } #Volantis
		417 = { #New Volantis
			owner = { is_liege_or_above = ROOT }
			culture = volantene
		}
	}

	mean_time_to_happen = {
		years = 200
	}

	immediate = {
		if = {
			limit = { character = ROOT }
			create_random_priest = {
				female = no
				culture = volantene
				dynasty = actually_culture
				religion = rhllor
				random_traits = yes
			}
			new_character = {
				prestige = 100
				remove_trait = cynical
				add_trait = zealous
				remove_trait = content
				random_list = {
					25 = { }
					35 = { add_trait = poor_warrior }
					30 = { add_trait = trained_warrior }
					10 = { add_trait = skilled_warrior }
				}
				add_priest_trait_effect = yes
				remove_trait = slow
				remove_trait = slow_1
				remove_trait = imbecile
				remove_trait = imbecile_1
				remove_trait = dull

				remove_lifestyle_trait_effect = yes

				random_list = { # Flavor Randomization
					35 = {
						# Nothing
					}
					15 = {
						change_learning = 2
					}
					20 = {
						add_trait = theologian
					}
					5 = {
						add_trait = scholar
					}
					5 = {
						add_trait = mystic
					}
					10 = {
						change_learning = 4
					}
					5 = {
						change_learning = 6
					}
					5 = {
						trigger = {
							is_smart_incl_genius_trigger = no
						}
						add_trait = shrewd
					}
				}
				while = {
					limit = { learning < 12 }
					change_learning = 1
				}
				activate_title = { status = yes title = d_rhllor }
				d_rhllor = { gain_title = PREV }
				save_event_target_as = rhllor_holder
				set_character_flag = first_red_priest
				set_defacto_liege = ROOT
				418 = { #the great plaza
					if = {
						limit = {
							has_province_flag = ruined_province
							owner = { culture_group = unoccupied_group }
						}
						remove_province_modifier = ruined_province
						clr_province_flag = ruined_province
						clr_province_flag = ca_colony_1
						clr_province_flag = ca_colony_2
						clr_province_flag = ca_colony_3
						clr_province_flag = ca_colony_4
						clr_province_flag = ca_colony_5
						clr_province_flag = ca_colony_6
						culture = volantene
						county = { gain_title = ROOT }
					}
				}
			}
		}
	}

	option = {
		name = EVTOPTAvalyria.220
		trigger = { character = ROOT }
		417 = {
			religion = rhllor
		}
		if = {
			limit = {
				418 = {
					owner = {
						OR = {
							character = ROOT
							is_liege_or_above = ROOT
							suzerain = { character = ROOT }
							top_liege = { suzerain = { character = ROOT } }
						}
					}
				}
			}
			418 = {
				county = {
					gain_title = event_target:rhllor_holder
				}
				hidden_tooltip = {
					religion = rhllor
					culture = volantene
					any_province_holding = {
						limit = { has_holder = yes }
						gain_title = event_target:rhllor_holder
					}
					random_province_holding = {
						limit = { holding_type = temple }
						make_capital_holding = yes
					}
				}
			}
		}
	}
	option = {
		name = EVTOPTAvalyria.220
		trigger = { NOT = { character = ROOT } }
	}
}

#Valyrian road complete
province_event = {
	id = valyria.230
	desc = EVTDESCvalyria.230
	picture = GFX_evt_valyria_2

	is_triggered_only = yes

	option = {
		name = OK
		clr_province_flag = building_valyrian_road
		add_province_modifier = { name = valyrianroad duration = -1 }
	}
}
#######   Valyrian wild dragons.  Put in this file to avoid editing the main dragon file.

#Random dragon appears on Valyrian peninsula
province_event = {
	id = valyria.1000

	hide_window = yes
	has_global_flag = freehold_submod_initialised

	trigger = {
		region = world_valyria
		has_global_flag = age_of_dragons
	}

	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 3
			dragon = {
				location = { province_id = ROOT }
				is_alive = yes
				NOT = { any_friend = { always = yes } }
			}
		}
	}

	option = {
		name = "Ok"
		random_list = {
			50 = {
				create_character = {
					dynasty = actually_culture
					age = 5
					culture = dragon_culture
					religion = dragon_rel
					historical = yes
				}
			}
			50 = {
				create_character = {
					female = yes
					dynasty = actually_culture
					age = 5
					culture = dragon_culture
					religion = dragon_rel
					historical = yes
				}
			}
		}
		new_character = {
			#dynasty = mother_bastard
			add_trait = dragon
			add_trait = incapable_dragon
			change_martial = 5
			random = {
				chance = 5
				add_trait = fair_dragon
			}
			random = {
				chance = 5
				if = {
					limit = { NOT = { trait = fair_dragon } }
					add_trait = ugly_dragon
				}
			}
			random = {
				chance = 5
				add_trait = strong_dragon
			}
			random = {
				chance = 33
				add_trait = nimble_dragon
			}
			random = {
				chance = 15
				add_trait = fertile_dragon
			}
			random_list = {
				1 = { add_trait = dragon_1 }
				1 = { add_trait = dragon_2 }
				1 = { add_trait = dragon_3 }
				1 = { add_trait = dragon_4 }
				1 = { add_trait = dragon_5 }
				1 = { add_trait = dragon_6 }
				1 = { add_trait = dragon_7 }
				1 = { add_trait = dragon_8 }
				1 = { add_trait = dragon_9 }
				1 = { add_trait = dragon_10 }
				1 = { add_trait = dragon_11 }
				1 = { add_trait = dragon_12 }
				1 = { add_trait = dragon_13 }
				1 = { add_trait = dragon_14 }
				1 = { add_trait = dragon_15 }
				1 = { add_trait = dragon_16 }
				1 = { add_trait = dragon_17 }
				1 = { add_trait = dragon_18 }
				1 = { add_trait = dragon_19 }
				1 = { add_trait = dragon_20 }
				1 = { add_trait = dragon_21 }
				1 = { add_trait = dragon_22 }
				1 = { add_trait = dragon_23 }
				1 = { add_trait = dragon_24 }
				1 = { add_trait = dragon_25 }
				1 = { add_trait = dragon_26 }
			}
			character_event = { id = dragon.1599 }
		}
		# add_province_modifier = {
			# name = dragon_lair
			# duration = 75000
		# }
	}
}

