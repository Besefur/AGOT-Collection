# Faction tags need to start with 'faction_'

# Supported types:
# liege_titles, liege_titles_w_claimant, character

# The succession law factions have hard coded elements to ensure that the correct heir is shown in Plot and
# Faction interfaces and that AI faction members vote for laws in accordance with the faction goal.
# The valid tags correspond to the law name: faction_succ_seniority, faction_succ_primogeniture, etc.
# (faction_succ_ultimogeniture is fully supported by the code, but not currently implemented)

###############
# FACTIONS
###############


# Institute Succession by Seniority in Liege Title
faction_succ_seniority = {
	type = liege_titles

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		NOT = { culture = volantene }
		liege = {
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
			is_feudal = yes
			NOT = { trait = kingsguard }
			NOT = { trait = nightswatch }
			NOT = { government = alliance_government }
			NOT = { government = theocratic_feudal_government }
			NOT = { government = colony_government }
			NOT = { government = noble_oligarchy }
		}
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		NOT = { in_faction = faction_succ_primogeniture }
		NOT = { in_faction = faction_succ_feudal_elective }
		#NOT = { in_faction = faction_succ_gavelkind }
		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
		NOT = { has_character_modifier = faction_succ_seniority_ultimatum_timer }
	}

	# Target scope
	allow = {
		is_law_potential = succ_seniority
		is_law_allowed = succ_seniority
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		FROM = { #I must have land in the title or it is my crownlaw title
			OR = {
				ROOT = { tier = DUKE }
				crownlaw_title = { title = ROOT }
				any_demesne_title = { ROOT = { de_jure_vassal_or_below = PREV } }
			}
		}
		NOT = { has_law = succ_seniority }
		NOT = { is_variable_equal = { which = "lord_paramount_status" value = 2 } } #interregnum
		holder_scope = {
			is_merchant_republic = no
			NOT = { government = pirate_government }
			NOT = { wildling_culture_trigger = yes }
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_seniority_succession_law
				}
			}
			NOT = { #Does not apply to kingdoms in an independence war
				any_war = {
					attacker = { character = PREVPREV }
					OR = {
						using_cb = bid_for_independence
						using_cb = cb_faction_independence
						using_cb = bid_for_independence_CW
						using_cb = bid_for_independence_ACOK
					}
				}
			}
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no
			NOT = { culture = volantene }
			# NOT = { in_faction = faction_succ_primogeniture }
			# NOT = { in_faction = faction_succ_feudal_elective }
			# NOT = { in_faction = faction_succ_gavelkind }
			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { liege = { trait = nightswatch } }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }
		}
	}

	# AI creation weight
	chance = {
		factor = 2

		# Faction Motives
		# - I would be the heir under this succession law
		# - I am Just and this succession law is customary for my culture
		modifier = {
			factor = 0
			NOT = { would_be_heir_under_law = { who = FROM law = seniority } }
			NOT = {
				FROM = {
					trait = just
					culture = summer_islander
					NOT = { has_religion_feature = religion_feature_elective }
				}
			}
		}

		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}

		#High Septon needs power
		modifier = {
			factor = 0
			FROM = {
				has_landed_title = k_the_most_devout
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}
		modifier = {
			factor = 2
			FROM = {
				has_cutthroat_religion_trigger = yes
			}
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# The faction leader would always be the heir, so content characters
		# will never attempt this.
		modifier = {
			factor = 0
			FROM = { trait = content }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		#This is redundant if they are the current heir
		modifier = {
			factor = 0
			current_heir = { character = FROM }
		}

		modifier = {
			factor = 0
			FROM = { prisoner = yes }
		}

		# Just characters will never form this faction unless it is customary
		# for their culture
		modifier = {
			factor = 0
			FROM = {
				trait = just
				NAND = {
					culture = summer_islander
					NOT = { has_religion_feature = religion_feature_elective }
				}
			}
		}

		# This succession law is customary for this culture and they greatly prefer it
		modifier = {
			factor = 5
			FROM = {
				culture = summer_islander
				NOT = { has_religion_feature = religion_feature_elective }
			}
		}

		# These cultures have their own customary succession laws, and
		# will be reluctant to support a "foreign" one
		modifier = {
			factor = 0.01
			FROM = {
				OR = {
					culture_group = andal
					culture_group = first_men
					culture_group = dornish
					culture_group = iron_isles_culture
				}
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		# Characters with claims should generally prefer to pursue those instead
		modifier = {
			factor = 0.1
			claimed_by = FROM
		}

		# Opinion of the current heir is very important
		modifier = {
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
			current_heir = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Opinion of liege
		modifier = {
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Objective modifiers
		modifier = {
			factor = 10
			would_be_heir_under_law = { who = FROM law = seniority }
			FROM = { has_ambition = obj_become_heir }
		}

		modifier = {
			factor = 10
			would_be_heir_under_law = { who = FROM law = seniority }
			NOT = { claimed_by = FROM }
			OR = {
				AND = {
					tier = EMPEROR
					FROM = { has_ambition = obj_become_king }
				}
				FROM = { has_ambition = obj_become_lord_paramount }
			}
		}

		# Trait modifiers
		modifier = {
			factor = 5
			current_heir = { NOT = { religion = FROM } }
			FROM = { trait = zealous }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = COUNT
				NOT = { relative_power_to_liege = 0.2 }
			}
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = KING
				relative_power_to_liege = 0.2
			}
		}
		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
		}

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_feudal_elective
				#in_faction = faction_succ_gavelkind
				in_faction = faction_liege_loyalist

				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		modifier = {
			factor = 0
			has_character_modifier = faction_succ_seniority_ultimatum_timer
		}

		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		# Reasons to support this faction
		# - I hate the current heir
		# - I prefer the prospective heir to the current heir
		# - I am Just and this is customary for my culture
		# - I have been forced to join this faction
		modifier = {
			factor = 0
			FROMFROM = { current_heir = { reverse_opinion = { who = ROOT value = -50 } } }
			NOT = {
				FROMFROM = {
					would_be_heir_under_law = { who = ROOT_FROM law = seniority }
					current_heir = {
						NOT = { reverse_opinion = { who = ROOT value = 20 } }
						ROOT_FROM = {
							reverse_opinion = { who = ROOT value = -30 }
							opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
						}
					}
				}
			}
			NAND = {
				trait = just
				culture = summer_islander
				NOT = { has_religion_feature = religion_feature_elective }
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#If not my crown law or territory, and not just, then doesn't effect me
		modifier = {
			factor = 0
			FROMFROM = { NOT = { tier = DUKE } }
			NOT = { crownlaw_title = { title = FROMFROM } }
			NOT = { any_demesne_title = { ROOT_FROMFROM = { de_jure_vassal_or_below = PREV } } }
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			FROMFROM = { holder_scope = { war = yes } }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Zealous characters will never support a heretic unless forced
		modifier = {
			factor = 0
			trait = zealous
			NOT = { religion = FROM }
			NOT = {	has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			is_allied_with = FROM
		}
		modifier = {
			factor = 5
			is_allied_with = FROM
		}
		modifier = {
			factor = 0
			trait = honorable
			FROMFROM = { holder_scope = { is_allied_with = ROOT } }
			NOT = {	has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { is_allied_with = ROOT } }
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { same_society_as = ROOT } }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_succ_seniority
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will never join this faction unless it is customary
		# for their culture or they are forced
		modifier = {
			factor = 0
			trait = just
			NAND = {
				culture = summer_islander
				NOT = { has_religion_feature = religion_feature_elective }
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# This succession law is customary for this culture and they greatly prefer it
		modifier = {
			factor = 5
			culture = summer_islander
			NOT = { has_religion_feature = religion_feature_elective }
		}

		# These cultures have their own customary succession laws and will
		# be extremely reluctant to supportal foreign ones
		modifier = {
			factor = 0.01
			OR = {
				culture_group = andal
				culture_group = first_men
				culture_group = dornish
				culture_group = iron_isles_culture
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			FROMFROM = { holder_scope = { has_character_modifier = feared_1 } }
		}
		modifier = {
			factor = 0.5
			FROMFROM = { holder_scope = { has_character_modifier = feared_2 } }
		}
		modifier = {
			factor = 0.3
			FROMFROM = { holder_scope = { has_character_modifier = feared_3 } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { has_character_modifier = feared_4 } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = { holder_scope = { has_character_modifier = feared_5 } }
		}
		modifier = {
			factor = 0.1
			trait = craven
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROMFROM = {
				holder_scope = {
					has_character_modifier = defeated_major_revolt
					OR = {
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion difference
		modifier = {
			factor = 1.56
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						opinion_diff = { first = ROOT second = PREV value = 50 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 1.56
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						opinion_diff = { first = ROOT second = PREV value = 30 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 1.56
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.64
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						NOT = { opinion_diff = { first = ROOT second = PREV value = -15 as_if_liege = yes } }
					}
				}
			}
		}
		modifier = {
			factor = 0.64
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						NOT = { opinion_diff = { first = ROOT second = PREV value = -30 as_if_liege = yes } }
					}
				}
			}
		}

		# Opinion of the current heir is very important
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 100 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 80 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 60 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 40 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 20 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -19 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -39 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -59 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -79 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -99 } } } } }
		}

		# Opinion of liege
		modifier = {
			factor = 0
			NOT = { trait = just }
			NOT = { trait = ruthless }
			NOT = { trait = ambitious }
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 20 } } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 100 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 80 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 60 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 40 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 20 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -19 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -39 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -59 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -79 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -99 } } } }
		}

		# Trait effects
		modifier = {
			factor = 0.1
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.2
			trait = craven
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	success = {
		has_law = succ_seniority
	}

	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}

	abort_effect = {
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_seniority
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Institute Succession by Primogeniture
faction_succ_primogeniture = {
	type = liege_titles

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		liege = {
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
			is_feudal = yes
			is_patrician = no
			NOT = { trait = kingsguard }
			NOT = { trait = nightswatch }
			NOT = { government = alliance_government }
			NOT = { government = theocratic_feudal_government }
			NOT = { government = colony_government }
			NOT = { government = noble_oligarchy }
		}
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		NOT = { in_faction = faction_succ_seniority }
		NOT = { in_faction = faction_succ_feudal_elective }
		#NOT = { in_faction = faction_succ_gavelkind }
		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
		NOT = { has_character_modifier = faction_succ_primogeniture_ultimatum_timer }
	}

	# Target scope
	allow = {
		is_law_potential = succ_primogeniture
		is_law_allowed = succ_primogeniture
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}
		FROM = { #I must have land in the title or it is my crownlaw title
			OR = {
				ROOT = { tier = DUKE }
				crownlaw_title = { title = ROOT }
				any_demesne_title = { ROOT = { de_jure_vassal_or_below = PREV } }
			}
		}
		NOT = { has_law = succ_primogeniture }
		NOT = { has_law = dornish_succession }
		NOT = { is_variable_equal = { which = "lord_paramount_status" value = 2 } } #interregnum
		holder_scope = {
			is_merchant_republic = no
			NOT = { government = pirate_government }
			NOT = { wildling_culture_trigger = yes }
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_primogeniture_succession_law
				}
			}
			NOT = { #Does not apply to kingdoms in an independence war
				any_war = {
					attacker = { character = PREVPREV }
					OR = {
						using_cb = bid_for_independence
						using_cb = cb_faction_independence
						using_cb = bid_for_independence_CW
						using_cb = bid_for_independence_ACOK
					}
				}
			}
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no

			NOT = { in_faction = faction_succ_seniority }
			# NOT = { in_faction = faction_succ_feudal_elective }
			# NOT = { in_faction = faction_succ_gavelkind }
			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { liege = { trait = nightswatch } }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }
		}
	}


	# AI creation weight
	chance = {
		factor = 2

		# Faction Motives
		# - I would be the heir under this succession law
		# - I am Just and this succession law is customary for my culture
		modifier = {
			factor = 0
			NOT = { would_be_heir_under_law = { who = FROM law = primogeniture } }
			NOT = {
				FROM = {
					trait = just
					OR = {
						culture_group = andal
						culture_group = dornish
						culture_group = first_men
					}
					NOT = { has_religion_feature = religion_feature_elective }
				}
			}
		}

		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		# Content characters will never attempt this.
		modifier = {
			factor = 0
			FROM = { trait = content }
		}

		#High Septon needs power
		modifier = {
			factor = 0
			FROM = {
				has_landed_title = k_the_most_devout
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}
		modifier = {
			factor = 2
			FROM = {
				has_cutthroat_religion_trigger = yes
			}
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		#This is redundant if they are the current heir
		modifier = {
			factor = 0
			current_heir = { character = FROM }
		}

		modifier = {
			factor = 0
			FROM = { prisoner = yes }
		}

		# Just characters will never support changing succession laws this way
		# unless they are customary for their culture
		modifier = {
			factor = 0
			FROM = {
				trait = just
				NOT = { culture_group = andal }
				NOT = { culture_group = dornish }
				NOT = { culture_group = first_men }
			}
		}

		# This succession law is customary for these cultures, and they will
		# be eager to see it restored
		modifier = {
			factor = 5
			FROM = {
				OR = {
					culture_group = andal
					culture_group = dornish
					culture_group = first_men
				}
				NOT = { has_religion_feature = religion_feature_elective }
			}
		}

		# These cultures have their own customary succession laws, and
		# will be reluctant to support a "foreign" one
		modifier = {
			factor = 0.01
			FROM = {
				OR = {
					culture_group = iron_isles_culture
					culture = summer_islander
				}
			}
		}


		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
			NOT = { holder_scope = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction  } } }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		# Characters with claims should generally prefer to pursue those instead
		modifier = {
			factor = 0.1
			claimed_by = FROM
		}

		# Opinion of the current heir is very important
		modifier = {
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
			current_heir = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Opinion of liege
		modifier = {
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Objective modifiers
		modifier = {
			factor = 10
			would_be_heir_under_law = { who = FROM law = primogeniture }
			FROM = { has_ambition = obj_become_heir }
		}

		modifier = {
			factor = 10
			would_be_heir_under_law = { who = FROM law = primogeniture }
			NOT = { claimed_by = FROM }
			OR = {
				AND = {
					tier = EMPEROR
					FROM = { has_ambition = obj_become_king }
				}
				FROM = { has_ambition = obj_become_lord_paramount }
			}
		}

		# Trait modifiers
		modifier = {
			factor = 5
			current_heir = { NOT = { religion = FROM } }
			FROM = { trait = zealous }
		}
		modifier = {
			factor = 5
			FROM = { trait = just }
		}
		modifier = {
			factor = 5
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = COUNT
				NOT = { relative_power_to_liege = 0.2 }
			}
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = KING
				relative_power_to_liege = 0.2
			}
		}
		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
				}
			}
		}

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_seniority
				#in_faction = faction_succ_gavelkind
				in_faction = faction_liege_loyalist

				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		modifier = {
			factor = 0
			has_character_modifier = faction_succ_primogeniture_ultimatum_timer
		}

		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}

		# Reasons to support this faction
		# - I hate the current heir
		# - I prefer the prospective heir to the current heir
		# - I am Just and this succession law is customary for my culture
		# - I have been coerced into joining this faction
		modifier = {
			factor = 0
			FROMFROM = { current_heir = { reverse_opinion = { who = ROOT value = -50 } } }
			NOT = {
				FROMFROM = {
					would_be_heir_under_law = { who = ROOT_FROM law = seniority }
					current_heir = {
						NOT = { reverse_opinion = { who = ROOT value = 20 } }
						ROOT_FROM = {
							reverse_opinion = { who = ROOT value = -30 }
							opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
						}
					}
				}
			}
			NAND = {
				trait = just
				OR = {
					culture_group = andal
					culture_group = first_men
					culture_group = dornish
				}
				NOT = { has_religion_feature = religion_feature_elective }
			}
			NOT = {	has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will never support this faction unless forced,
		# or unless it is their culture's customary succession law
		modifier = {
			factor = 0
			trait = just
			NOT = { culture_group = andal }
			NOT = { culture_group = dornish }
			NOT = { culture_group = first_men }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#If not my crown law or territory, and not just, then doesn't effect me
		modifier = {
			factor = 0
			FROMFROM = { NOT = { tier = DUKE } }
			NOT = { crownlaw_title = { title = FROMFROM } }
			NOT = { any_demesne_title = { ROOT_FROMFROM = { de_jure_vassal_or_below = PREV } } }
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# All characters will be more eager to support their culture's customary
		# succession law
		modifier = {
			factor = 5
			OR = {
				culture_group = andal
				culture_group = dornish
				culture_group = first_men
			}
			NOT = { has_religion_feature = religion_feature_elective }
		}

		# These cultures have their own customary succession laws and will
		# be extremely reluctant to supportal foreign ones
		modifier = {
			factor = 0.1
			OR = {
				culture_group = iron_isles_culture
				culture = summer_islander
			}
		}

		# Zealous characters will never support a heretic unless forced
		modifier = {
			factor = 0
			trait = zealous
			NOT = { religion = FROM }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			is_allied_with = FROM
		}
		modifier = {
			factor = 5
			is_allied_with = FROM
		}
		modifier = {
			factor = 0
			trait = honorable
			FROMFROM = { holder_scope = { is_allied_with = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { is_allied_with = ROOT } }
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { same_society_as = ROOT } }
		}
		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_succ_primogeniture
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			FROMFROM = { holder_scope = { war = yes } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			FROMFROM = { holder_scope = { war = yes } }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			FROMFROM = { holder_scope = { has_character_modifier = feared_1 } }
		}
		modifier = {
			factor = 0.5
			FROMFROM = { holder_scope = { has_character_modifier = feared_2 } }
		}
		modifier = {
			factor = 0.3
			FROMFROM = { holder_scope = { has_character_modifier = feared_3 } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { has_character_modifier = feared_4 } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = { holder_scope = { has_character_modifier = feared_5 } }
		}
		modifier = {
			factor = 0.1
			trait = craven
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROMFROM = {
				holder_scope = {
					has_character_modifier = defeated_major_revolt
					OR = {
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion difference
		modifier = {
			factor = 1.56
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						opinion_diff = { first = ROOT second = PREV value = 50 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 1.56
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						opinion_diff = { first = ROOT second = PREV value = 30 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 1.56
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.64
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						NOT = { opinion_diff = { first = ROOT second = PREV value = -15 as_if_liege = yes } }
					}
				}
			}
		}
		modifier = {
			factor = 0.64
			FROMFROM = {
				would_be_heir_under_law = { who = ROOT_FROM law = seniority }
				current_heir = {
					ROOT_FROM = {
						NOT = { opinion_diff = { first = ROOT second = PREV value = -30 as_if_liege = yes } }
					}
				}
			}
		}

		# Opinion of the current heir is very important
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 100 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 80 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 60 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 40 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 20 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -19 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -39 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -59 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -79 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -99 } } } } }
		}

		# Opinion of liege
		modifier = {
			factor = 0
			NOT = { trait = just }
			NOT = { trait = ruthless }
			NOT = { trait = ambitious }
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 20 } } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 100 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 80 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 60 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 40 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 20 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -19 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -39 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -59 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -79 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -99 } } } }
		}

		# Trait effects
		modifier = {
			factor = 0.1
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.2
			trait = craven
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	success = {
		has_law = succ_primogeniture
	}

	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}

	abort_effect = {
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_primogeniture
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Institute Succession by Feudal Elective
faction_succ_feudal_elective = {
	type = liege_titles

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		liege = {
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
			is_feudal = yes
			is_patrician = no
			NOT = { trait = kingsguard }
			NOT = { trait = nightswatch }
			NOT = { government = alliance_government }
			NOT = { government = theocratic_feudal_government }
			NOT = { government = colony_government }
			NOT = { government = noble_oligarchy }
		}
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		NOT = { in_faction = faction_succ_seniority }
		NOT = { in_faction = faction_succ_primogeniture }
		#NOT = { in_faction = faction_succ_gavelkind }
		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}
		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
		NOT = { has_character_modifier = faction_succ_feudal_elective_ultimatum_timer }
	}

	# Target scope
	allow = {
		OR = {
			AND = {
				is_law_potential = succ_feudal_elective
				is_law_allowed = succ_feudal_elective
			}
			AND = {
				is_law_potential = succ_kingsmoot_elective
				is_law_allowed = succ_kingsmoot_elective
			}
		}
		NOT = { has_elective_law_trigger = yes }
		NOT = { is_variable_equal = { which = "lord_paramount_status" value = 2 } } #interregnum
		OR = {
			has_law = centralization_0
			AND = {
				higher_tier_than = DUKE
				holder_scope = { is_drowned_god_religion_trigger = yes }
			}
		}
		#I must have land in the title
		FROM = {
			any_demesne_title = { ROOT = { de_jure_vassal_or_below = PREV } }
		}


		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
		}

		holder_scope = {
			is_merchant_republic = no
			NOT = { government = pirate_government }
			NOT = { wildling_culture_trigger = yes }
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = change_feudal_elective_succession_law
				}
			}
			NOT = { #Does not apply to kingdoms in an independence war
				any_war = {
					attacker = { character = PREVPREV }
					OR = {
						using_cb = bid_for_independence
						using_cb = cb_faction_independence
						using_cb = bid_for_independence_CW
						using_cb = bid_for_independence_ACOK
					}
				}
			}
			NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_leaving_faction } }
		}

	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no

			NOT = { in_faction = faction_succ_seniority }
			NOT = { in_faction = faction_succ_primogeniture }
			#NOT = { in_faction = faction_succ_gavelkind }
			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { liege = { trait = nightswatch } }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }
		}
	}

	# AI creation weight
	chance = {
		factor = 2

		modifier = {
			factor = 0.75 #less likely than other factions
		}
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}

		modifier = {
			factor = 0
			FROM = {
				lower_tier_than = DUKE
			}
		}

		# Reasons to create this faction
			# I am Ironborn and my liege is weak
			# I dislike the current heir and all members of their dynasty
			# I am ambitious and want a chance to be elected
		modifier = {
			factor = 0
			OR = {
				FROM = {
					has_elective_culture_religion_trigger = no
				}
				holder_scope = {
					NOT = {
						higher_tier_than = DUKE
						government = feudal_government
						OR = {
							NOT = { age = 14 }
							is_female = yes
							NOT = { culture_group = FROM }
							trait = incapable
							is_weak_trigger = yes
							is_lazy_trigger = yes
							martial < 7
						}
					}
				}
			}
			current_heir = {
				OR = {
					reverse_opinion = { who = FROM value = 0 }
					any_dynasty_member = { is_close_relative = PREV reverse_opinion = { who = FROM value = 0 } }
				}
			}
			NOT = { FROM = { trait = ambitious } }
		}

		# Just characters will never form this faction unless it is customary
		# for their culture
		modifier = {
			factor = 0
			FROM = {
				trait = just
				has_elective_culture_religion_trigger = no
			}
		}

		#High Septon needs power
		modifier = {
			factor = 0
			FROM = {
				has_landed_title = k_the_most_devout
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}

		modifier = {
			factor = 2
			FROM = {
				has_cutthroat_religion_trigger = yes
			}
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		# This succession law is customary for this culture and they greatly prefer it
		modifier = {
			factor = 5
			FROM = {
				has_elective_culture_religion_trigger = yes
			}
		}

		# If not customary for culture, prioritise other factions
		modifier = {
			factor = 0
			FROM = {
				has_elective_culture_religion_trigger =  no
				OR = {
					in_faction = faction_claimant
					in_faction = faction_independence
					in_faction = faction_depose_liege
					in_faction = faction_republic
				}
			}
		}

		# These cultures have their own customary succession laws
		modifier = {
			factor = 0.05
			FROM = {
				OR = {
					culture_group = andal
					culture_group = first_men
					culture_group = dornish
					culture = summer_islander
				}
			}
		}

		# Honorable characters will never betray their allies
		modifier = {
			factor = 0
			FROM = { trait = honorable }
			current_heir = {
				OR = {
					is_allied_with = FROM
					is_friend = FROM
				}
			}
		}

		# Content characters will never form this faction
		modifier = {
			factor = 0
			FROM = { trait = content }
		}

		# The current heir and the current heir's spouse won't form this faction unless they are Just
		modifier = {
			factor = 0
			current_heir = {
				character = FROM
				NOT = { trait = just }
			}
		}
		modifier = {
			factor = 0
			current_heir = {
				spouse = {
					character = FROM
					NOT = { trait = just }
				}
			}
		}

		# Only Just character will form this faction if they'd benefit more from another
		modifier = {
			factor = 0
			FROM = { NOT = { trait = just } }
			OR = {
				current_heir = { character = FROM }
				would_be_heir_under_law = { who = FROM law = primogeniture }
				would_be_heir_under_law = { who = FROM law = seniority }
			}
		}

		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		# Opinion of the current heir is very important
		modifier = {
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
			current_heir = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			current_heir = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { current_heir = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Opinion of liege
		modifier = {
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ruthless }
				NOT = { trait = ambitious }
			}
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 100 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 80 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 60 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
		}
		modifier = {
			factor = 0.64
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Specific ambition modifiers
		modifier = {
			factor = 10
			FROM = { has_ambition = obj_become_heir }
		}
		modifier = {
			factor = 10
			title = e_iron_throne
			FROM = { has_ambition = obj_bloodline_iron_throne }
		}
		modifier = {
			factor = 10
			FROM = { has_ambition = obj_become_lord_paramount }
		}
		modifier = {
			factor = 10
			tier = EMPEROR
			FROM = { has_ambition = obj_become_king }
		}

		# Trait effects
		modifier = {
			factor = 4
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { diplomacy = 20 }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 2
			FROM = { diplomacy = 15 }
		}
		modifier = {
			factor = 1.5
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = selfish }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.5
			NOT = { FROM = { diplomacy = 10 } }
		}
		modifier = {
			factor = 0.5
			NOT = { FROM = { diplomacy = 5 } }
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = COUNT
				NOT = { relative_power_to_liege = 0.2 }
			}
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = KING
				relative_power_to_liege = 0.2
			}
		}
		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_seniority
				#in_faction = faction_succ_gavelkind
				in_faction = faction_liege_loyalist

				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		modifier = {
			factor = 0
			has_character_modifier = faction_succ_feudal_elective_ultimatum_timer
		}

		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		# Reasons to join this faction
			# I am ironborn and my liege is weak
			# I dislike the current heir and all members of their dynasty
			# I am ambitious and want a chance to be elected
			# I have been forced to join this faction
		modifier = {
			factor = 0
			OR = {
				has_elective_culture_religion_trigger = no
				FROMFROM = {
					holder_scope = {
						NOT = {
							higher_tier_than = DUKE
							government = feudal_government
							OR = {
								NOT = { age = 14 }
								is_female = yes
								NOT = { culture_group = PREVPREV }
								trait = incapable
								is_weak_trigger = yes
								is_lazy_trigger = yes
								martial < 7
							}
						}
					}
				}
			}
			FROMFROM = {
				current_heir = {
					OR = {
						reverse_opinion = { who = ROOT value = 0 }
						any_dynasty_member = { is_close_relative = PREV reverse_opinion = { who = ROOT value = 0 } }
					}
				}
			}
			NOT = { trait = ambitious }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will never join this faction unless it is customary
		# for their culture or they are forced
		modifier = {
			factor = 0
			trait = just
			has_elective_culture_religion_trigger = no
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#If not my crown law or territory, and not just, then doesn't effect me
		modifier = {
			factor = 0
			NOT = { crownlaw_title = { title = FROMFROM } }
			NOT = { any_demesne_title = { ROOT_FROMFROM = { de_jure_vassal_or_below = PREV } } }
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# This succession law is customary for this culture and they greatly prefer it
		modifier = {
			factor = 5
			has_elective_culture_religion_trigger = yes
		}

		# If not customary for culture, prioritise other factions
		modifier = {
			factor = 0
			has_elective_culture_religion_trigger = no
			OR = {
				in_faction = faction_claimant
				in_faction = faction_independence
				in_faction = faction_depose_liege
				in_faction = faction_republic
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# These cultures have their own customary succession laws
		modifier = {
			factor = 0.05
			OR = {
				culture_group = andal
				culture_group = first_men
				culture_group = dornish
				culture = summer_islander
			}
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			is_allied_with = FROM
		}
		modifier = {
			factor = 5
			is_allied_with = FROM
		}
		modifier = {
			factor = 0
			trait = honorable
			FROMFROM = { holder_scope = { is_allied_with = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { is_allied_with = ROOT } }
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { same_society_as = ROOT } }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_succ_feudal_elective
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Content characters will never join this faction unless forced
		modifier = {
			factor = 0
			trait = content
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# The current heir and the current heir's spouse won't form this faction unless they are Just or forced
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					character = ROOT
					NOT = { trait = just }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0
			FROMFROM = {
				current_heir = {
					spouse = {
						character = ROOT
						NOT = { trait = just }
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Ambitious characters won't form this faction if they'd benefit more from another unless they are forced
		modifier = {
			factor = 0
			trait = ambitious
			FROMFROM = {
				OR = {
					current_heir = { character = ROOT }
					would_be_heir_under_law = { who = ROOT law = primogeniture }
					would_be_heir_under_law = { who = ROOT law = seniority }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			FROMFROM = { holder_scope = { war = yes } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			FROMFROM = { holder_scope = { war = yes } }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			FROMFROM = { holder_scope = { has_character_modifier = feared_1 } }
		}
		modifier = {
			factor = 0.5
			FROMFROM = { holder_scope = { has_character_modifier = feared_2 } }
		}
		modifier = {
			factor = 0.3
			FROMFROM = { holder_scope = { has_character_modifier = feared_3 } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { has_character_modifier = feared_4 } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = { holder_scope = { has_character_modifier = feared_5 } }
		}
		modifier = {
			factor = 0.1
			trait = craven
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROMFROM = {
				holder_scope = {
					has_character_modifier = defeated_major_revolt
					OR = {
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion of the current heir is very important
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 100 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 80 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 60 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 40 } } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { current_heir = { reverse_opinion = { who = ROOT value = 20 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -19 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -39 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -59 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -79 } } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { current_heir = {  reverse_opinion = { who = ROOT value = -99 } } } } }
		}

		# Opinion of liege
		modifier = {
			factor = 0
			NOT = { trait = just }
			NOT = { trait = ruthless }
			NOT = { trait = ambitious }
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 20 } } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 100 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 80 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 60 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 40 } } }
		}
		modifier = {
			factor = 0.64
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 20 } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -19 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -39 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -59 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -79 } } } }
		}
		modifier = {
			factor = 1.56
			NOT = { FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = -99 } } } }
		}

		# Specific ambition modifiers
		modifier = {
			factor = 10
			has_ambition = obj_become_heir
		}
		modifier = {
			factor = 10
			FROMFROM = { title = e_iron_throne }
			has_ambition = obj_bloodline_iron_throne
		}
		modifier = {
			factor = 10
			has_ambition = obj_become_lord_paramount
		}
		modifier = {
			factor = 10
			FROMFROM = { tier = EMPEROR }
			has_ambition = obj_become_king
		}

		# Trait effects
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			diplomacy = 20
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 2
			diplomacy = 15
		}
		modifier = {
			factor = 1.5
			trait = greedy
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.5
			diplomacy < 10
		}
		modifier = {
			factor = 0.5
			diplomacy < 5
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	success = {
		has_elective_law_trigger = yes
	}

	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}

	abort_effect = {
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_succ_feudal_elective
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Lower Crown Authority
faction_lower_crown_authority = {
	type = liege_titles

	warning_level = 0.9 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		liege = {
			NOT = { government = valyrian_imperial_government }
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
		NOT = { has_character_modifier = faction_lower_CA_ultimatum_timer }
	}

	# Target scope
	allow = {
		higher_tier_than = DUKE
		OR = {
			holder_scope = { tier = EMPEROR }
			NOT = { check_variable = { which = "de_facto_empire" value = 1 } }
		}

		holder_scope = { independent = yes }

		FROM = { #I must have land in the title or it is my crownlaw title
			OR = {
				crownlaw_title = { title = ROOT }
				any_demesne_title = { ROOT = { de_jure_vassal_or_below = PREV } }
			}
		}

		NOT = { has_law = centralization_0 }

		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = lower_crown_authority_law
				}
			}
			NOT = { #Does not apply to kingdoms in an independence war
				any_war = {
					attacker = { character = PREVPREV }
					OR = {
						using_cb = bid_for_independence
						using_cb = cb_faction_independence
						using_cb = bid_for_independence_CW
						using_cb = bid_for_independence_ACOK
					}
				}
			}
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no

			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { liege = { trait = nightswatch } }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }
		}
	}

	# AI creation weight
	chance = {
		factor = 2

		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}

		modifier = {
			factor = 0
			holder_scope = { FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_authority } } }
		}

		# Reasons to create this faction
			# I am any two of Proud, Ambitious, and Envious and chafe at centralization
			# Alliance member wants to keep high council weak
			# Culture traditionally resists centralization
			# I am Just and wish to defend the old laws
		modifier = {
			factor = 0
			NOT = {
				FROM = {
					calc_true_if = {
						amount = 2
						trait = proud
						trait = ambitious
						trait = envious
					}
				}
			}
			NAND = {
				holder_scope = { government = alliance_government }
				FROM = { any_demesne_title = { has_law = republic_alliance_member } }
			}
			FROM = {
				NOR = {
					culture = yi_ti
					culture_group = sarnor_group
				}
			}
			NAND = {
				FROM = { trait = just }
				holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_increased_authority } }
			}
		}

		# Will not form faction if like liege, like regent or is closely related to liege (and is not just)
		modifier = {
			factor = 0
			OR = {
				holder_scope = {
					OR = {
						is_married = FROM
						is_close_relative = FROM
						reverse_opinion = { who = FROM value = 15 }
						regent = { reverse_opinion = { who = FROM value = 15 } }
					}
				}
				current_heir = { character = FROM }
			}
			FROM = {
				NOT = { trait = just }
			}
		}

		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			FROM = { in_faction = faction_claimant }
		}

		#High Septon needs power
		modifier = {
			factor = 0
			FROM = {
				has_landed_title = k_the_most_devout
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}

		modifier = {
			factor = 2
			FROM = {
				has_cutthroat_religion_trigger = yes
			}
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		#Cultural Opposition
		modifier = {
			factor = 2
			FROM = {
				OR = {
					culture = yi_ti
					culture_group = sarnor_group
				}
			}
		}

		modifier = {
			factor = 0
			FROM = { trait = content }
		}

		modifier = {
			factor = 0
			FROM = {
				trait = just
				NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_increased_authority } }
			}
		}

		# Alliance Effects
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					FROM = { trait = honorable }
					reverse_opinion = { who = FROM value = -15 }
				}
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.1
			holder_scope = {
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.2
			holder_scope = { same_society_as = FROM }
		}

		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		modifier = {
			factor = 0.1
			has_law = centralization_1
		}
		modifier = {
			factor = 1.5
			has_law = centralization_3
		}
		modifier = {
			factor = 2.25
			has_law = centralization_4
		}

		# Opinion of ruler effects
		modifier = {
			factor = 0.8
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.8
			holder_scope = { reverse_opinion = { who = FROM value = 10 } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -9 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -29 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -69 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -89 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Trait effects
		modifier = {
			factor = 4
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = ruthless }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = wroth }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = selfish }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.8
			FROM = { trait = patient }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = COUNT
				NOT = { relative_power_to_liege = 0.2 }
			}
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = KING
				relative_power_to_liege = 0.2
			}
		}
		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_liege_loyalist
				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		modifier = {
			factor = 0
			has_character_modifier = faction_lower_CA_ultimatum_timer
		}

		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		# Reasons to join this faction
			# I am any two of Proud, Ambitious or Envious and chafe at centralization
			# I oppose a recent increase in crown authority
			# Alliance members want to keep high council weak
			# Culture traditionally resists centralization
			# I am a friend or ally of the faction leader
			# I have been coerced into joining
		modifier = {
			factor = 0
			NOT = {
				calc_true_if = {
					amount = 2
					trait = proud
					trait = ambitious
					trait = envious
				}
			}
			NAND = {
				liege = { government = alliance_government }
				any_demesne_title = { has_law = republic_alliance_member }
			}
			NOR = {
				culture = yi_ti
				culture_group = sarnor_group
			}
			NOT = {
				liege = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_increased_authority }
					NOT = { reverse_opinion = { who = ROOT value = 15 } }
				}
			}
			NOT = { is_allied_with = FROM }
			NOT = { is_friend = FROM }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#If not my crown law or territory, and not just, then doesn't effect me
		modifier = {
			factor = 0
			NOT = { crownlaw_title = { title = FROMFROM } }
			NOT = { any_demesne_title = { ROOT_FROMFROM = { de_jure_vassal_or_below = PREV } } }
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Will not join faction if like liege, like regent or is closely related to liege (and is not just)
		modifier = {
			factor = 0
			NOT = { trait = just }
			liege = {
				OR = {
					is_married = ROOT
					is_close_relative = ROOT
					reverse_opinion = { who = ROOT value = 15 }
					regent = {
						reverse_opinion = { who = ROOT value = 15 }
						NOT = { character = FROM }
					}
					current_heir = { character = ROOT }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will attempt to preserve the status quo unless forced
		modifier = {
			factor = 10
			trait = just
			liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_increased_authority } }
		}
		modifier = {
			factor = 0
			trait = just
			NOR = {
				culture = yi_ti
				culture_group = sarnor_group
			}
			NAND = {
				liege = { government = alliance_government }
				any_demesne_title = { has_law = republic_alliance_member }
			}
			NOT = { liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_increased_authority } } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Content characters won't join this faction unless forced
		modifier = {
			factor = 0
			trait = content
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			in_faction = faction_claimant
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Cultural Opposition
		modifier = {
			factor = 2
			OR = {
				culture = yi_ti
				culture_group = sarnor_group
			}
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			is_allied_with = FROM
		}
		modifier = {
			factor = 5
			OR = {
				is_allied_with = FROM
				has_non_aggression_pact_with = FROM
				is_friend = FROM
			}
		}
		modifier = {
			factor = 0
			OR = {
				trait = honorable
				liege = { reverse_opinion = { who = ROOT value = -15 } }
			}
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = ROOT }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_lower_crown_authority
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			FROMFROM = { holder_scope = { war = yes } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			FROMFROM = { holder_scope = { war = yes } }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			FROMFROM = { holder_scope = { has_character_modifier = feared_1 } }
		}
		modifier = {
			factor = 0.5
			FROMFROM = { holder_scope = { has_character_modifier = feared_2 } }
		}
		modifier = {
			factor = 0.3
			FROMFROM = { holder_scope = { has_character_modifier = feared_3 } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { has_character_modifier = feared_4 } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = { holder_scope = { has_character_modifier = feared_5 } }
		}
		modifier = {
			factor = 0.1
			trait = craven
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROMFROM = {
				holder_scope = {
					has_character_modifier = defeated_major_revolt
					OR = {
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Centralization Effects
		modifier = {
			factor = 0.1
			FROMFROM = { has_law = centralization_1 }
		}
		modifier = {
			factor = 1.5
			FROMFROM = { has_law = centralization_3 }
		}
		modifier = {
			factor = 2.25
			FROMFROM = { has_law = centralization_4 }
		}

		# Opinion of liege effects
		modifier = {
			factor = 0.8
			opinion = { who = LIEGE value = 20 }
		}
		modifier = {
			factor = 0.8
			opinion = { who = LIEGE value = 10 }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -9 } }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -19 } }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -29 } }
		}
		modifier = {
			factor = 1.5
			NOT = { opinion = { who = LIEGE value = -39 } }
		}
		modifier = {
			factor = 2
			NOT = { opinion = { who = LIEGE value = -49 } }
		}
		modifier = {
			factor = 2
			NOT = { opinion = { who = LIEGE value = -59 } }
		}
		modifier = {
			factor = 2
			NOT = { opinion = { who = LIEGE value = -69 } }
		}
		modifier = {
			factor = 2
			NOT = { opinion = { who = LIEGE value = -79 } }
		}
		modifier = {
			factor = 2
			NOT = { opinion = { who = LIEGE value = -89 } }
		}
		modifier = {
			factor = 2
			NOT = { opinion = { who = LIEGE value = -99 } }
		}

		# Trait effects
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 1.25
			trait = wroth
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 1.25
			trait = deceitful
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = patient
		}
		modifier = {
			factor = 0.5
			trait = humble
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			is_council_content = no
			is_voter = yes
		}
	}

	success = {
		holder_scope = { FROM = { has_opinion_modifier = { who = PREV modifier = opinion_lowered_crown_authority } } }
	}

	abort = {
		always = no
	}

	abort_effect = {
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_lower_crown_authority
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}
faction_independence = {
	type = character

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no

		higher_tier_than = BARON

		OR = {
			is_feudal = yes
			higher_tier_than = COUNT
			is_tribal = yes
			is_nomadic = yes
		}

		NOT = { culture = volantene }

		liege = {
			independent = yes
			OR = {
				tier = EMPEROR
				primary_title = { NOT = { check_variable = { which = "de_facto_empire" value = 1 } } }
			}
			NOT = { any_war = { using_cb = cb_faction_independence } }
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		NOT = {
			AND = {
				government = merchant_republic
				liege = {
					government = alliance_government
				}
			}
		}
		OR = {
			is_nomadic = no
			NOT = { has_dlc = "Horse Lords" }
			liege = {
				NOT = { has_blood_oath_with = PREV }
			}
		}
		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
		NOT = { has_character_modifier = faction_independence_ultimatum_timer }
	}

	# Target scope
	allow = {
		prisoner = no
		NOR = {
			has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction }
			AND = {
				is_nomadic = yes
				clan_opinion = { who = LIEGE value = 0 }
				liege = {
					NOR = {
						NOT = { age = 16 }
						is_female = yes
						is_weak_khal_trigger = yes
					}
				}
			}
		}
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no
			OR = {
				is_nomadic = no
				liege = {
					OR = {
						NOT = { reverse_clan_opinion = { who = PREV value = 0 } }
						NOT = { age = 16 }
						is_female = yes
						is_weak_khal_trigger = yes
					}
				}
			}
			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }
			# Can't join factions when in blood oath with liege
			OR = {
				is_nomadic = no
				NOT = { has_dlc = "Horse Lords" }
				liege = {
					NOT = { has_blood_oath_with = PREV }
				}
			}
			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { liege = { trait = nightswatch } }
			liege = { NOT = { reverse_has_opinion_modifier = { who = PREV modifier = opinion_coerced_into_leaving_faction } } }
		}
	}

	# AI creation weight
	chance = {
		factor = 5

		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				has_character_modifier = in_seclusion
			}
		}

		#Don't want independence if same culture or relative of liege
		modifier = {
			factor = 0
			liege = {
				OR = {
					culture = PREV
					is_close_relative = PREV
				}
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			NOT = { culture = crackclawmen } #quarrelsome
			NAND = { #fiercely independent
				higher_tier_than = COUNT
				culture = rhoynar
			}
			is_nomadic = no
		}

		# Most culture groups dont mind being lorded by the same culture and religion group
		modifier = {
			factor = 0
			liege = {
				culture_group = PREV
				religion_group = PREV
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { culture = sisterman }
			NOT = { culture_group = free_cities }
			NOT = { culture_group = sothoryos_islands }
			NOT = { culture = rhoynar } #fiercely independent
			NOT = { culture = crackclawmen } #quarrelsome
			NOT = { trait = lunatic }
			NAND = { # Reasons to disregards this
				OR = {
					AND = { #i'm a powerful king
						tier = KING
						relative_power_to_liege = 0.2
					}
					AND = { #i'm a powerful duke
						tier = DUKE
						relative_power_to_liege = 0.3
					}
					AND = { #i'm zealous and liege is wrong religion
						trait = zealous
						liege = { NOT = { religion = PREV } }
					}
					trait = proud #i'm proud
				}
				liege = { NOT = { trait = civil_war } }
				liege = { NOT = { has_landed_title = e_iron_throne } }
			}
		}

		#If Liege is High Valyrian and my religion that is acceptable
		modifier = {
			factor = 0
			liege = {
				religion = PREV
				culture = high_valyrian
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { trait = lunatic }
			NOT = { culture = rhoynar } #fiercely independent
			NOT = { culture = crackclawmen } #quarrelsome
			NAND = { # Reasons to disregards this
				OR = {
					AND = { #i'm a powerful king
						tier = KING
						relative_power_to_liege = 0.2
					}
					AND = { #i'm a powerful duke
						tier = DUKE
						relative_power_to_liege = 0.3
					}
					AND = { #i'm zealous and liege is wrong religion
						trait = zealous
						liege = { NOT = { religion = PREV } }
					}
					trait = proud #i'm proud
				}
				liege = { NOT = { trait = civil_war } }
				liege = { NOT = { has_landed_title = e_iron_throne } }
			}
		}

		#If I'm Dornish and liege is Andal and my religion that is acceptable
		modifier = {
			factor = 0
			liege = {
				religion = PREV
				culture_group = andal
			}
			culture_group = dornish
			NOT = { culture = rhoynar } #fiercely independent
			NOT = { trait = lunatic }
			NAND = { # Reasons to disregards this
				OR = {
					AND = { #i'm a powerful king
						tier = KING
						relative_power_to_liege = 0.2
					}
					AND = { #i'm a powerful duke
						tier = DUKE
						relative_power_to_liege = 0.3
					}
					AND = { #i'm zealous and liege is wrong religion
						trait = zealous
						liege = { NOT = { religion = PREV } }
					}
					trait = proud #i'm proud
				}
				liege = { NOT = { trait = civil_war } }
				liege = { NOT = { has_landed_title = e_iron_throne } }
			}
		}

		modifier = {
			factor = 0.5
			liege = { reverse_has_opinion_modifier = { who = PREV modifier = opinion_subjugated_AGOT } }
		}
		modifier = {
			factor = 0
			liege = { has_opinion_modifier = { who = PREV modifier = opinion_defected_to_me } }
		}

		# If I'm of the same religion and like the heir may prefer to depose liege instead
		modifier = {
			factor = 0
			liege = {
				religion_group = PREV
				current_heir = {
					religion_group = PREVPREV
					OR = {
						character = PREVPREV
						reverse_opinion = { who = PREVPREV value = 5 }
						is_close_relative = PREVPREV
						is_married = PREVPREV
						AND = {
							age = 12
							reverse_opinion = { who = PREVPREV value = -15 }
							OR = {
								trait = kind
								trait = just
								trait = honorable
							}
							NOT = { trait = cruel }
							NOT = { trait = arbitrary }
							NOT = { trait = ruthless }
							is_incapable = no
							NOT = { trait = slothful }
						}
					}
				}
			}
			NOT = { culture = dothraki }
			is_nomadic = no
			NOT = { culture = jogos_nhai }
			NOT = { culture = sisterman }
		}

		# Claimants are preferred
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_claimant
				has_plot = plot_gain_liege_title
				any_backed_character = {
					has_plot = plot_gain_liege_title
					plot_target_char = { is_liege_of = PREVPREV }
				}
			}
		}
		modifier = {
			factor = 0.1
			liege = {
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					claimed_by = PREVPREV
				}
			}
		}

		# Only Lords Paramount are strong enough to seek independence from the Iron Throne/New Valyria if they are de jure vassals
		modifier = {
			factor = 0
			liege = {
				OR = {
					has_landed_title = e_iron_throne
					has_landed_title = e_new_valyria
				}
				any_demesne_title = { ROOT = { primary_title = { de_jure_vassal_or_below = PREVPREV } } }
			}
			NOT = { tier = KING }
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
		}

		# High Septon Needs Power
		modifier = {
			factor = 0
			has_landed_title = k_the_most_devout
			NOT = {
				crownlaw_title = {
					OR = {
						has_law = investiture_law_2
						has_law = investiture_law_3
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			pacifist = yes
			NOT = { trait = cynical }
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			liege = {
				any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
			}
		}

		modifier = {
			factor = 0
			culture = volantene
		}

		# If in a Triarchy must really dislike Liege, as it is posssible to gain power
		modifier = {
			factor = 0
			liege = {
				government = triarch_merchant_republic_government
				is_merchant_republic = yes
				primary_title = { NOT = { has_law = republic_triarch_for_life } }
				OR = {
					reverse_opinion = { who = PREV value = -59 }
					PREV = { has_character_flag = triarch }
				}
			}
			OR = {
				trait = elephant
				trait = tiger
			}
		}

		# Alliance members dont lead independence
		modifier = {
			factor = 0
			liege = { government = alliance_government }
			any_demesne_title = { has_law = republic_alliance_member }
		}
		#No holy orders
		modifier = {
			factor = 0
			holy_order = yes
		}
		# If Dothraki must have reason to dislike Khal
		modifier = {
			factor = 0
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				is_female = no
				age = 16
				NOT = { is_weak_khal_trigger = yes }
				OR = {
					is_nomadic = no
					PREV = { is_nomadic = no }
					reverse_clan_opinion = { who = PREV value = -40 }
				}
			}
		}

		# Dothraki reasons to dislike Khal
		modifier = { #more likely anyway
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
		}
		modifier = {
			factor = 5
			liege = { has_character_modifier = greatest_of_khans }
		}
		modifier = {
			factor = 10
			liege = { has_feud_with = PREV }
		}
		modifier = {
			factor = 0.05
			liege = { has_blood_oath_with = PREV }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { age = 50 }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { is_female = yes	 }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 16 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 10 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				OR = {
					has_severe_disability_trigger = yes
					is_weak_trigger = yes
					is_lazy_trigger = yes
					is_imbecile_trigger = yes
					is_short_trigger = yes
					trait = clubfooted
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { prestige < 0 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { trait = craven }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				NOR = {
					trait = trained_warrior
					trait = skilled_warrior
					trait = master_warrior
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 7 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 5 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 3 }
		}

		###
		modifier = {
			factor = 0
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { culture = sisterman }
			NOT = { trait = lunatic }
			liege = {
				OR = {
					reverse_opinion = { who = PREV value = -15 }
					AND = {
						has_regent = yes
						regent = { reverse_opinion = { who = PREVPREV value = 0 } }
					}
				}
			}
		}
		modifier = {
			factor = 1.5
			liege = { NOT = { reverse_opinion = { who = PREV value = -19 } } }
		}
		modifier = {
			factor = 1.5
			liege = { NOT = { reverse_opinion = { who = PREV value = -29 } } }
		}
		modifier = {
			factor = 1.5
			liege = { NOT = { reverse_opinion = { who = PREV value = -39 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = PREV value = -49 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = PREV value = -59 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = PREV value = -69 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = PREV value = -79 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = PREV value = -89 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = PREV value = -99 } } }
		}

		modifier = {
			factor = 2
			tier = KING
		}

		modifier = {
			factor = 5
			NOT = { liege = { any_demesne_title = { ROOT = { primary_title = { de_jure_vassal_or_below = PREVPREV } } } } }
		}

		modifier = {
			factor = 0.5
			liege = {
				OR = {
					has_landed_title = e_iron_throne
					has_landed_title = e_new_valyria
				}
			}
		}

		modifier = {
			factor = 0.25
			liege = { culture_group = PREV }
		}
		modifier = {
			factor = 0.5
			liege = { religion = PREV }
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 0.5
			liege = { religion = PREV }
			NOT = { trait = zealous }
		}
		modifier = {
			factor = 4
			liege = { NOT = { culture_group = PREV } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion = PREV } }
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion_group = PREV } }
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion = PREV } }
			trait = zealous
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion_group = PREV } }
			trait = zealous
		}

		modifier = {
			factor = 4
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = envious
		}
		modifier = {
			factor = 1.5
			trait = deceitful
		}
		modifier = {
			factor = 0.1
			trait = humble
		}
		modifier = {
			factor = 10.0
			trait = ambitious
		}
		modifier = {
			factor = 0.8
			trait = honest
		}
		modifier = {
			factor = 1.25
			trait = deceitful
		}
		modifier = {
			factor = 2
			trait = arbitrary
		}
		modifier = {
			factor = 0.5
			trait = just
		}
		modifier = {
			factor = 1.25
			trait = brave
		}
		modifier = {
			factor = 0.1
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0
			trait = content
		}

		# Alliance Effects
		modifier = {
			factor = 0
			trait = honorable
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			liege = { is_allied_with = PREV }
		}
		modifier = {
			factor = 0.2
			liege = { is_allied_with = PREV }
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = PREV }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			liege = { war = yes }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			liege = { war = yes }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			liege = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			liege = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			liege = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			liege = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			liege = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			liege = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			trait = craven
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								any_child = { character = ROOT }
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			liege = { higher_tier_than = DUKE }
			tier = COUNT
			NOT = { relative_power_to_liege = 0.2 }
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			liege = { higher_tier_than = DUKE }
			tier = KING
			relative_power_to_liege = 0.2
		}
		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 5

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_liege_loyalist
				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		#Don't want independence if same culture or relative of liege
		modifier = {
			factor = 0
			liege = {
				OR = {
					culture = PREV
					is_close_relative = PREV
				}
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			NOT = { culture = crackclawmen } #quarrelsome
			NAND = { #fiercely independent
				higher_tier_than = COUNT
				culture = rhoynar
			}
			is_nomadic = no
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Most culture groups dont mind being lorded by the same culture and religion group
		modifier = {
			factor = 0
			liege = {
				culture_group = PREV
				religion_group = PREV
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { culture = sisterman }
			NOT = { culture_group = free_cities }
			NOT = { culture_group = sothoryos_islands }
			NOT = { culture = rhoynar } #fiercely independent
			NOT = { culture = crackclawmen } #quarrelsome
			NOT = { trait = lunatic }
			NAND = { # Reasons to disregards this
				OR = {
					AND = { #i'm a powerful king
						tier = KING
						relative_power_to_liege = 0.2
					}
					AND = { #i'm a powerful duke
						tier = DUKE
						relative_power_to_liege = 0.3
					}
					AND = { #i'm zealous and liege is wrong religion
						trait = zealous
						liege = { NOT = { religion = PREV } }
					}
					trait = proud #i'm proud
				}
				liege = { NOT = { trait = civil_war } }
				liege = { NOT = { has_landed_title = e_iron_throne } }
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#If Liege is High Valyrian and my religion that is acceptable
		modifier = {
			factor = 0
			liege = {
				religion = PREV
				culture = high_valyrian
			}
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { trait = lunatic }
			NOT = { culture = rhoynar } #fiercely independent
			NOT = { culture = crackclawmen } #quarrelsome
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
			NAND = { # Reasons to disregards this
				OR = {
					AND = { #i'm a powerful king
						tier = KING
						relative_power_to_liege = 0.2
					}
					AND = { #i'm a powerful duke
						tier = DUKE
						relative_power_to_liege = 0.3
					}
					AND = { #i'm zealous and liege is wrong religion
						trait = zealous
						liege = { NOT = { religion = PREV } }
					}
					trait = proud #i'm proud
				}
				liege = { NOT = { trait = civil_war } }
				liege = { NOT = { has_landed_title = e_iron_throne } }
			}
		}

		#If I'm Dornish and liege is Andal and my religion that is acceptable
		modifier = {
			factor = 0
			liege = {
				religion = PREV
				culture_group = andal
			}
			culture_group = dornish
			NOT = { culture = rhoynar } #fiercely independent
			NOT = { trait = lunatic }
			NAND = { # Reasons to disregards this
				OR = {
					AND = { #i'm a powerful king
						tier = KING
						relative_power_to_liege = 0.2
					}
					AND = { #i'm a powerful duke
						tier = DUKE
						relative_power_to_liege = 0.3
					}
					AND = { #i'm zealous and liege is wrong religion
						trait = zealous
						liege = { NOT = { religion = PREV } }
					}
					trait = proud #i'm proud
				}
				liege = { NOT = { trait = civil_war } }
				liege = { NOT = { has_landed_title = e_iron_throne } }
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = {
			factor = 0.5
			liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_subjugated_AGOT } }
		}
		modifier = {
			factor = 0
			liege = { has_opinion_modifier = { who = ROOT modifier = opinion_defected_to_me } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# If I'm of the same religion and like the heir may prefer to depose liege instead
		modifier = {
			factor = 0
			NOT = { culture = dothraki }
			is_nomadic = no
			NOT = { culture = jogos_nhai }
			NOT = { culture = sisterman }
			liege = {
				religion_group = PREV
				current_heir = {
					religion_group = ROOT
					OR = {
						character = ROOT
						reverse_opinion = { who = ROOT value = 5 }
						is_close_relative = ROOT
						spouse = { character = ROOT }
						AND = {
							age = 12
							reverse_opinion = { who = ROOT value = -15 }
							OR = {
								trait = kind
								trait = just
								trait = honorable
							}
							NOT = { trait = cruel }
							NOT = { trait = arbitrary }
							NOT = { trait = ruthless }
							is_incapable = no
							NOT = { trait = slothful }
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Claimants are preferred
		modifier = {
			factor = 0
			OR = {
				in_faction = faction_claimant
				has_plot = plot_gain_liege_title
				any_backed_character = {
					has_plot = plot_gain_liege_title
					plot_target_char = { is_liege_of = PREVPREV }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			liege = {
				any_demesne_title = {
					OR = {
						is_primary_holder_title = yes
						higher_tier_than = DUKE
					}
					claimed_by = ROOT
				}
			}
		}

		# Only Lords Paramount are strong enough to seek independence from the Iron Throne/New Valyria if they are de jure vassals
		modifier = {
			factor = 0
			NOT = { tier = KING }
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			liege = {
				OR = {
					has_landed_title = e_iron_throne
					has_landed_title = e_new_valyria
				}
				any_demesne_title = { ROOT = { primary_title = { de_jure_vassal_or_below = PREVPREV } } }
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# High Septon Needs Power
		modifier = {
			factor = 0
			has_landed_title = k_the_most_devout
			NOT = {
				crownlaw_title = {
					OR = {
						has_law = investiture_law_2
						has_law = investiture_law_3
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			pacifist = yes
			NOT = { trait = cynical }
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			liege = {
				any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
			}
		}
		# If in a Triarchy must really dislike Liege, as it is posssible to gain power
		modifier = {
			factor = 0
			liege = {
				government = triarch_merchant_republic_government
				is_merchant_republic = yes
				primary_title = { NOT = { has_law = republic_triarch_for_life } }
				OR = {
					reverse_opinion = { who = ROOT value = -59 }
					ROOT = { has_character_flag = triarch }
				}
			}
			OR = {
				trait = elephant
				trait = tiger
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Alliance members dont lead independence
		modifier = {
			factor = 0
			liege = { government = alliance_government }
			any_demesne_title = { has_law = republic_alliance_member }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#No holy orders
		modifier = {
			factor = 0
			holy_order = yes
		}

		# If Dothraki must have reason to dislike Khal
		modifier = {
			factor = 0
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				is_female = no
				age = 16
				NOT = { is_weak_khal_trigger = yes }
				OR = {
					is_nomadic = no
					ROOT = { is_nomadic = no }
					reverse_clan_opinion = { who = ROOT value = -40 }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Dothraki reasons to dislike Khal
		modifier = { #more likely anyway
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
		}
		modifier = {
			factor = 5
			liege = { has_character_modifier = greatest_of_khans }
		}
		modifier = {
			factor = 10
			liege = { has_feud_with = ROOT }
		}
		modifier = {
			factor = 0.05
			liege = { has_blood_oath_with = ROOT }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { age = 50 }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { is_female = yes }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 16 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 10 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				OR = {
					has_severe_disability_trigger = yes
					is_weak_trigger = yes
					is_lazy_trigger = yes
					is_imbecile_trigger = yes
					is_short_trigger = yes
					trait = clubfooted
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { prestige < 0 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { trait = craven }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				NOR = {
					trait = trained_warrior
					trait = skilled_warrior
					trait = master_warrior
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 7 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 5 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 3 }
		}

		###
		modifier = {
			factor = 0
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { culture = sisterman }
			NOT = { trait = lunatic }
			liege = {
				OR = {
					reverse_opinion = { who = ROOT value = -15 }
					AND = {
						has_regent = yes
						regent = { reverse_opinion = { who = ROOT value = 0 } }
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 1.5
			liege = { NOT = { reverse_opinion = { who = ROOT value = -19 } } }
		}
		modifier = {
			factor = 1.5
			liege = { NOT = { reverse_opinion = { who = ROOT value = -29 } } }
		}
		modifier = {
			factor = 1.5
			liege = { NOT = { reverse_opinion = { who = ROOT value = -39 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = ROOT value = -49 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = ROOT value = -59 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = ROOT value = -69 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = ROOT value = -79 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = ROOT value = -89 } } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { reverse_opinion = { who = ROOT value = -99 } } }
		}

		modifier = {
			factor = 2
			tier = KING
		}

		modifier = {
			factor = 5
			primary_title = { holder_scope = { liege = { NOT = { any_demesne_title = { de_jure_vassal_or_below = PREVPREV } } } } }
		}

		modifier = {
			factor = 0.5
			liege = {
				OR = {
					has_landed_title = e_iron_throne
					has_landed_title = e_new_valyria
				}
			}
		}

		modifier = {
			factor = 0.25
			liege = { culture_group = ROOT }
		}
		modifier = {
			factor = 0.5
			liege = { religion = ROOT }
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 0.5
			liege = { religion = ROOT }
			trait = zealous
		}
		modifier = {
			factor = 4
			liege = { NOT = { culture_group = ROOT } }
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion = ROOT } }
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion_group = ROOT } }
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion = ROOT } }
			trait = zealous
		}
		modifier = {
			factor = 2
			liege = { NOT = { religion_group = ROOT } }
			trait = zealous
		}

		modifier = {
			factor = 4
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = envious
		}
		modifier = {
			factor = 1.5
			trait = deceitful
		}
		modifier = {
			factor = 0.1
			trait = humble
		}
		modifier = {
			factor = 10.0
			trait = ambitious
		}
		modifier = {
			factor = 0.8
			trait = honest
		}
		modifier = {
			factor = 1.25
			trait = deceitful
		}
		modifier = {
			factor = 2
			trait = arbitrary
		}
		modifier = {
			factor = 0.5
			trait = just
		}
		modifier = {
			factor = 1.25
			trait = brave
		}
		modifier = {
			factor = 0.1
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0
			trait = content
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Small lords must have a strong fellow vassal to attach to
		modifier = {
			factor = 0
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			NOT = { higher_tier_than = COUNT }
			liege = {
				higher_tier_than = DUKE
				NOT = {
					any_vassal = {
						in_faction = faction_independence
						higher_tier_than = ROOT
						culture_group = ROOT
						religion = ROOT
						any_realm_province = {
							any_neighbor_province = {
								owner = {
									character = ROOT
								}
							}
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			is_allied_with = FROM
		}
		modifier = {
			factor = 5
			is_allied_with = FROM
		}
		modifier = {
			factor = 0
			trait = honorable
			liege = { is_allied_with = ROOT }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			liege = { is_allied_with = ROOT }
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = ROOT }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_independence
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			liege = { war = yes }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			liege = { war = yes }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			liege = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			liege = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			liege = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			liege = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			liege = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			liege = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			trait = craven
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			liege = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion of faction leader effects
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -99 } }
		}

		# Clans are very unlikely to join Independence factions led by non-nomads
		modifier = {
			factor = 0.01
			is_nomadic = yes
			FROM = {
				is_nomadic = no
			}
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	success = {
		independent = yes
	}

	abort = {
		always = no
	}

	abort_effect = {
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_independence
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}

# Support Claimant to Liege Title
faction_claimant = {
	type = liege_titles_w_claimant # 'new_character' is a Claimant, or, if the title is Elective, anyone eligible for election
	exclusive = yes # Can only lead or be in one faction of this type

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		liege = {
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
			NOT = { government = alliance_government }
		}
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}
		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }

		NOT = { has_character_modifier = faction_claimant_timer }
	}

	# Target scope
	allow = {
		OR = {
			is_primary_holder_title = yes
			higher_tier_than = DUKE
			holder_scope = { tier = DUKE }
		}
		OR = {
			NOT = { title = d_kingsguard }
			holder_scope = { NOT = { trait = kingsguard } }
		}
		OR = {
			NOT = { title = d_nightswatch }
			new_character = { trait = nightswatch }
		}
		FROM = { #Must either...
			OR = {
				ROOT = { is_primary_holder_title = yes } #is a primary title
				crownlaw_title = { title = ROOT } #Is my crownlaw title
				any_demesne_title = { ROOT = { de_jure_vassal_or_below = PREV } } #have land in the title
				new_character = { character = PREV } #be pressing my own claim
			}
		}
		# Can only press weak claims under certain circumstances
		OR = {
			new_character = { has_strong_claim = PREV }
			holder_scope = {
				OR = {
					has_regent = yes #Has regent
					trait = bastard #Questionable legitimacy
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard }
					AND = { #tyranny in noble oligarchy
						government = noble_oligarchy
						check_variable = { which = "tyrant" value = 15 }
						NOT = { trait = tyrannical_stain }
					}
				}
			}
			is_contested = yes # Is already being contested in some form of Claim or Succession War

			# Claimant is the correct gender AND either..
			# ...Holder is the wrong gender OR Claimant is a close relative of the holder
			AND = {
				OR = {
					has_law = cognatic_succession
					has_law = agnatic_succession
				}
				new_character = { is_female = no }
				holder_scope = {
					OR = {
						is_female = yes
						new_character = { is_close_relative = PREV }
					}
				}
			}
			AND = {
				has_law = true_cognatic_succession
				holder_scope = {
					new_character = { is_close_relative = PREV }
				}
			}
			AND = {
				OR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
				new_character = { is_female = yes }
				holder_scope = {
					OR = {
						is_female = no
						new_character = { is_close_relative = PREV }
					}
				}
			}
			#Night's Watch conditions
			AND = {
				holder_scope = { trait = nightswatch }
				new_character = {
					trait = nightswatch
					OR = {
						trait = ambitious
						trait = ruthless
						trait = proud
					}
					NOT = { trait = content }
					NOT = { trait = honorable }
					NOT = { trait = just }
					OR = {
						is_councillor = yes
						is_ruler = yes
						diplomacy = 15
						prestige = 750
					}
				}
			}
		}
		new_character = {
			NOT = { has_landed_title = PREV }
			NOT = { is_vassal_or_below = FROM }
			is_alive = yes #vanilla bug
			can_press_claims_trigger = yes
			NOT = { has_character_flag = danys_eastern_quest }
			ROOT = {
				holder_scope = {
					NOT = {
						defending_against_claimant = {
							character = PREVPREV
							title = ROOT
						}
					}
				}
			}
			#Claimants who like their liege or are honorable can't be used if they are strong
			NAND = {
				is_adult = yes
				NOT = { character = FROM }
				OR = {
					is_female = no
					female_get_masculine_event_trigger = yes
					martial = 20
				}
				OR = {
					higher_tier_than = COUNT
					trait = authoritative
					martial = 15
				}
				is_incapable = no
				OR = {
					trait = content
					AND = {
						trait = honorable
						ROOT = {
							holder_scope = {
								is_female = no
								is_close_relative = PREVPREV
							}
						}
					}
					AND = {
						NOT = { trait = ambitious }
						NOT = { trait = ruthless }
						ROOT = {
							holder_scope = {
								reverse_opinion = { who = PREVPREV value = 60 }
							}
						}
					}
				}
			}
		}
		NOT = { holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_leaving_faction } } }
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no

			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }

			# Can't join factions when in blood oath with liege
			OR = {
				is_nomadic = no
				NOT = { has_dlc = "Horse Lords" }
				liege = {
					NOT = { has_blood_oath_with = PREV }
				}
			}
		}
	}

	# AI creation weight
	chance = {
		factor = 3

		# Faction Motives
			# I despise the current ruler (and their regent if applicable), and dont mind the claimant
			# I dislike the current ruler (and their regent if applicable) and like the claimant, or can control the claimant
			# I wish to become the ruler myself
			# I am more closely related to this character than the current ruler
			# I am Just and believe the current ruler is illegitimate
			# My religion is threatened
			# I can manipulate the realm as regent
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					reverse_opinion = { who = FROM value = -79 }
					AND = {
						has_regent = yes
						regent = { reverse_opinion = { who = FROM value = -39 } }
					}
					NOT = { new_character = { reverse_opinion = { who = FROM value = -39 } } }
				}
			}
			holder_scope = {
				OR = {
					reverse_opinion = { who = FROM value = -25 }
					AND = {
						has_regent = yes
						regent = {
							NOT = { new_character = { character = PREV } }
							reverse_opinion = { who = FROM value = 5 }
						}
					}
					new_character = {
						NAND = {
							reverse_opinion = { who = FROM value = -25 }
							opinion_diff = { first = FROM second = PREV value = 15 as_if_liege = yes }
						}
						age = 14 #will become regent
						is_incapable = no
					}
				}
			}
			new_character = { NOT = { character = FROM } }
			OR = {
				holder_scope = { dynasty = FROM }
				new_character = { NOT = { dynasty = FROM } }
			}
			OR = {
				holder_scope = {
					OR = {
						is_close_relative = FROM
						is_married = FROM
					}
				}
				new_character = {
					NOT = { is_close_relative = FROM }
					NOT = { is_married = FROM }
				}
			}
			OR = {
				holder_scope = {
					OR = {
						is_close_relative = FROM
						is_married = FROM
						any_spouse = { is_close_relative = FROM }
					}
				}
				new_character = { NOT = { is_married = FROM } }
			}
			NAND = {
				FROM = { trait = just }
				holder_scope = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_fought_for_claimant } } }
				OR = {
					AND = {
						holder_scope = { trait = bastard }
						new_character = { NOT = { trait = bastard } }
					}
					AND = {
						holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } }
						new_character = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } } }
					}
					AND = {
						holder_scope = { new_character = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } } }
						any_previous_holder = { is_alive = yes new_character = { character = PREV } }
					}
				}
			}
			OR = {
				holder_scope = { religion = FROM }
				new_character = { NOT = { religion = FROM } }
				AND = {
					FROM = { NOT = { trait = zealous } }
					holder_scope = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_religion_threatened } } }
				}
			}
			holder_scope = {
				OR = {
					has_regent = yes
					reverse_opinion = { who = FROM value = 25 }
					FROM = {
						OR = {
							trait = honorable
							trait = content
							trait = just
							AND = {
								NOT = { trait = ruthless }
								NOT = { trait = ambitious }
							}
						}
					}
					new_character = {
						age = 13
						is_incapable = no
					}
				}
			}
		}

		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}
		# # Will not install a parent of the current ruler's
		# modifier = {
			# factor = 0
			# new_character = {
				# NOT = { character = FROM }
				# ROOT = { holder_scope = { NOT = { is_child_of = PREVPREV } } }
			# }
		# }

		#High Septon needs power
		modifier = {
			factor = 0
			FROM = {
				has_landed_title = k_the_most_devout
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}

		modifier = {
			factor = 2
			FROM = {
				has_cutthroat_religion_trigger = yes
			}
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		# Usually dont back foreign claimant if liege is not independent
		modifier = {
			factor = 0
			new_character = {
				is_ruler = yes
				NOT = { same_realm = FROM }
				NOT = { character = FROM }
			}
			FROM = {
				liege = { independent = no }
				top_liege = {
					OR = {
						culture = PREV
						religion = PREV
						reverse_opinion = { who = PREV value = 0 }
					}
				}
			}
		}

		# Be reluctant to oppose a ruler whose claim is very strong
		modifier = {
			factor = 0.1
			FROM = { NOT = { trait = arbitrary } }
			holder_scope = {
				OR = {
					ROOT = { has_law = true_cognatic_succession }
					AND = {
						is_female = no
						ROOT = {
							OR = {
								has_law = cognatic_succession
								has_law = agnatic_succession
							}
						}
					}
					AND = {
						is_female = yes
						ROOT = {
							OR = {
								has_law = enatic_cognatic_succession
								has_law = enatic_succession
							}
						}
					}
				}
				NOT = { trait = bastard }
				NOT = { trait = legit_bastard }
				NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } }
				NOT = {
					ROOT = {
						new_character = {
							has_strong_claim = PREV
							OR = {
								has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title }
								NOT = { family = PREVPREV }
							}
						}
					}
				}
			}
		}

		# Be reluctant to change dynasties, unless ambitious and supporting own dynasty, supporting a strong claim, or opposing a usurper
		modifier = {
			factor = 0.1
			FROM = { NOT = { trait = arbitrary } }
			holder_scope = {
				new_character = {
					NOT = { dynasty = PREV }
					NOT = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } }
				}
			}
			new_character = { NOT = { has_strong_claim = PREV } }
			FROM = {
				OR = {
					NOT = { trait = ambitious }
					NOT = { new_character = { dynasty = PREV } }
				}
			}
		}

		# I previously helped the current holder gain the title
		modifier = {
			factor = 0.25
			FROM = { NOT = { trait = arbitrary } }
			FROM = { NOT = { trait = lunatic } }
			holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_fought_for_claimant } }
		}

		# General Self-Interest Modifier
		modifier = {
			factor = 0
			FROM = { NOT = { trait = just } }
			NOT = { new_character = { character = FROM } }
			OR = {
				current_heir = { character = FROM }
				AND = {
					current_heir = { is_close_relative = FROM }
					new_character = { NOT = { is_close_relative = FROM } }
				}
				AND = {
					current_heir = { dynasty = FROM }
					new_character = {
						NOT = { dynasty = FROM }
						NOT = { is_close_relative = FROM }
					}
				}
			}
		}

		# Just characters will not create such a faction unless they believe the ruler is illegitimate
		modifier = {
			factor = 0
			FROM = { trait = just }
			NAND = {
				holder_scope = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_fought_for_claimant } } }
				OR = {
					AND = {
						holder_scope = { trait = bastard }
						new_character = { NOT = { trait = bastard } }
					}
					AND = {
						holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } }
						new_character = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } } }
					}
					AND = {
						holder_scope = { new_character = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } } }
						any_previous_holder = { is_alive = yes new_character = { character = PREV } }
					}
				}
			}
		}

		# Just characters who DO believe the ruler is illegitimate will be extra-eager to support the legitimate claimant
		modifier = {
			factor = 5
			FROM = { trait = just }
			holder_scope = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_fought_for_claimant } } }
			OR = {
				AND = {
					holder_scope = { trait = bastard }
					new_character = { NOT = { trait = bastard } }
				}
				AND = {
					holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } }
					new_character = { NOT = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } } }
				}
				AND = {
					holder_scope = { new_character = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } } }
					any_previous_holder = { is_alive = yes new_character = { character = PREV } }
				}
			}
		}

		# Patricians dont want to topple the republic
		modifier = {
			factor = 0
			FROM = {
				OR = {
					is_patrician = yes
					any_dynasty_member = { is_patrician = yes same_realm = PREV }
				}
			}
			is_primary_holder_title = yes
			holder_scope = { is_merchant_republic = yes }
			new_character = {
				OR = {
					is_patrician = no
					NOT = { liege = { has_landed_title = ROOT } }
				}
			}
		}
		#General reluctance to topple Republic
		modifier = {
			factor = 0.25
			FROM = {
				NOT = { trait = arbitrary }
				NOT = { trait = ruthless }
			}
			is_primary_holder_title = yes
			holder_scope = { is_merchant_republic = yes }
			new_character = {
				OR = {
					is_patrician = no
					NOT = { liege = { has_landed_title = ROOT } }
				}
			}
		}

		# Content characters will not support themselves
		modifier = {
			factor = 0
			new_character = {
				trait = content
				character = FROM
			}
		}

		# Zealous characters will not support heathens or heretics
		modifier = {
			factor = 0
			FROM = { trait = zealous }
			new_character = {
				NOT = { religion = FROM }
				NOT = { character = FROM }
			}
		}

		#Zealous characters are threatened by heathen liege
		modifier = {
			factor = 5
			holder_scope = { NOT = { religion = FROM } }
			new_character = { religion = FROM }
			FROM = { trait = zealous }
		}

		#High Septon Blessing Refused
		modifier = {
			factor = 1.5
			holder_scope = {
				tier = EMPEROR
				has_character_flag = unblessed_king
				religion = FROM
			}
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			FROM = { trait = honorable }
			new_character = {
				OR = {
					is_allied_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 5
			new_character = {
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0
			FROM = { trait = honorable }
			holder_scope = {
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.1
			holder_scope = {
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 5
			new_character = {
				same_society_as = FROM
				NOT = { character = FROM }
			}
		}
		modifier = {
			factor = 0.2
			holder_scope = { same_society_as = FROM }
		}

		# Lover considerations
		modifier = {
			factor = 0
			FROM = { NOT = { trait = ruthless } }
			holder_scope = { is_lover = FROM }
		}
		modifier = {
			factor = 10
			FROM = { NOT = { trait = just } }
			new_character = { is_lover = FROM }
		}

		#Gender Bias
		modifier = { # Will not install old women
			factor = 0
			OR = {
				has_law = cognatic_succession
				has_law = agnatic_succession
			}
			new_character = {
				is_female = yes
				age = 40
				NOT = { character = FROM }
			}
		}
		modifier = {
			factor = 0.2
			FROM = { NOT = { trait = arbitrary } }
			new_character = { is_female = yes }
			OR = {
				has_law = cognatic_succession
				has_law = agnatic_succession
			}
		}
		modifier = {
			factor = 0
			FROM = { trait = just }
			new_character = { is_female = yes }
			OR = {
				has_law = cognatic_succession
				has_law = agnatic_succession
			}
		}
		modifier = {
			factor = 0.2
			FROM = { NOT = { trait = arbitrary } }
			new_character = { is_female = no }
			OR = {
				has_law = enatic_succession
				has_law = enatic_cognatic_succession
			}
		}
		modifier = {
			factor = 0
			FROM = { trait = just }
			new_character = { is_female = no }
			OR = {
				has_law = enatic_succession
				has_law = enatic_cognatic_succession
			}
		}

		# Generally prefer older siblings
		modifier = {
			factor = 0.15
			new_character = {
				NOT = { character = FROM }
				any_sibling = {
					is_older_than = PREV
					is_alive = yes
					has_claim = ROOT
					can_press_claims_trigger = yes
					OR = {
						ROOT = { has_law = true_cognatic_succession }
						AND = {
							is_female = no
							ROOT = {
								OR = {
									has_law = cognatic_succession
									has_law = agnatic_succession
								}
							}
						}
						AND = {
							is_female = yes
							ROOT = {
								OR = {
									has_law = enatic_succession
									has_law = enatic_cognatic_succession
								}
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 0
			FROM = { trait = just }
			new_character = {
				any_sibling = {
					is_older_than = PREV
					is_alive = yes
					has_claim = ROOT
					can_press_claims_trigger = yes
					OR = {
						ROOT = { has_law = true_cognatic_succession }
						AND = {
							is_female = no
							ROOT = {
								OR = {
									has_law = cognatic_succession
									has_law = agnatic_succession
								}
							}
						}
						AND = {
							is_female = yes
							ROOT = {
								OR = {
									has_law = enatic_succession
									has_law = enatic_cognatic_succession
								}
							}
						}
					}
				}
			}
		}

		#Dynastic Loyalty
		modifier = {
			factor = 0.05
			holder_scope = {
				reverse_has_opinion_modifier = { who = FROM modifier = opinion_dynasty_loyalist }
				new_character = { NOT = { dynasty = PREV } }
			}
			FROM = { NOT = { trait = arbitrary } }
		}
		modifier = {
			factor = 5
			holder_scope = {
				NOT = { reverse_has_opinion_modifier = { who = ROOT_FROM modifier = opinion_dynasty_loyalist } }
				new_character = {
					reverse_has_opinion_modifier = { who = ROOT_FROM modifier = opinion_dynasty_loyalist }
					NOT = { dynasty = PREV }
				}
			}
		}

		# Strong claims are better than weak ones
		modifier = {
			factor = 0.1
			FROM = { NOT = { trait = arbitrary } }
			new_character = { NOT = { has_strong_claim = PREV } }
			NOT = { holder_scope = { has_regent = yes } }
			NOT = { is_contested = yes }
			NOT = { holder_scope = { trait = bastard } }
			NOT = { holder_scope = { reverse_has_opinion_modifier = { who = FROM modifier = opinion_suspected_bastard } } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}

			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		# Opinion of Current Ruler vs claimant
		modifier = { # Will not form faction if like liege (and is not just, ambitious)
			factor = 0
			holder_scope = { reverse_opinion = { who = FROM value = 40 } }
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ambitious }
				NOT = { trait = ruthless }
			}
		}
		modifier = { # Will not form faction if greatly prefer liege to claimant (and is not just, ambitious)
			factor = 0
			FROM = {
				NOT = { trait = just }
				NOT = { trait = ambitious }
				NOT = { trait = ruthless }
			}
			new_character = {
				NOT = { character = FROM }
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 50 as_if_liege = yes }
					}
				}
			}
		}

		modifier = {
			factor = 4
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 160 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 130 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 100 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 80 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 60 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 2.25
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 40 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 2.25
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 20 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 1.5
			holder_scope = {
				new_character = {
					opinion_diff = { first = FROM second = PREV value = 10 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 0.66
			new_character = {
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 10 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			new_character = {
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 20 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			new_character = {
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 40 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			new_character = {
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 60 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			new_character = {
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 80 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			new_character = {
				ROOT = {
					holder_scope = {
						opinion_diff = { first = FROM second = PREVPREV value = 100 as_if_liege = yes }
					}
				}
			}
		}

		# Ambitious characters will want to back themselves
		modifier = {
			factor = 5
			new_character = { character = FROM }
		}
		# Ambitious characters will want to back themselves
		modifier = {
			factor = 5
			new_character = { character = FROM }
			FROM = { trait = ambitious }
		}
		# Ambition-Specific Modifiers
		modifier = {
			factor = 10
			FROM = { has_ambition = obj_bloodline_iron_throne }
			title = e_iron_throne
			new_character = {
				OR = {
					character = FROM
					is_married = FROM
					dynasty = FROM
					any_spouse = { dynasty = FROM }
				}
			}
		}
		modifier = {
			factor = 10
			OR = {
				FROM = { has_ambition = obj_become_lord_paramount }
				AND = {
					tier = EMPEROR
					FROM = { has_ambition = obj_become_king }
				}
			}
			new_character = { character = FROM }
		}
		# General Trait Modifiers
		modifier = {
			factor = 4
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = ruthless }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = wroth }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = selfish }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = deceitful }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = patient }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}
		modifier = {
			factor = 0.05
			FROM = { trait = content }
		}

		modifier = {
			factor = 2.0
			holder_scope = {
				dynasty_realm_power = 0.25
			}
			new_character = {
				ROOT = {
					holder_scope = {
						NOT = { dynasty = PREVPREV }
					}
				}
			}
		}
		modifier = {
			factor = 2.0
			holder_scope = {
				dynasty_realm_power = 0.4
			}
			new_character = {
				ROOT = {
					holder_scope = {
						NOT = { dynasty = PREVPREV }
					}
				}
			}
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = COUNT
				NOT = { relative_power_to_liege = 0.2 }
			}
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = KING
				relative_power_to_liege = 0.2
			}
		}
		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 3

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_liege_loyalist
				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		# Faction Motives
			# I despise the current ruler (and their regent if applicable), and dont mind the claimant
			# I dislike the current ruler and their regent if applicable) and like the claimant
			# I wish to become the ruler myself
			# I wish to support a relative or lover
			# I am Just and believe the current ruler is illegitimate
			# I have been coerced into joining this faction
			# My religion is threatened
		modifier = {
			factor = 0
			FROMFROM = {
				holder_scope = {
					OR = {
						reverse_opinion = { who = ROOT value = -79 }
						AND = {
							has_regent = yes
							regent = { reverse_opinion = { who = ROOT value = -39 } }
						}
						NOT = { new_character = { reverse_opinion = { who = ROOT value = -39 } } }
					}
				}
				holder_scope = {
					OR = {
						reverse_opinion = { who = ROOT value = -25 }
						AND = {
							has_regent = yes
							regent = {
								NOT = { new_character = { character = PREV } }
								reverse_opinion = { who = ROOT value = 5 }
							}
						}
						new_character = {
							NAND = {
								reverse_opinion = { who = ROOT value = -25 }
								opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
							}
						}
					}
				}
				new_character = { NOT = { character = ROOT } }
				OR = {
					holder_scope = { dynasty = ROOT }
					new_character = { NOT = { dynasty = ROOT } }
				}
				OR = {
					holder_scope = {
						OR = {
							is_close_relative = ROOT
							is_married = ROOT
						}
					}
					new_character = {
						NOT = { is_close_relative = ROOT }
						NOT = { is_married = ROOT }
					}
				}
				OR = {
					holder_scope = {
						OR = {
							is_close_relative = ROOT
							is_married = ROOT
							any_spouse = { is_close_relative = ROOT }
						}
					}
					new_character = { NOT = { is_married = ROOT } }
				}
				NAND = {
					ROOT = { trait = just }
					holder_scope = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_fought_for_claimant } } }
					OR = {
						AND = {
							holder_scope = { trait = bastard }
							new_character = { NOT = { trait = bastard } }
						}
						AND = {
							holder_scope = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } }
							new_character = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } } }
						}
						AND = {
							holder_scope = { new_character = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } } }
							any_previous_holder = { is_alive = yes new_character = { character = PREV } }
						}
					}
				}
				OR = {
					holder_scope = { religion = ROOT }
					new_character = { NOT = { religion = ROOT } }
					AND = {
						ROOT = { NOT = { trait = zealous } }
						holder_scope = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_religion_threatened } } }
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Coercion Effects
		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		#If not my crown law or territory then doesn't effect me
		modifier = {
			factor = 0
			NOR = { #Must either...
				FROMFROM = { is_primary_holder_title = yes } #is a primary title
				crownlaw_title = { title = FROMFROM } #Is my crownlaw title
				any_demesne_title = { ROOT_FROMFROM = { de_jure_vassal_or_below = PREV } } #have land in the title
				new_character = { #be pressing my family's claim
					OR = {
						character = ROOT
						is_close_relative = ROOT
					}
				}
			}
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Will not install a parent of the current ruler's
		modifier = {
			factor = 0
			new_character = {
				ROOT = {
					liege = {
						OR = {
							is_father = PREVPREV
							is_mother = PREVPREV
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			pacifist = yes
			NOT = { trait = cynical }
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			liege = {
				any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
			}
		}

		# Usually dont back foreign claimant if liege is not independent
		modifier = {
			factor = 0
			new_character = {
				is_ruler = yes
				NOT = { same_realm = ROOT }
			}
			liege = { independent = no }
			top_liege = {
				OR = {
					culture = PREV
					religion = PREV
					reverse_opinion = { who = PREV value = 0 }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Be reluctant to oppose a ruler whose claim is very strong
		modifier = {
			factor = 0.1
			NOT = { trait = arbitrary }
			liege = {
				OR = {
					FROMFROM = { has_law = true_cognatic_succession }
					AND = {
						is_female = no
						FROMFROM = {
							OR = {
								has_law = cognatic_succession
								has_law = agnatic_succession
							}
						}
					}
					AND = {
						is_female = yes
						FROMFROM = {
							OR = {
								has_law = enatic_cognatic_succession
								has_law = enatic_succession
							}
						}
					}
				}
				NOT = { trait = bastard }
				NOT = { trait = legit_bastard }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } }
				NOT = {
					FROMFROM = {
						new_character = {
							has_strong_claim = PREV
							OR = {
								has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title }
								NOT = { family = PREVPREV }
							}
						}
					}
				}
			}
		}

		# Be reluctant to change dynasties, unless ambitious and supporting own dynasty, supporting a strong claim, or opposing a usurper
		modifier = {
			factor = 0.1
			NOT = { trait = arbitrary }
			FROMFROM = {
				holder_scope = {
					new_character = {
						NOT = { dynasty = PREV }
						NOT = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } }
					}
				}
				new_character = { NOT = { has_strong_claim = PREV } }
			}
			OR = {
				NOT = { trait = ambitious }
				NOT = { new_character = { dynasty = ROOT } }
			}
		}

		# I previously helped the current holder gain the title
		modifier = {
			factor = 0.25
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			FROMFROM = { holder_scope = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_fought_for_claimant } } }
		}

		# General Self-Interest Modifier
		modifier = {
			factor = 0
			NOT = { trait = just }
			FROMFROM = {
				OR = {
					AND = {
						current_heir = { character = ROOT }
						new_character = { NOT = { character = ROOT } }
					}
					AND = {
						current_heir = { is_close_relative = ROOT }
						new_character = {
							NOT = { is_close_relative = ROOT }
							NOT = { character = ROOT }
						}
						NOT = { new_character = { character = ROOT } }
					}
					AND = {
						current_heir = { dynasty = ROOT }
						new_character = {
							NOT = { dynasty = ROOT }
							NOT = { character = ROOT }
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will not join such a faction unless they believe the ruler is illegitimate or they are forced
		modifier = {
			factor = 0
			trait = just
			FROMFROM = {
				NAND = {
					holder_scope = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_fought_for_claimant } } }
					OR = {
						AND = {
							holder_scope = { trait = bastard }
							new_character = { NOT = { trait = bastard } }
						}
						AND = {
							holder_scope = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } }
							new_character = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } } }
						}
						AND = {
							holder_scope = { new_character = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } } }
							any_previous_holder = { is_alive = yes new_character = { character = PREV } }
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will be very eager to join such a faction if they DO believe the ruler is illegitimate
		modifier = {
			factor = 5
			trait = just
			FROMFROM = {
				holder_scope = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_fought_for_claimant } } }
				OR = {
					AND = {
						holder_scope = { trait = bastard }
						new_character = { NOT = { trait = bastard } }
					}
					AND = {
						holder_scope = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } }
						new_character = { NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } } }
					}
					AND = {
						holder_scope = { new_character = { has_opinion_modifier = { who = PREV modifier = opinion_usurped_title } } }
						any_previous_holder = { is_alive = yes new_character = { character = PREV } }
					}
				}
			}
		}

		# Patricians dont want to topple the republic
		modifier = {
			factor = 0
			OR = {
				is_patrician = yes
				any_dynasty_member = { is_patrician = yes same_realm = ROOT }
			}
			FROMFROM = {
				is_primary_holder_title = yes
				holder_scope = { is_merchant_republic = yes }
				new_character = {
					OR = {
						is_patrician = no
						NOT = { liege = { has_landed_title = PREVPREV } }
					}
				}
			}
		}
		#General reluctance to topple Republic
		modifier = {
			factor = 0.25
			NOT = { trait = arbitrary }
			NOT = { trait = ruthless }
			FROMFROM = {
				is_primary_holder_title = yes
				holder_scope = { is_merchant_republic = yes }
				new_character = {
					OR = {
						is_patrician = no
						NOT = { liege = { has_landed_title = PREVPREV } }
					}
				}
			}
		}

		# Content characters will not support themselves
		modifier = {
			factor = 0
			new_character = {
				trait = content
				character = ROOT
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Zealous characters will not support heathens or heretics unless they are forced
		modifier = {
			factor = 0
			trait = zealous
			new_character = { NOT = { religion = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		#Zealous characters are threatened by heathen liege
		modifier = {
			factor = 5
			FROMFROM = { holder_scope = { NOT = { religion = ROOT } } }
			new_character = { religion = ROOT }
			trait = zealous
		}
		#High Septon Blessing Refused
		modifier = {
			factor = 1.5
			FROMFROM = {
				holder_scope = {
					religion = ROOT
					tier = EMPEROR
					has_character_flag = unblessed_king
				}
			}
		}


		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			OR = {
				new_character = {
					OR = {
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
						is_friend = ROOT
					}
				}
				is_allied_with = FROM
				is_friend = FROM
			}
		}
		modifier = {
			factor = 5
			OR = {
				new_character = {
					OR = {
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
						is_friend = ROOT
					}
				}
				is_allied_with = FROM
				is_friend = FROM
			}
		}
		modifier = {
			factor = 0
			trait = honorable
			FROMFROM = {
				holder_scope = {
					OR = {
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
						is_friend = ROOT
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = {
				holder_scope = {
					OR = {
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
						is_friend = ROOT
					}
				}
			}
		}
		modifier = {
			factor = 5
			OR = {
				new_character = {
					same_society_as = ROOT
					NOT = { character = ROOT }
				}
				same_society_as = FROM
			}
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { same_society_as = ROOT } }
		}

		# Lover considerations
		modifier = {
			factor = 0
			NOT = { trait = ruthless }
			FROMFROM = { holder_scope = { is_lover = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 10
			NOT = { trait = just }
			new_character = { is_lover = ROOT }
		}

		#Gender Bias
		modifier = { # Will not install old women
			factor = 0
			FROMFROM = {
				OR = {
					has_law = cognatic_succession
					has_law = agnatic_succession
				}
			}
			new_character = {
				is_female = yes
				age = 40
			}
		}
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			new_character = { is_female = yes }
			FROMFROM = {
				OR = {
					has_law = cognatic_succession
					has_law = agnatic_succession
				}
			}
		}
		modifier = {
			factor = 0
			trait = just
			new_character = { is_female = yes }
			FROMFROM = {
				OR = {
					has_law = cognatic_succession
					has_law = agnatic_succession
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			new_character = { is_female = no }
			FROMFROM = {
				OR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
			}
		}
		modifier = {
			factor = 0
			trait = just
			new_character = { is_female = no }
			FROMFROM = {
				OR = {
					has_law = enatic_succession
					has_law = enatic_cognatic_succession
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Generally prefer older siblings
		modifier = {
			factor = 0.15
			new_character = {
				any_sibling = {
					is_older_than = PREV
					is_alive = yes
					has_claim = FROMFROM
					can_press_claims_trigger = yes
					OR = {
						FROMFROM = { has_law = true_cognatic_succession }
						AND = {
							is_female = no
							FROMFROM = {
								OR = {
									has_law = cognatic_succession
									has_law = agnatic_succession
								}
							}
						}
						AND = {
							is_female = yes
							FROMFROM = {
								OR = {
									has_law = enatic_succession
									has_law = enatic_cognatic_succession
								}
							}
						}
					}
				}
			}
		}
		modifier = {
			factor = 0
			trait = just
			new_character = {
				any_sibling = {
					is_older_than = PREV
					is_alive = yes
					has_claim = FROMFROM
					can_press_claims_trigger = yes
					OR = {
						FROMFROM = { has_law = true_cognatic_succession }
						AND = {
							is_female = no
							FROMFROM = {
								OR = {
									has_law = cognatic_succession
									has_law = agnatic_succession
								}
							}
						}
						AND = {
							is_female = yes
							FROMFROM = {
								OR = {
									has_law = enatic_succession
									has_law = enatic_cognatic_succession
								}
							}
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Dynastic Loyalty
		modifier = {
			factor = 0.05
			FROMFROM = {
				holder_scope = {
					reverse_has_opinion_modifier = { who = ROOT_FROM modifier = opinion_dynasty_loyalist }
					new_character = { NOT = { dynasty = PREV } }
				}
			}
			NOT = { trait = arbitrary }
		}
		modifier = {
			factor = 5
			FROMFROM = {
				holder_scope = {
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist } }
					new_character = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist }
						NOT = { dynasty = PREV }
					}
				}
			}
		}

		# Strong claims are better than weak ones
		modifier = {
			factor = 0.1
			NOT = { trait = arbitrary }
			FROMFROM = {
				new_character = { NOT = { has_strong_claim = PREV } }
				NOT = { holder_scope = { has_regent = yes } }
				NOT = { is_contested = yes }
				NOT = { holder_scope = { trait = bastard } }
				NOT = { holder_scope = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard } } }
			}
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			FROMFROM = { holder_scope = { war = yes } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			FROMFROM = { holder_scope = { war = yes } }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			FROMFROM = { holder_scope = { has_character_modifier = feared_1 } }
		}
		modifier = {
			factor = 0.5
			FROMFROM = { holder_scope = { has_character_modifier = feared_2 } }
		}
		modifier = {
			factor = 0.3
			FROMFROM = { holder_scope = { has_character_modifier = feared_3 } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { has_character_modifier = feared_4 } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = { holder_scope = { has_character_modifier = feared_5 } }
		}
		modifier = {
			factor = 0.1
			trait = craven
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROMFROM = {
				holder_scope = {
					has_character_modifier = defeated_major_revolt
					OR = {
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion of Current Ruler vs claimant
		modifier = { # Will not form faction if like liege (and is not just, ambitious)
			factor = 0
			FROMFROM = { holder_scope = { reverse_opinion = { who = ROOT value = 40 } } }
			NOT = { trait = just }
			NOT = { trait = ambitious }
			NOT = { trait = ruthless }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = { # Will not form faction if greatly prefer liege to claimant (and is not just, ambitious)
			factor = 0
			NOT = { trait = just }
			NOT = { trait = ambitious }
			NOT = { trait = ruthless }
			new_character = {
				NOT = { character = ROOT }
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 50 as_if_liege = yes }
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = {
			factor = 4
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 160 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 4
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 130 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 4
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 100 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 4
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 80 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 4
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 60 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 2.25
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 40 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 2.25
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 20 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 1.5
			FROMFROM = {
				holder_scope = {
					new_character = {
						opinion_diff = { first = ROOT second = PREV value = 10 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.66
			new_character = {
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 10 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			new_character = {
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 20 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			new_character = {
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 40 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			new_character = {
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 60 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			new_character = {
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 80 as_if_liege = yes }
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			new_character = {
				FROMFROM = {
					holder_scope = {
						opinion_diff = { first = ROOT second = PREVPREV value = 100 as_if_liege = yes }
					}
				}
			}
		}
		# Opinion of the faction leader (if they are not also the claimant)
		modifier = {
			factor = 1.56
			new_character = { NOT = { character = FROM } }
			opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 1.56
			new_character = { NOT = { character = FROM } }
			opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 1.56
			new_character = { NOT = { character = FROM } }
			opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 1.56
			new_character = { NOT = { character = FROM } }
			opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 1.56
			new_character = { NOT = { character = FROM } }
			opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 0.64
			new_character = { NOT = { character = FROM } }
			NOT = { opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 0.64
			new_character = { NOT = { character = FROM } }
			NOT = { opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 0.64
			new_character = { NOT = { character = FROM } }
			NOT = { opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 0.64
			new_character = { NOT = { character = FROM } }
			NOT = { opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 0.64
			new_character = { NOT = { character = FROM } }
			NOT = { opinion = { who = FROM value = -99 } }
		}

		# Ambitious characters will want to back themselves
		modifier = {
			factor = 5
			new_character = { character = ROOT }
		}
		modifier = {
			factor = 5
			new_character = { character = ROOT }
			trait = ambitious
		}

		# Ambition-Specific Modifiers
		modifier = {
			factor = 10
			has_ambition = obj_bloodline_iron_throne
			FROMFROM = {
				title = e_iron_throne
				new_character = {
					OR = {
						character = ROOT
						is_married = ROOT
						dynasty = ROOT
						spouse = { dynasty = ROOT }
					}
				}
			}
		}
		modifier = {
			factor = 10
			FROMFROM = {
				OR = {
					ROOT = { has_ambition = obj_become_lord_paramount }
					AND = {
						tier = EMPEROR
						ROOT = { has_ambition = obj_become_king }
					}
				}
				new_character = { character = ROOT }
			}
		}

		# General Trait Modifiers
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 1.25
			trait = wroth
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 1.25
			trait = deceitful
		}
		modifier = {
			factor = 0.5
			trait = patient
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = humble
		}
		modifier = {
			factor = 0.05
			trait = content
		}

		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.25
			}
			FROMFROM = {
				new_character = {
					ROOT = {
						liege = {
							NOT = { dynasty = PREVPREV }
						}
					}
				}
			}
		}

		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.4
			}
			FROMFROM = {
				new_character = {
					ROOT = {
						liege = {
							NOT = { dynasty = PREVPREV }
						}
					}
				}
			}
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_claimant
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}
	success = {
		always = no
	}

	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}

	abort_effect = {
		FROM = {
			clr_character_flag = claimant_rejects_invite
			clr_character_flag = kidnapped_failed
		}
	}

	effect = {
		FROM = {
			clr_character_flag = claimant_rejects_invite
			clr_character_flag = kidnapped_failed
		}
	}
}
# Depose Liege
faction_depose_liege = {
	type = character

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	cancel_on_leader_death = yes # The faction will not automatically continue under a new leader

	# Plotter scope
	potential = {
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}
		liege = { #Cannot be used in Kingsmoot realms
			NOT = { primary_title = { has_law = succ_kingsmoot_elective } }
			NOT = { trait = kingsguard }
		}
		NOT = { in_faction = faction_liege_loyalist }
		NOT = { in_faction = faction_claimant }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}
		NOT = { trait = archmaester }
		NOT = { culture = volantene }
	}

	# Target scope
	allow = {
		prisoner = no
		NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no
			NOT = { culture = volantene }

			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }

			# Can't join factions when in blood oath with liege
			OR = {
				is_nomadic = no
				NOT = { has_dlc = "Horse Lords" }
				liege = {
					NOT = { has_blood_oath_with = PREV }
				}
			}
		}
	}

	# AI creation weight
	chance = {
		factor = 2

		# Faction Motives
			# I despise the current ruler (and their regent if applicable), and dont mind the heir
			# I dislike the current ruler and like the heir (if they are not regent), or can control heir
			# I wish to become the ruler myself
			# I am more closely related to the heir than the current ruler
			# My religion is threatened
			# I'm the High Septon and think the current ruler is unholy
			# Lord Protector in interregnum
			# Be a Dothraki and the Khal is weak
			# Triarch for Life
		modifier = {
			factor = 0
			liege = {
				OR = {
					reverse_opinion = { who = ROOT value = -79 }
					AND = {
						has_regent = yes
						regent = { reverse_opinion = { who = ROOT value = -35 } }
					}
					NOT = { current_heir = { reverse_opinion = { who = ROOT value = -35 } } }
				}
				OR = {
					reverse_opinion = { who = ROOT value = -35 }
					AND = {
						has_regent = yes
						regent = { liege = { current_heir = { character = PREVPREV } } }
					}
					current_heir = {
						NAND = {
							reverse_opinion = { who = ROOT value = -35 }
							opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
						}
						age = 14 #will become regent
						is_incapable = no
					}
				}
				current_heir = {
					NOT = { character = ROOT }
				}
				OR = {
					dynasty = ROOT
					current_heir = { NOT = { dynasty = ROOT } }
				}
				OR = {
					is_close_relative = ROOT
					is_married = ROOT
					AND = {
						current_heir = { NOT = { is_close_relative = ROOT } }
						current_heir = { NOT = { is_married = ROOT } }
					}
				}
				OR = {
					religion = ROOT
					current_heir = { NOT = { religion = ROOT } }
					AND = {
						ROOT = { NOT = { trait = zealous } }
						NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_religion_threatened } }
					}
				}
				OR = {
					ROOT = { NOT = { has_landed_title = k_the_most_devout } }
					ROOT = { NOT = { religion = the_seven } }
					NOT = {
						OR = {
							is_any_kinslayer_trigger = yes
							trait = excommunicated
							NOT = { piety = -50 }
							NOT = { religion = the_seven }
							has_character_modifier = abomination_of_incest
							has_character_modifier = grandchild_of_incest
						}
					}
				}
				OR = {
					lower_tier_than = KING
					NOT = { primary_title = { is_variable_equal = { which = "lord_paramount_status" value = 2 } } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspended_council } }
				}
				OR = {
					is_merchant_republic = no
					NOT = { government = triarch_merchant_republic_government }
					NOT = { primary_title = { has_law = republic_triarch_for_life } }
					ROOT = { has_character_flag = title_triarch_for_life }
				}
			}
			OR = {
				AND = {
					NOT = { culture = jogos_nhai }
					NOT = { culture = dothraki }
					is_nomadic = no
				}
				liege = {
					is_female = no
					age = 16
					NOT = { is_weak_khal_trigger = yes }
					OR = {
						is_nomadic = no
						ROOT = { is_nomadic = no }
						reverse_clan_opinion = { who = ROOT value = -40 }
					}
				}
			}
		}

		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				has_character_modifier = in_seclusion
			}
		}
		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			in_faction = faction_claimant
		}

		#High Septon needs power
		modifier = {
			factor = 0
			has_landed_title = k_the_most_devout
			NOT = {
				crownlaw_title = {
					OR = {
						has_law = investiture_law_2
						has_law = investiture_law_3
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			pacifist = yes
			NOT = { trait = cynical }
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			liege = {
				any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
			}
		}

		# I previously helped the current holder gain the title
		modifier = {
			factor = 0.25
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_fought_for_claimant } }
		}

		# General Self-Interest Modifier
		modifier = {
			factor = 0
			NOT = { trait = just }
			liege = {
				NOT = { current_heir = { character = ROOT } }
				OR = {
					AND = {
						is_close_relative = ROOT
						current_heir = { NOT = { is_close_relative = ROOT } }
					}
					AND = {
						dynasty = ROOT
						current_heir = {
							NOT = { dynasty = ROOT }
							NOT = { is_close_relative = ROOT }
						}
					}
				}
			}
		}

		# Just characters will not create such a faction unless they believe the ruler is illegitimate
		modifier = {
			factor = 0
			trait = just
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			liege = {
				NOT = { has_character_modifier = abomination_of_incest }
				NOT = { is_any_kinslayer_trigger = yes }
				NOT = { trait = excommunicated }
				NOT = { trait = bastard }
				NAND = {
					is_merchant_republic = yes
					government = triarch_merchant_republic_government
					primary_title = { has_law = republic_triarch_for_life }
				}
			}
		}

		# Just characters who DO believe the ruler is illegitimate will be extra-eager to support the legitimate claimant
		modifier = {
			factor = 5
			trait = just
			liege = {
				OR = {
					has_character_modifier = abomination_of_incest
					is_any_kinslayer_trigger = yes
					trait = excommunicated
					trait = bastard
					AND = {
						is_merchant_republic = yes
						government = triarch_merchant_republic_government
						primary_title = { has_law = republic_triarch_for_life }
					}
				}
			}
		}

		# Content characters will not support themselves
		modifier = {
			factor = 0
			liege = {
				current_heir = {
					trait = content
					character = ROOT
				}
			}
		}

		#May prefer to back own claim
		modifier = {
			factor = 0.1
			NOT = { trait = just }
			liege = {
				current_heir = { NOT = { character = ROOT } }
				any_demesne_title = {
					tier = PREV
					ROOT = { has_claim = PREV }
				}
			}
		}

		modifier = { #Dothraki will not join an undesirable Khal
			factor = 0
			OR = {
				culture = dothraki
				culture = jogos_nhai
				is_nomadic = yes
			}
			liege = {
				current_heir = {
					OR = {
						NOT = { age = 16 }
						is_female = yes
						is_weak_khal_trigger = yes
						AND = {
							is_ruler = yes
							is_nomadic = yes
							ROOT = { is_nomadic = yes }
							NOT = { reverse_clan_opinion = { who = ROOT value = -20 } }
						}
					}
				}
			}
		}

		# Zealous characters will not support heathens or heretics
		modifier = {
			factor = 0
			trait = zealous
			NOT = { has_landed_title = k_the_most_devout } #can choose an heir
			liege = { current_heir = { NOT = { religion = ROOT } } }
		}
		#Zealous characters are threatened by heathen liege
		modifier = {
			factor = 5
			liege = {
				NOT = { religion = ROOT }
				current_heir = { religion = ROOT }
			}
			trait = zealous
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			liege = {
				current_heir = {
					OR = {
						is_allied_with = ROOT
						is_friend = ROOT
					}
				}
			}
		}
		modifier = {
			factor = 5
			liege = {
				current_heir = {
					OR = {
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
						is_friend = ROOT
					}
				}
			}
		}
		modifier = {
			factor = 0
			trait = honorable
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
		}
		modifier = {
			factor = 0.1
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
		}
		modifier = {
			factor = 5
			liege = {
				current_heir = {
					same_society_as = ROOT
					NOT = { character = ROOT }
				}
			}
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = ROOT }
		}

		# Lover considerations
		modifier = {
			factor = 0
			NOT = { trait = ruthless }
			liege = { is_lover = ROOT }
		}
		modifier = {
			factor = 10
			NOT = { trait = just }
			liege = { current_heir = { is_lover = ROOT } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			liege = { war = yes }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			liege = { war = yes }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			liege = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			liege = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			liege = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			liege = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			liege = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			liege = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			trait = craven
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion of Current Ruler vs claimant
		modifier = { # Will not form faction if like liege (and is not just, ambitious)
			factor = 0
			liege = { reverse_opinion = { who = ROOT value = 40 } }
			NOT = { trait = just }
			NOT = { trait = ambitious }
			NOT = { trait = ruthless }
		}
		modifier = { # Will not form faction if greatly prefer liege to claimant (and is not just, ambitious)
			factor = 0
			NOT = { trait = just }
			NOT = { trait = ambitious }
			NOT = { trait = ruthless }
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 50 as_if_liege = yes }
				}
			}
		}

		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 160 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 130 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 100 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 80 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 60 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 2.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 40 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 2.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 20 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 1.5
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 10 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 0.66
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 10 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 20 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 40 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 60 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 80 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 100 as_if_liege = yes }
						}
					}
				}
			}
		}


		modifier = {
			factor = 5
			liege = {
				current_heir = {
					character = ROOT
				}
			}
		}
		modifier = {
			factor = 5
			liege = {
				current_heir = {
					trait = ambitious
					character = ROOT
				}
			}
		}

		# Ambition-Specific Modifiers
		modifier = {
			factor = 10
			has_ambition = obj_bloodline_iron_throne
			liege = {
				has_landed_title = e_iron_throne
				current_heir = {
					OR = {
						character = ROOT
						is_married = ROOT
						dynasty = ROOT
						any_spouse = { dynasty = ROOT }
					}
				}
			}
		}
		modifier = {
			factor = 10
			OR = {
				has_ambition = obj_become_lord_paramount
				AND = {
					liege = { tier = EMPEROR }
					has_ambition = obj_become_king
				}
			}
			liege = { current_heir = { character = ROOT } }
		}
		# General Trait Modifiers
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 1.25
			trait = wroth
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 1.25
			trait = deceitful
		}
		modifier = {
			factor = 0.5
			trait = patient
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = humble
		}
		modifier = {
			factor = 0.05
			trait = content
		}

		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.25
				NOT = { dynasty = ROOT }
				current_heir = { NOT = { dynasty = ROOT } }
			}
		}
		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.4
				NOT = { dynasty = ROOT }
				current_heir = { NOT = { dynasty = ROOT } }
			}
		}
		##Holy Modifiers
		modifier = {
			factor = 3
			liege = {
				NOT = { religion = ROOT }
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_religion_threatened }
			}
		}
		modifier = {
			factor = 3
			religion = the_seven
			NOT = { trait = cynical }
			liege = {
				OR = {
					is_any_kinslayer_trigger = yes
					trait = excommunicated
					has_character_modifier = abomination_of_incest
				}
			}
		}
		modifier = {
			factor = 3
			religion = the_seven
			trait = zealous
			liege = {
				OR = {
					is_any_kinslayer_trigger = yes
					trait = excommunicated
					has_character_modifier = abomination_of_incest
				}
			}
		}
		modifier = {
			factor = 0.05
			has_landed_title = k_the_most_devout
			NOT = {
				crownlaw_title = {
					OR = {
						has_law = investiture_law_2
						has_law = investiture_law_3
					}
				}
			}
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			liege = { higher_tier_than = DUKE }
			tier = COUNT
			NOT = { relative_power_to_liege = 0.2 }
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			liege = { higher_tier_than = DUKE }
			tier = KING
			relative_power_to_liege = 0.2
		}
		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}

		# Dothraki reasons to dislike Khal
		modifier = {
			factor = 5
			liege = { has_character_modifier = greatest_of_khans }
		}
		modifier = {
			factor = 10
			liege = { has_feud_with = ROOT }
		}
		modifier = {
			factor = 0.05
			liege = { has_blood_oath_with = ROOT }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { age = 50 }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { is_female = yes }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 16 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 10 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				OR = {
					has_severe_disability_trigger = yes
					is_weak_trigger = yes
					is_lazy_trigger = yes
					is_imbecile_trigger = yes
					is_short_trigger = yes
					trait = clubfooted
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { prestige < 0 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 7 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 5 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 3 }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_liege_loyalist
				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		# Faction Motives
			# I despise the current ruler (and their regent if applicable), and dont mind the heir
			# I dislike the current ruler and like the heir (if they are not regent), or can control the heir
			# I wish to become the ruler myself
			# I wish to support a relative or lover
			# My religion is threatened
			# I want to join High Septon to depose
			# Lord Protector in interregnum
			# Be a Dothraki and the Khal is weak
			# Triarch for Life
			# I have been coerced into joining this faction
		modifier = {
			factor = 0
			liege = {
				OR = {
					reverse_opinion = { who = ROOT value = -79 }
					AND = {
						has_regent = yes
						regent = { reverse_opinion = { who = ROOT value = -35 } }
					}
					NOT = { current_heir = { reverse_opinion = { who = ROOT value = -35 } } }
				}
				OR = {
					reverse_opinion = { who = ROOT value = -35 }
					AND = {
						has_regent = yes
						regent = { liege = { current_heir = { character = PREVPREV } } }
					}
					current_heir = {
						NAND = {
							reverse_opinion = { who = ROOT value = -35 }
							opinion_diff = { first = ROOT second = PREV value = 15 as_if_liege = yes }
						}
					}
				}
				current_heir = {
					OR = {
						trait = content
						NOT = { character = ROOT }
					}
					NOT = { is_lover = ROOT }
				}
				OR = {
					dynasty = ROOT
					current_heir = { NOT = { dynasty = ROOT } }
				}
				OR = {
					is_close_relative = ROOT
					is_married = ROOT
					AND = {
						current_heir = { NOT = { is_close_relative = ROOT } }
						current_heir = { NOT = { is_married = ROOT } }
					}
				}
				OR = {
					religion = ROOT
					current_heir = { NOT = { religion = ROOT } }
					AND = {
						ROOT = { NOT = { trait = zealous } }
						NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_religion_threatened } }
					}
				}
				OR = {
					ROOT = { NOT = { religion = the_seven } }
					FROM = { NOT = { has_landed_title = k_the_most_devout } }
					FROM = { NOT = { religion = the_seven } }
					NOT = {
						OR = {
							is_any_kinslayer_trigger = yes
							trait = excommunicated
							NOT = { piety = -50 }
							NOT = { religion = the_seven }
							has_character_modifier = abomination_of_incest
							has_character_modifier = grandchild_of_incest
						}
					}
					ROOT = {
						NOT = { trait = zealous }
						opinion = { who = PREV value = 20 }
					}
				}
				OR = {
					lower_tier_than = KING
					NOT = { primary_title = { is_variable_equal = { which = "lord_paramount_status" value = 2 } } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspended_council } }
				}
				OR = {
					is_merchant_republic = no
					NOT = { government = triarch_merchant_republic_government }
					NOT = { primary_title = { has_law = republic_triarch_for_life } }
					ROOT = { has_character_flag = title_triarch_for_life }
				}
			}
			OR = {
				AND = {
					NOT = { culture = jogos_nhai }
					NOT = { culture = dothraki }
					is_nomadic = no
				}
				liege = {
					is_female = no
					age = 16
					NOT = { is_weak_khal_trigger = yes }
					OR = {
						is_nomadic = no
						ROOT = { is_nomadic = no }
						reverse_clan_opinion = { who = ROOT value = -40 }
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Coercion Effects
		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		modifier = {
			factor = 0
			OR = {
				prisoner = yes
				has_character_modifier = in_seclusion
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			in_faction = faction_claimant
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			pacifist = yes
			NOT = { trait = cynical }
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			liege = {
				any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
			}
		}

		# I previously helped the current holder gain the title
		modifier = {
			factor = 0.25
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			liege = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_fought_for_claimant } }
		}

		# General Self-Interest Modifier
		modifier = {
			factor = 0
			NOT = { trait = just }
			liege = {
				NOT = { current_heir = { character = ROOT } }
				OR = {
					AND = {
						is_close_relative = ROOT
						current_heir = { NOT = { is_close_relative = ROOT } }
					}
					AND = {
						dynasty = ROOT
						current_heir = {
							NOT = { dynasty = ROOT }
							NOT = { is_close_relative = ROOT }
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will not join such a faction unless they believe the ruler is illegitimate or they are forced
		modifier = {
			factor = 0
			trait = just
			NOT = { culture = dothraki }
			NOT = { culture = jogos_nhai }
			is_nomadic = no
			liege = {
				NOT = { has_character_modifier = abomination_of_incest }
				NOT = { is_any_kinslayer_trigger = yes }
				NOT = { trait = excommunicated }
				NOT = { trait = bastard }
				NAND = {
					is_merchant_republic = yes
					government = triarch_merchant_republic_government
					primary_title = { has_law = republic_triarch_for_life }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will be very eager to join such a faction if they DO believe the ruler is illegitimate
		modifier = {
			factor = 5
			trait = just
			liege = {
				OR = {
					has_character_modifier = abomination_of_incest
					is_any_kinslayer_trigger = yes
					trait = excommunicated
					trait = bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					current_heir = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } }
					AND = {
						is_merchant_republic = yes
						government = triarch_merchant_republic_government
						primary_title = { has_law = republic_triarch_for_life }
					}
				}
			}
		}

		# Content characters will not support themselves
		modifier = {
			factor = 0
			liege = {
				current_heir = {
					trait = content
					character = ROOT
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#May prefer to back own claim
		modifier = {
			factor = 0.1
			NOT = { trait = just }
			liege = {
				current_heir = { NOT = { character = ROOT } }
				any_demesne_title = {
					tier = PREV
					ROOT = { has_claim = PREV }
				}
			}
		}

		modifier = { #Dothraki will not join an undesirable Khal
			factor = 0
			OR = {
				culture = dothraki
				culture = jogos_nhai
				is_nomadic = yes
			}
			liege = {
				current_heir = {
					OR = {
						NOT = { age = 16 }
						is_female = yes
						is_weak_khal_trigger = yes
						AND = {
							is_ruler = yes
							is_nomadic = yes
							ROOT = { is_nomadic = yes }
							NOT = { reverse_clan_opinion = { who = ROOT value = -20 } }
						}
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Zealous characters will not support heathens or heretics unless they are forced
		modifier = {
			factor = 0
			trait = zealous
			liege = { current_heir = { NOT = { religion = ROOT } } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		#Zealous characters are threatened by heathen liege
		modifier = {
			factor = 5
			liege = {
				NOT = { religion = ROOT }
				current_heir = { religion = ROOT }
			}
			trait = zealous
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			OR = {
				liege = {
					current_heir = {
						OR = {
							is_allied_with = ROOT
							is_friend = ROOT
						}
					}
				}
				is_allied_with = FROM
			}
		}
		modifier = {
			factor = 5
			OR = {
				liege = {
					current_heir = {
						OR = {
							is_allied_with = ROOT
							has_non_aggression_pact_with = ROOT
							is_friend = ROOT
						}
					}
				}
				is_allied_with = FROM
				has_non_aggression_pact_with = FROM
				is_friend = FROM
			}
		}
		modifier = {
			factor = 0
			trait = honorable
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
		}
		modifier = {
			factor = 5
			OR = {
				liege = {
					current_heir = {
						same_society_as = ROOT
						NOT = { character = ROOT }
					}
				}
				same_society_as = FROM
			}
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = ROOT }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_claimant
						power = 0.5
					}
				}
			}
		}

		# Lover considerations
		modifier = {
			factor = 0
			NOT = { trait = ruthless }
			liege = { is_lover = ROOT }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 10
			NOT = { trait = just }
			liege = { current_heir = { is_lover = ROOT } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			liege = { war = yes }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			liege = { war = yes }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			liege = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			liege = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			liege = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			liege = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			liege = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			liege = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			trait = craven
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			liege = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}


		# Opinion of Current Ruler vs claimant
		modifier = { # Will not form faction if like liege (and is not just, ambitious)
			factor = 0
			liege = { reverse_opinion = { who = ROOT value = 40 } }
			NOT = { trait = just }
			NOT = { trait = ambitious }
			NOT = { trait = ruthless }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = { # Will not form faction if greatly prefer liege to claimant (and is not just, ambitious)
			factor = 0
			NOT = { trait = just }
			NOT = { trait = ambitious }
			NOT = { trait = ruthless }
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 50 as_if_liege = yes }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 160 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 130 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 100 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 80 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 4
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 60 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 2.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 40 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 2.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 20 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 1.5
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					opinion_diff = { first = ROOT second = PREV value = 10 as_if_liege = yes }
				}
			}
		}
		modifier = {
			factor = 0.66
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 10 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 20 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.44
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 40 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 60 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 80 as_if_liege = yes }
						}
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			liege = {
				current_heir = {
					NOT = { character = ROOT }
					ROOT = {
						liege = {
							opinion_diff = { first = ROOT second = PREVPREV value = 100 as_if_liege = yes }
						}
					}
				}
			}
		}

		# Opinion of the faction leader (if they are not also the claimant)
		modifier = {
			factor = 1.33
			liege = { current_heir = { NOT = { character = FROM } } }
			opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 1.33
			liege = { current_heir = { NOT = { character = FROM } } }
			opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 1.33
			liege = { current_heir = { NOT = { character = FROM } } }
			opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 1.33
			liege = { current_heir = { NOT = { character = FROM } } }
			opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 1.33
			liege = { current_heir = { NOT = { character = FROM } } }
			opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 0.66
			liege = { current_heir = { NOT = { character = FROM } } }
			NOT = { opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 0.66
			liege = { current_heir = { NOT = { character = FROM } } }
			NOT = { opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 0.66
			liege = { current_heir = { NOT = { character = FROM } } }
			NOT = { opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 0.66
			liege = { current_heir = { NOT = { character = FROM } } }
			NOT = { opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 0.66
			liege = { current_heir = { NOT = { character = FROM } } }
			NOT = { opinion = { who = FROM value = -99 } }
		}

		# Ambitious characters will want to back themselves
		modifier = {
			factor = 5
			liege = { current_heir = { character = ROOT } }
		}
		modifier = {
			factor = 5
			liege = { current_heir = { character = ROOT } }
			trait = ambitious
		}

		# Ambition-Specific Modifiers
		modifier = {
			factor = 10
			has_ambition = obj_bloodline_iron_throne
			liege = {
				has_landed_title = e_iron_throne
				current_heir = {
					OR = {
						character = ROOT
						is_married = ROOT
						dynasty = ROOT
						any_spouse = { dynasty = ROOT }
					}
				}
			}
		}
		modifier = {
			factor = 10
			OR = {
				has_ambition = obj_become_lord_paramount
				AND = {
					liege = { tier = EMPEROR }
					has_ambition = obj_become_king
				}
			}
			liege = { current_heir = { character = ROOT } }
		}
		# General Trait Modifiers
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 1.25
			trait = wroth
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 1.25
			trait = deceitful
		}
		modifier = {
			factor = 0.5
			trait = patient
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = humble
		}
		modifier = {
			factor = 0.05
			trait = content
		}

		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.25
				NOT = { dynasty = ROOT }
				current_heir = { NOT = { dynasty = ROOT } }
			}
		}

		modifier = {
			factor = 2.0
			liege = {
				dynasty_realm_power = 0.4
				NOT = { dynasty = ROOT }
				current_heir = { NOT = { dynasty = ROOT } }
			}
		}

		##Holy Modifiers
		modifier = {
			factor = 3
			religion = the_seven
			NOT = { trait = cynical }
			liege = {
				OR = {
					is_any_kinslayer_trigger = yes
					trait = excommunicated
					has_character_modifier = abomination_of_incest
				}
			}
		}
		modifier = {
			factor = 3
			religion = the_seven
			trait = zealous
			liege = {
				OR = {
					is_any_kinslayer_trigger = yes
					trait = excommunicated
					has_character_modifier = abomination_of_incest
				}
			}
		}
		modifier = {
			factor = 0.05
			has_landed_title = k_the_most_devout
			NOT = {
				crownlaw_title = {
					OR = {
						has_law = investiture_law_2
						has_law = investiture_law_3
					}
				}
			}
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}

		# Dothraki reasons to dislike Khal
		modifier = {
			factor = 5
			liege = { has_character_modifier = greatest_of_khans }
		}
		modifier = {
			factor = 10
			liege = { has_feud_with = ROOT }
		}
		modifier = {
			factor = 0.05
			liege = { has_blood_oath_with = ROOT }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { age = 50 }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { is_female = yes }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 16 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { NOT = { age = 10 } }
		}
		modifier = {
			factor = 5
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = {
				OR = {
					has_severe_disability_trigger = yes
					is_weak_trigger = yes
					is_lazy_trigger = yes
					is_imbecile_trigger = yes
					is_short_trigger = yes
					trait = clubfooted
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { prestige < 0 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 7 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 5 }
		}
		modifier = {
			factor = 2
			OR = {
				culture = jogos_nhai
				culture = dothraki
				is_nomadic = yes
			}
			liege = { martial < 3 }
		}
	}
	success = {
		always = no
	}

	abort = {
		always = no		# Factions will abort if the Potential or Allow triggers are no longer valid
	}

	abort_effect = {
		clr_character_flag = faction_depose_liege_ultimatum_taken
	}

	effect = {
		clr_character_flag = faction_depose_liege_ultimatum_taken
	}
}
# Loyalist Factions
# Loyal to their immediate liege; will always support their liege in civil wars
faction_liege_loyalist = {
	type = character
	exclusive = yes

	warning_level = 0 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	potential = {
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}
		NOT = { liege = { tier = EMPEROR } } # Direct vassals of Empires use faction_crown_loyalist instead

		NOT = { in_faction = faction_succ_primogeniture }
		NOT = { in_faction = faction_succ_seniority }
		#NOT = { in_faction = faction_succ_gavelkind }
		NOT = { in_faction = faction_succ_feudal_elective }
		NOT = { in_faction = faction_independence }
		NOT = { in_faction = faction_lower_crown_authority }
		NOT = { in_faction = faction_claimant }
		NOT = { in_faction = faction_depose_liege }
		NOT = { in_faction = faction_republic }
		NOT = { in_faction = faction_claimant }
		NOT = { in_faction = faction_increase_council_power }

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
	}

	allow = {
		prisoner = no
		NOT = {
			liege = {
				any_vassal = {
					NOT = { in_faction = faction_liege_loyalist }
					leads_faction = yes
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_joining_faction }
				}
			}
		}

		NOT = { has_character_modifier = reevaluate_loyalist_faction }
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			NOT = {
				liege = {
					any_vassal = {
						NOT = { in_faction = faction_liege_loyalist }
						leads_faction = yes
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_joining_faction }
					}
				}
			}
			#NOT = { in_faction = faction_crown_loyalist }

			NOT = { has_character_modifier = reevaluate_loyalist_faction }
		}
	}

	chance = {
		factor = 2

		#Belligerent faction more likely
		modifier = {
			factor = 0.8
		}
		# Must either:
		#	Be honorable
		#	Be just
		#	Be a friend of the liege (non_regent)
		#	Be a friend of the regent
		#	Be an ally of the liege
		#	Be a lover of the liege
		#	Desire ironborn conquest which liege can deliver
		#	Be a loyalist of liege's dynasty
		modifier = {
			factor = 0
			NOT = { trait = honorable }
			NOT = { trait = just }
			liege = {
				NOT = { is_friend = ROOT }
				NOT = { is_allied_with = ROOT }
				NOT = { has_non_aggression_pact_with = ROOT }
				OR = {
					has_regent = yes
					NOT = { reverse_opinion = { who = ROOT value = 30 } }
				}
				NAND = {
					has_regent = yes
					regent = { reverse_opinion = { who = ROOT value = 50 } }
				}
				NOT = { is_lover = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist } }
				NAND = {
					has_ironborn_invasion_religion_trigger = yes
					culture_group = iron_isles_culture
					ROOT = {
						has_ironborn_invasion_religion_trigger = yes
						culture_group = iron_isles_culture
						OR = {
							trait = ambitious
							trait = ruthless
							trait = greedy
							trait = zealous
						}
						NOT = { trait = content }
					}
					is_adult = yes
					prestige = 500
					OR = {
						trait = ambitious
						trait = ruthless
						trait = greedy
						trait = zealous
					}
					NOT = { trait = content }
					is_incapable = no
					independent = yes
					primary_title = { NOT = { check_variable = { which = "de_facto_empire" value = 1 } } }
				}
			}
		}

		modifier = { #Will not form if they dislike the King or regent, unless honorable and allied
			factor = 0
			NOT = { liege = { reverse_opinion = { who = ROOT value = 0 } } }
			NAND = {
				trait = honorable
				OR = {
					top_liege = { is_allied_with = ROOT }
					top_liege = { has_non_aggression_pact_with = ROOT }
				}
			}
		}

		modifier = { #Dothraki will not join an undesirable Khal
			factor = 0
			OR = {
				culture = dothraki
				culture = jogos_nhai
				is_nomadic = yes
			}
			liege = {
				culture = PREV
				OR = {
					NOT = { age = 16 }
					is_female = yes
					is_weak_khal_trigger = yes
				}
			}
		}

		modifier = {
	   		factor = 10
	   		is_nomadic = yes
	   		liege = {
	    		has_character_modifier = greatest_of_khans
	   		}
	  	}
		modifier = { #Desires ironborn conquest
			factor = 5
			has_ironborn_invasion_religion_trigger = yes
			culture_group = iron_isles_culture
			OR = {
				trait = ambitious
				trait = ruthless
				trait = greedy
				trait = zealous
			}
			NOT = { trait = content }
			liege = {
				has_ironborn_invasion_religion_trigger = yes
				culture_group = iron_isles_culture
				is_adult = yes
				prestige = 500
				OR = {
					trait = ambitious
					trait = ruthless
					trait = greedy
					trait = zealous
				}
				NOT = { trait = content }
				is_incapable = no
				independent = yes
				primary_title = { NOT = { check_variable = { which = "de_facto_empire" value = 1 } } }
				reverse_opinion = { who = ROOT value = -20 }
			}
		}
		modifier = { #Will not form if they dislike the regent, unless allied
			factor = 0
			liege = {
				has_regent = yes
				regent = {
					NOT = { character = ROOT }
					NOT = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			NOT = {
				liege = {
					OR = {
						is_friend = ROOT
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
					}
				}
			}
		}

		#Alliance
		modifier = {
			factor = 2
			liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
		}
		modifier = {
			factor = 10
			liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
			trait = honorable
		}

		#Dynastic Loyalty
		modifier = {
			factor = 5
			liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist }
			}
		}

		#More likely to wait for belligerent factions
		modifier = {
			factor = 0.1
			OR = {
				trait = ambitious
				trait = ruthless
				trait = just
				liege = { NOT = { reverse_opinion = { who = ROOT value = 40 } } }
			}
		}

		# Personality Effects
		modifier = {
			factor = 5
			trait = honorable
		}
		modifier = {
			factor = 0.2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 1.25
			trait = just
		}
		modifier = {
			factor = 0.8
			trait = arbitrary
		}
		modifier = {
			factor = 1.25
			trait = honest
		}
		modifier = {
			factor = 0.8
			trait = deceitful
		}

		# Culture and Religion Effects
		modifier = {
			factor = 1.5
			liege = { culture = ROOT }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { culture = ROOT } }
		}
		modifier = {
			factor = 2
			liege = { culture_group = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { liege = { culture_group = ROOT } }
		}
		modifier = {
			factor = 2
			NOT = { trait = cynical }
			liege = { religion = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { trait = cynical }
			NOT = { liege = { religion = ROOT } }
		}
		modifier = {
			factor = 5
			trait = zealous
			liege = { religion = ROOT }
		}
		modifier = {
			factor = 0
			trait = zealous
			liege = { NOT = { religion = ROOT } }
		}

		# Opinion Effects
		modifier = {
			factor = 2
			liege = { reverse_opinion = { who = ROOT value = 100 } }
		}
		modifier = {
			factor = 2
			liege = { reverse_opinion = { who = ROOT value = 90 } }
		}
		modifier = {
			factor = 1.5
			liege = { reverse_opinion = { who = ROOT value = 80 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 70 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 60 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 50 } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -9 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -19 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -29 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -39 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -49 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -59 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -69 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -79 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -89 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -99 } } }
		}

		# Liege legitimacy effects
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			NOT = { liege = { ROOT = { primary_title = { de_jure_liege_or_above = PREVPREV } } } }
		}
		modifier = {
			factor = 0.5
			trait = just
			NOT = { liege = { ROOT = { primary_title = { de_jure_liege_or_above = PREVPREV } } } }
		}
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = just
			liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}
	}

	membership = {
		factor = 2

		#Belligerent faction more likely
		modifier = {
			factor = 0.8
		}
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		# Must either:
		#	Be honorable
		#	Be just
		#	Be a friend of the liege
		#	Be a friend of the regent
		#	Be an ally of the liege
		#	Be a lover of the liege
		#	Have a strong positive opinion of the liege  (non_regent)
		#	Desire ironborn conquest which liege can deliver
		#	Be a loyalist of liege's dynasty
		#	Be coerced into joining this faction
		modifier = {
			factor = 0
			NOT = { trait = honorable }
			NOT = { trait = just }
			liege = {
				NOT = { is_friend = ROOT }
				NOT = { is_allied_with = ROOT }
				NOT = { has_non_aggression_pact_with = ROOT }
				OR = {
					has_regent = yes
					NOT = { reverse_opinion = { who = ROOT value = 30 } }
				}
				NAND = {
					has_regent = yes
					regent = { reverse_opinion = { who = ROOT value = 50 } }
				}
				NOT = { is_lover = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist } }
				NAND = {
					has_ironborn_invasion_religion_trigger = yes
					culture_group = iron_isles_culture
					ROOT = {
						has_ironborn_invasion_religion_trigger = yes
						culture_group = iron_isles_culture
						OR = {
							trait = ambitious
							trait = ruthless
							trait = greedy
							trait = zealous
						}
						NOT = { trait = content }
					}
					is_adult = yes
					prestige = 500
					OR = {
						trait = ambitious
						trait = ruthless
						trait = greedy
						trait = zealous
					}
					NOT = { trait = content }
					is_incapable = no
					independent = yes
					primary_title = { NOT = { check_variable = { which = "de_facto_empire" value = 1 } } }
				}
			}
			NOT = { FROM = { is_friend = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = { #Will not join if in other faction
			factor = 0
			OR = {
				in_faction = faction_succ_primogeniture
				in_faction = faction_succ_feudal_elective
				in_faction = faction_succ_seniority
				#in_faction = faction_succ_gavelkind
				in_faction = faction_independence
				in_faction = faction_lower_crown_authority
				in_faction = faction_claimant
				in_faction = faction_depose_liege
				in_faction = faction_republic
				in_faction = faction_increase_council_power
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = { #Will not join if they dislike the King, unless honorable and allied or coerced
			factor = 0
			NOT = { liege = { reverse_opinion = { who = ROOT value = 0 } } }
			NAND = {
				trait = honorable
				OR = {
					top_liege = { is_allied_with = ROOT }
					top_liege = { has_non_aggression_pact_with = ROOT }
				}
			}
			NOT = { FROM = { is_friend = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = { #Dothraki will not join an undesirable Khal
			factor = 0
			OR = {
				culture = dothraki
				culture = jogos_nhai
				is_nomadic = yes
			}
			liege = {
				culture = ROOT
				OR = {
					NOT = { age = 16 }
					is_female = yes
					is_weak_khal_trigger = yes
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = {
	   		factor = 10
	   		is_nomadic = yes
	   		liege = {
	    		has_character_modifier = greatest_of_khans
	   		}
	  	}
		modifier = { #Desires ironborn conquest
			factor = 5
			has_ironborn_invasion_religion_trigger = yes
			culture_group = iron_isles_culture
			OR = {
				trait = ambitious
				trait = ruthless
				trait = greedy
				trait = zealous
			}
			NOT = { trait = content }
			liege = {
				has_ironborn_invasion_religion_trigger = yes
				culture_group = iron_isles_culture
				is_adult = yes
				prestige = 500
				OR = {
					trait = ambitious
					trait = ruthless
					trait = greedy
					trait = zealous
				}
				NOT = { trait = content }
				is_incapable = no
				independent = yes
				primary_title = { NOT = { check_variable = { which = "de_facto_empire" value = 1 } } }
				reverse_opinion = { who = ROOT value = -20 }
			}
		}

		modifier = { #Will not join if they dislike the regent, unless allied
			factor = 0
			liege = {
				has_regent = yes
				regent = {
					NOT = { character = ROOT }
					NOT = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			NOT = {
				liege = {
					OR = {
						is_friend = ROOT
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Alliance
		modifier = {
			factor = 2
			liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
		}
		modifier = {
			factor = 10
			liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
			trait = honorable
		}

		#Dynastic Loyalty
		modifier = {
			factor = 5
			liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist }
			}
		}

		#More likely to wait for belligerent factions
		modifier = {
			factor = 0.1
			OR = {
				trait = ambitious
				trait = ruthless
				trait = just
				liege = { NOT = { reverse_opinion = { who = ROOT value = 40 } } }
			}
		}

		# Personality Effects
		modifier = {
			factor = 5
			trait = honorable
		}
		modifier = {
			factor = 0.2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 1.25
			trait = just
		}
		modifier = {
			factor = 0.8
			trait = arbitrary
		}
		modifier = {
			factor = 1.25
			trait = honest
		}
		modifier = {
			factor = 0.8
			trait = deceitful
		}

		# Culture and Religion Effects
		modifier = {
			factor = 2
			liege = { culture = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { liege = { culture = ROOT } }
		}
		modifier = {
			factor = 2
			liege = { culture_group = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { liege = { culture_group = ROOT } }
		}
		modifier = {
			factor = 2
			NOT = { trait = cynical }
			liege = { religion = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { trait = cynical }
			NOT = { liege = { religion = ROOT } }
		}
		modifier = {
			factor = 5
			trait = zealous
			liege = { religion = ROOT }
		}
		modifier = {
			factor = 0
			trait = zealous
			liege = { NOT = { religion = ROOT } }
			NOT = { FROM = { is_friend = ROOT } }
		}

		# Opinion Effects
		modifier = {
			factor = 2
			liege = { reverse_opinion = { who = ROOT value = 100 } }
		}
		modifier = {
			factor = 2
			liege = { reverse_opinion = { who = ROOT value = 90 } }
		}
		modifier = {
			factor = 1.5
			liege = { reverse_opinion = { who = ROOT value = 80 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 70 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 60 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 50 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 40 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 30 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 20 } }
		}
		modifier = {
			factor = 1.25
			liege = { reverse_opinion = { who = ROOT value = 10 } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -9 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -19 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -29 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { liege = { reverse_opinion = { who = ROOT value = -39 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -49 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -59 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -69 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -79 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -89 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { liege = { reverse_opinion = { who = ROOT value = -99 } } }
		}

		# Liege Personality Effects
		modifier = {
			factor = 2
			liege = { trait = authoritative }
		}
		modifier = {
			factor = 1.25
			liege = { trait = just }
		}
		modifier = {
			factor = 0.8
			liege = { trait = arbitrary }
		}
		modifier = {
			factor = 1.25
			liege = { trait = honorable }
		}
		modifier = {
			factor = 0.8
			liege = { trait = ruthless }
		}
		modifier = {
			factor = 1.25
			liege = { trait = kind }
		}
		modifier = {
			factor = 0.8
			liege = { trait = cruel }
		}
		modifier = {
			factor = 1.25
			liege = { trait = brave }
		}
		modifier = {
			factor = 0.8
			liege = { trait = craven }
		}
		modifier = {
			factor = 1.25
			liege = { trait = proud }
		}
		modifier = {
			factor = 0.8
			liege = { trait = humble }
		}
		modifier = {
			factor = 0.2
			liege = { trait = lunatic }
		}
		modifier = {
			factor = 0.2
			liege = { trait = possessed }
		}

		# Liege legitimacy effects
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			NOT = { liege = { ROOT = { primary_title = { de_jure_liege_or_above = PREVPREV } } } }
		}
		modifier = {
			factor = 0.5
			trait = just
			NOT = { liege = { ROOT = { primary_title = { de_jure_liege_or_above = PREVPREV } } } }
		}
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = just
			liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}
	}

	success = { always = no }
	abort = { always = no }
	abort_effect = { }
	effect = { }
}

# Loyal to the Empire
faction_crown_loyalist = {
	type = character
	exclusive = yes

	warning_level = 0 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	potential = {
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_incapable = no
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		liege = {
			OR = {
				tier = EMPEROR
				AND = {
					tier = KING
					liege = { tier = EMPEROR }
				}
			}
		}

		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				OR = {
					in_faction = faction_succ_primogeniture
					in_faction = faction_succ_seniority
					#in_faction = faction_succ_gavelkind
					in_faction = faction_succ_feudal_elective
					in_faction = faction_claimant
					in_faction = faction_depose_liege
					in_faction = faction_republic
					in_faction = faction_increase_council_power
				}
			}
		}
		NOT = { in_faction = faction_independence }
		NOT = { in_faction = faction_lower_crown_authority }
		NOT = { in_faction = faction_liege_loyalist }
		NOT = { has_character_flag = flag_crown_loyalist }

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
	}

	allow = {
		prisoner = no
		NOT = {
			liege = {
				NOT = { tier = EMPEROR }
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_leaving_faction }
			}
		}
		NOT = {
			liege = {
				any_vassal = {
					NOT = { in_faction = faction_crown_loyalist }
					leads_faction = yes
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_joining_faction }
				}
			}
		}

		NOT = { has_character_modifier = reevaluate_loyalist_faction }
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = {
				liege = {
					any_vassal = {
						NOT = { in_faction = faction_crown_loyalist }
						leads_faction = yes
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_coerced_into_joining_faction }
					}
				}
			}
			NOT = { has_character_modifier = reevaluate_loyalist_faction }
		}
	}

	chance = {
		factor = 2

		#Belligerent faction more likely
		modifier = {
			factor = 0.8
		}
		# Must either:
		#	Be honorable
		#	Be just
		#	Be a friend of the king (non-regent)
		#	Be an ally of the king
		#	Be a lover of the king
		#	Be a loyalist of liege's dynasty
		#	Desire ironborn conquest which liege can deliver
		modifier = {
			factor = 0
			NOT = { trait = honorable }
			NOT = { trait = just }
			top_liege = {
				NOT = { is_friend = ROOT }
				NOT = { is_allied_with = ROOT }
				NOT = { has_non_aggression_pact_with = ROOT }
				OR = {
					has_regent = yes
					NOT = { reverse_opinion = { who = ROOT value = 30 } }
				}
				NAND = {
					has_regent = yes
					regent = { reverse_opinion = { who = ROOT value = 50 } }
				}
				NOT = { is_lover = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist } }
				NAND = {
					has_ironborn_invasion_religion_trigger = yes
					culture_group = iron_isles_culture
					ROOT = {
						has_ironborn_invasion_religion_trigger = yes
						culture_group = iron_isles_culture
						OR = {
							trait = ambitious
							trait = ruthless
							trait = greedy
							trait = zealous
						}
						NOT = { trait = content }
					}
					is_adult = yes
					prestige = 500
					OR = {
						trait = ambitious
						trait = ruthless
						trait = greedy
						trait = zealous
					}
					NOT = { trait = content }
					is_incapable = no
				}
			}
		}

		modifier = { #Will not form if they dislike the King, unless honorable and allied
			factor = 0
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = 0 } } }
			NAND = {
				trait = honorable
				OR = {
					top_liege = { is_allied_with = ROOT }
					top_liege = { has_non_aggression_pact_with = ROOT }
				}
			}
		}

		modifier = { #Dothraki will not join an undesirable Khal
			factor = 0
			OR = {
				culture = dothraki
				culture = jogos_nhai
				is_nomadic = yes
			}
			top_liege = {
				culture = ROOT
				OR = {
					NOT = { age = 16 }
					is_female = yes
					is_weak_khal_trigger = yes
				}
			}
		}
		modifier = {
	   		factor = 10
	   		is_nomadic = yes
	   		top_liege = {
	    		has_character_modifier = greatest_of_khans
				NOT = { age = 50 }
				OR = {
					martial = 12
					trait = skilled_warrior
					trait = master_warrior
				}
	   		}
	  	}
		modifier = { #Desires ironborn conquest
	   		factor = 5
	   		has_ironborn_invasion_religion_trigger = yes
			culture_group = iron_isles_culture
			OR = {
				trait = ambitious
				trait = ruthless
				trait = greedy
				trait = zealous
			}
			NOT = { trait = content }
	   		top_liege = {
	    		has_ironborn_invasion_religion_trigger = yes
				culture_group = iron_isles_culture
				is_adult = yes
				prestige = 500
				OR = {
					trait = ambitious
					trait = ruthless
					trait = greedy
					trait = zealous
				}
				NOT = { trait = content }
				is_incapable = no
				reverse_opinion = { who = ROOT value = -20 }
	   		}
	  	}

		modifier = { #Will not form if they dislike the regent, unless allied
			factor = 0
			top_liege = {
				has_regent = yes
				regent = {
					NOT = { character = ROOT }
					NOT = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			NOT = {
				top_liege = {
					OR = {
						is_friend = ROOT
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
					}
				}
			}
		}

		#Alliance
		modifier = {
			factor = 2
			top_liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
		}
		modifier = {
			factor = 10
			top_liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
			trait = honorable
		}

		#Dynastic Loyalty
		modifier = {
			factor = 5
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist }
			}
		}

		#More likely to wait for belligerent factions
		modifier = {
			factor = 0.1
			top_liege = { is_liege_of = ROOT }
			OR = {
				trait = ambitious
				trait = ruthless
				trait = just
				top_liege = { NOT = { reverse_opinion = { who = ROOT value = 40 } } }
			}
		}

		# Personality Effects - Direct Vassals
		modifier = {
			factor = 2
			trait = honorable
			liege = { tier = EMPEROR }
		}
		modifier = {
			factor = 0.5
			trait = ruthless
			liege = { tier = EMPEROR }
		}
		modifier = {
			factor = 2
			trait = just
			liege = { tier = EMPEROR }
		}
		modifier = {
			factor = 0.5
			trait = arbitrary
			liege = { tier = EMPEROR }
		}

		# Personality Effects - Indirect Vassals
		modifier = {
			factor = 5
			trait = just
			NOT = { liege = { tier = EMPEROR } }
		}
		modifier = {
			factor = 0.2
			trait = arbitrary
			NOT = { liege = { tier = EMPEROR } }
		}
		modifier = {
			factor = 1.25
			trait = honorable
			NOT = { liege = { tier = EMPEROR } }
		}
		modifier = {
			factor = 0.8
			trait = ruthless
			NOT = { liege = { tier = EMPEROR } }
		}

		# General Personality Effects
		modifier = {
			factor = 2
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 1.25
			trait = honest
		}
		modifier = {
			factor = 0.8
			trait = deceitful
		}

		# Culture and Religion Effects
		modifier = {
			factor = 2
			top_liege = { culture = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { top_liege = { culture = ROOT } }
		}
		modifier = {
			factor = 2
			top_liege = { culture_group = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { top_liege = { culture_group = ROOT } }
		}
		modifier = {
			factor = 2
			NOT = { trait = cynical }
			top_liege = { religion = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { trait = cynical }
			NOT = { top_liege = { religion = ROOT } }
		}
		modifier = {
			factor = 5
			trait = zealous
			top_liege = { religion = ROOT }
		}
		modifier = {
			factor = 0
			trait = zealous
			top_liege = { NOT = { religion = ROOT } }
		}

		# Opinion Effects
		modifier = {
			factor = 2
			top_liege = { reverse_opinion = { who = ROOT value = 100 } }
		}
		modifier = {
			factor = 2
			top_liege = { reverse_opinion = { who = ROOT value = 90 } }
		}
		modifier = {
			factor = 1.5
			top_liege = { reverse_opinion = { who = ROOT value = 80 } }
		}
		modifier = {
			factor = 1.25
			top_liege = { reverse_opinion = { who = ROOT value = 70 } }
		}
		modifier = {
			factor = 1.25
			top_liege = { reverse_opinion = { who = ROOT value = 60 } }
		}
		modifier = {
			factor = 1.25
			top_liege = { reverse_opinion = { who = ROOT value = 50 } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -9 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -19 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -29 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -39 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -49 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -59 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -69 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -79 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -89 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -99 } } }
		}

		# Royal Personality Effects
		modifier = {
			factor = 2
			top_liege = { trait = authoritative }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = just }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = arbitrary }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = honorable }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = ruthless }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = kind }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = cruel }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = brave }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = craven }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = proud }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = humble }
		}
		modifier = {
			factor = 0.2
			top_liege = { trait = lunatic }
		}
		modifier = {
			factor = 0.2
			top_liege = { trait = possessed }
		}

		# Royal legitimacy effects
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			top_liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = just
			top_liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}

		# Royal Crown Authority Effects
		#	The higher the crown authority, the more loyal indirect vassals will be to the crown
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_1
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 2
			trait = just
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_1
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = { primary_title = { has_law = centralization_4 } }
		}
	}

	membership = {
		factor = 2

		#Belligerent faction more likely
		modifier = {
			factor = 0.8
		}
		modifier = {
			factor = 1000
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_coerced_into_joining_faction
			}
		}
		# Must either:
		#	Be honorable
		#	Be just
		#	Be a friend of the king
		#	Be an ally of the king
		#	Have a strong positive opinion of the king (non-regent)
		#	Desire ironborn conquest which liege can deliver
		#	Be a loyalist of liege's dynasty
		#	Be coerced into joining this faction
		modifier = {
			factor = 0
			NOT = { trait = honorable }
			NOT = { trait = just }
			top_liege = {
				NOT = { is_friend = ROOT }
				NOT = { is_allied_with = ROOT }
				NOT = { has_non_aggression_pact_with = ROOT }
				OR = {
					has_regent = yes
					NOT = { reverse_opinion = { who = ROOT value = 30 } }
				}
				NAND = {
					has_regent = yes
					regent = { reverse_opinion = { who = ROOT value = 50 } }
				}
				NOT = { is_lover = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist } }
				NAND = {
					has_ironborn_invasion_religion_trigger = yes
					culture_group = iron_isles_culture
					ROOT = {
						has_ironborn_invasion_religion_trigger = yes
						culture_group = iron_isles_culture
						OR = {
							trait = ambitious
							trait = ruthless
							trait = greedy
							trait = zealous
						}
						NOT = { trait = content }
					}
					is_adult = yes
					prestige = 500
					OR = {
						trait = ambitious
						trait = ruthless
						trait = greedy
						trait = zealous
					}
					NOT = { trait = content }
					is_incapable = no
				}
			}
			NOT = { FROM = { is_friend = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = { #Will not join if in other faction
			factor = 0
			OR = {
				AND = {
					liege = { tier = EMPEROR }
					OR = {
						in_faction = faction_succ_primogeniture
						in_faction = faction_succ_feudal_elective
						in_faction = faction_succ_seniority
						#in_faction = faction_succ_gavelkind
						in_faction = faction_independence
						in_faction = faction_lower_crown_authority
						in_faction = faction_claimant
						in_faction = faction_depose_liege
						in_faction = faction_republic
						in_faction = faction_increase_council_power
					}
				}
				in_faction = faction_liege_loyalist
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = { #Will not join if they dislike the King, unless honorable and allied or coerced
			factor = 0
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = 0 } } }
			NAND = {
				trait = honorable
				OR = {
					top_liege = { is_allied_with = ROOT }
					top_liege = { has_non_aggression_pact_with = ROOT }
				}
			}
			NOT = { FROM = { is_friend = ROOT } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		modifier = { #Dothraki will not join an undesirable Khal
			factor = 0
			OR = {
				culture = dothraki
				culture = jogos_nhai
				is_nomadic = yes
			}
			top_liege = {
				culture = ROOT
				OR = {
					NOT = { age = 16 }
					is_female = yes
					is_weak_khal_trigger = yes
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
	   		factor = 10
	   		is_nomadic = yes
	   		liege = {
	    		has_character_modifier = greatest_of_khans
	   		}
	  	}
		modifier = { #Desires ironborn conquest
			factor = 5
			has_ironborn_invasion_religion_trigger = yes
			culture_group = iron_isles_culture
			OR = {
				trait = ambitious
				trait = ruthless
				trait = greedy
				trait = zealous
			}
			NOT = { trait = content }
			top_liege = {
				has_ironborn_invasion_religion_trigger = yes
				culture_group = iron_isles_culture
				is_adult = yes
				prestige = 500
				OR = {
					trait = ambitious
					trait = ruthless
					trait = greedy
					trait = zealous
				}
				NOT = { trait = content }
				is_incapable = no
				reverse_opinion = { who = ROOT value = -20 }
			}
		}
		modifier = { #Will not join if they dislike the regent, unless allied
			factor = 0
			top_liege = {
				has_regent = yes
				regent = {
					NOT = { character = ROOT }
					NOT = { reverse_opinion = { who = ROOT value = 0 } }
				}
			}
			NOT = {
				top_liege = {
					OR = {
						is_friend = ROOT
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Alliance
		modifier = {
			factor = 2
			top_liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
		}
		modifier = {
			factor = 10
			top_liege = {
				OR = {
					is_friend = ROOT
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
				}
			}
			trait = honorable
		}

		#Dynastic Loyalty
		modifier = {
			factor = 5
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_dynasty_loyalist }
			}
		}

		#More likely to wait for belligerent factions
		modifier = {
			factor = 0.1
			top_liege = { is_liege_of = ROOT }
			OR = {
				trait = ambitious
				trait = ruthless
				trait = just
				top_liege = { NOT = { reverse_opinion = { who = ROOT value = 40 } } }
			}
		}

		# Personality Effects
		modifier = {
			factor = 5
			trait = honorable
		}
		modifier = {
			factor = 0.2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = ambitious
		}
		modifier = {
			factor = 1.25
			trait = just
		}
		modifier = {
			factor = 0.8
			trait = arbitrary
		}
		modifier = {
			factor = 1.25
			trait = honest
		}
		modifier = {
			factor = 0.8
			trait = deceitful
		}

		# Culture and Religion Effects
		modifier = {
			factor = 2
			top_liege = { culture = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { top_liege = { culture = ROOT } }
		}
		modifier = {
			factor = 2
			top_liege = { culture_group = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { top_liege = { culture_group = ROOT } }
		}
		modifier = {
			factor = 2
			NOT = { trait = cynical }
			top_liege = { religion = ROOT }
		}
		modifier = {
			factor = 0.5
			NOT = { trait = cynical }
			NOT = { top_liege = { religion = ROOT } }
		}
		modifier = {
			factor = 5
			trait = zealous
			top_liege = { religion = ROOT }
		}
		modifier = {
			factor = 0
			trait = zealous
			top_liege = { NOT = { religion = ROOT } }
			NOT = { FROM = { is_friend = ROOT } }
		}

		# Opinion Effects
		modifier = {
			factor = 2
			top_liege = { reverse_opinion = { who = ROOT value = 100 } }
		}
		modifier = {
			factor = 2
			top_liege = { reverse_opinion = { who = ROOT value = 90 } }
		}
		modifier = {
			factor = 1.5
			top_liege = { reverse_opinion = { who = ROOT value = 80 } }
		}
		modifier = {
			factor = 1.25
			top_liege = { reverse_opinion = { who = ROOT value = 70 } }
		}
		modifier = {
			factor = 1.25
			top_liege = { reverse_opinion = { who = ROOT value = 60 } }
		}
		modifier = {
			factor = 1.25
			top_liege = { reverse_opinion = { who = ROOT value = 50 } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -9 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -19 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -29 } } }
		}
		modifier = {
			factor = 0.8
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -39 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -49 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -59 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -69 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -79 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -89 } } }
		}
		modifier = {
			factor = 0.66
			NOT = { top_liege = { reverse_opinion = { who = ROOT value = -99 } } }
		}

		# Royal Personality Effects
		modifier = {
			factor = 2
			top_liege = { trait = authoritative }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = just }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = arbitrary }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = honorable }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = ruthless }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = kind }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = cruel }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = brave }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = craven }
		}
		modifier = {
			factor = 1.25
			top_liege = { trait = proud }
		}
		modifier = {
			factor = 0.8
			top_liege = { trait = humble }
		}
		modifier = {
			factor = 0.2
			top_liege = { trait = lunatic }
		}
		modifier = {
			factor = 0.2
			top_liege = { trait = possessed }
		}

		# Royal legitimacy effects
		modifier = {
			factor = 0.2
			NOT = { trait = arbitrary }
			top_liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}
		modifier = {
			factor = 0.5
			trait = just
			top_liege = {
				OR = {
					trait = bastard
					trait = legit_bastard
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_suspected_bastard }
					primary_title = { any_claimant = { has_opinion_modifier = { who = PREVPREV modifier = opinion_usurped_title } } }
				}
			}
		}

		# Royal Crown Authority Effects
		#	The higher the crown authority, the more loyal indirect vassals will be to the crown
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_1
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 2
			trait = just
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_1
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_2
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = {
				primary_title = {
					OR = {
						has_law = centralization_3
						has_law = centralization_4
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			NOT = { trait = arbitrary }
			NOT = { liege = { tier = EMPEROR } }
			top_liege = { primary_title = { has_law = centralization_4 } }
		}
	}

	success = { always = no }
	effect = {  }
	abort = { always = no }
	abort_effect = { }
}

# Lower Crown Authority
faction_republic = {
	type = liege_titles

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		is_theocracy = no
		is_incapable = no
		liege = {
			NOT = { government = valyrian_imperial_government }
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
			NOT = { trait = nightswatch }
			NOT = { trait = kingsguard }
			NOT = { government = alliance_government }
			NOT = { government = wildling_feudal_government }
			NOT = { government = noble_oligarchy }
			NOT = { government = colony_government }
			NOT = { government = magnar_feudal_government }
		}
		NAND = {
			OR = {
				ai = no
				liege = { ai = no }
			}
			NOT = { has_dlc = "The Republic" }
		}
		OR = {
			is_patrician = yes
			higher_tier_than = BARON
		}

		NOT = { in_faction = faction_liege_loyalist }
		NOT = {
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}

		NOT = { trait = kingsguard }
		NOT = { trait = archmaester }
		NOT = { liege = { trait = nightswatch } }
	}

	# Target scope
	allow = {
		higher_tier_than = COUNT
		holder_scope = {
			is_republic = no
			is_patrician = no
		}
		controls_religion = no
		# OR = { #Player must be able to form patrician republic
			# FROM = { ai = yes }
			# AND = {
				# OR = {
					# AND = { #liege is independent
						# holder_scope = { independent = yes }
						# OR = {
							# tier = EMPEROR
							# NOT = { check_variable = { which = "de_facto_empire" value = 1 } }
						# }
					# }
					# holder_scope = { #no merchant republic lieges
						# independent = no
						# NOT = { any_liege = { is_republic = yes } }
					# }
				# }
				# OR = { #Must have potential port capital
					# capital_scope = { port = yes }
					# FROM = { capital_scope = { port = yes } }
					# holder_scope = { capital_scope = { port = yes } }
				# }
			# }
		# }
		# OR = { #Merchant republic vassals cannot target primary title
			# is_primary_holder_title = no
			# FROM = { is_merchant_republic = no }
		# }
		FROM = {
			OR = { #I must have land in the title or it is my crownlaw title
				crownlaw_title = { title = ROOT }
				any_demesne_title = { ROOT = { de_jure_vassal_or_below = PREV } }
			}
			is_nomadic = no
		}

		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = faction_republic_war_cb
				}
			}
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no

			# NOT = { in_faction = faction_liege_loyalist }
			# NOT = {
				# AND = {
					# liege = { tier = EMPEROR }
					# in_faction = faction_crown_loyalist
				# }
			# }

			NOT = { trait = kingsguard }
			NOT = { trait = archmaester }
			NOT = { liege = { trait = nightswatch } }
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_coerced_into_leaving_faction } }

			# Merchant Republics can not join other republics
			OR = {
				is_merchant_republic = no
				liege = {
					NOT = {
						any_vassal = {
							is_merchant_republic = yes
							NOT = { character = ROOT }
							in_faction = faction_republic
						}
					}
				}
			}
			is_nomadic = no
			# NAND = {
				# ai = no
				# NOT = { has_dlc = "The Republic" }
			# }
		}
	}

	# AI creation weight
	chance = {
		factor = 2

		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}

		# Reasons to create this faction
			# Republics are traditional in my culture
			# Republics are traditional in the target title
		modifier = {
			factor = 0
			FROM = {
				NOT = { culture_group = free_cities }
				NOT = { culture = eastern_valyrian }
				NOT = { culture = qartheen }
				NOT = { culture = asshai }
				NAND = {
					culture = high_valyrian
					NOT = { start_date = 7886.1.1 }
				}
			}
			NOT = { culture_group = free_cities }
			NOT = { culture = yunkaii }
			NOT = { culture = astapori }
			NOT = { culture = meereenese }
			NOT = { culture = qartheen }
			NOT = { culture = asshai }
			OR = {
				NOT = { title = e_new_valyria }
				NOT = { has_global_flag = revived_valyrian_freehold }
			}
		}

		# These cultures will never form it
		modifier = {
			factor = 0
			FROM = {
				OR = {
					culture_group = iron_isles_culture
					is_theocracy = yes
					is_nomadic = yes
					government = pirate_government
					is_military_command_trigger = yes
				}
			}
		}
		# These cultures are not overly fussed
		modifier = {
			factor = 0.2
			FROM = {
				OR = {
					culture = qartheen
					culture_group = ghiscari_group
				}
			}
		}

		# Theocratic ruler of Norvos is acceptable
		modifier = {
			factor = 0
			OR = {
				AND = {
					title = k_norvos
					holder_scope = { has_landed_title = d_bearded_priests }
				}
				FROM = { government = theocratic_feudal_government }
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		# Will not form faction if like liege or regent or is closely related to liege (unless just)
		modifier = {
			factor = 0
			FROM = { NOT = { trait = just } }
			OR = {
				holder_scope = {
					OR = {
						is_married = FROM
						is_close_relative = FROM
						reverse_opinion = { who = FROM value = 15 }
						regent = { reverse_opinion = { who = FROM value = 15 } }
					}
				}
				current_heir = { character = FROM }
			}
		}

		# Just characters will attempt to preserve the status quo
		modifier = {
			factor = 10
			FROM = {
				trait = just
				liege = { reverse_has_opinion_modifier = { who = PREV modifier = opinion_siezed_republic } }
			}
		}
		modifier = {
			factor = 0
			FROM = {
				trait = just
				NOT = { liege = { reverse_has_opinion_modifier = { who = PREV modifier = opinion_siezed_republic } } }
			}
		}

		modifier = {
			factor = 0
			FROM = { trait = content }
		}

		# Alliance Effects
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					FROM = { trait = honorable }
					reverse_opinion = { who = FROM value = -15 }
				}
				OR = {
					dynasty = FROM
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.1
			holder_scope = {
				OR = {
					dynasty = FROM
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.2
			holder_scope = { same_society_as = FROM }
		}

		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		# Opinion of ruler effects
		modifier = {
			factor = 0.8
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.8
			holder_scope = { reverse_opinion = { who = FROM value = 10 } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -9 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -29 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -69 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -89 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Trait effects
		modifier = {
			factor = 4
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = ruthless }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = wroth }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = selfish }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.8
			FROM = { trait = patient }
		}

		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 0
			OR = {
				in_faction = faction_liege_loyalist
				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}

		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		# Reasons to join this faction
			# Republics are traditional in my culture
			# Republics are traditional in the target title
			# I am a friend or ally of the faction leader
			# I have been coerced into joining
		modifier = {
			factor = 0
			NOT = { culture_group = free_cities }
			NOT = { culture = eastern_valyrian }
			NOT = { culture = qartheen }
			NOT = { culture = asshai }
			NAND = {
				culture = high_valyrian
				NOT = { start_date = 7886.1.1 }
			}
			FROMFROM = {
				NOT = { culture_group = free_cities }
				NOT = { culture = yunkaii }
				NOT = { culture = astapori }
				NOT = { culture = meereenese }
				NOT = { culture = qartheen }
				NOT = { culture = asshai }
				OR = {
					NOT = { title = e_new_valyria }
					NOT = { has_global_flag = revived_valyrian_freehold }
				}
			}
			NOT = { is_allied_with = FROM }
			NOT = { has_non_aggression_pact_with = FROM }
			NOT = { is_friend = FROM }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# These cultures will never join
		modifier = {
			factor = 0
			OR = {
				culture_group = iron_isles_culture
				is_theocracy = yes
				is_nomadic = yes
				government = pirate_government
				is_military_command_trigger = yes
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		# These cultures are not overly fussed
		modifier = {
			factor = 0.2
			OR = {
				culture = qartheen
				culture_group = ghiscari_group
			}
		}

		# Theocratic ruler of Norvos is acceptable
		modifier = {
			factor = 0
			OR = {
				FROMFROM = {
					title = k_norvos
					holder_scope = { has_landed_title = d_bearded_priests }
				}
				government = theocratic_feudal_government
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		#If not my crown law or territory, and not just, then doesn't effect me
		modifier = {
			factor = 0
			NOT = { crownlaw_title = { title = FROMFROM } }
			NOT = { any_demesne_title = { ROOT_FROMFROM = { de_jure_vassal_or_below = PREV } } }
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Will not join faction if like liege or regent or is closely related to liege (and is not just)
		modifier = {
			factor = 0
			NOT = { trait = just }
			liege = {
				OR = {
					is_married = ROOT
					is_close_relative = ROOT
					reverse_opinion = { who = ROOT value = 15 }
					regent = { reverse_opinion = { who = ROOT value = 15 } }
					current_heir = { character = ROOT }
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Just characters will attempt to preserve the status quo unless forced
		modifier = {
			factor = 10
			trait = just
			has_opinion_modifier = { who = LIEGE modifier = opinion_siezed_republic }
		}
		modifier = {
			factor = 0
			trait = just
			NOT = { has_opinion_modifier = { who = LIEGE modifier = opinion_siezed_republic } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Content characters won't join this faction unless forced
		modifier = {
			factor = 0
			trait = content
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			OR = {
				is_allied_with = FROM
				is_friend = FROM
			}
		}
		modifier = {
			factor = 5
			OR = {
				is_allied_with = FROM
				is_friend = FROM
			}
		}
		modifier = {
			factor = 0
			OR = {
				trait = honorable
				liege = { reverse_opinion = { who = ROOT value = -15 } }
			}
			liege = {
				OR = {
					has_non_aggression_pact_with = ROOT
					is_allied_with = ROOT
					is_friend = ROOT
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.2
			liege = {
				OR = {
					has_non_aggression_pact_with = ROOT
					is_allied_with = ROOT
					is_friend = ROOT
				}
			}
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = ROOT }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_republic
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			FROMFROM = { holder_scope = { war = yes } }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			FROMFROM = { holder_scope = { war = yes } }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			FROMFROM = { holder_scope = { war = yes } }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			FROMFROM = { holder_scope = { has_character_modifier = feared_1 } }
		}
		modifier = {
			factor = 0.5
			FROMFROM = { holder_scope = { has_character_modifier = feared_2 } }
		}
		modifier = {
			factor = 0.3
			FROMFROM = { holder_scope = { has_character_modifier = feared_3 } }
		}
		modifier = {
			factor = 0.2
			FROMFROM = { holder_scope = { has_character_modifier = feared_4 } }
		}
		modifier = {
			factor = 0.1
			FROMFROM = { holder_scope = { has_character_modifier = feared_5 } }
		}
		modifier = {
			factor = 0.1
			trait = craven
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			FROMFROM = {
				holder_scope = {
					OR = {
						has_character_modifier = feared_1
						has_character_modifier = feared_2
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROMFROM = {
				holder_scope = {
					has_character_modifier = defeated_major_revolt
					OR = {
						has_character_modifier = feared_3
						has_character_modifier = feared_4
						has_character_modifier = feared_5
					}
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		# Opinion of liege effects
		modifier = {
			factor = 0.8
			opinion = { who = LIEGE value = 20 }
		}
		modifier = {
			factor = 0.8
			opinion = { who = LIEGE value = 10 }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -9 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -19 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -29 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -39 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -49 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -59 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -69 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -79 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -89 } }
		}
		modifier = {
			factor = 1.25
			NOT = { opinion = { who = LIEGE value = -99 } }
		}

		# Opinion of faction leader effects
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 100 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 80 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 60 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 40 }
		}
		modifier = {
			factor = 1.6
			opinion = { who = FROM value = 20 }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -19 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -39 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -59 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -79 } }
		}
		modifier = {
			factor = 0.625
			NOT = { opinion = { who = FROM value = -99 } }
		}

		# Trait effects
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 1.25
			trait = wroth
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.8
			trait = patient
		}

		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	success = {
		holder_scope = {
			OR = {
				is_republic = yes
				government = noble_oligarchy
			}
		}
	}

	abort = {
		always = no
	}

	abort_effect = {
		FROM = { clr_character_flag = faction_republic_ultimatum_taken }
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_republic
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
			clr_character_flag = faction_republic_ultimatum_taken
		}
	}
}
# Increase Council Power
faction_increase_council_power = {
	type = liege_titles

	warning_level = 0.7 # At this level of faction power we give player an alert. Set to 0 for no alerts.

	# Plotter scope
	potential = {
		has_dlc = "Zeus"
		prisoner = no
		is_ruler = yes
		independent = no
		is_landed = yes
		is_adult = yes
		OR = {
			is_voter = no
			is_nomadic = yes
			is_tribal = yes
			liege = {
				OR = {
					is_council_content = no
					NOT = { primary_title = { has_law = law_voting_power_1 } }
					#has_council = no
				}
			}
		}
		NOR = {
			in_faction = faction_liege_loyalist
			AND = {
				liege = { tier = EMPEROR }
				in_faction = faction_crown_loyalist
			}
		}
		is_incapable = no
		liege = {
			NOT = { is_nomadic = yes }
			NOT = {
				any_demesne_title = {
					temporary = yes
				}
			}
		}
		NOT = { has_character_modifier = faction_council_power_ultimatum_timer }
	}

	# Target scope
	allow = {
		higher_tier_than = COUNT
		is_primary_holder_title = yes
		#holder_scope = {
			# primary_title = {
				# ROOT = {
					# tier = PREV
				# }
			# }

			# NOT = {
				# any_vassal = {
					# higher_tier_than = BARON
					# NOT = {	character = FROM }
					# num_of_faction_backers = {
						# faction = faction_increase_council_power
						# value = 0
					# }
				# }
			# }
		#}
		OR = {
			has_law = law_voting_power_0
			has_law = diplomacy_voting_power_0
			has_law = titles_voting_power_0
			has_law = justice_voting_power_0
		}
		holder_scope = {
			NOT = {
				any_war = {
					war_title = ROOT
					using_cb = increase_council_power_war
				}
			}
			NOT = {
				reverse_has_opinion_modifier = {
					who = FROM
					modifier = opinion_coerced_into_leaving_faction
				}
			}
		}
	}

	# Faction member scope (ROOT = joiner, FROM = target)
	allow_join = {
		ROOT = {
			is_ruler = yes
			independent = no
			is_landed = yes
			is_adult = yes
			is_incapable = no
			prisoner = no
			OR = {
				is_voter = no
				is_nomadic = yes
				is_tribal = yes
				liege = {
					OR = {
						is_council_content = no
						NOT = { primary_title = { has_law = law_voting_power_1 } }
						#has_council = no
					}
				}
			}
			NOR = {
				in_faction = faction_liege_loyalist
				AND = {
					liege = { tier = EMPEROR }
					in_faction = faction_crown_loyalist
				}
			}
		}
	}

	# AI creation weight
	chance = {
		factor = 2

		modifier = {
			factor = 0.2
			FROM = { pacifist = yes }
		}
		modifier = {
			factor = 0
			FROM = {
				OR = {
					prisoner = yes
					has_character_modifier = in_seclusion
				}
			}
		}

		# Faction Motives
			# The realm is a republic
			# The council is not currently empowered
			# I am on the council and are ambitious, and not just
		modifier = {
			factor = 0
			holder_scope = {
				is_republic = no
				NOT = { government = alliance_government }
				NOT = { government = theocratic_feudal_government }
			}
			has_law = law_voting_power_1
			FROM = {
				OR = {
					is_voter = no
					NOT = { trait = ambitious }
					trait = just
				}
			}
		}

		# Will not form faction if like liege, like regent or is closely related to liege (and is not just)
		modifier = {
			factor = 0
			OR = {
				holder_scope = {
					OR = {
						is_married = FROM
						is_close_relative = FROM
						reverse_opinion = { who = FROM value = 15 }
						regent = { reverse_opinion = { who = FROM value = 15 } }
					}
				}
				current_heir = { character = FROM }
			}
			FROM = { NOT = { trait = just } }
		}

		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			FROM = { in_faction = faction_claimant }
		}

		#I am on the council
		modifier = {
			factor = 5
			FROM = { is_voter = yes }
		}
		modifier = {
			factor = 5
			FROM = {
				is_voter = yes
				has_position = malcontent
			}
		}
		modifier = {
			factor = 0.5
			FROM = {
				is_voter = yes
				has_position = loyalist
			}
		}

		#High Septon needs power
		modifier = {
			factor = 0
			FROM = {
				has_landed_title = k_the_most_devout
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = investiture_law_2
							has_law = investiture_law_3
						}
					}
				}
			}
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			FROM = {
				pacifist = yes
				NOT = { trait = cynical }
			}
		}

		modifier = {
			factor = 2
			FROM = {
				has_cutthroat_religion_trigger = yes
			}
		}

		modifier = {
			factor = 0.5
			FROM = {
				liege = {
					any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
				}
			}
		}

		# Alliance Effects
		modifier = {
			factor = 0
			holder_scope = {
				OR = {
					FROM = { trait = honorable }
					reverse_opinion = { who = FROM value = -15 }
				}
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.1
			holder_scope = {
				OR = {
					is_allied_with = FROM
					has_non_aggression_pact_with = FROM
					is_friend = FROM
				}
			}
		}
		modifier = {
			factor = 0.2
			holder_scope = { same_society_as = FROM }
		}

		# War Modifiers
		modifier = {
			factor = 0
			FROM = {
				OR = {
					trait = just
					trait = honorable
				}
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 0.1
			FROM = {
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			holder_scope = { war = yes }
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = ruthless
					trait = arbitrary
				}
			}
			holder_scope = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			FROM = {
				has_character_flag = given_personal_loan
				persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
			}
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			holder_scope = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			holder_scope = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			holder_scope = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			holder_scope = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			holder_scope = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			FROM = { trait = craven }
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			FROM = {
				OR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			FROM = {
				NOR = {
					trait = brave
					trait = dragon_rider
				}
			}
			holder_scope = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			FROM = {
				NOT = { trait = ruthless }
				liege = {
					any_courtier = {
						dynasty = ROOT_FROM
						is_close_relative = ROOT_FROM
						NOT = { character = ROOT_FROM }
						host = { is_liege_of = ROOT_FROM }
						NOT = { is_married = PREV }
						OR = { #Can target close relatives only if enemy is even closer relative
							NOT = { is_close_relative = PREV }
							AND = {
								OR = {
									is_child_of = ROOT_FROM
									any_child = { character = ROOT_FROM }
									sibling = ROOT_FROM
								}
								NOR = {
									is_child_of = PREV
									any_child = { character = PREVPREV }
									sibling = PREV
								}
							}
						}
					}
				}
			}
		}

		modifier = {
			factor = 0.1
			NOT = {
				calc_true_if = {
					amount = 2
					has_law = law_voting_power_0
					has_law = diplomacy_voting_power_0
					has_law = titles_voting_power_0
					has_law = justice_voting_power_0
				}
			}
		}
		modifier = {
			factor = 1.5
			calc_true_if = {
				amount = 3
				has_law = law_voting_power_0
				has_law = diplomacy_voting_power_0
				has_law = titles_voting_power_0
				has_law = justice_voting_power_0
			}
		}
		modifier = {
			factor = 2.25
			calc_true_if = {
				amount = 4
				has_law = law_voting_power_0
				has_law = diplomacy_voting_power_0
				has_law = titles_voting_power_0
				has_law = justice_voting_power_0
			}
		}

		# Opinion of ruler effects
		modifier = {
			factor = 0.8
			holder_scope = { reverse_opinion = { who = FROM value = 20 } }
		}
		modifier = {
			factor = 0.8
			holder_scope = { reverse_opinion = { who = FROM value = 10 } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -9 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -19 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -29 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -39 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -49 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -59 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -69 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -79 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -89 } } }
		}
		modifier = {
			factor = 2
			NOT = { holder_scope = { reverse_opinion = { who = FROM value = -99 } } }
		}

		# Trait effects
		modifier = {
			factor = 10
			FROM = { trait = just }
		}
		modifier = {
			factor = 0
			FROM = { trait = content }
		}
		modifier = {
			factor = 4
			FROM = { trait = ambitious }
		}
		modifier = {
			factor = 2
			FROM = { trait = proud }
		}
		modifier = {
			factor = 2
			FROM = { trait = greedy }
		}
		modifier = {
			factor = 2
			FROM = { trait = ruthless }
		}
		modifier = {
			factor = 2
			FROM = { trait = envious }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = wroth }
		}
		modifier = {
			factor = 1.25
			FROM = { trait = selfish }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honorable }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}
		modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
		modifier = {
			factor = 0.8
			FROM = { trait = patient }
		}

		#small lords less likely to take the lead
		modifier = {
			factor = 0.05
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = COUNT
				NOT = { relative_power_to_liege = 0.2 }
			}
		}
		#Powerful lords more likely to take the lead
		modifier = {
			factor = 5
			holder_scope = { higher_tier_than = DUKE }
			FROM = {
				tier = KING
				relative_power_to_liege = 0.2
			}
		}
		modifier = {
			factor = 3
			FROM = { among_most_powerful_vassals = 3 }
		}
		modifier = {
			factor = 5
			holder_scope = { is_council_content = no }
			FROM = { is_voter = yes }
		}
	}

	# AI membership weight: ROOT is the prospective member. FROM is the faction leader. FROMFROM is the target title or character.
	membership = {
		factor = 2

		modifier = {
			factor = 1000
			has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction }
		}

		# Faction Motives
			# The realm is a republic
			# The council is not currently empowered
			# I am on the council and am ambitious, and not just
			# I am a friend or ally of the faction leader
			# I have been coerced into joining
		modifier = {
			factor = 0
			liege = {
				is_republic = no
				NOT = { government = alliance_government }
				NOT = { government = theocratic_feudal_government }
				primary_title = { has_law = law_voting_power_1 }
			}
			OR = {
				is_voter = no
				NOT = { trait = ambitious }
				trait = just
			}
			NOT = { is_allied_with = FROM }
			NOT = { has_non_aggression_pact_with = FROM	}
			NOT = { is_friend = FROM }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Will not join faction if like liege, like regent or is closely related to liege (and is not just)
		modifier = {
			factor = 0
			OR = {
				liege = {
					OR = {
						is_married = ROOT
						is_close_relative = ROOT
						reverse_opinion = { who = ROOT value = 15 }
						regent = { reverse_opinion = { who = ROOT value = 15 } }
					}
				}
				FROMFROM = { current_heir = { character = FROM } }
			}
			NOT = { trait = just }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Try to exclude people who should rather support a claimant
		modifier = {
			factor = 0
			in_faction = faction_claimant
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#I am on the council
		modifier = {
			factor = 5
			is_voter = yes
		}
		modifier = {
			factor = 5
			is_voter = yes
			has_position = malcontent
		}
		modifier = {
			factor = 0.5
			is_voter = yes
			has_position = loyalist
		}

		#High Septon needs power
		modifier = {
			factor = 0
			has_landed_title = k_the_most_devout
			NOT = {
				crownlaw_title = {
					OR = {
						has_law = investiture_law_2
						has_law = investiture_law_3
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		#Naathi Pacifism
		modifier = {
			factor = 0.1
			pacifist = yes
			NOT = { trait = cynical }
		}

		modifier = {
			factor = 2
			has_cutthroat_religion_trigger = yes
		}

		modifier = {
			factor = 0.5
			liege = {
				any_owned_bloodline = { has_bloodline_flag = bloodline_less_factions }
			}
		}

		# Alliance Effects
		modifier = {
			factor = 1000
			trait = honorable
			is_allied_with = FROM
		}
		modifier = {
			factor = 5
			is_allied_with = FROM
		}
		modifier = {
			factor = 0
			liege = {
				OR = {
					ROOT = { trait = honorable }
					reverse_opinion = { who = ROOT value = -15 }
				}
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			liege = {
				OR = {
					is_allied_with = ROOT
					has_non_aggression_pact_with = ROOT
					is_friend = ROOT
				}
			}
		}
		modifier = {
			factor = 5
			same_society_as = FROM
		}
		modifier = {
			factor = 0.2
			liege = { same_society_as = ROOT }
		}

		# Craven characters hedge their bets
		modifier = {
			factor = 0.1
			trait = craven
			FROM = {
				NOT = {
					faction_power = {
						faction = faction_increase_council_power
						power = 0.5
					}
				}
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# War Modifiers
		modifier = {
			factor = 0
			OR = {
				trait = just
				trait = honorable
			}
			liege = { war = yes }
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 0.1
			NOT = { trait = ruthless }
			NOT = { trait = arbitrary }
			NOT = { trait = lunatic }
			NOT = { trait = possessed }
			liege = { war = yes }
		}
		modifier = {
			factor = 2
			OR = {
				trait = ruthless
				trait = arbitrary
			}
			liege = { war = yes }
		}

		# Liege owes money, reluctant to cause trouble
		modifier = {
			factor = 0.2
			has_character_flag = given_personal_loan
			persistent_event_target:loan_title = { holder_scope = { is_liege_of = PREVPREV } }
		}

		# Fear Intimidation Factor
		modifier = {
			factor = 0.7
			liege = { has_character_modifier = feared_1 }
		}
		modifier = {
			factor = 0.5
			liege = { has_character_modifier = feared_2 }
		}
		modifier = {
			factor = 0.3
			liege = { has_character_modifier = feared_3 }
		}
		modifier = {
			factor = 0.2
			liege = { has_character_modifier = feared_4 }
		}
		modifier = {
			factor = 0.1
			liege = { has_character_modifier = feared_5 }
		}
		modifier = {
			factor = 0.1
			trait = craven
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = brave
				trait = dragon_rider
			}
			liege = {
				OR = {
					has_character_modifier = feared_1
					has_character_modifier = feared_2
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
		}
		modifier = { #Never join if liege has defeated major revolt and has high fear
			factor = 0
			liege = {
				has_character_modifier = defeated_major_revolt
				OR = {
					has_character_modifier = feared_3
					has_character_modifier = feared_4
					has_character_modifier = feared_5
				}
			}
			NOR = {
				trait = brave
				trait = dragon_rider
			}
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}

		# Liege has my family hostage
		modifier = {
			factor = 0.05
			NOT = { trait = ruthless }
			liege = {
				any_courtier = {
					dynasty = ROOT
					is_close_relative = ROOT
					NOT = { character = ROOT }
					host = { is_liege_of = ROOT }
					NOT = { is_married = PREV }
					OR = { #Can target close relatives only if enemy is even closer relative
						NOT = { is_close_relative = PREV }
						AND = {
							OR = {
								is_child_of = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}
							NOR = {
								is_child_of = PREV
								any_child = { character = PREVPREV }
								sibling = PREV
							}
						}
					}
				}
			}
		}

		modifier = {
			factor = 0.1
			FROMFROM = {
				NOT = {
					calc_true_if = {
						amount = 2
						has_law = law_voting_power_0
						has_law = diplomacy_voting_power_0
						has_law = titles_voting_power_0
						has_law = justice_voting_power_0
					}
				}
			}
		}
		modifier = {
			factor = 1.5
			FROMFROM = {
				calc_true_if = {
					amount = 3
					has_law = law_voting_power_0
					has_law = diplomacy_voting_power_0
					has_law = titles_voting_power_0
					has_law = justice_voting_power_0
				}
			}
		}
		modifier = {
			factor = 2.25
			FROMFROM = {
				calc_true_if = {
					amount = 4
					has_law = law_voting_power_0
					has_law = diplomacy_voting_power_0
					has_law = titles_voting_power_0
					has_law = justice_voting_power_0
				}
			}
		}

		# Opinion of ruler effects
		modifier = {
			factor = 0.8
			liege = { reverse_opinion = { who = ROOT value = 20 } }
		}
		modifier = {
			factor = 0.8
			liege = { reverse_opinion = { who = ROOT value = 10 } }
		}
		modifier = {
			factor = 1.5
			NOT = { liege = { reverse_opinion = { who = ROOT value = -9 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { liege = { reverse_opinion = { who = ROOT value = -19 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { liege = { reverse_opinion = { who = ROOT value = -29 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { liege = { reverse_opinion = { who = ROOT value = -39 } } }
		}
		modifier = {
			factor = 1.5
			NOT = { liege = { reverse_opinion = { who = ROOT value = -49 } } }
		}
		modifier = {
			factor = 2
			NOT = { liege = { reverse_opinion = { who = ROOT value = -59 } } }
		}
		modifier = {
			factor = 2
			NOT = { liege = { reverse_opinion = { who = ROOT value = -69 } } }
		}
		modifier = {
			factor = 2
			NOT = { liege = { reverse_opinion = { who = ROOT value = -79 } } }
		}
		modifier = {
			factor = 2
			NOT = { liege = { reverse_opinion = { who = ROOT value = -89 } } }
		}
		modifier = {
			factor = 2
			NOT = { liege = { reverse_opinion = { who = ROOT value = -99 } } }
		}

		# Trait effects
		modifier = {
			factor = 10
			trait = just
		}
		modifier = {
			factor = 0
			trait = content
			NOT = { has_opinion_modifier = { who = FROM modifier = opinion_coerced_into_joining_faction } }
		}
		modifier = {
			factor = 4
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = greedy
		}
		modifier = {
			factor = 2
			trait = ruthless
		}
		modifier = {
			factor = 2
			trait = envious
		}
		modifier = {
			factor = 1.25
			trait = wroth
		}
		modifier = {
			factor = 1.25
			trait = selfish
		}
		modifier = {
			factor = 0.5
			trait = honorable
		}
		modifier = {
			factor = 0.5
			trait = honest
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.8
			trait = patient
		}
		modifier = {
			factor = 3
			among_most_powerful_vassals = 3
		}
		modifier = {
			factor = 5
			liege = { is_council_content = no }
			is_voter = yes
		}
	}

	success = {
		holder_scope = {
			FROM = {
				has_opinion_modifier = { who = PREV modifier = opinion_increased_council_power }
			}
		}
	}

	abort = {
	}

	abort_effect = {
	}

	effect = {
		FROM = {
			any_faction_backer = {
				faction = faction_increase_council_power
				reverse_opinion = {
					modifier = opinion_grateful
					who = FROM
					years = 5
				}
			}
		}
	}
}
